(()=>{var e={1874:e=>{e.exports='<html> <head> <style>body,html{background:#f1f3f5}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,Oxygen-Sans,Ubuntu,Cantarell,\'Helvetica Neue\',sans-serif}#eKIDzSscbEO1{overflow:visible;width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div class="content"> <div class="container"> {svg_image} <p class="message">{message}</p> </div> </div> </body> </html> '},9457:e=>{e.exports='<html> <head> <style>.kubio-loading-logo{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:0}.kubio-loading-logo svg{width:120px!important;height:120px!important;max-width:120px!important;fill:#a4afb7!important}#eKIDzSscbEO1{overflow:visible;max-width:90px}#eKIDzSscbEO3_tr{animation:eKIDzSscbEO3_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO3_tr__tr{0%{transform:translate(193.209984px,190.850067px) rotate(0)}12%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}20%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(193.209984px,190.850067px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}60%{transform:translate(193.209984px,190.850067px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(193.209984px,190.850067px) rotate(0)}100%{transform:translate(193.209984px,190.850067px) rotate(0)}}#eKIDzSscbEO5_tr{animation:eKIDzSscbEO5_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO5_tr__tr{0%{transform:translate(193.219933px,61.519987px) rotate(360deg)}20%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}28%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(193.219933px,61.519987px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}92%{transform:translate(193.219933px,61.519987px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}100%{transform:translate(193.219933px,61.519987px) rotate(360deg)}}#eKIDzSscbEO7_tr{animation:eKIDzSscbEO7_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO7_tr__tr{0%{transform:translate(59.18501px,193.18499px) rotate(0)}28%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}68%{transform:translate(59.18501px,193.18499px) rotate(90deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}76%{transform:translate(59.18501px,193.18499px) rotate(0);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}84%{transform:translate(59.18501px,193.18499px) rotate(0)}100%{transform:translate(59.18501px,193.18499px) rotate(0)}}#eKIDzSscbEO9_tr{animation:eKIDzSscbEO9_tr__tr 2s linear infinite normal forwards}@keyframes eKIDzSscbEO9_tr__tr{0%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}8%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}36%{transform:translate(59.149774px,59.150009px) rotate(270deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}44%{transform:translate(59.149774px,59.150009px) rotate(360deg);animation-timing-function:cubic-bezier(\n\t\t\t\t\t\t.39,\n\t\t\t\t\t\t.575,\n\t\t\t\t\t\t.565,\n\t\t\t\t\t\t1\n\t\t\t\t)}52%{transform:translate(59.149774px,59.150009px) rotate(360deg)}100%{transform:translate(59.149774px,59.150009px) rotate(360deg)}}</style> </head> <body> <div id="content"> </div> </body> </html> '},1143:e=>{"use strict";e.exports=function(e,t,n,o,r,i,a,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,r,i,a,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},2703:(e,t,n)=>{"use strict";var o=n(414);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5800:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(t);function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var i={error:null},a=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state=i,t.resetErrorBoundary=function(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];null==t.props.onReset||(e=t.props).onReset.apply(e,o),t.reset()},t}var n,a;a=e,(n=t).prototype=Object.create(a.prototype),n.prototype.constructor=n,r(n,a),t.getDerivedStateFromError=function(e){return{error:e}};var l=t.prototype;return l.reset=function(){this.setState(i)},l.componentDidCatch=function(e,t){var n,o;null==(n=(o=this.props).onError)||n.call(o,e,t)},l.componentDidUpdate=function(e,t){var n,o,r,i,a=this.state.error,l=this.props.resetKeys;null!==a&&null!==t.error&&(void 0===(r=e.resetKeys)&&(r=[]),void 0===(i=l)&&(i=[]),r.length!==i.length||r.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(n=(o=this.props).onResetKeysChange)||n.call(o,e.resetKeys,l),this.reset())},l.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,r=t.FallbackComponent,i=t.fallback;if(null!==e){var a={error:e,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(i))return i;if("function"==typeof n)return n(a);if(r)return o.createElement(r,a);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(o.Component);e.ErrorBoundary=a,e.useErrorHandler=function(e){var t=o.useState(null),n=t[0],r=t[1];if(null!=e)throw e;if(null!=n)throw n;return r},e.withErrorBoundary=function(e,t){var n=function(n){return o.createElement(a,t,o.createElement(e,n))},r=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+r+")",n},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(9196))},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,o="function"==typeof Set,r="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var l,s,c,u;if(Array.isArray(e)){if((l=e.length)!=a.length)return!1;for(s=l;0!=s--;)if(!i(e[s],a[s]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;for(u=e.entries();!(s=u.next()).done;)if(!i(s.value[1],a.get(s.value[0])))return!1;return!0}if(o&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((l=e.length)!=a.length)return!1;for(s=l;0!=s--;)if(e[s]!==a[s])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((l=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(s=l;0!=s--;)if(!Object.prototype.hasOwnProperty.call(a,c[s]))return!1;if(t&&e instanceof Element)return!1;for(s=l;0!=s--;)if(("_owner"!==c[s]&&"__v"!==c[s]&&"__o"!==c[s]||!e.$$typeof)&&!i(e[c[s]],a[c[s]]))return!1;return!0}return e!=e&&a!=a}e.exports=function(e,t){try{return i(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},7761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(9196),i=l(r),a=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){return this.props.useCapture,this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),o=void 0;if(this.props.useWindow){var r=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:r.scrollTop;o=this.props.isReverse?i:this.calculateOffset(e,i)}else o=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;o<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,o=t.element,r=t.hasMore,a=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var u=[n];return r&&(l?a?u.unshift(l):u.push(l):this.defaultLoader&&(a?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),i.default.createElement(o,c,u)}}]),t}(r.Component);s.propTypes={children:a.default.node.isRequired,element:a.default.node,hasMore:a.default.bool,initialLoad:a.default.bool,isReverse:a.default.bool,loader:a.default.node,loadMore:a.default.func.isRequired,pageStart:a.default.number,ref:a.default.func,getScrollParent:a.default.func,threshold:a.default.number,useCapture:a.default.bool,useWindow:a.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},246:(e,t,n)=>{e.exports=n(7761)},6255:e=>{var t="complete",n="canceled";function o(e,t,n){Math.max(0,t),Math.max(0,n),e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function r(e){var n=e._scrollSettings;if(n){var i=n.maxSynchronousAlignments,a=function(e,t){var n,o,r,i,a,l,s,c=e.align,u=e.target.getBoundingClientRect(),d=c&&null!=c.left?c.left:.5,m=c&&null!=c.top?c.top:.5,p=c&&null!=c.leftOffset?c.leftOffset:0,h=c&&null!=c.topOffset?c.topOffset:0,g=d,f=m;if(e.isWindow(t))l=Math.min(u.width,t.innerWidth),s=Math.min(u.height,t.innerHeight),o=u.left+t.pageXOffset-t.innerWidth*g+l*g,r=u.top+t.pageYOffset-t.innerHeight*f+s*f,o-=p,r-=h,o=e.align.lockX?t.pageXOffset:o,r=e.align.lockY?t.pageYOffset:r,i=o-t.pageXOffset,a=r-t.pageYOffset;else{l=u.width,s=u.height,n=t.getBoundingClientRect();var b=u.left-(n.left-t.scrollLeft),_=u.top-(n.top-t.scrollTop);o=b+l*g-t.clientWidth*g,r=_+s*f-t.clientHeight*f,o-=p,r-=h,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),r=Math.max(Math.min(r,t.scrollHeight-t.clientHeight),0),o=e.align.lockX?t.scrollLeft:o,r=e.align.lockY?t.scrollTop:r,i=o-t.scrollLeft,a=r-t.scrollTop}return{x:o,y:r,differenceX:i,differenceY:a}}(n,e),l=Date.now()-n.startTime,s=Math.min(1/n.time*l,1);if(n.endIterations>=i)return o(e,a.x,a.y),e._scrollSettings=null,n.end(t);var c=1-n.ease(s);if(o(e,a.x-a.differenceX*c,a.y-a.differenceY*c),l>=n.time)return n.endIterations++,n.scrollAncestor&&r(n.scrollAncestor),void r(e);!function(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(r.bind(null,e))}}function i(e){return e.self===e}function a(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function l(){return!0}function s(e){if(e.assignedSlot)return s(e.assignedSlot);if(e.parentElement)return"body"===e.parentElement.tagName.toLowerCase()?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}e.exports=function(e,o,c){if(e){"function"==typeof o&&(c=o,o=null),o||(o={}),o.time=isNaN(o.time)?1e3:o.time,o.ease=o.ease||function(e){return 1-Math.pow(1-e,e/2)},o.align=o.align||{};var u=s(e),d=1,m=o.validTarget||l,p=o.isScrollable;o.debug&&(console.log("About to scroll to",e),u||console.error("Target did not have a parent, is it mounted in the DOM?"));for(var h=[];u;)if(o.debug&&console.log("Scrolling parent node",u),m(u,d)&&(p?p(u,a):a(u))&&(d++,h.push(u)),!(u=s(u))){g(t);break}return h.reduce(((t,a,l)=>function(e,t,o,a,l){var s,c=!t._scrollSettings,u=t._scrollSettings,d=Date.now(),m={passive:!0};function p(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),o.debug&&console.log("Scrolling ended with type",e,"for",t),l(e),s&&(t.removeEventListener("touchstart",s,m),t.removeEventListener("wheel",s,m))}u&&u.end(n);var h=o.maxSynchronousAlignments;return null==h&&(h=3),t._scrollSettings={startTime:d,endIterations:0,target:e,time:o.time,ease:o.ease,align:o.align,isWindow:o.isWindow||i,maxSynchronousAlignments:h,end:p,scrollAncestor:a},"cancellable"in o&&!o.cancellable||(s=p.bind(null,n),t.addEventListener("touchstart",s,m),t.addEventListener("wheel",s,m)),c&&r(t),s}(e,a,o,h[l+1],g)),null)}function g(e){--d||c&&c(e)}}},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var o,r,i,a=n(8946),l="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function s(){i=!1}function c(e){if(e){if(e!==o){if(e.length!==l.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+l.length+" unique characters. These characters were not unique: "+t.join(", "));o=e,s()}}else o!==l&&(o=l,s())}function u(){return i||(i=function(){o||c(l);for(var e,t=o.split(""),n=[],r=a.nextValue();t.length>0;)r=a.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||l},characters:function(e){return c(e),o},seed:function(e){a.seed(e),r!==e&&(s(),r=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,n)=>{"use strict";var o,r,i=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?o++:(o=0,r=n),t+=i(7),t+=i(e),o>0&&(t+=i(o)),t+i(n)}},8416:(e,t,n)=>{"use strict";var o=n(9829),r=n(3766),i=n(296);e.exports=function(e){for(var t,n=0,a="";!t;)a+=i(r,o.get(),1),t=e<Math.pow(16,n+1),n++;return a}},5607:(e,t,n)=>{"use strict";var o=n(9829),r=n(480),i=n(1082),a=n(5636)||0;function l(){return r(a)}e.exports=l,e.exports.generate=l,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return a=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=i},1082:(e,t,n)=>{"use strict";var o=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*n/t.length),i="";;)for(var a=e(r),l=r;l--;)if((i+=t[a[l]&o]||"").length===+n)return i}},989:(e,t,n)=>{e.exports=n(3268)},3268:function(e,t){var n;!function(o){"use strict";var r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z",စျ:"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw",သြော:"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},i=["်","ް"],a={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်",က်:"et","ိုက်":"aik","ောက်":"auk",င်:"in","ိုင်":"aing","ောင်":"aung",စ်:"it",ည်:"i",တ်:"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it",ဒ်:"d","ိုဒ်":"ok","ုဒ်":"ait",န်:"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un",ပ်:"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut",န်ုပ်:"nub",မ်:"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un",ယ်:"e","ိုလ်":"ol",ဉ်:"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},l={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},s={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},c=[";","?",":","@","&","=","+","$",",","/"].join(""),u=[";","?",":","@","&","=","+","$",","].join(""),d=[".","!","~","*","'","(",")"].join(""),m=function(e,t){var n,o,m,g,f,b,_,v,y,k,E,S,w,C,I="-",T="",x="",P=!0,R={},A="";if("string"!=typeof e)return"";if("string"==typeof t&&(I=t),_=s.en,v=l.en,"object"==typeof t)for(E in n=t.maintainCase||!1,R=t.custom&&"object"==typeof t.custom?t.custom:R,m=+t.truncate>1&&t.truncate||!1,g=t.uric||!1,f=t.uricNoSlash||!1,b=t.mark||!1,P=!1!==t.symbols&&!1!==t.lang,I=t.separator||I,g&&(A+=c),f&&(A+=u),b&&(A+=d),_=t.lang&&s[t.lang]&&P?s[t.lang]:P?s.en:{},v=t.lang&&l[t.lang]?l[t.lang]:!1===t.lang||!0===t.lang?{}:l.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){R[e+""]=e+""})),o=!0):o=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){R[e+""]=e+""})),Object.keys(R).forEach((function(t){var n;n=t.length>1?new RegExp("\\b"+p(t)+"\\b","gi"):new RegExp(p(t),"gi"),e=e.replace(n,R[t])})),R)A+=E;for(A=p(A+=I),w=!1,C=!1,k=0,S=(e=e.replace(/(^\s+|\s+$)/g,"")).length;k<S;k++)E=e[k],h(E,R)?w=!1:v[E]?(E=w&&v[E].match(/[A-Za-z0-9]/)?" "+v[E]:v[E],w=!1):E in r?(k+1<S&&i.indexOf(e[k+1])>=0?(x+=E,E=""):!0===C?(E=a[x]+r[E],x=""):E=w&&r[E].match(/[A-Za-z0-9]/)?" "+r[E]:r[E],w=!1,C=!1):E in a?(x+=E,E="",k===S-1&&(E=a[x]),C=!0):!_[E]||g&&-1!==c.indexOf(E)||f&&-1!==u.indexOf(E)?(!0===C?(E=a[x]+E,x="",C=!1):w&&(/[A-Za-z0-9]/.test(E)||T.substr(-1).match(/A-Za-z0-9]/))&&(E=" "+E),w=!1):(E=w||T.substr(-1).match(/[A-Za-z0-9]/)?I+_[E]:_[E],E+=void 0!==e[k+1]&&e[k+1].match(/[A-Za-z0-9]/)?I:"",w=!0),T+=E.replace(new RegExp("[^\\w\\s"+A+"_-]","g"),I);return o&&(T=T.replace(/(\w)(\S*)/g,(function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(R).indexOf(o.toLowerCase())<0?o:o.toLowerCase()}))),T=T.replace(/\s+/g,I).replace(new RegExp("\\"+I+"+","g"),I).replace(new RegExp("(^\\"+I+"+|\\"+I+"+$)","g"),""),m&&T.length>m&&(y=T.charAt(m)===I,T=T.slice(0,m),y||(T=T.slice(0,T.lastIndexOf(I)))),n||o||(T=T.toLowerCase()),T},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},h=function(e,t){for(var n in t)if(t[n]===e)return!0};e.exports?(e.exports=m,e.exports.createSlug=function(e){return function(t){return m(t,e)}}):void 0===(n=function(){return m}.apply(t,[]))||(e.exports=n)}()},5358:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ls",{enumerable:!0,get:function(){return o.STORE_KEY}});var o=n(9527);o.STORE_KEY},9196:e=>{"use strict";e.exports=window.React},9527:e=>{"use strict";e.exports=window.kubio.constants},9307:e=>{"use strict";e.exports=window.wp.element},3967:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{SidebarArea:()=>Fe,SubSidebarArea:()=>Ne,__experimentalFullscreenModeClose:()=>_k,initialize:()=>vk,registerEditSiteStore:()=>J_,registerSidebarArea:()=>Le,registerSubSidebarArea:()=>ze});var e={};n.r(e),n.d(e,{disableComplementaryArea:()=>U,enableComplementaryArea:()=>H,pinItem:()=>W,setDefaultComplementaryArea:()=>G,setFeatureDefaults:()=>$,setFeatureValue:()=>V,toggleFeature:()=>K,unpinItem:()=>j});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>q,isFeatureActive:()=>Z,isItemPinned:()=>Y});var r={};n.r(r),n.d(r,{__experimentalSetPreviewDeviceType:()=>kb,addSubSidebar:()=>Mb,addTemplate:()=>Sb,closeSidebar:()=>Bb,openInserterSidebar:()=>Nb,openNavigationPanelToMenu:()=>Pb,openSidebar:()=>Ob,removeSubSidebar:()=>Db,removeTemplate:()=>wb,setCurrentAncestor:()=>Gb,setHomeTemplateId:()=>Ib,setIsListViewOpened:()=>Hb,setIsNavigationPanelOpened:()=>Rb,setKubioEditorMode:()=>Wb,setOpenInserter:()=>Fb,setPage:()=>Tb,setTemplate:()=>Eb,setTemplatePart:()=>Cb,setUIVersion:()=>Ub,showHomepage:()=>xb,toggleAICapabilities:()=>jb,toggleFeature:()=>yb,toggleGlobalStyleEditing:()=>Lb,toggleGutentagDebug:()=>zb,updateAIInfo:()=>Kb,updateExcludedSectionCategories:()=>Vb,updateSettings:()=>Ab});var i={};n.r(i),n.d(i,{__experimentalGetInsertionPoint:()=>A_,__experimentalGetPreviewDeviceType:()=>n_,currentPageHasFSETemplate:()=>D_,getAIInfo:()=>q_,getAvailablePageTemplates:()=>H_,getCanUserCreateMedia:()=>o_,getCanvasMode:()=>Z_,getClassicTemplateId:()=>U_,getCurrentAncestor:()=>C_,getCurrentKubioTemplateSource:()=>N_,getCurrentPageTemplate:()=>M_,getCurrentPostId:()=>L_,getCurrentPostType:()=>B_,getEditedPostId:()=>l_,getEditedPostType:()=>a_,getEditorOpenedSidebar:()=>I_,getEntity:()=>b_,getExcludedSectionCategories:()=>X_,getGlobalStyleEditingPreviousEntity:()=>P_,getHomeTemplateId:()=>i_,getIsBlogPage:()=>z_,getIsFrontPage:()=>F_,getIsInnerPage:()=>G_,getIsWooCommercePage:()=>W_,getKubioEditorMode:()=>V_,getKubioEditorModeIsSimple:()=>$_,getNavigationMenu:()=>u_,getOpenedInsertedClientId:()=>E_,getOpenedInsertedShouldCloseOnSelect:()=>w_,getOpenedInsertedShouldReplace:()=>S_,getOpenedInserter:()=>k_,getPage:()=>s_,getSettings:()=>r_,getShowOnFront:()=>v_,getSubSidebars:()=>T_,getTemplateId:()=>m_,getTemplateIds:()=>g_,getTemplatePartId:()=>p_,getTemplatePartIds:()=>f_,getTemplateType:()=>h_,getUIVersion:()=>j_,isAICapabilityEnabled:()=>K_,isChangingPage:()=>Y_,isEditorSidebarOpened:()=>y_,isFeatureActive:()=>t_,isGlobalStyleEditing:()=>x_,isGutentagDebug:()=>R_,isInserterOpened:()=>d_,isListViewOpened:()=>O_,isNavigationOpened:()=>c_});var a=n(9196);const l=window.kubio.blockPatterns,s=window.kubio.core,c=window.wp.blockLibrary;var u=n(9307);const d=window.wp.hooks,m=window.wp.notices,p=window.lodash;var h=n.n(p),g=n(9527);const f=window.kubio.coreHooks,b=window.kubio.editorData,_=window.kubio.ai,v=window.kubio.globalData,y=window.kubio.wpGlobalStyles,k=window.wp.blockEditor,E=window.wp.components,S=window.wp.compose,w=window.wp.coreData,C=window.wp.data,I=window.wp.editor,T=window.wp.i18n;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x.apply(this,arguments)}var P=n(3967),R=n.n(P);const A=window.wp.primitives,O=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),N=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),M=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),D=window.wp.viewport,B=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),L=window.wp.deprecated;var z=n.n(L);const F=window.wp.preferences,G=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),H=(e,t)=>n=>{let{registry:o,dispatch:r}=n;t&&(o.select(F.store).get(e,"isComplementaryAreaVisible")||o.dispatch(F.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},U=e=>t=>{let{registry:n}=t;n.select(F.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(F.store).set(e,"isComplementaryAreaVisible",!1)},W=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(F.store).get(e,"pinnedItems");!0!==(null==r?void 0:r[t])&&o.dispatch(F.store).set(e,"pinnedItems",{...r,[t]:!0})},j=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const r=o.select(F.store).get(e,"pinnedItems");o.dispatch(F.store).set(e,"pinnedItems",{...r,[t]:!1})};function K(e,t){return function(n){let{registry:o}=n;z()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),o.dispatch(F.store).toggle(e,t)}}function V(e,t,n){return function(o){let{registry:r}=o;z()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(F.store).set(e,t,!!n)}}function $(e,t){return function(n){let{registry:o}=n;z()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),o.dispatch(F.store).setDefaults(e,t)}}const q=(0,C.createRegistrySelector)((e=>(t,n)=>{var o;const r=e(F.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return r?null==t||null===(o=t.complementaryAreas)||void 0===o?void 0:o[n]:null})),Y=(0,C.createRegistrySelector)((e=>(t,n,o)=>{var r;const i=e(F.store).get(n,"pinnedItems");return null===(r=null==i?void 0:i[o])||void 0===r||r})),Z=(0,C.createRegistrySelector)((e=>(t,n,o)=>(z()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(F.store).get(n,o)))),X=(0,C.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e}}),Q=(0,C.createReduxStore)("core/interface",{reducer:X,actions:e,selectors:t});(0,C.register)(Q);const J=window.wp.plugins,ee=(0,J.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),te=ee((function(e){let{as:t=E.Button,scope:n,identifier:o,icon:r,selectedIcon:i,name:a,...l}=e;const s=t,c=(0,C.useSelect)((e=>e(Q).getActiveComplementaryArea(n)===o),[o]),{enableComplementaryArea:d,disableComplementaryArea:m}=(0,C.useDispatch)(Q);return(0,u.createElement)(s,x({icon:i&&c?i:r,onClick:()=>{c?m(n):d(n,o)}},l))})),ne=e=>{let{smallScreenTitle:t,children:n,className:o,toggleButtonProps:r}=e;const i=(0,u.createElement)(te,x({icon:B},r));return(0,u.createElement)(u.Fragment,null,(0,u.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,u.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),i),(0,u.createElement)("div",{className:R()("components-panel__header","interface-complementary-area-header",o),tabIndex:-1},n,i))},oe=()=>{};function re(e){let{name:t,as:n=E.Button,onClick:o,...r}=e;return(0,u.createElement)(E.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,u.createElement)(n,x({onClick:o||t?function(){(o||oe)(...arguments),(t||oe)(...arguments)}:void 0},r))}))}re.Slot=function(e){let{name:t,as:n=E.ButtonGroup,fillProps:o={},bubblesVirtually:r,...i}=e;return(0,u.createElement)(E.Slot,{name:t,bubblesVirtually:r,fillProps:o},(e=>{if(!u.Children.toArray(e).length)return null;const t=[];u.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:o}}=e;o&&n&&t.push(o)}));const o=u.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,u.createElement)(n,i,o)}))};const ie=re,ae=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...o}=e;return(0,u.createElement)(E.MenuItem,o)};function le(e){let{scope:t,target:n,__unstableExplicitMenuItem:o,...r}=e;return(0,u.createElement)(te,x({as:e=>(0,u.createElement)(ie,x({__unstableExplicitMenuItem:o,__unstableTarget:`${t}/${n}`,as:ae,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:O,name:n,scope:t},r))}function se(e){let{scope:t,...n}=e;return(0,u.createElement)(E.Fill,x({name:`PinnedItems/${t}`},n))}se.Slot=function(e){let{scope:t,className:n,...o}=e;return(0,u.createElement)(E.Slot,x({name:`PinnedItems/${t}`},o),(e=>(null==e?void 0:e.length)>0&&(0,u.createElement)("div",{className:R()(n,"interface-pinned-items")},e)))};const ce=se;function ue(e){let{scope:t,children:n,className:o}=e;return(0,u.createElement)(E.Fill,{name:`ComplementaryArea/${t}`},(0,u.createElement)("div",{className:o},n))}const de=ee((function(e){let{children:t,className:n,closeLabel:o=(0,T.__)("Close plugin"),identifier:r,header:i,headerClassName:a,icon:l,isPinnable:s=!0,panelClassName:c,scope:d,name:m,smallScreenTitle:p,title:h,toggleShortcut:g,isActiveByDefault:f,showIconLabels:b=!1}=e;const{isActive:_,isPinned:v,activeArea:y,isSmall:k,isLarge:S}=(0,C.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(Q),o=t(d);return{isActive:o===r,isPinned:n(d,r),activeArea:o,isSmall:e(D.store).isViewportMatch("< medium"),isLarge:e(D.store).isViewportMatch("large")}}),[r,d]);!function(e,t,n,o,r){const i=(0,u.useRef)(!1),a=(0,u.useRef)(!1),{enableComplementaryArea:l,disableComplementaryArea:s}=(0,C.useDispatch)(Q);(0,u.useEffect)((()=>{o&&r&&!i.current?(s(e),a.current=!0):a.current&&!r&&i.current?(a.current=!1,l(e,t)):a.current&&n&&n!==t&&(a.current=!1),r!==i.current&&(i.current=r)}),[o,r,e,t,n])}(d,r,y,_,k);const{enableComplementaryArea:w,disableComplementaryArea:I,pinItem:x,unpinItem:P}=(0,C.useDispatch)(Q);return(0,u.useEffect)((()=>{f&&void 0===y&&!k&&w(d,r)}),[y,f,d,r,k]),(0,u.createElement)(u.Fragment,null,s&&(0,u.createElement)(ce,{scope:d},v&&(0,u.createElement)(te,{scope:d,identifier:r,isPressed:_&&(!b||S),"aria-expanded":_,label:h,icon:b?O:l,showTooltip:!b,variant:b?"tertiary":void 0})),m&&s&&(0,u.createElement)(le,{target:m,scope:d,icon:l},h),_&&(0,u.createElement)(ue,{className:R()("interface-complementary-area",n),scope:d},(0,u.createElement)(ne,{className:a,closeLabel:o,onClose:()=>I(d),smallScreenTitle:p,toggleButtonProps:{label:o,shortcut:g,scope:d,identifier:r}},i||(0,u.createElement)(u.Fragment,null,(0,u.createElement)("strong",null,h),s&&(0,u.createElement)(E.Button,{className:"interface-complementary-area__pin-unpin-item",icon:v?N:M,label:v?(0,T.__)("Unpin from toolbar"):(0,T.__)("Pin to toolbar"),onClick:()=>(v?P:x)(d,r),isPressed:v,"aria-expanded":v}))),(0,u.createElement)(E.Panel,{className:c},t)))}));de.Slot=function(e){let{scope:t,...n}=e;return(0,u.createElement)(E.Slot,x({name:`ComplementaryArea/${t}`},n))};const me=de,pe=e=>{let{isActive:t}=e;return(0,u.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,u.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},he=(0,u.forwardRef)((function(e,t){let{footer:n,header:o,sidebar:r,secondarySidebar:i,notices:a,content:l,drawer:s,actions:c,labels:d,className:m,shortcuts:p}=e;const h=(0,E.__unstableUseNavigateRegions)(p);!function(e){(0,u.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,T.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,T.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,T.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,T.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,T.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,T.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,T.__)("Footer"),...d};return(0,u.createElement)("div",x({},h,{ref:(0,S.useMergeRefs)([t,h.ref]),className:R()(m,"interface-interface-skeleton",h.className,!!n&&"has-footer")}),!!s&&(0,u.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer,tabIndex:"-1"},s),(0,u.createElement)("div",{className:"interface-interface-skeleton__editor"},!!o&&(0,u.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},o),(0,u.createElement)("div",{className:"interface-interface-skeleton__body"},!!i&&(0,u.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},i),!!a&&(0,u.createElement)("div",{className:"interface-interface-skeleton__notices"},a),(0,u.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},l),!!r&&(0,u.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},r),!!c&&(0,u.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},c))),!!n&&(0,u.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},n))})),ge=window.wp.keyboardShortcuts,fe=g.STORE_KEY;function be(){return(0,a.createElement)(a.Fragment,null)}const _e=window.kubio.inspectors,ve=window.kubio.pro,ye=window.kubio.utils,ke=window.kubio.icons,Ee=(0,u.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,u.cloneElement)(e,{width:t,height:t,...n,ref:o})})),Se=window.kubio.blockLibrary,we=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),Ce=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),Ie="kubio-dragging-from-inserter--active",Te=()=>{setTimeout((()=>{const e=top.document.querySelector("body");e.classList.contains(Ie)&&e.classList.remove(Ie)}),10)},xe=()=>{const{setOpenInserter:e}=(0,C.useDispatch)(g.STORE_KEY),{insertionPoint:t,currentSelectedBlock:n}=(0,C.useSelect)((e=>({insertionPoint:e(g.STORE_KEY).getOpenedInserter(),currentSelectedBlock:e("core/block-editor").getSelectedBlockClientId()||null})),[]),o=(0,S.usePrevious)(n),{uiVersion:r}=(0,f.useUIVersion)();(0,u.useEffect)((()=>{2===r&&void 0!==o&&o!==n&&(e(!1),Te())}),[o,n,r]);const i=(0,b.useBlocksOwnerDocument)(),l=(0,S.useViewportMatch)("medium","<"),c=(0,u.useRef)(),d=(0,u.useCallback)((n=>{!1!==t&&(n.target.closest(".kubio-inserter-button")||n.target.closest(".kubio-sidebar-add-section-button")||n.target.classList.contains("edit-site-header-toolbar__inserter-toggle")||n.target.closest(".edit-site-header-toolbar__inserter-toggle")||n.target.closest(".kubio-inserter-ignore-click-outisde")||e(!1))}),[t,e]);return(0,s.useOnClickOutside)(c,d),(0,a.createElement)("div",{ref:c,className:"edit-site-editor__inserter-panel"},(0,a.createElement)("div",{className:"edit-site-editor__inserter-panel-header"},(0,a.createElement)(E.Button,{icon:we,onClick:()=>e(!1)})),(0,a.createElement)("div",{className:"edit-site-editor__inserter-panel-content"},t&&(0,a.createElement)(k.__experimentalLibrary,{shouldFocusBlock:l,shouldSelectBlock:1===r,rootClientId:null==t?void 0:t.rootClientId,__experimentalInsertionIndex:null==t?void 0:t.insertionIndex,ownerDocument:i,insertionPoint:t,isAppender:null==t?void 0:t.isAppender})))},Pe=(0,Se.getNamesOfBlocks)(),Re=["core/column","core/post-content","core/template-part",Pe.HEADER,Pe.FOOTER,Pe.SIDEBAR,Pe.COLUMN,Pe.LOOP_ITEM,Pe.SLIDER_CONTENT],Ae=({variant:e="secondary",className:t="edit-site-header-toolbar__inserter-toggle"})=>{const{rootClientId:n,isInserterOpen:o}=(0,C.useSelect)((e=>{var t;const{getBlockListSettings:n,getSelectedBlockClientId:o,getBlockRootClientId:r,getBlock:i,getBlockIndex:a}=e("core/block-editor");let l,s=o(),c=n(s);((0,p.isUndefined)(c)||c.templateLock)&&(l=a(s),s=r(s),c=n(s));const u=s&&Re.includes(null===(t=i(s))||void 0===t?void 0:t.name)&&((0,p.isUndefined)(c)||!c.templateLock);return{isInserterOpen:e(g.STORE_KEY).getOpenedInserter(),rootClientId:u?s:null,insertionIndex:l}}),[]),{setOpenInserter:r}=(0,C.useDispatch)(g.STORE_KEY),{selectBlock:i}=(0,C.useDispatch)("core/block-editor"),l=(0,u.useRef)(),{uiVersion:s}=(0,f.useUIVersion)(),c=(0,u.useCallback)((e=>{l.current.focus(),e.preventDefault(),e.stopPropagation()}),[]),d=(0,u.useCallback)((e=>{const t=!o&&"block-inserter";2!==s?(t?i(null):c(e),r(t,n),top.document.body.classList.remove("kubio-dragging-from-inserter--active")):t?(r("pattern-inserter/content",null),Te()):(c(e),r(!1,null))}),[o,n]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{ref:l,variant:e,isPressed:o,className:t,onClick:d,icon:o?B:Ce,onMouseDown:e=>{e.preventDefault()},label:(m=o,m?(0,T.__)("Close","kubio"):(0,T.__)("Add block","kubio"))}));var m},Oe=[];function Ne({title:e,label:t,children:n,areaIdentifier:o,className:r,backCallback:i,parentAreaIdentifier:l,onOpen:s,buttonOnly:c=!1,showArrow:d=!0,proOnly:m=!1,urlArgs:h}){const{clearSelectedBlock:f}=(0,C.useDispatch)("core/block-editor"),{openSidebar:b}=(0,C.useDispatch)(g.STORE_KEY),_=()=>{f().then((()=>b(l||"document")))},v=i?()=>i(_):_,y=(0,C.useSelect)((e=>e(g.STORE_KEY).getSubSidebars[o])),{addSubSidebar:k}=(0,C.useDispatch)(g.STORE_KEY);(0,u.useLayoutEffect)((()=>{y||(k({areaIdentifier:o,sidebar:(0,a.createElement)(E.Animate,{type:"slide-in"},(({className:t})=>(0,a.createElement)(Fe,{title:e,backCallback:v,areaIdentifier:o,className:`${t} kubio-subsidebar-content`},n,Be(o))))}),Oe.push(o))}),[y]);const S=m?ve.ProItem:E.Button;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:R()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title",r),tabIndex:-1},(0,a.createElement)(S,{isProItem:m,tag:E.Button,urlArgs:h,label:(0,T.__)("Open","kubio"),onClick:()=>(c||f().then((()=>b(o))),void((0,p.isFunction)(s)&&s()))},(0,a.createElement)("strong",null,t||e),d&&(0,a.createElement)(Ee,{icon:ke.ArrowRight,className:"components-panel__arrow arrow_general_settings"})))),(0,a.createElement)("div",{style:{display:"none"}},n))}const Me=[],De=({name:e,title:t=null,parent:n="document",render:o,isSubsidebar:r=!1})=>{(0,p.find)(Me,{name:e})&&console.error(`sidebar ${e} already added`),Me.push({name:e,parent:n,render:o,title:t||e,isSubsidebar:r})},Be=e=>(e=>Me.filter((({parent:t})=>t===e)))(e).map((({title:t,render:n,name:o,isSubsidebar:r})=>{const i=r?Ne:Fe;return(0,a.createElement)(i,{title:t,parentAreaIdentifier:e,areaIdentifier:o,key:`${e}.${o}`},n())})),Le=({name:e,title:t,parent:n="document",render:o})=>De({name:e,title:t,parent:n,render:o,isSubsidebar:!1}),ze=({name:e,title:t,parent:n="document",render:o})=>De({name:e,title:t,parent:n,render:o,isSubsidebar:!0});function Fe({areaIdentifier:e,title:t,backCallback:n=null,children:o,className:r}){const{uiVersion:i}=(0,f.useUIVersion)(),l="function"==typeof t?t():t;return(0,a.createElement)(me,{scope:`${g.STORE_KEY}/sidebars`,complementaryAreaIdentifier:`${g.STORE_KEY}/sidebar/${e}`,identifier:`${g.STORE_KEY}/sidebar/${e}`,isPinnable:!1,className:R()(r,n?"kubio-sidebar-header-block":""),header:(0,a.createElement)("div",{className:R()("components-panel__header","kubio-sidebar-header","accordion-section-title",n?"kubio-sidebar-header--has-back":""),tabIndex:-1},n&&(0,a.createElement)(E.Button,{className:"kubio-sidebar-header-back-button",onClick:n,showTooltip:!0,label:(0,T.__)("Back","kubio")},(0,a.createElement)(Ee,{icon:ke.ArrowLeft,className:"kubio-sidebar-header-arrow"})),(0,a.createElement)("strong",{title:(0,p.isString)(l)?l:null},l),2===i&&(0,a.createElement)(Ae,{className:"kubio-inserter-button",variant:"primary"}))},o,Be(e))}const Ge=window.wp.blocks;function He({children:e}){const{clearSelectedBlock:t}=(0,C.useDispatch)("core/block-editor"),{openSidebar:n}=(0,C.useDispatch)(g.STORE_KEY),{blockType:o,isMultiSelection:r}=(0,C.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockName:n,hasMultiSelection:o}=e("core/block-editor"),r=t(),i=r&&n(r);return{blockType:r&&(0,Ge.getBlockType)(i),isMultiSelection:o()}}));return(0,a.createElement)(Fe,{areaIdentifier:"block-inspector",title:()=>(0,a.createElement)("span",{className:"kubio-header-active-section"},(0,a.createElement)(k.BlockIcon,{icon:null==o?void 0:o.icon}),(0,a.createElement)("span",{className:"kubio-header-active-section page-title",title:null==o?void 0:o.title},r?(0,T.__)("Multiple selection","kubio"):null==o?void 0:o.title)),backCallback:()=>{n("document"),t()}},!r&&e,r&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-multiple-selection"},(0,a.createElement)("p",null,(0,T.__)("Sidebar controls are not availble on multiple blocks selection","kubio")))))}const Ue=window.kubio.controls,We=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ke(e,t){if(e){if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=i.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||Ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function qe(e){var t=function(e,t){if("object"!=$e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=$e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:String(t)}function Ye(e,t,n){return(t=qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach((function(t){Ye(e,t,n[t])}))}return e}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,qe(o.key),o)}}function Je(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}var it=n(5697),at=n.n(it);const lt=window.ReactDOM;var st=n(1143),ct=n.n(st);function ut(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dt=function(){function e(){Xe(this,e),Ye(this,"refs",{})}return Je(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(mt)}}]),e}();function mt(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function pt(e,t){return Object.keys(e).reduce((function(n,o){return-1===t.indexOf(o)&&(n[o]=e[o]),n}),{})}var ht={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},gt=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function ft(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function bt(e,t){e.style["".concat(gt,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function _t(e,t){e.style["".concat(gt,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function vt(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function yt(e,t,n){return Math.max(e,Math.min(n,t))}function kt(e){return"px"===e.substr(-2)?parseFloat(e):0}function Et(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function St(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function wt(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?o:Ct(e.parentNode,t,o)}}function It(e){var t=e.lockOffset,n=e.width,o=e.height,r=t,i=t,a="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);ct()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),r=parseFloat(t),i=parseFloat(t),a=l[1]}return ct()(isFinite(r)&&isFinite(i),"lockOffset value should be a finite. Given %s",t),"%"===a&&(r=r*n/100,i=i*o/100),{x:r,y:i}}function Tt(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:Tt(e.parentNode):null}var xt={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Pt(e){return null!=e.sortableHandle}var Rt=function(){function e(t,n){Xe(this,e),this.container=t,this.onScrollCallback=n}return Je(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,o=e.minTranslate,r=e.maxTranslate,i=e.width,a=e.height,l={x:0,y:0},s={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,m=c.scrollHeight,p=c.scrollWidth,h=0===u,g=m-u-c.clientHeight==0,f=0===d,b=p-d-c.clientWidth==0;n.y>=r.y-a/2&&!g?(l.y=1,s.y=10*Math.abs((r.y-a/2-n.y)/a)):n.x>=r.x-i/2&&!b?(l.x=1,s.x=10*Math.abs((r.x-i/2-n.x)/i)):n.y<=o.y+a/2&&!h?(l.y=-1,s.y=10*Math.abs((n.y-a/2-o.y)/a)):n.x<=o.x+i/2&&!f&&(l.x=-1,s.x=10*Math.abs((n.x-i/2-o.x)/i)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),At={axis:at().oneOf(["x","y","xy"]),contentWindow:at().any,disableAutoscroll:at().bool,distance:at().number,getContainer:at().func,getHelperDimensions:at().func,helperClass:at().string,helperContainer:at().oneOfType([at().func,"undefined"==typeof HTMLElement?at().any:at().instanceOf(HTMLElement)]),hideSortableGhost:at().bool,keyboardSortingTransitionDuration:at().number,lockAxis:at().string,lockOffset:at().oneOfType([at().number,at().string,at().arrayOf(at().oneOfType([at().number,at().string]))]),lockToContainerEdges:at().bool,onSortEnd:at().func,onSortMove:at().func,onSortOver:at().func,onSortStart:at().func,pressDelay:at().number,pressThreshold:at().number,keyCodes:at().shape({lift:at().arrayOf(at().number),drop:at().arrayOf(at().number),cancel:at().arrayOf(at().number),up:at().arrayOf(at().number),down:at().arrayOf(at().number)}),shouldCancelStart:at().func,transitionDuration:at().number,updateBeforeSortStart:at().func,useDragHandle:at().bool,useWindowAsScrollContainer:at().bool},Ot={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},Nt={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Ot,shouldCancelStart:function(e){return-1!==[xt.Input,xt.Textarea,xt.Select,xt.Option,xt.Button].indexOf(e.target.tagName)||!!vt(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},Mt=Object.keys(At),Dt={index:at().number.isRequired,collection:at().oneOfType([at().number,at().string]),disabled:at().bool},Bt=Object.keys(Dt),Lt=n(989),zt=n.n(Lt);const Ft=(0,u.createContext)({clientId:null,setContainer:p.noop}),Gt=()=>(0,u.useContext)(Ft),Ht=(0,Se.getNamesOfBlocks)(),Ut=[Ht.SECTION,Ht.HERO,Ht.NAVIGATION].map((e=>`[data-type="${e}"]`)).join(","),Wt=({children:e})=>{const[t,n]=(0,u.useState)(null),o=(0,b.useBlocksOwnerDocument)(),r=(0,S.useThrottle)((0,u.useCallback)((e=>{var t,o;const r=null==e||null===(t=e.target)||void 0===t||null===(o=t.closest)||void 0===o?void 0:o.call(t,Ut),i=(null==r?void 0:r.getAttribute("data-block"))||null;n(i)}),[]),300);(0,u.useEffect)((()=>{if(o)return o.addEventListener("mousemove",r),()=>o.removeEventListener("mousemove",r)}),[o]);const i=(0,u.useMemo)((()=>({clientId:t})),[t]);return(0,a.createElement)(Ft.Provider,{value:i},e)},jt=(0,a.createElement)(A.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})),Kt=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Xe(this,n),tt(this,nt(n).apply(this,arguments))}return rt(n,t),Je(n,[{key:"componentDidMount",value:function(){(0,lt.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return ct()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,a.createElement)(e,x({ref:t},this.props))}}]),n}(a.Component),Ye(t,"displayName",Et("sortableHandle",e)),n}((()=>(0,a.createElement)(E.Tooltip,{text:(0,T.__)("Move","kubio")},(0,a.createElement)("div",{className:"d-flex"},(0,a.createElement)(Ee,{icon:jt,className:"draggable-item"}))))),Vt=window.kubio.menuData,$t=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})),qt=(0,u.createContext)(null),Yt=({children:e})=>{const t=(0,Vt.usePrimaryMenuBlockEditor)();return(0,a.createElement)(qt.Provider,{value:t},e)},Zt=(0,a.createElement)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(A.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})),Xt=({containerRef:e,afterMenuCreation:t,onClose:n})=>{const[o,r]=(0,u.useState)(""),[i,l]=(0,u.useState)(!1);return(0,a.createElement)(E.Popover,{className:"kubio-options-popover kubio-create-menu-popover",anchorRef:e,position:"middle right",onClose:n},(0,a.createElement)(E.Placeholder,{className:"wp-block-navigation-placeholder kubio-menu-placeholder",icon:Zt,label:(0,T.__)("Kubio Menu","kubio")},(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-create-menu-popover-description"},(0,a.createElement)("span",null,(0,T.__)("There is no header menu created. Please create a new one","kubio"))),(0,a.createElement)("div",{className:"wp-block-navigation-placeholder__actions"},(0,a.createElement)(E.Flex,null,(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(E.BaseControl,{className:"kubio-create-menu-popover-input-control"},(0,a.createElement)(E.BaseControl.VisualLabel,null,(0,T.__)("Menu name","kubio")),(0,a.createElement)(E.__experimentalInputControl,{value:o,onChange:r,placeholder:(0,T.__)("Please set a name","kubio")})),(0,a.createElement)(E.Button,{isSecondary:!0,className:"wp-block-navigation-placeholder__button",disabled:0===o.length,isBusy:i,onClick:async()=>{l(!0),await(0,Vt.createPrimaryMenu)(o),l(!1),t()}},(0,T.__)("Create new Menu","kubio"))))))))},Qt=({dataHelper:e,containerRef:t})=>{const[n,o]=(0,u.useState)(!1),[r,i]=(0,u.useState)(!1),{exists:l,items:s,setItems:c,hasResolved:d}=(0,u.useContext)(qt),m=(0,C.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(g.STORE_KEY),i=(null===(t=o())||void 0===t?void 0:t.link)||null,a=(null===(n=r())||void 0===n?void 0:n.path)||null;return(i||a||"").replace(/\/$/,"")}),[]);(0,u.useEffect)((()=>{r&&l&&d&&(c([{...(0,Vt.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${m}/${f}`}],!0),i(!1))}),[l,r,c,d]);const p=(0,u.useCallback)((()=>{if(b.length){const e=b.map((({id:e})=>e)),t=h.filter((t=>-1===e.indexOf(t.id)));c([...t],!0)}else{const t=Math.max.apply(null,h.filter((({parent:e})=>0===e)).map((({order:e})=>e)).filter(Boolean))+1;c([...h,{...(0,Vt.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${m}/${f}`,order:t}],!0)}}),[c,s,l,m]),h=Array.isArray(s)?s:[],f="#"+(null==e?void 0:e.getAttribute("anchor")),b=(0,u.useMemo)((()=>{if(!l)return[];const e=h.filter((({url:e})=>e===`${m}/${f}`||e===`${m}${f}`));return e.length?e:[]}),[l,s,m]),_=(0,u.useCallback)((()=>{l?p():o(!0)}),[l,p]),v=b.length>0;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Tooltip,{text:v?(0,T.__)("Remove from menu","kubio"):(0,T.__)("Add to menu","kubio"),position:"top left"},(0,a.createElement)("div",{className:"d-flex"},(0,a.createElement)(E.Button,{isSmall:!0,onClick:()=>_(),icon:$t,className:R()(["icon-menu",{active:v}])}))),n&&(0,a.createElement)(Xt,{containerRef:null==t?void 0:t.current,afterMenuCreation:()=>{i(!0),o(!1)},onClose:()=>o(!1)}))},Jt=({onRemove:e,onSelect:t,dataHelper:n,area:o})=>{const{selectBlock:r,toggleBlockHighlight:i}=(0,C.useDispatch)("core/block-editor"),l=n.getAttribute("anchor"),c=n.getAttribute("attrs.name"),[d,m]=(0,u.useState)(!1),[g,f]=(0,u.useState)(l),[_,v]=(0,u.useState)(c),y=(0,b.useBlocksOwnerDocument)();(0,u.useEffect)((()=>{g!==l&&f(l),_!==c&&v(c)}),[l,c]);const k=(0,u.useRef)(),S=(0,u.useRef)(),w=h().debounce((e=>{e=e||g;let t=zt()(e);t=(0,ye.getUniqueSlug)(t,y),t&&(t!==g&&f(t),t!==l&&n.setAttribute("anchor",t))}),100),{clientId:I}=Gt(),x=(0,u.useCallback)((()=>{d&&m(!1)}),[d,m]),P=(e,t=p.noop)=>{const n=null==e?void 0:e.clientId,o=(0,ye.getPreviewElementByModelId)(n,y);o&&(0,ye.scrollIntoView)(o,{behavior:"smooth",onScrollEnd:t}),i(n,!0)},R=o!==ln.FOOTER||!1;return(0,s.useOnClickOutside)(k,x),(0,a.createElement)("div",{ref:S,className:"page-section-item"},(0,a.createElement)("div",{className:(e=>{const t=["kubio-section-list-item"];return e&&t.push("list-item-full-height"),I===n.clientId&&t.push("hovered"),t.join(" ")})(d)},(0,a.createElement)("div",{className:"align-items-center drag-icon"},(0,a.createElement)(Kt,null)),(0,a.createElement)("div",{className:"input-container",ref:k},(0,a.createElement)("div",{className:"input-drag-text"},(0,a.createElement)("input",{type:"text",value:_,className:"input-name",onChange:e=>{const t=e.target.value;v(t)},onFocus:e=>{P(n),d||m(!0)},onBlur:()=>{_!==c&&(n.setAttribute("attrs.name",_),w(_))}}),(0,a.createElement)("span",{className:"input-drag-text__size"},_)),d&&(0,a.createElement)("div",{className:"id-div"},"ID:#",(0,a.createElement)("input",{type:"text",value:g,className:"input-name input-id",onFocus:()=>{P(n)},onChange:e=>{f(e.target.value)},onBlur:()=>{g===l&&_===c||w()}}))),(0,a.createElement)("div",{onClick:()=>{P(n,(()=>{r(null==n?void 0:n.clientId)}))},className:"page-section-item__select-area",role:"button",tabIndex:0}),(0,a.createElement)("div",{className:"align-items-center"},R&&(0,a.createElement)(E.Button,{isSmall:!0,icon:ke.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,a.createElement)(Qt,{dataHelper:n,containerRef:S}),(0,a.createElement)(E.Button,{isSmall:!0,icon:We,className:"icon-settings",onClick:()=>P(n,t),showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}))))},en="kubio/edit-site",tn=({name:e="",area:t})=>{const n=(0,u.useRef)(),{setOpenInserter:o}=(0,C.useDispatch)(en),r=(0,C.useSelect)((e=>{e(en).getOpenedInserter()})),i=sn[t],l=async(e=t)=>{const n=`pattern-inserter/${h().get(dn,e,dn[ln.CONTENT])}`;r!==n&&await o(!1,null),o(n,t)},s=null==i?void 0:i.toLowerCase();return(0,a.createElement)(u.Fragment,null,(0,a.createElement)("div",{ref:n,className:["kubio-full-section","kubio-full-section--placeholder"].join(" ")},(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:R()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,a.createElement)("div",{className:"kubio-sidebar-title-text"},i),(0,a.createElement)("div",{className:"dummy-column"}),(0,a.createElement)("div",{className:"section-list-header-buttons-holder"},(0,a.createElement)(E.Button,{isSmall:!0,icon:Ce,className:"section-icon-container",onClick:function(){l(ln.CONTENT)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")})))),(0,a.createElement)(Ue.ControlNotice,{content:(0,T.sprintf)(// translators:  %1$s , %1$s - template names
// translators:  %1$s , %1$s - template names
(0,T.__)("The current page uses the theme %1$s. Use the button below to replace it with a Kubio %2$s","kubio"),s,s)}),(0,a.createElement)(E.Button,{isPrimary:!0,onClick:()=>l(),className:((e,n=[])=>t===ln.HEADER?["btn-primary","header-button"].concat(n).join(" "):["btn-primary"].concat(n).join(" "))(0,["kubio-button-add-blocks"])},(0,a.createElement)("span",{className:R()("kubio-header-section-main-button",{"header-button":e===ln.HEADER})},(()=>{switch(t){case ln.HEADER:return(0,T.__)("Choose header design","kubio");case ln.FOOTER:return(0,T.__)("Choose footer design","kubio");case ln.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})()))))};function nn(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:i,getBlocks:l,isPage:s}=(0,C.useSelect)((e=>{const{getPage:t}=e(g.STORE_KEY),n=(0,C.select)("core").getEditedEntityRecord("root","site");let o;t&&(o=t());const r=h().get(o,"context",{}),{postType:i,postId:a}=r,l="page"===(null==n?void 0:n.show_on_front)&&parseInt(null==n?void 0:n.page_for_posts)===parseInt(a);return{isPage:"page"===i&&!l,blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks}})),[c]=(0,b.useGlobalSessionProp)("currentPageHasBlocksContent",!0,[]),d=(0,u.useMemo)((()=>{const e={selectBlock:n,removeBlocks:o,reorderBlocks:r,innerBlocks:l(),templatePart:{},blockTypes:i,label:(0,T.__)("Content","kubio")};return c&&(0,a.createElement)(fn,{...e})}),[t,c]);return(0,a.createElement)(a.Fragment,null,s&&(0,a.createElement)(tn,{area:"header"}),d,s&&(0,a.createElement)(tn,{area:"footer"}))}function on(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:r}=e,{blockTypes:i}=(0,C.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks})));return(0,a.createElement)(a.Fragment,null,t.map(((e,t)=>{const{name:l,clientId:s}=e,c={selectBlock:n,removeBlocks:o,reorderBlocks:r,name:l,templatePart:e,templatePartClientId:s,blockTypes:i};return(0,a.createElement)(fn,{key:"template-sections-"+t,...c})})))}function rn({templateParts:e,...t}){const n=(0,C.useSelect)((e=>{const{currentPageHasFSETemplate:t}=e(g.STORE_KEY);return t()}),[]),o=(0,C.useSelect)((e=>e("core").getEntityRecords("postType","wp_template_part",{per_page:-1})||[]),[]),r=(0,s.useDeepMemo)((()=>e.map((e=>{const t=o.find((t=>{var n;return(null==t?void 0:t.slug)===(null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug)})),n=null==t?void 0:t.area;return{...e,area:n}}))),[e,o]),i=(0,s.useDeepMemo)((()=>h().orderBy(r,(e=>h().findIndex(cn,(t=>t===h().get(e,"area",ln.CONTENT)))))),[r]);let l=null;return l=n?on:nn,(0,a.createElement)(l,{...t,templateParts:i})}const an=({onRemove:e,onSelect:t,item:n,dataHelper:o})=>{const{blockTypes:r}=(0,C.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes()}))),{selectBlock:i}=(0,C.useDispatch)("core/block-editor"),{clientId:l}=Gt(),s=R()("kubio-section-list-item",{hovered:l===n.clientId}),c=(0,u.useRef)();return(0,u.useEffect)((()=>{l===n.clientId&&c.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[l]),(0,a.createElement)("div",{ref:c,className:"page-section-item"},(0,a.createElement)("div",{className:s},(0,a.createElement)("div",{className:"align-items-center"},(0,a.createElement)(Kt,null)),(0,a.createElement)("div",{className:"input-container"},(0,a.createElement)("span",{className:"input-name"},(0,a.createElement)("span",{className:"input-name-text"},(e=>{const t=(0,p.find)(r,{name:e});return(null==t?void 0:t.title)||e})(n.name)))),(0,a.createElement)("div",{onClick:()=>{i(null==o?void 0:o.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:"0"}),(0,a.createElement)("div",{className:"align-items-center"},(0,a.createElement)(E.Button,{isSmall:!0,icon:ke.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,a.createElement)(E.Button,{isSmall:!0,icon:We,className:"icon-settings",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}))))},ln={HEADER:"header",FOOTER:"footer",SIDEBAR:"sidebar",CONTENT:"content"},sn={[ln.HEADER]:(0,T.__)("Header","kubio"),[ln.FOOTER]:(0,T.__)("Footer","kubio"),[ln.SIDEBAR]:(0,T.__)("Sidebar","kubio"),[ln.CONTENT]:(0,T.__)("Content","kubio")},cn=[ln.HEADER,ln.CONTENT,ln.SIDEBAR,ln.FOOTER],un=["kubio/header","kubio/footer","core/post-content","core/template-part"],dn={[ln.HEADER]:"header",[ln.FOOTER]:"footer",[ln.SIDEBAR]:"sidebar",[ln.CONTENT]:"post-content"},mn=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Xe(this,n),tt(this,nt(n).apply(this,arguments))}return rt(n,t),Je(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,r=(0,lt.findDOMNode)(this);r.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=r,this.ref={node:r},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return ct()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,a.createElement)(e,x({ref:t},pt(this.props,Bt)))}}]),n}(a.Component),Ye(t,"displayName",Et("sortableElement",e)),Ye(t,"contextTypes",{manager:at().object.isRequired}),Ye(t,"propTypes",Dt),Ye(t,"defaultProps",{collection:0}),n}((({item:e,onRemove:t=p.noop,onSelect:n=p.noop,dataHelper:o,area:r})=>(0,ye.isGutentagPrefixed)(e.name)?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Jt,{onRemove:()=>t(e),onSelect:()=>n(e),item:e,dataHelper:o,area:r})):(0,a.createElement)(an,{onRemove:()=>t(e),onSelect:()=>n(e),item:e,dataHelper:o}))),pn=e=>{var t;const n=(0,u.useMemo)((()=>hn()),[]);return(0,a.createElement)(n,{clientId:null===(t=e.item)||void 0===t?void 0:t.clientId,...e})},hn=()=>(0,s.WithKubioDataHelperProp)(mn),gn=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return Xe(this,n),Ye(et(et(t=tt(this,nt(n).call(this,e)))),"state",{}),Ye(et(et(t)),"handleStart",(function(e){var n=t.props,o=n.distance,r=n.shouldCancelStart;if(2!==e.button&&!r(e)){t.touched=!0,t.position=wt(e);var i=vt(e.target,(function(e){return null!=e.sortableInfo}));if(i&&i.sortableInfo&&t.nodeIsChild(i)&&!t.state.sorting){var a=t.props.useDragHandle,l=i.sortableInfo,s=l.index,c=l.collection;if(l.disabled)return;if(a&&!vt(e.target,Pt))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==xt.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),Ye(et(et(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),Ye(et(et(t)),"handleMove",(function(e){var n=t.props,o=n.distance,r=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var i=wt(e),a={x:t.position.x-i.x,y:t.position.y-i.y},l=Math.abs(a.x)+Math.abs(a.y);t.delta=a,o||r&&!(l>=r)?o&&l>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),Ye(et(et(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),Ye(et(et(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),Ye(et(et(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),o=function(){if(n){var o=function(){var n,o,r,c,g,f,b=m.sortableInfo.index,_=(n=m,{bottom:kt((o=window.getComputedStyle(n)).marginBottom),left:kt(o.marginLeft),right:kt(o.marginRight),top:kt(o.marginTop)}),v=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:kt(t.gridColumnGap),y:kt(t.gridRowGap)}:{x:0,y:0}}(t.container),y=t.scrollContainer.getBoundingClientRect(),k=a({index:b,node:m,collection:p});if(t.node=m,t.margin=_,t.gridGap=v,t.width=k.width,t.height=k.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=m.getBoundingClientRect(),t.containerBoundingRect=y,t.index=b,t.newIndex=b,t.axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},t.offsetEdge=Ct(m,t.container),t.initialOffset=wt(h?Ze({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(r=m).querySelectorAll(c),ut((f=r.cloneNode(!0)).querySelectorAll(c)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===xt.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),f)),ft(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-_.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-_.top,"px"),width:"".concat(t.width,"px")}),h&&t.helper.focus(),s&&(t.sortableGhost=m,ft(m,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},h){var E=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=E.top,w=E.left,C=E.width,I=S+E.height,T=w+C;t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=T-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=I-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:y.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:y.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?m:t.contentWindow,h?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(ht.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),ht.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:b}),u&&u({node:m,index:b,collection:p,isKeySorting:h,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),h&&t.keyMove(0)},r=t.props,i=r.axis,a=r.getHelperDimensions,l=r.helperClass,s=r.hideSortableGhost,c=r.updateBeforeSortStart,u=r.onSortStart,d=r.useWindowAsScrollContainer,m=n.node,p=n.collection,h=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(t,n){try{var o=(r=m.sortableInfo.index,Promise.resolve(c({collection:p,index:r,node:m,isKeySorting:h},e)).then((function(){})))}catch(e){return n(!0,e)}var r;return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),Ye(et(et(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),Ye(et(et(t)),"handleSortEnd",(function(e){var n=t.props,o=n.hideSortableGhost,r=n.onSortEnd,i=t.manager,a=i.active.collection,l=i.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(ht.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),ht.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&ft(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=s.length;c<u;c++){var d=s[c],m=d.node;d.edgeOffset=null,d.boundingClientRect=null,bt(m,null),_t(m,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof r&&r({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),Ye(et(et(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var o=Ze({},t.translate),r=0,i=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),r=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),i=t.translate.y-o.y),t.translate=o,bt(t.helper,t.translate),t.scrollContainer.scrollLeft+=r,void(t.scrollContainer.scrollTop+=i)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),Ye(et(et(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),Ye(et(et(t)),"handleKeyDown",(function(e){var n=e.keyCode,o=t.props,r=o.shouldCancelStart,i=o.keyCodes,a=Ze({},Ot,void 0===i?{}:i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||a.lift.includes(n)&&!r(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(n)&&!t.manager.active?t.keyLift(e):a.drop.includes(n)&&t.manager.active?t.keyDrop(e):a.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(n)?t.keyMove(-1):a.down.includes(n)&&t.keyMove(1))})),Ye(et(et(t)),"keyLift",(function(e){var n=e.target,o=vt(n,(function(e){return null!=e.sortableInfo})).sortableInfo,r=o.index,i=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:r,collection:i},t.handlePress(e)})),Ye(et(et(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),o=n[n.length-1].node.sortableInfo.index,r=t.newIndex+e,i=t.newIndex;if(!(r<0||r>o)){t.prevIndex=i,t.newIndex=r;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=n.find((function(e){return e.node.sortableInfo.index===a})),s=l.node,c=t.containerScrollDelta,u=l.boundingClientRect||St(s,c),d=l.translate||{x:0,y:0},m=u.top+d.y-c.top,p=u.left+d.x-c.left,h=i<r,g=h&&t.axis.x?s.offsetWidth-t.width:0,f=h&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:m+f,ignoreTransition:0===e})}})),Ye(et(et(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),Ye(et(et(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),Ye(et(et(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,o=e.target,r=vt(o,(function(e){return null!=e.sortableInfo}));return r&&r.sortableInfo&&!r.sortableInfo.disabled&&(n?Pt(o):o.sortableInfo)})),function(e){ct()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new dt,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return rt(n,t),Je(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:Tt(e.container)||e.container,e.autoScroller=new Rt(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return ht[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return ht[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,o=t.lockOffset,r=t.lockToContainerEdges,i=t.transitionDuration,a=t.keyboardSortingTransitionDuration,l=void 0===a?i:a,s=this.manager.isKeySorting,c=e.ignoreTransition,u=wt(e),d={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,r){var m=function(e){var t=e.height,n=e.width,o=e.lockOffset,r=Array.isArray(o)?o:[o,o];ct()(2===r.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var i=Ve(r,2),a=i[0],l=i[1];return[It({height:t,lockOffset:a,width:n}),It({height:t,lockOffset:l,width:n})]}({height:this.height,lockOffset:o,width:this.width}),p=Ve(m,2),h=p[0],g=p[1],f={x:this.width/2-h.x,y:this.height/2-h.y},b={x:this.width/2-g.x,y:this.height/2-g.y};d.x=yt(this.minTranslate.x+f.x,this.maxTranslate.x-b.x,d.x),d.y=yt(this.minTranslate.y+f.y,this.maxTranslate.y-b.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),s&&l&&!c&&_t(this.helper,l),bt(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,o=e.onSortOver,r=this.containerScrollDelta,i=this.windowScrollDelta,a=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+r.left,s=this.offsetEdge.top+this.translate.y+r.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,m=a.length;d<m;d++){var p=a[d].node,h=p.sortableInfo.index,g=p.offsetWidth,f=p.offsetHeight,b={height:this.height>f?f/2:this.height/2,width:this.width>g?g/2:this.width/2},_=c&&h>this.index&&h<=u,v=c&&h<this.index&&h>=u,y={x:0,y:0},k=a[d].edgeOffset;k||(k=Ct(p,this.container),a[d].edgeOffset=k,c&&(a[d].boundingClientRect=St(p,r)));var E=d<a.length-1&&a[d+1],S=d>0&&a[d-1];E&&!E.edgeOffset&&(E.edgeOffset=Ct(E.node,this.container),c&&(E.boundingClientRect=St(E.node,r))),h!==this.index?(t&&_t(p,t),this.axis.x?this.axis.y?v||h<this.index&&(l+i.left-b.width<=k.left&&s+i.top<=k.top+b.height||s+i.top+b.height<=k.top)?(y.x=this.width+this.marginOffset.x,k.left+y.x>this.containerBoundingRect.width-b.width&&E&&(y.x=E.edgeOffset.left-k.left,y.y=E.edgeOffset.top-k.top),null===this.newIndex&&(this.newIndex=h)):(_||h>this.index&&(l+i.left+b.width>=k.left&&s+i.top+b.height>=k.top||s+i.top+b.height>=k.top+f))&&(y.x=-(this.width+this.marginOffset.x),k.left+y.x<this.containerBoundingRect.left+b.width&&S&&(y.x=S.edgeOffset.left-k.left,y.y=S.edgeOffset.top-k.top),this.newIndex=h):_||h>this.index&&l+i.left+b.width>=k.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=h):(v||h<this.index&&l+i.left<=k.left+b.width)&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=h)):this.axis.y&&(_||h>this.index&&s+i.top+b.height>=k.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=h):(v||h<this.index&&s+i.top<=k.top+b.height)&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=h))),bt(p,y),a[d].translate=y):n&&(this.sortableGhost=p,ft(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;o&&this.newIndex!==w&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return ct()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,lt.findDOMNode)(this):e(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,a.createElement)(e,x({ref:t},pt(this.props,Mt)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(a.Component),Ye(t,"displayName",Et("sortableList",e)),Ye(t,"defaultProps",Nt),Ye(t,"propTypes",At),Ye(t,"childContextTypes",{manager:at().object.isRequired}),n}((({items:e,onRemove:t,onSelect:n,area:o})=>(0,a.createElement)("div",null,(0,a.createElement)(C.AsyncModeProvider,{value:!0},null==e?void 0:e.map(((e,r)=>(0,a.createElement)(pn,{key:e.clientId,item:e,onRemove:t,onSelect:n,index:r,area:o}))))))),fn=({name:e="",reorderBlocks:t,templatePart:n={},blockTypes:o,removeBlocks:r,selectBlock:i,templatePartClientId:l,label:s})=>{const c=null==n?void 0:n.area,m=dn[ln.CONTENT],b=h().get(dn,c,m),_=(0,u.useRef)(),v=(0,u.useRef)(),y=(0,u.useRef)(),[k,S]=(0,u.useState)(!1),{setOpenInserter:w}=(0,C.useDispatch)(g.STORE_KEY),I=b,{isUnlocked:x}=(0,Ue.useTemplatePartLock)(I),[P,A]=(0,u.useState)(!1),{postType:O,postId:N}=(0,C.useSelect)((e=>{var t,n;return(null===(t=e(g.STORE_KEY))||void 0===t||null===(n=t.getPage())||void 0===n?void 0:n.context)||{}}),[]),M=(0,C.useSelect)((e=>e(g.STORE_KEY).getKubioEditorModeIsSimple()),[]),{uiVersion:D}=(0,f.useUIVersion)(),B=(0,C.useSelect)((e=>e("core/block-editor").getBlocks(l)),[l]);if("core/post-content"===e&&(0,d.applyFilters)("kubio.showRenderedPostContent","page"!==O,O,N))return(0,a.createElement)(a.Fragment,null);const L=e.includes("kubio")&&["header","footer","sidebar"].includes(I),z=["kubio-full-section"];return L&&(x?z.push("kubio-full-section--unlocked"):z.push("kubio-full-section--locked")),(0,a.createElement)("div",{ref:_,className:z.join(" ")},L&&(0,a.createElement)("div",{ref:v,tabIndex:-1,role:"button",className:R()("kubio-full-section-overlay",{"kubio-full-section-overlay--show-popup":k})}),(0,a.createElement)("div",{className:"kubio-subsidebar-container"},(0,a.createElement)("div",{className:R()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1},(0,a.createElement)("div",{className:"kubio-sidebar-title-text"},s||(()=>{let t=sn[c];return t||(t=(()=>{const t=e,n=(0,p.find)(o,{name:t});return(null==n?void 0:n.title)||t})()),t})()),(0,a.createElement)("div",{className:"dummy-column"}),(0,a.createElement)("div",{ref:y,className:"section-list-header-buttons-holder"},L&&!x&&(0,a.createElement)(Ue.KubioPopup,{position:2===D?"middle right":"top left",className:"kubio-options-popover kubio-template-controls-popover",buttonRef:v,anchorRef:2===D?y:_,selectorToIgnoreOnClickOutside:".h-template-wizard__modal",onOpen:()=>S(!0),onClose:()=>S(!1)},(0,a.createElement)(Ue.TemplateLockModal,{title:(0,T.__)("Choose editing mode","kubio")},(0,a.createElement)(Ue.TemplateLockControls,{isWizardShown:P,setIsWizardShown:A,templatePart:I}))),!M&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{isSmall:!0,icon:We,className:"section-icon-container",onClick:()=>{i(n.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}),(0,a.createElement)(E.Button,{isSmall:!0,icon:Ce,className:"section-icon-container",onClick:function(){w(`pattern-inserter/${b}-blocks`,n.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")}))))),(0,a.createElement)(gn,{helperClass:"kubio-list-item-is-sorting",helperContainer:()=>_.current,onSortEnd:({oldIndex:e,newIndex:n})=>{t(B,e,n)},lockAxis:"y",useDragHandle:!0,items:B,onRemove:e=>{r([e.clientId],!1)},onSelect:e=>{i(e.clientId)},area:c}),b&&(0,a.createElement)(E.Button,{isPrimary:!0,onClick:()=>(async(e=c)=>{const t=h().get(dn,e,m);w(`pattern-inserter/${t}`,n.clientId)})(),className:((e,t=[])=>c===ln.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" "))(0,["kubio-button-add-blocks","kubio-sidebar-add-section-button"])},(0,a.createElement)("span",{className:"kubio-header-section-main-button"},(()=>{switch(c){case ln.HEADER:return(0,T.__)("Choose header design","kubio");case ln.FOOTER:return(0,T.__)("Choose footer design","kubio");case ln.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})())))},bn=(0,S.compose)((0,C.withSelect)((e=>{const{getSelectedBlockClientId:t,getBlock:n,getBlockParents:o,getClientIdsWithDescendants:r}=e("core/block-editor"),i=r().map(n).filter((({name:e})=>un.includes(e)));return{selectedBlockClientId:t(),templateParts:i,getBlockParents:o}})),(0,C.withDispatch)(((e,{onSelect:t=p.noop,getBlockParents:n,getBlockAttributes:o})=>{const{removeBlocks:r,moveBlockToPosition:i,updateBlockAttributes:a}=e("core/block-editor");return{selectBlock(n){e("core/block-editor").selectBlock(n),t(n)},removeBlocks:r,reorderBlocks:(e,t,o)=>{const r=n(e[t].clientId).pop();i(e[t].clientId,r,r,o)},updateBlockAttribute:(e,t,n)=>{let r=o(e);r=(0,p.set)(r,t,n),a(e,{...r})}}})))((e=>(0,a.createElement)(Yt,null,(0,a.createElement)("div",{className:"block-editor-block-navigation__container kubio-interface kubio-section-list"},(0,a.createElement)("div",{className:"block-editor-block-navigation__label"},(0,a.createElement)(rn,{...e})))))),vn={isDismissable:!0,duration:1e4},yn=()=>{const[e]=(0,_.useIsAIConnected)(),[t,n]=(0,u.useState)(!1),o=(0,u.useRef)(p.noop),r=(0,u.useCallback)((e=>{n(!0),o.current=e}),[]),i=(0,u.useCallback)((t=>{e?null==t||t():r(t)}),[e,r]),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,u.useCallback)((()=>{n(!1),(0,p.isFunction)(o.current)?o.current():l((0,T.__)("Kubio AI connected successfully!","kubio"),vn)}),[l]);return[t&&(0,a.createElement)(_.AIWizard,{onFinish:c,onCancel:()=>n(!1),isFrontPage:!1,isSetup:!0}),i,e,r]},kn=({parentAreaIdentifier:e})=>{const t=`${e}/page-settings`,{isAICapabilityEnabled:n}=(0,C.useSelect)((e=>{const{isAICapabilityEnabled:t=h().noop}=e(g.STORE_KEY)||{};return{isAICapabilityEnabled:t()}}),[]),[o,,,r]=yn();return n?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ne,{title:(0,a.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,a.createElement)(Ee,{icon:ke.KubioAI,size:18}),(0,a.createElement)("span",null,(0,T.__)("AI Settings","kubio"))),areaIdentifier:t,onOpen:r,buttonOnly:!0,showArrow:!1,proOnly:ye.AI_IN_PRO,urlArgs:{source:"AI",content:"ai-settings"}}),o):(0,a.createElement)(a.Fragment,null)},En=window.wp.apiFetch;var Sn=n.n(En);const wn=async()=>await Sn()({path:"kubio/v1/3rd_party_themes/import_blog"}),Cn=window.wp.url,In=["home","index","single","search","archive","singular"],Tn=()=>{const e=(0,b.useGetGlobalSessionProp)("ready",!1),t=(0,b.useGetGlobalSessionProp)("urlBasedTemplatesMap",{}),n=(0,b.useSetGlobalSessionProp)("urlBasedTemplatesMap",{}),[o,r]=(0,u.useState)(!1),{getEntity:i,page:a,templateType:l,templateId:s,hasQueryBlock:c}=(0,C.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getClientIdsWithDescendants:n,getBlock:o}=e("core/block-editor"),{getPage:r,getEditedPostType:i,getEditedPostId:a}=e(g.STORE_KEY);return{getEntity:t,page:r(),templateType:i(),templateId:a(),hasQueryBlock:n().map((e=>o(e))).some((e=>"core/query"===e.name))}}),[]);(0,u.useEffect)((()=>{e||r(!1)}),[e]);const d=(0,u.useCallback)((()=>{const e=i("postType",l,s),t=null==e?void 0:e.kubio_template_source;r(!["kubio","kubio-custom"].includes(t)&&c&&(0,ye.getBackendData)("allow3rdPartyBlogOverride",!0))}),[i,c,s,l]),m=(0,u.useCallback)((async()=>{if(null==a||!a.path)return;let e=t[null==a?void 0:a.path],o=!0;if(!e&&null!==e){const r=await window.fetch((0,Cn.addQueryArgs)(null==a?void 0:a.path,{"__kubio-classic-page-template-slug":1})).then((e=>e.json()));e=r.data||null,n({...t,[null==a?void 0:a.path]:e}),o=r.success}r(o&&In.includes(e)&&(0,ye.getBackendData)("allow3rdPartyBlogOverride",!0))}),[null==a?void 0:a.path,n,t]),p=(0,u.useCallback)(((e,t)=>{if(e&&t){var n;const t=null==e||null===(n=e.split("//"))||void 0===n?void 0:n.pop();In.includes(t)?d():r(!1)}else m()}),[d,m]);return(0,u.useEffect)((()=>{e&&p(s,l)}),[e,p,s,l]),o},xn=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,b.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),r=Tn(),{createSuccessNotice:i,createErrorNotice:l}=(0,C.useDispatch)("core/notices"),s=(0,u.useCallback)((async()=>{t(!0);try{await wn()}catch(e){return void l((0,T.__)("There was an error while importing the Kubio blog. Please try again","kubio"))}o(!0),i((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),t(!1)}),[l,i,o]);return!r||r&&n?(0,a.createElement)(a.Fragment,null):(0,a.createElement)("div",{className:"kubio-sidebar-blog-area-import"},(0,a.createElement)("h2",null,(0,T.__)("💫 Start with the Kubio blog!","kubio")),(0,a.createElement)("p",null,(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,a.createElement)("br",null),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,a.createElement)(E.Button,{isPrimary:!0,isBusy:e,onClick:s},!e&&(0,T.__)("Import Kubio blog","kubio"),e&&(0,T.__)("Importing Kubio blog…","kubio")))};function Pn(){const e=(0,b.useCurrentPageBodyClasses)(),{additionalCSS:t,setAdditionalCSS:n}=(0,v.useGlobalAdditionalCSS)(),[o,r]=(0,u.useState)(t);(0,u.useEffect)((()=>{t!==o&&r(t)}),[t]);const i=(0,S.useDebounce)(n,300);return(0,a.createElement)(E.PanelBody,{initialOpen:!0,title:(0,T.__)("Additional CSS","kubio")},(0,a.createElement)(Ue.CodeMirrorControl,{value:o,onChange:e=>{i(e),r(e)},mode:"css"}),e&&!!e.length&&(0,a.createElement)(Ue.ControlNotice,{content:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,T.__)("Current page has the following classes that can be used as top selectors:","kubio")),(0,a.createElement)("div",null,(0,a.createElement)("strong",null,e.join(", "))))}))}const Rn=({areaIdentifier:e})=>{const t=(0,C.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()),[]),n=null==t?void 0:t.endsWith(e);return(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(Pn,null))},An=({parentAreaIdentifier:e})=>(0,a.createElement)(Ne,{title:(0,T.__)("Additional CSS","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/additional-css`},(0,a.createElement)(Rn,{areaIdentifier:`${e}/additional-css`})),On=window.kubio.log;var Nn=n(9590),Mn=n.n(Nn);function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}var Bn=/^\s+/,Ln=/\s+$/;function zn(e,t){if(t=t||{},(e=e||"")instanceof zn)return e;if(!(this instanceof zn))return new zn(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,o=null,r=null,i=null,a=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(Bn,"").replace(Ln,"").toLowerCase();var t,n=!1;if(to[e])e=to[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=go.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=go.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=go.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=go.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=go.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=go.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=go.hex8.exec(e))?{r:ao(t[1]),g:ao(t[2]),b:ao(t[3]),a:uo(t[4]),format:n?"name":"hex8"}:(t=go.hex6.exec(e))?{r:ao(t[1]),g:ao(t[2]),b:ao(t[3]),format:n?"name":"hex"}:(t=go.hex4.exec(e))?{r:ao(t[1]+""+t[1]),g:ao(t[2]+""+t[2]),b:ao(t[3]+""+t[3]),a:uo(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=go.hex3.exec(e))&&{r:ao(t[1]+""+t[1]),g:ao(t[2]+""+t[2]),b:ao(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==Dn(e)&&(fo(e.r)&&fo(e.g)&&fo(e.b)?(t=function(e,t,n){return{r:255*ro(e,255),g:255*ro(t,255),b:255*ro(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):fo(e.h)&&fo(e.s)&&fo(e.v)?(o=so(e.s),r=so(e.v),t=function(e,t,n){e=6*ro(e,360),t=ro(t,100),n=ro(n,100);var o=Math.floor(e),r=e-o,i=n*(1-t),a=n*(1-r*t),l=n*(1-(1-r)*t),s=o%6;return{r:255*[n,a,i,i,l,n][s],g:255*[l,n,n,a,i,i][s],b:255*[i,i,l,n,n,a][s]}}(e.h,o,r),a=!0,l="hsv"):fo(e.h)&&fo(e.s)&&fo(e.l)&&(o=so(e.s),i=so(e.l),t=function(e,t,n){var o,r,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=ro(e,360),t=ro(t,100),n=ro(n,100),0===t)o=r=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;o=a(s,l,e+1/3),r=a(s,l,e),i=a(s,l,e-1/3)}return{r:255*o,g:255*r,b:255*i}}(e.h,o,i),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=oo(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Fn(e,t,n){e=ro(e,255),t=ro(t,255),n=ro(n,255);var o,r,i=Math.max(e,t,n),a=Math.min(e,t,n),l=(i+a)/2;if(i==a)o=r=0;else{var s=i-a;switch(r=l>.5?s/(2-i-a):s/(i+a),i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,l}}function Gn(e,t,n){e=ro(e,255),t=ro(t,255),n=ro(n,255);var o,r,i=Math.max(e,t,n),a=Math.min(e,t,n),l=i,s=i-a;if(r=0===i?0:s/i,i==a)o=0;else{switch(i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:r,v:l}}function Hn(e,t,n,o){var r=[lo(Math.round(e).toString(16)),lo(Math.round(t).toString(16)),lo(Math.round(n).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Un(e,t,n,o){return[lo(co(o)),lo(Math.round(e).toString(16)),lo(Math.round(t).toString(16)),lo(Math.round(n).toString(16))].join("")}function Wn(e,t){t=0===t?0:t||10;var n=zn(e).toHsl();return n.s-=t/100,n.s=io(n.s),zn(n)}function jn(e,t){t=0===t?0:t||10;var n=zn(e).toHsl();return n.s+=t/100,n.s=io(n.s),zn(n)}function Kn(e){return zn(e).desaturate(100)}function Vn(e,t){t=0===t?0:t||10;var n=zn(e).toHsl();return n.l+=t/100,n.l=io(n.l),zn(n)}function $n(e,t){t=0===t?0:t||10;var n=zn(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),zn(n)}function qn(e,t){t=0===t?0:t||10;var n=zn(e).toHsl();return n.l-=t/100,n.l=io(n.l),zn(n)}function Yn(e,t){var n=zn(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,zn(n)}function Zn(e){var t=zn(e).toHsl();return t.h=(t.h+180)%360,zn(t)}function Xn(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=zn(e).toHsl(),o=[zn(e)],r=360/t,i=1;i<t;i++)o.push(zn({h:(n.h+i*r)%360,s:n.s,l:n.l}));return o}function Qn(e){var t=zn(e).toHsl(),n=t.h;return[zn(e),zn({h:(n+72)%360,s:t.s,l:t.l}),zn({h:(n+216)%360,s:t.s,l:t.l})]}function Jn(e,t,n){t=t||6,n=n||30;var o=zn(e).toHsl(),r=360/n,i=[zn(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,i.push(zn(o));return i}function eo(e,t){t=t||6;for(var n=zn(e).toHsv(),o=n.h,r=n.s,i=n.v,a=[],l=1/t;t--;)a.push(zn({h:o,s:r,v:i})),i=(i+l)%1;return a}zn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=oo(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Gn(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Gn(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=Fn(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Fn(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return Hn(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,r){var i=[lo(Math.round(e).toString(16)),lo(Math.round(t).toString(16)),lo(Math.round(n).toString(16)),lo(co(o))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*ro(this._r,255))+"%",g:Math.round(100*ro(this._g,255))+"%",b:Math.round(100*ro(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*ro(this._r,255))+"%, "+Math.round(100*ro(this._g,255))+"%, "+Math.round(100*ro(this._b,255))+"%)":"rgba("+Math.round(100*ro(this._r,255))+"%, "+Math.round(100*ro(this._g,255))+"%, "+Math.round(100*ro(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(no[Hn(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Un(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var r=zn(e);n="#"+Un(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return zn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Vn,arguments)},brighten:function(){return this._applyModification($n,arguments)},darken:function(){return this._applyModification(qn,arguments)},desaturate:function(){return this._applyModification(Wn,arguments)},saturate:function(){return this._applyModification(jn,arguments)},greyscale:function(){return this._applyModification(Kn,arguments)},spin:function(){return this._applyModification(Yn,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Jn,arguments)},complement:function(){return this._applyCombination(Zn,arguments)},monochromatic:function(){return this._applyCombination(eo,arguments)},splitcomplement:function(){return this._applyCombination(Qn,arguments)},triad:function(){return this._applyCombination(Xn,[3])},tetrad:function(){return this._applyCombination(Xn,[4])}},zn.fromRatio=function(e,t){if("object"==Dn(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:so(e[o]));e=n}return zn(e,t)},zn.equals=function(e,t){return!(!e||!t)&&zn(e).toRgbString()==zn(t).toRgbString()},zn.random=function(){return zn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},zn.mix=function(e,t,n){n=0===n?0:n||50;var o=zn(e).toRgb(),r=zn(t).toRgb(),i=n/100;return zn({r:(r.r-o.r)*i+o.r,g:(r.g-o.g)*i+o.g,b:(r.b-o.b)*i+o.b,a:(r.a-o.a)*i+o.a})},zn.readability=function(e,t){var n=zn(e),o=zn(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},zn.isReadable=function(e,t,n){var o,r,i=zn.readability(e,t);switch(r=!1,o=function(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}(n),o.level+o.size){case"AAsmall":case"AAAlarge":r=i>=4.5;break;case"AAlarge":r=i>=3;break;case"AAAsmall":r=i>=7}return r},zn.mostReadable=function(e,t,n){var o,r,i,a,l=null,s=0;r=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(o=zn.readability(e,t[c]))>s&&(s=o,l=zn(t[c]));return zn.isReadable(e,l,{level:i,size:a})||!r?l:(n.includeFallbackColors=!1,zn.mostReadable(e,["#fff","#000"],n))};var to=zn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},no=zn.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(to);function oo(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function ro(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function io(e){return Math.min(1,Math.max(0,e))}function ao(e){return parseInt(e,16)}function lo(e){return 1==e.length?"0"+e:""+e}function so(e){return e<=1&&(e=100*e+"%"),e}function co(e){return Math.round(255*parseFloat(e)).toString(16)}function uo(e){return ao(e)/255}var mo,po,ho,go=(po="[\\s|\\(]+("+(mo="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+mo+")[,|\\s]+("+mo+")\\s*\\)?",ho="[\\s|\\(]+("+mo+")[,|\\s]+("+mo+")[,|\\s]+("+mo+")[,|\\s]+("+mo+")\\s*\\)?",{CSS_UNIT:new RegExp(mo),rgb:new RegExp("rgb"+po),rgba:new RegExp("rgba"+ho),hsl:new RegExp("hsl"+po),hsla:new RegExp("hsla"+ho),hsv:new RegExp("hsv"+po),hsva:new RegExp("hsva"+ho),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function fo(e){return!!go.CSS_UNIT.exec(e)}const bo=g.colorPalettes,_o=(e,t,n=null)=>{e=zn(e).toHsl();const o=n||t,r=t;return zn({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},vo=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,v.useGlobalDataColors)(),o=e(),r=n(),[i,l]=(0,u.useState)(o),c=(0,u.useCallback)(((e,n)=>{const o=zn(n),r=[o._r,o._g,o._b],a=[...i];a[e]={...a[e],color:r},Mn()(i[e].color,a[e].color)||(l(a),t(a))}),[l,t,i]),d=(0,u.useCallback)((e=>{l([...e]),t([...e])}),[l,t]),m=e=>()=>{d(e.colors)},{isKubioTheme:p}=(0,C.useSelect)((e=>{var t;const{getSettings:n}=e(g.STORE_KEY);return{isKubioTheme:(null===(t=n())||void 0===t?void 0:t.isKubioTheme)||null}})),f=e=>t=>{c(e,t)},b=(0,u.useCallback)((()=>{const e={slug:"kubio-color-"+(parseInt(i.length)+1),color:[255,255,255]};i.push(e),t(i,!1)}),[t,i]),_=(0,u.useCallback)((e=>{i.splice(e,1),t(i)}),[t,i]),y=(0,s.useDeepMemo)((()=>{const e=[];return h().isEmpty(r)||e.push({label:(0,T.__)("Previous","kubio"),colors:r}),e.concat(bo)}),[r]);return(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Color Palette","kubio"),className:"kubio-color-palette-panel"},(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(E.Flex,{justify:"center",className:""},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(E.BaseControl,null,(0,T.__)("Current color scheme","kubio"))),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)("span",{className:"c-components-units-list"},(0,a.createElement)("span",{role:"button",tabIndex:0,key:"palette-add-color",className:"c-components-units-list__item is-selected add-colors-button",onClick:b},(0,T.__)("Add colors","kubio"))))),(0,a.createElement)(E.Flex,{gap:0,className:"kubio-current-colors-palette"},i.map((({color:e,slug:t},n)=>{const o=`rgb(${e.join(",")})`;return(0,a.createElement)(Ue.ColorIndicatorPopover,{key:`${t}-${n}`,color:o,onChange:f(n),alpha:!1,showPalette:!1,returnRawValue:!0,disabled:!1,hasButton:n>5,buttonIcon:!1,buttonText:(0,T.__)("Remove color","kubio"),onReset:()=>_(n)})})))),(0,a.createElement)(yo,{onChange:l}),!p&&(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("More Palettes","kubio"),className:"more_palettes_base"},y.map(((e,t)=>(0,a.createElement)(E.BaseControl,{label:e.label,key:t,className:R()("kubio-color-scheme-base-control")},(0,a.createElement)(E.Button,{className:"kubio-color-scheme-selector",onClick:m(e),key:e.label},(0,a.createElement)("div",{className:"kubio-color-scheme-selector__grid"},e.colors.map((({slug:e,color:t})=>(0,a.createElement)(Ue.ColorIndicator,{key:e,value:`rgb(${t.join(",")})`}))))))))))},yo=({onChange:e=h().noop})=>{const{setPalette:t}=(0,v.useGlobalDataColors)(),{isAICapabilityEnabled:n}=(0,C.useSelect)((e=>{const{isAICapabilityEnabled:t}=e(g.STORE_KEY);return{isAICapabilityEnabled:t()}})),[o,r,i]=yn(),[l]=(0,_.useAIData)(),[s,c]=(0,u.useState)(!1),d=(0,u.useCallback)((async()=>{const{siteContext:n={},pageContext:o={},pageTitle:r=""}=l,{siteMood:i="neutral"}=n;try{c(!0);let a=await(0,_.generateColorScheme)({pageContext:o,siteContext:n,pageTitle:r,mood:i});a=(0,v.normalizeColorPalette)([...a,_o(a[1],98,100),_o(a[0],5,10)]),t(a),e(a)}catch(e){On.Log.error("Error determining site colors",e)}finally{c(!1)}}),[l,t]);return(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(a.Fragment,null,o,(0,a.createElement)(E.BaseControl,{className:"kubio-generate-color-scheme-button"},(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,tag:E.Button,icon:ke.KubioAI,className:R()("kubio-ai-button"),isBusy:s,onClick:i?d:r,urlArgs:{source:"AI",content:"generate-ai-color-scheme"}},s?(0,T.__)("Generating color scheme…","kubio"):(0,T.__)("Generate color scheme","kubio")))))},ko=({areaIdentifier:e})=>(0,C.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[])&&(0,a.createElement)(vo,null);function Eo({parentAreaIdentifier:e}){return(0,a.createElement)(Ne,{title:(0,T.__)("Color Scheme","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/color-scheme`},(0,a.createElement)(ko,{areaIdentifier:`${e}/color-scheme`}))}function So(){const{globalStyle:e,getStyleDefaultGlobalValue:t}=(0,v.useGlobalDataStyle)(),n={styledComponent:"transition"};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.PanelBody,{initialOpen:!0,title:(0,T.__)("Effects","kubio")},(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Transition Duration","kubio"),value:e.getStyle("transition.duration",{unit:"s"},{...n}),onChange:t=>((t,o,r)=>e.setStyle("transition.duration",o,{...n}))(0,t),onReset:()=>((o,r)=>{const i={...n},a=t(o,i);a?e.setStyle(o,a,i):e.setStyle(o,null,{...i,unset:!0})})("transition.duration"),min:0,max:5,step:.01})))}const wo=({areaIdentifier:e})=>{const t=(0,C.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,C.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(So,null),!n&&(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Co=({parentAreaIdentifier:e})=>(0,a.createElement)(Ne,{title:(0,T.__)("Global Effects","kubio"),label:(0,T.__)("Effects","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/effects`},(0,a.createElement)(wo,{areaIdentifier:`${e}/effects`})),Io=window.kubio.advancedPanel,To=()=>{const[e,t]=(0,u.useState)(""),{globalStyle:n,resetToInitialData:o}=(0,v.useGlobalDataStyle)(),r="form-fields",i={type:s.WithDataPathTypes.STYLE,style:r,dataHelper:n};return(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Form fields","kubio")},(0,a.createElement)(E.BaseControl,{label:(0,T.__)("State","kubio")},(0,a.createElement)(Io.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","focus","disabled"]}),(0,a.createElement)(Ue.ColorWithPath,{label:(0,T.__)("Text color","kubio"),path:"typography.color",state:e,...i,onReset:o("typography.color",{styledComponent:r,state:e})}),(0,a.createElement)(Ue.ColorWithPath,{label:(0,T.__)("Background color","kubio"),state:e,path:"background.color",showReset:!0,...i,onReset:o("background.color",{styledComponent:r,state:e})}),(0,a.createElement)(Ue.ColorWithPath,{label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:e,...i,onReset:o(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:r,state:e})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.TypographyControlPopupWithPath,{path:"typography",...i,onReset:o("typography",{styledComponent:r})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.BoxUnitValueControlWithPath,{label:(0,T.__)("Padding","kubio"),path:"padding",...i,onReset:o("padding",{styledComponent:r})}),(0,a.createElement)(Ue.BoxUnitValueControlWithPath,{label:(0,T.__)("Margin","kubio"),path:"margin",...i,onReset:o("margin",{styledComponent:r})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.BordersAndRadiusWithPath,{path:"border",...i,withColor:!1,onReset:o("border",{styledComponent:r})})))},xo=({styledElement:e="form-submit-button",title:t=(0,T.__)("Form submit button","kubio")})=>{const[n,o]=(0,u.useState)(""),{globalStyle:r,resetToInitialData:i}=(0,v.useGlobalDataStyle)(),l={type:s.WithDataPathTypes.STYLE,style:e,dataHelper:r};return(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:t},(0,a.createElement)(E.BaseControl,{label:(0,T.__)("State","kubio")},(0,a.createElement)(Io.StatesControl,{activeState:n,setActiveState:o,availableStates:["normal","hover","disabled"]}),(0,a.createElement)(Ue.GradientColorPickerWithPath,{label:(0,T.__)("Background","kubio"),path:"background",state:n,...l,onReset:i("background",{styledComponent:e,state:n})}),(0,a.createElement)(Ue.ColorWithPath,{label:(0,T.__)("Text color","kubio"),path:"typography.color",state:n,...l,onReset:i("typography.color",{styledComponent:e,state:n})}),(0,a.createElement)(Ue.ColorWithPath,{label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:n,...l,onReset:i(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:e,state:n})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.TypographyControlPopupWithPath,{path:"typography",...l,onReset:i("typography",{styledComponent:e})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.BoxUnitValueControlWithPath,{label:(0,T.__)("Padding","kubio"),path:"padding",...l,onReset:i("padding",{styledComponent:e})}),(0,a.createElement)(Ue.BoxUnitValueControlWithPath,{label:(0,T.__)("Margin","kubio"),path:"margin",...l,onReset:i("margin",{styledComponent:e})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.BordersAndRadiusWithPath,{path:"border",...l,withColor:!1,onReset:i("border",{styledComponent:e})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ue.BoxShadowWithPath,{path:"boxShadow",...l,onReset:i("boxShadow",{styledComponent:e})})))},Po=({areaIdentifier:e})=>{const t=(0,C.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,C.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(To,null),(0,a.createElement)(xo,{styledElement:"form-button",title:(0,T.__)("Form button","kubio")}),(0,a.createElement)(xo,{styledElement:"form-submit-button",title:(0,T.__)("Form submit button","kubio")}),(0,a.createElement)(xo,{styledElement:"form-reset-button",title:(0,T.__)("Form reset button","kubio")}),!n&&(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Ro=({parentAreaIdentifier:e})=>(0,a.createElement)(Ne,{title:(0,T.__)("Form Elements","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/form-elements`},(0,a.createElement)(Po,{areaIdentifier:`${e}/form-elements`})),Ao={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6"},Oo={headingType:{values:Ao,options:[{value:Ao.H1,label:"H1"},{value:Ao.H2,label:"H2"},{value:Ao.H3,label:"H3"},{value:Ao.H4,label:"H4"},{value:Ao.H5,label:"H5"},{value:Ao.H6,label:"H6"}]}},No=()=>{const[e,t]=(0,v.useGlobalDataSetting)("googleFonts.serveLocally");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ue.ToggleControl,{label:(0,T.__)("Serve Google Fonts locally","kubio"),value:e,onChange:t}),(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("When this option is turned on the Google Fonts used in your site will be downloaded and served from your server instead of the Google server. This will minimize the DNS requests, reduce the Cumulative Layout Shift and serve your Google Fonts in a 100% GDPR compliant way.","kubio")}))},{weightOptions:Mo,sizeUnitsOptions:Do,sizeUnitsConfig:Bo,styleOptions:Lo,transformOptions:zo,decorationOptions:Fo}=Ue.TypographyConfig,Go=e=>{const{globalStyle:t,getStyleDefaultGlobalValue:n,getStyleInitialDefaultGlobalValue:o}=(0,v.useGlobalDataStyle)();return((e,t,n,o)=>{const r={styledComponent:"body"};return{setTypography:(n,o,i={})=>{const a=i.state?`states.${i.state}`:null;i=(0,p.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=h().merge({},r,i);e.setStyle(l,o,s)},getTypography:(n,o="",i={})=>{const a=i.state?`states.${i.state}`:null;i=(0,p.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=h().merge({},r,i);return e.getStyle(l,o,s)},unsetTypography:(n,i={})=>{const a=i.state?`states.${i.state}`:null;i=(0,p.omit)(i,"state");const l=["typography","holders",t,a,n].filter(Boolean).join("."),s=h().merge({},r,i),c=o(l,s);e.setStyle(l,c,s)}}})(t,e,0,o)},Ho=({getTypography:e,setTypography:t,unsetTypography:n,showTransform:o=!1,showDecoration:r=!0})=>(0,a.createElement)(Ue.PopoverOptionsButton,{label:(0,T.__)("Advanced","kubio"),popoverWidth:250,popupContent:(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Transform","kubio"),options:zo,value:e("transform"),onChange:e=>t("transform",e)}),r&&(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Fo,value:e("decoration",""),onChange:e=>t("decoration",e)}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Style","kubio"),options:Lo,value:e("style"),onChange:e=>t("style",e)}),(0,a.createElement)(Ue.SeparatorHorizontalLine,{fit:!0}),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Line Height","kubio"),value:e("lineHeight"),onChange:e=>t("lineHeight",e),onReset:()=>n("lineHeight"),defaultUnit:"",min:0,max:10,step:.1}),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Letter Spacing","kubio"),value:e("letterSpacing",{value:"",unit:"px"}),onChange:e=>t("letterSpacing",e),onReset:()=>n("letterSpacing"),min:0,max:10,step:.1,units:Do}))}),Uo=({element:e="h1"})=>{const{getTypography:t,setTypography:n,unsetTypography:o}=Go(e),{getFontWeights:r}=(0,v.useGlobalDataFonts)(),i=r(t("family")),l=Mo.filter((e=>-1!==i.indexOf(e.value)));return(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(E.Flex,{className:"kubio-font-family-container general-typography"},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)("span",{className:"kubio-font-family-label"},(0,T.__)("Font family","kubio"))),(0,a.createElement)(E.FlexBlock,{className:"kubio-font-family-container__select"},(0,a.createElement)(Ue.FontPicker,{value:t("family"),onChange:e=>n("family",e)}))),(0,a.createElement)(Ue.GutentagSelectControl,{className:"kubio-select-control-container",label:(0,T.__)("Font weight","kubio"),options:l,value:parseInt(t("weight")),onChange:e=>n("weight",e)}),(0,a.createElement)(Ue.InlineLabeledControl,{label:(0,T.__)("Color","kubio")},(0,a.createElement)(Ue.ColorIndicatorPopover,{color:t("color"),onChange:e=>n("color",e),onReset:()=>o("color"),showReset:!0})),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Do,optionsByUnit:Bo,onChange:e=>n("size",e),value:t("size"),onReset:()=>o("size")}),(0,a.createElement)(Ho,{getTypography:t,setTypography:n,unsetTypography:o,showTransform:!0}))},Wo=()=>{const[e,t]=(0,u.useState)(""),{getTypography:n,setTypography:o,unsetTypography:r}=Go("a");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(E.Flex,{className:"kubio-font-family-container"},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)("span",{className:"kubio-font-family-label"},(0,T.__)("Font family","kubio"))),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(Ue.FontPicker,{label:(0,T.__)("Font family","kubio"),value:n("family"),onChange:e=>o("family",e)}))),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Font Weight","kubio"),options:Mo,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Do,value:n("size"),onChange:e=>o("size",e),onReset:()=>r("size")}),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("State","kubio")},(0,a.createElement)(Io.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover"]})),(0,a.createElement)(Ue.InlineLabeledControl,{label:(0,T.__)("Color","kubio")},(0,a.createElement)(Ue.ColorIndicatorPopover,{color:n("color","",{state:e}),onChange:t=>o("color",t,{state:e}),onReset:()=>{r("color",{state:e})},showReset:!0})),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Fo,value:n("decoration","",{state:e}),onChange:t=>o("decoration",t,{state:e})}),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(Ho,{getTypography:n,setTypography:o,unsetTypography:r,showTransform:!0,showDecoration:!1})))},jo=()=>{const[e,t]=(0,u.useState)("h1"),n=(0,C.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Headings","kubio")},(0,a.createElement)(Ue.ToggleGroup,{label:(0,T.__)("Heading Type","kubio"),options:Oo.headingType.options,value:e,onChange:t}),(0,a.createElement)(Uo,{element:e})),(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Texts","kubio")},(0,a.createElement)(Uo,{element:"p"})),(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Lead text","kubio")},(0,a.createElement)(Uo,{element:"lead"})),(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Links","kubio")},(0,a.createElement)(Wo,null)),(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Adobe TypeKit","kubio")},(0,a.createElement)(Ue.TypeKitSetupInterface,{showNotice:!0})),(0,a.createElement)(E.PanelBody,{initialOpen:!1,title:(0,T.__)("Google Fonts Settings","kubio")},(0,a.createElement)(No,{showNotice:!0})),!n&&(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Ko=({areaIdentifier:e})=>(0,C.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[])?(0,a.createElement)(jo,null):(0,a.createElement)(a.Fragment,null),Vo=({parentAreaIdentifier:e})=>(0,a.createElement)(Ne,{title:(0,T.__)("Typography","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/typography`},(0,a.createElement)(Ko,{areaIdentifier:`${e}/typography`}));let $o=null;const qo=()=>{const{logoImage:e,alternateLogoImage:t,setLogoImage:n,setAlternateLogoImage:o}=(0,v.useSiteLogoImages)(),[r,i]=(0,w.useEntityProp)("root","site","title"),[l,s]=(0,w.useEntityProp)("root","site","description"),{siteIconUrl:c}=(0,C.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),n=t("root","site"),o=$o||(null==n?void 0:n.site_icon),r=o&&e("core").getEntityRecord("root","media",o);return{siteIconUrl:null==r?void 0:r.source_url}}),[$o]),{editEntityRecord:d}=(0,C.useDispatch)("core"),m=(0,u.useCallback)((e=>{var t;const n=null!==(t=parseInt(e))&&void 0!==t?t:void 0;$o=n,d("root","site",void 0,{site_icon:n})}),[d]);return(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Site Identity","kubio"),className:"kubio-site-identity-panel"},(0,a.createElement)(E.BaseControl,{label:(0,T.__)("Site title","kubio"),id:"site-title-control"},(0,a.createElement)(Ue.InputControl,{value:r||"",onChange:e=>i(e)})),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("Tagline","kubio"),id:"tagline-control"},(0,a.createElement)(Ue.InputControl,{value:l||"",onChange:e=>s(e)})),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("Logo image","kubio"),id:"logo-image-control"},(0,a.createElement)(Ue.MediaPicker,{value:e,type:"image",showButton:!0,onReset:()=>{n(null)},buttonLabel:(0,T.__)("Change image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>n(e.id)})),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("Alternate logo image","kubio"),id:"alternate-logo-image-control"},(0,a.createElement)(Ue.MediaPicker,{value:t,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{o(null)},buttonLabel:(0,T.__)("Change alternate image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>o(e.url)})),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(E.BaseControl,{label:(0,T.__)("Site Icon","kubio"),id:"site-icon-control",help:(0,T.__)("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here!","kubio")},(0,a.createElement)(Ue.MediaPicker,{value:""!==c?c:null,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{m(null)},buttonLabel:(0,T.__)("Set site icon","kubio"),onChange:e=>m(e.id)})))},Yo=({areaIdentifier:e})=>{const t=(0,C.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()),[]),n=null==t?void 0:t.endsWith(e);return(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(qo,null))};function Zo({parentAreaIdentifier:e}){return(0,a.createElement)(Ne,{title:(0,T.__)("Site Identity","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/site-identity`},(0,a.createElement)(Yo,{areaIdentifier:`${e}/site-identity`}))}const Xo=()=>{const{globalStyle:e,getPropDefaultGlobalValue:t,getStyleDefaultGlobalValue:n}=(0,v.useGlobalDataStyle)(),o=(t,n,o)=>e.getPropInMedia(t,n,{...o}),r=(t,n)=>o=>e.setPropInMedia(t,o,{...n}),i=(n,o={})=>()=>{const r=t(n,o);e.setPropInMedia(n,r,o)},l={styledComponent:"sectionSpacing"};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.PanelBody,{initialOpen:!0,title:(0,T.__)("Spacing","kubio")},(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Horizontal space between buttons/links","kubio"),units:Ue.sizeUnitsOptions,onChange:r("hSpace"),value:o("hSpace",{unit:"px"}),onReset:i("hSpace")}),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Column contents vertical spacing","kubio"),units:Ue.sizeUnitsOptions,onChange:r("vSpace"),value:o("vSpace",{unit:"px"}),onReset:i("vSpace")}),(0,a.createElement)(Ue.RangeWithUnitControl,{label:(0,T.__)("Section vertical spacing","kubio"),units:Ue.sizeUnitsOptions,value:e.getStyle("padding.top",{unit:"px"},l),onChange:t=>{e.setStyle("padding.top",t,l),e.setStyle("padding.bottom",t,l)},onReset:()=>{const t=n("padding.top",l);e.setStyle("padding.top",t,l);const o=n("padding.bottom",l);e.setStyle("padding.bottom",o,l)}})))},Qo=({areaIdentifier:e})=>{const t=(0,C.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,C.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Xo,null),!n&&(0,a.createElement)(Ue.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}))},Jo=({parentAreaIdentifier:e})=>(0,a.createElement)(Ne,{title:(0,T.__)("Global Spacing","kubio"),label:(0,T.__)("Spacing","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/spacing`},(0,a.createElement)(Qo,{areaIdentifier:`${e}/spacing`}));function er({parentAreaIdentifier:e}){const t=`${e}/general-settings`;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ne,{title:(0,T.__)("General Settings","kubio"),areaIdentifier:t},(0,a.createElement)(Zo,{parentAreaIdentifier:t}),(0,a.createElement)(Vo,{parentAreaIdentifier:t}),(0,a.createElement)(Ro,{parentAreaIdentifier:t}),(0,a.createElement)(Eo,{parentAreaIdentifier:t}),(0,a.createElement)(Jo,{parentAreaIdentifier:t}),(0,a.createElement)(Co,{parentAreaIdentifier:t}),(0,a.createElement)(An,{parentAreaIdentifier:t})))}const tr=({addItem:e})=>{const[t,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)((0,Vt.generateItemInitialData)()),i=(0,u.useRef)(null);return(0,a.createElement)("div",{ref:i},(0,a.createElement)(E.Button,{onClick:()=>n(!0),className:"kubio-button-100",isPrimary:!0},(0,T.__)("Add menu item","kubio")),t&&(0,a.createElement)(E.Popover,{position:"middle left",className:"kubio-options-popover",onClose:()=>{n(!1)},anchorRef:i.current,offset:6,anchor:i.current,flip:!0,shift:!0,resize:!1},(0,a.createElement)(Ue.MenuItemOptions,{item:o,isAdd:!0,onChange:t=>{e(t),n(!1),r((0,Vt.generateItemInitialData)())},afterUpdateClick:()=>n(!1),updateLabel:(0,T.__)("Add item","kubio")})))},nr=({item:e,onItemChange:t,onRemoveItem:n,onTogglePopover:o})=>{const[r,i]=(0,u.useState)(e);(0,u.useEffect)((()=>{i(e)}),[e]);const l=e=>{const n={...r,...e};i(n),t(n)},s=(0,u.useRef)();return(0,a.createElement)("div",{ref:s},(0,a.createElement)(E.Flex,{className:"kubio-inspector-menu-item-content"},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(E.Tooltip,{text:(0,ye.stripTags)(r.label)},(0,a.createElement)("span",{className:"kubio-inspector-menu-item-label"},(0,ye.stripTags)(r.label)))),(0,a.createElement)(E.FlexItem,{className:"kubio-inspector-menu-items-settings"},(0,a.createElement)(E.Flex,{gap:1},(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Button,{className:"kubio-inspector-menu-remove-item",isSmall:!0,iconSize:18,onClick:()=>n(r),icon:ke.DeleteItemIcon})),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(Ue.PopoverOptionsButton,{iconSize:18,popoverClass:"kubio-menu-edit-popover",popoverAnchorRef:s,popupContent:e=>(0,a.createElement)(Ue.MenuItemOptions,{item:r,onChange:l,afterUpdateClick:e}),onPopoverClose:()=>o(!1),onPopoverOpen:()=>o(!0)}))))))},or=(e=[],t=0)=>e.filter((e=>e.parent===t)).map((t=>({...t,children:t.id?or(e,t.id):[]}))),rr=(e,t=0)=>e.map(((e,n)=>[{...(0,p.omit)(e,["children","block"]),order:n+1,parent:t},...rr(e.children||[],e.id)])).reduce(((e,t)=>e.concat(t)),[]),ir=({items:e=[],setItems:t,isResolving:n,hasResolved:o})=>{const[r,i]=(0,u.useState)(-1/0),l=(0,u.useMemo)((()=>or(e)),[e]),s=(0,u.useCallback)((e=>{t(e,!0)}),[t]),c=(0,u.useCallback)((t=>{let n=(0,p.cloneDeep)(e).filter((e=>e.id!==t.id)).map((e=>(e.parent===t.id&&(e.parent=t.parent),e))),o=0;n=n.map((e=>e.parent===t.parent?(o++,{...e,order:o}):e)),s(n)}),[s]),d=(0,u.useCallback)((e=>{const t=rr(e);s(t)}),[s]),m=(0,u.useCallback)((t=>{if(!t.id)return void console.error("Cannot update item without id");const n=(0,p.cloneDeep)(e).map((e=>e.id===t.id?{...e,...t}:e));s(n)}),[s]),h=(0,u.useCallback)((({item:e})=>(0,a.createElement)(nr,{item:e,onItemChange:m,onRemoveItem:c,onTogglePopover:t=>{i(t?e.id:-1/0)}})),[i,m,c]),g=l.length>0,f=(0,u.useCallback)((e=>e.id===r),[r]);return(0,a.createElement)(E.BaseControl,null,(0,a.createElement)("div",{className:"kubio-inspector-menu-tree"},n&&(0,a.createElement)(Ue.LoadingPlaceholder,{message:(0,T.__)("Loading menu …","kubio")}),o&&g&&(0,a.createElement)(Ue.SortableTree,{items:l,renderItem:h,handler:!0,collapsable:!1,onChange:d,isActive:f}),o&&!g&&(0,a.createElement)(Ue.SmallPlaceholder,{message:(0,T.__)("Empty menu","kubio")})))},ar=({menu:e})=>{const{setItems:t,items:n=[],isResolving:o,hasResolved:r}=(0,Vt.useMenuBlockEditor)(e.id),i=(0,u.useCallback)((e=>{t([...n,{...e,order:n.length+1}],!0)}),[n]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Menu Structure","kubio")},(0,a.createElement)(ir,{menuId:e.id,items:n,setItems:t,isResolving:o,hasResolved:r}),(0,a.createElement)(tr,{addItem:i})))},lr=({menu:e,areaIdentifier:t})=>{const n=(0,C.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()));return n&&-1!==n.indexOf(t)&&(0,a.createElement)(ar,{menu:e})},sr=({parentAreaIdentifier:e,menu:t})=>{const n=`${e}/menu-${t.id}`;return(0,a.createElement)(Ne,{title:(0,T.sprintf)(// translators: %s is for the menu name
// translators: %s is for the menu name
(0,T.__)("Menu: %s","kubio"),t.name||(0,T.__)("Unnamed menu","kubio")),label:t.name||(0,T.__)("Unnamed menu","kubio"),parentAreaIdentifier:e,areaIdentifier:n},(0,a.createElement)(lr,{areaIdentifier:n,menu:t}))},cr=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,u.useState)(!1),[r,i]=(0,u.useState)(""),l=(0,u.useRef)(),{saveMenu:s}=(0,C.useDispatch)("core"),{createErrorNotice:c,createInfoNotice:d}=(0,C.useDispatch)(m.store),p=(0,u.useCallback)((()=>{n?d((0,T.__)("Another menu creation is in progress","kubio"),{type:"snackbar"}):(t(!e),i(""))}),[e,t,n]),h=(0,u.useCallback)((async()=>{if(!n){o(!0);try{await s({name:r})}catch(e){c((0,T.__)("Menu creation failed","kubio"),{type:"snackbar"})}t(!1),o(!1)}}),[t,s,r,n,o]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.BaseControl,{className:"kubio-create-menu-button"},(0,a.createElement)(E.Button,{onClick:p,isPrimary:!0,className:"kubio-button-100",ref:l,isBusy:n},(0,T.__)("Create menu","kubio"))),e&&(0,a.createElement)(E.Popover,{position:"middle left",className:"kubio-options-popover",anchorRef:l.current,onClose:()=>t(!1),offset:6},(0,a.createElement)("div",null,(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(Ue.InputControl,{label:(0,T.__)("Menu name","kubio"),onChange:i,value:r,disabled:n})),(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(E.Button,{onClick:h,isPrimary:!0,disabled:n,isBusy:n,className:"kubio-button-100"},(0,T.__)("Create menu","kubio"))))))},ur=({areaIdentifier:e})=>{const{menus:t}=(0,C.useSelect)((e=>{const{getMenus:t,isResolving:n,hasFinishedResolution:o}=e("core"),r=[{per_page:-1}];return{menus:t(...r),isResolvingMenus:n("getMenus",r),hasResolvedMenus:o("getMenus",r)}}));return(0,a.createElement)(a.Fragment,null,null==t?void 0:t.map((t=>(0,a.createElement)(sr,{key:t.id,parentAreaIdentifier:e,menu:t}))))};function dr({parentAreaIdentifier:e}){const t=`${e}/menus-settings`;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ne,{title:(0,T.__)("Menus","kubio"),areaIdentifier:t},(0,a.createElement)(ur,{areaIdentifier:t}),(0,a.createElement)(cr,null)))}const mr=function(){return(0,a.createElement)(I.PostTypeSupportCheck,{supportKeys:["comments","trackbacks"]},(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Discussion","kubio")},(0,a.createElement)(I.PostTypeSupportCheck,{supportKeys:"comments"},(0,a.createElement)(E.PanelRow,null,(0,a.createElement)(I.PostComments,null))),(0,a.createElement)(I.PostTypeSupportCheck,{supportKeys:"trackbacks"},(0,a.createElement)(E.PanelRow,null,(0,a.createElement)(I.PostPingbacks,null)))))};var pr=n(5358);const hr=(0,C.withSelect)((e=>{const{getCurrentPostType:t}=e(pr.Ls),{getPostType:n}=e(w.store);return{postType:n(t())}})),gr=(0,S.compose)(hr)((function({postType:e}){return(0,a.createElement)(I.PostFeaturedImageCheck,null,(0,a.createElement)(E.PanelBody,{title:(0,p.get)(e,["labels","featured_image"],(0,T.__)("Featured image","kubio"))},(0,a.createElement)(I.PostFeaturedImage,null)))})),fr=function(){const{postType:e}=(0,C.useSelect)((e=>{const{getCurrentPostType:t}=e(pr.Ls),{getPostType:n}=e(w.store);return{postType:n(t())}}),[]);return e?(0,a.createElement)(I.PageAttributesCheck,null,(0,a.createElement)(E.PanelBody,{title:(0,p.get)(e,["labels","attributes"],(0,T.__)("Page attributes","kubio"))},(0,a.createElement)(I.PageAttributesParent,null),(0,a.createElement)(E.PanelRow,null,(0,a.createElement)(I.PageAttributesOrder,null)))):null},br=function(){return(0,a.createElement)(I.PostExcerptCheck,null,(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Excerpt","kubio")},(0,a.createElement)(I.PostExcerpt,null)))},_r=(0,S.compose)([(0,C.withSelect)((e=>{const{isPermalinkEditable:t,getCurrentPost:n,isCurrentPostPublished:o,getPermalinkParts:r,getEditedPostAttribute:i,getEditedPostSlug:a}=e(I.store),{getPostType:l}=e(w.store),{link:s}=n(),c=l(i("type")),u=r();return{postLink:s,isEditable:t(),isPublished:o(),isViewable:(0,p.get)(c,["viewable"],!1),postSlug:(0,Cn.safeDecodeURIComponent)(a()),postTypeLabel:(0,p.get)(c,["labels","view_item"]),hasPermalinkParts:!!u,permalinkPrefix:null==u?void 0:u.prefix,permalinkSuffix:null==u?void 0:u.suffix}})),(0,S.ifCondition)((({isEnabled:e,postLink:t,isViewable:n,hasPermalinkParts:o})=>e&&t&&n&&o))])((function({postLink:e,permalinkPrefix:t,permalinkSuffix:n,editPermalink:o,postSlug:r,postTypeLabel:i,isEditable:l}){const[s,c]=(0,u.useState)(!1);let d,m,p;return l&&(d=t&&(0,a.createElement)("span",{className:"edit-post-post-link__link-prefix"},t),m=r&&(0,a.createElement)("span",{className:"edit-post-post-link__link-post-name"},r),p=n&&(0,a.createElement)("span",{className:"edit-post-post-link__link-suffix"},n)),(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Permalink","kubio")},l&&(0,a.createElement)("div",{className:"editor-post-link"},(0,a.createElement)(Ue.InputControl,{label:(0,T.__)("URL Slug","kubio"),value:s?"":r,onChange:e=>{o(e),e?s&&c(!1):s||c(!0)},onBlur:e=>{o((0,I.cleanForSlug)(e.target.value)),s&&c(!1)}}),(0,a.createElement)("p",null,(0,T.__)("The last part of the URL.","kubio")," ",(0,a.createElement)(E.ExternalLink,{href:"https://wordpress.org/support/article/writing-posts/#post-field-descriptions"},(0,T.__)("Read about permalinks","kubio")))),(0,a.createElement)("h3",{className:"edit-post-post-link__preview-label"},i||(0,T.__)("View post","kubio")),(0,a.createElement)("div",{className:"edit-post-post-link__preview-link-container"},(0,a.createElement)(E.ExternalLink,{className:"edit-post-post-link__link",href:e,target:"_blank"},l?(0,a.createElement)(a.Fragment,null,d,m,p):e)))})),vr=function({taxonomy:e,children:t}){const n=(0,p.get)(e,["labels","menu_name"]);return n?(0,a.createElement)(E.PanelBody,{title:n},t):null},yr=function(){return(0,a.createElement)(I.PostTaxonomiesCheck,null,(0,a.createElement)(I.PostTaxonomies,{taxonomyWrapper:(e,t)=>(0,a.createElement)(vr,{taxonomy:t},e)}))};function kr({layoutBlock:e}){const{dataHelper:t}=(0,s.useKubioDataHelper)(e),n=(0,Se.useQueryLayout)(t);return(0,a.createElement)(Ue.SelectWithIconControl,{label:(0,T.__)("Layout","kubio"),...n})}const Er=(0,S.compose)([(0,C.withSelect)((e=>{const{getPage:t=h().noop}=e("kubio/edit-site")||{};return{currentPage:t()}}))])((function(e){const{currentPage:t}=e,{getBlocks:n}=(0,C.useSelect)("core/block-editor"),o=h().get(t,["context","postId"]),[r,i]=(0,u.useState)();return(0,u.useEffect)((()=>{const e=n(),t=(0,ye.findBlockByName)(e,"kubio/query-layout");i(t)}),[n,o]),r?(0,a.createElement)(E.PanelBody,{title:(0,T.__)("Blog layout","kubio"),initialOpen:!0},(0,a.createElement)(kr,{...e,layoutBlock:r})):null})),Sr=function({onNewTemplate:e}){const[t,n]=(0,u.useState)(!1);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"edit-post-template__actions"},(0,a.createElement)(ve.ProItem,{tag:E.Button,isPrimary:!0,onClick:()=>n(!0),urlArgs:{source:"template",content:"create-new"}},(0,T.__)("Create new template","kubio")),t&&(0,a.createElement)(Ue.TemplateWizard,{onNewTemplate:e,onClose:()=>{n(!1)}})))},wr=function(){const{currentPostType:e,currentTemplate:t,currentTemplateLabel:n,availableTemplates:o}=(0,C.useSelect)((e=>{var t;const{getCurrentPageTemplate:n,getCurrentPostType:o,getAvailablePageTemplates:r}=e(g.STORE_KEY),i=o();let a=n();i===a&&(a="");const l=r();return{currentPostType:i,currentTemplate:a,currentTemplateLabel:(null===(t=(0,p.find)(l,{value:a}))||void 0===t?void 0:t.label)||"",availableTemplates:l}}),[]),{onNewTemplate:r,assignTemplate:i,assignClassicTemplate:l}=(0,s.useTemplateData)("header"),c=(0,s.useDeepMemo)((()=>{const e=o.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{});return g.templateGroupPriorities.map((t=>({label:g.templateGroups[t],items:e[t]}))).filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length}))}),[o]);return"page"!==e||"front-page"===(null==t?void 0:t.replace(".php",""))?(0,a.createElement)(a.Fragment,null):(0,a.createElement)(E.PanelBody,{title:(0,T.sprintf)(/* translators: %s: template title */ /* translators: %s: template title */(0,T.__)("Template: %s","kubio"),n)},(0,a.createElement)(Ue.GutentagSelectControl,{hideLabelFromVision:!0,label:(0,T.__)("Template:","kubio"),value:t,onChange:async function(e){Object.values(s.defaultTemplatesByPostType).includes(e)&&(e="");const t=o.find((t=>t.value===e));t&&((null==t?void 0:t.isClassicTemplate)?l(e):i(e))},options:c}),(0,a.createElement)(Sr,{onNewTemplate:r}))},Cr=["page","post","product"],Ir=({areaIdentifier:e})=>{const{currentSidebar:t,isInnerPage:n,isWooPage:o}=(0,C.useSelect)((e=>({isWooPage:e(g.STORE_KEY).getIsWooCommercePage(),currentSidebar:e(g.STORE_KEY).getEditorOpenedSidebar(),isInnerPage:e(g.STORE_KEY).getIsInnerPage()})),[]),r=null==t?void 0:t.endsWith(e),i=n&&!o;return(0,a.createElement)("span",{className:"kubio-page-settings"},r&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Er,null),i&&(0,a.createElement)(wr,null),(0,a.createElement)(_r,null),(0,a.createElement)(yr,null),(0,a.createElement)(gr,null),(0,a.createElement)(br,null),(0,a.createElement)(mr,null),(0,a.createElement)(fr,null)))};function Tr({parentAreaIdentifier:e}){const t=`${e}/page-settings`,{postType:n}=(0,C.useSelect)((e=>{const{getCurrentPostType:t}=e(g.STORE_KEY);return{postType:t()}}),[]);return Cr.includes(n)?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ne,{title:(0,T.__)("Page Settings","kubio"),areaIdentifier:t},(0,a.createElement)(Ir,{areaIdentifier:t}))):null}const xr={family:"Open Sans"},Pr={family:"Work Sans"},Rr={family:"Roboto"},Ar={family:"Playfair Display"},Or={family:"Inter"},Nr={family:"Offside"},Mr={family:"Lekton"},Dr={family:"Architects Daughter"},Br={family:"Poppins"},Lr={family:"Merriweather"},zr={family:"Hlind"},Fr={family:"Alice"},Gr={family:"Montserrat"},Hr={family:"Roboto Mono"},Ur={family:"Fauna One"},Wr={family:"Josefin Sans"},jr={family:"PT Sans"},Kr={family:"Pontano Sans"},Vr={family:"Source Sans Pro"},$r={family:"Mulish"},qr={family:"Prompt"},Yr={family:"La Belle Aurore"},Zr={family:"DM Serif Display"},Xr={family:"DM Sans"},Qr={family:"Abril Fatface"},Jr={family:"IBM Plex Sans Condensed"},ei={family:"Oswald"},ti={family:"Libre Baskerville"},ni={family:"Nunito"},oi={family:"Stint Ultra Expanded"},ri={family:"Yeseva One"},ii={family:"Cinzel"},ai={family:"Rubik"},li={family:"Poiret One"},si={family:"Della Respira"},ci={family:"Expletus Sans"},ui={family:"Sacramento"},di={h1:{weight:300},h2:{weight:600},h3:{weight:600},h4:{weight:600},h5:{weight:600},h6:{weight:600}},mi={h1:{weight:400},h2:{weight:400},h3:{weight:400},h4:{weight:400},h5:{weight:400},h6:{weight:400}},pi=[h().merge({},{h1:Pr,h2:Pr,h3:Pr,h4:Pr,h5:Pr,h6:Pr,p:Rr,lead:Rr,a:Rr},mi),h().merge({},{h1:Ar,h2:Ar,h3:Ar,h4:Or,h5:Ar,h6:Ar,p:Or,lead:Or,a:Or},di),h().merge({},{h1:Nr,h2:Nr,h3:Nr,h4:Nr,h5:Nr,h6:Nr,p:Mr,lead:Mr,a:Mr},mi),h().merge({},{h1:Dr,h2:Dr,h3:Dr,h4:$r,h5:Dr,h6:Dr,p:$r,lead:$r,a:$r},mi),h().merge({},{h1:xr,h2:xr,h3:xr,h4:xr,h5:xr,h6:xr,p:xr,lead:xr,a:xr},di),h().merge({},{h1:Yr,h2:Yr,h3:Yr,h4:qr,h5:Yr,h6:qr,p:qr,lead:qr,a:qr},mi),h().merge({},{h1:Zr,h2:Zr,h3:Zr,h4:Zr,h5:Zr,h6:Zr,p:Xr,lead:Xr,a:Xr},mi),h().merge({},{h1:Qr,h2:Qr,h3:Qr,h4:Qr,h5:Qr,h6:Qr,p:Br,lead:Br,a:Br},mi),h().merge({},{h1:Jr,h2:Jr,h3:Jr,h4:Jr,h5:Jr,h6:Jr,p:Jr,lead:Jr,a:Jr},{h1:{weight:500},h2:{weight:600},h3:{weight:500},h4:{weight:600},h5:{weight:500},h6:{weight:500},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:Pr,h2:Pr,h3:Pr,h4:Pr,h5:Pr,h6:Pr,p:Lr,lead:Lr,a:Lr},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500},p:{weight:300},lead:{weight:300},a:{weight:300}}),h().merge({},{h1:ei,h2:ei,h3:ei,h4:ei,h5:ei,h6:ei,p:Vr,lead:Vr,a:Vr},{h1:{weight:700},h2:{weight:700},h3:{weight:500},h4:{weight:700},h5:{weight:500},h6:{weight:500},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:ti,h2:ti,h3:ti,h4:ti,h5:ti,h6:ti,p:ti,lead:ti,a:ti},{h1:{weight:700},h2:{weight:700},h3:{weight:400},h4:{weight:700},h5:{weight:700},h6:{weight:700},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:ni,h2:ni,h3:ni,h4:ni,h5:ni,h6:ni,p:jr,lead:jr,a:jr},{h1:{weight:800},h2:{weight:600},h3:{weight:800},h4:{weight:800},h5:{weight:600},h6:{weight:600},p:{weight:400},lead:{weight:400},a:{weight:400}}),h().merge({},{h1:oi,h2:oi,h3:oi,h4:oi,h5:oi,h6:oi,p:Kr,lead:Kr,a:Kr},mi),h().merge({},{h1:ri,h2:ri,h3:ri,h4:ri,h5:ri,h6:ri,p:Wr,lead:Wr,a:Wr},mi),h().merge({},{h1:ii,h2:ii,h3:ii,h4:ii,h5:ii,h6:ii,p:Ur,lead:Ur,a:Ur},mi),h().merge({},{h1:ai,h2:ai,h3:ai,h4:ai,h5:ai,h6:ai,p:Hr,lead:Hr,a:Hr},mi),h().merge({},{h1:li,h2:li,h3:li,h4:li,h5:li,h6:li,p:Gr,lead:Gr,a:Gr},mi),h().merge({},{h1:si,h2:si,h3:si,h4:si,h5:si,h6:si,p:xr,lead:xr,a:xr},mi),h().merge({},{h1:ci,h2:ci,h3:ci,h4:ci,h5:ci,h6:ci,p:zr,lead:zr,a:zr},mi),h().merge({},{h1:ui,h2:ui,h3:ui,h4:ui,h5:ui,h6:ui,p:Fr,lead:Fr,a:Fr},mi)],hi=({children:e,scrollIntoView:t=!0,...n})=>{const o=(0,u.useRef)(),r=(0,u.useCallback)((()=>{if(!t)return;const e=o.current.querySelector(".kubio-style-preset-list__item--active");e&&e.scrollIntoView({behavior:"instant"})}),[]);return(0,u.useEffect)((()=>{r()}),[]),(0,a.createElement)("div",{ref:o,className:"kubio-style-preset-list__container"},(0,a.createElement)("div",{className:"kubio-style-preset-list",...n},e))};hi.Item=({isActive:e=!1,className:t,children:n,...o})=>(0,a.createElement)("div",{className:R()("kubio-style-preset-list__item",{"kubio-style-preset-list__item--active":e},t),...o},n);const gi=()=>{const{clearSelectedBlock:e}=(0,C.useDispatch)("core/block-editor"),{openSidebar:t}=(0,C.useDispatch)(g.STORE_KEY)||{};return(0,a.createElement)(Ue.KubioPanelBody,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,T.__)("Typography Presets","kubio")),(0,a.createElement)(E.Tooltip,{text:(0,T.__)("Advanced Settings","kubio")},(0,a.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,a.createElement)(E.Icon,{icon:We,onClick:()=>{e().then((()=>{t("document/general-settings/typography")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,a.createElement)(fi,null))},fi=()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=bi();return(0,a.createElement)(hi,null,e.map(((e,o)=>(0,a.createElement)(_i,{key:o,preset:e,index:o,bodyTypographyHolders:t,onSelect:n}))))},bi=()=>{const{globalStyle:e}=(0,v.useGlobalDataStyle)(),t=(0,u.useMemo)((()=>e.getStyle("typography.holders",{},{styledComponent:"body"})),[e]),n=(0,u.useMemo)((()=>{const e={};return h().each(t,((t,n)=>{"input"!==n&&h().set(e,n,h().pick(t,["family","weight"]))})),e}),[t]),o=(0,u.useRef)(n),r=(0,u.useRef)(!1),i=(0,u.useMemo)((()=>{const e=o.current,t=!pi.find((t=>{let n=!0;return h().each(t,((t,o)=>{t.family!==h().get(e,[o,"family"])&&(n=!1)})),n}));return t?[{isCustom:!0,...e}].concat(pi):pi}),[]),a=(0,u.useCallback)((t=>{r.current=!0,e.setStyle("typography.holders",h().cloneDeep(t),{styledComponent:"body"})}),[e]);return{mergedPresets:i,bodyTypographyHolders:t,onSelectPreset:a}},_i=({preset:e,index:t,bodyTypographyHolders:n,onSelect:o})=>{const r=e.h1.family,i={fontFamily:r},l=e.p.family,s={fontFamily:l},c=h().get(n,"h1.family"),d=h().get(n,"p.family"),m=(0,u.useRef)(),p=(0,u.useRef)(),g=(0,u.useCallback)((()=>{var e;null!==(e=m.current)&&void 0!==e&&e.rel&&(m.current.rel="stylesheet")}),[]),f=(0,u.useCallback)((()=>{var e;null!==(e=p.current)&&void 0!==e&&e.rel&&(p.current.rel="stylesheet")}),[]),b=c===r&&d===l;return(0,a.createElement)(hi.Item,{key:t,isActive:b,onClick:()=>{o(e)}},(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${r}&display=swap`,rel:"preload",as:"style",ref:m,onLoad:g}),(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${l}&display=swap`,rel:"preload",as:"style",ref:p,onLoad:f}),(0,a.createElement)("div",{className:"kubio-style-preset-list__typography"},e.isCustom&&(0,a.createElement)("div",{className:"kubio-style-preset-list__typography__custom"},(0,T.__)("Custom","kubio")),(0,a.createElement)("span",{className:"kubio-style-preset-list__typography__heading-container"},(0,a.createElement)("h2",{style:i},r),b&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(E.Icon,{icon:O}))),(0,a.createElement)("p",{style:s},l)))},vi=g.colorPalettes.map(((e,t)=>({...e,label:(0,T.sprintf)(// translators: %s: number of the preset, Set refers to the color scheme preset
// translators: %s: number of the preset, Set refers to the color scheme preset
(0,T.__)("Set %s","kubio"),t+1)}))),yi=e=>{const{clearSelectedBlock:t}=(0,C.useDispatch)("core/block-editor"),{openSidebar:n}=(0,C.useDispatch)(g.STORE_KEY)||{};return(0,a.createElement)(Ue.KubioPanelBody,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,T.__)("Color Scheme Presets","kubio")),(0,a.createElement)(E.Tooltip,{text:(0,T.__)("Advanced Settings","kubio")},(0,a.createElement)("div",{className:"kubio-style-preset-list__cog"},(0,a.createElement)(E.Icon,{icon:We,onClick:()=>{t().then((()=>{n("document/general-settings/color-scheme")}))}})))),className:"kubio-style-preset-panel",initialOpen:!0},(0,a.createElement)(ki,{...e}))},ki=(0,u.memo)((()=>{const{onHandleClick:e,activePaletteValue:t,customPalette:n,currentPaletteIsCustom:o}=Ei(),{activePalette:r,restOfPalettes:i}=(0,s.useDeepMemo)((()=>{const e=[];return!h().isEmpty(n)&&e.push({label:(0,T.__)("Previous","kubio"),colors:n}),{activePalette:{label:(0,T.__)("Current","kubio"),colors:t},restOfPalettes:e.concat(vi)}}),[o,t,n]);return(0,a.createElement)("div",{className:"kubio-style-presets-color-scheme__container"},(0,a.createElement)(hi,{scrollIntoView:!1},(0,a.createElement)(Si,{palette:r,index:0,onHandleClick:e,activePaletteValue:t})),(0,a.createElement)(yo,null),(0,a.createElement)(Ue.SeparatorHorizontalLine,null),(0,a.createElement)(hi,{scrollIntoView:!1},i.map(((t,n)=>(0,a.createElement)(Si,{key:n,palette:t,index:n,onHandleClick:e,activePaletteValue:null})))))})),Ei=()=>{const{getPalette:e,setPalette:t,getCustomPalette:n}=(0,v.useGlobalDataColors)(),o=e(),r=n(),i=(0,u.useCallback)((e=>{t([...e.colors])}),[t]),a=(0,u.useMemo)((()=>{const e=!g.colorPalettes.find((e=>(0,ye.getColorPalettesAreEqual)(e.colors,o))),t=(0,ye.getColorPalettesAreEqual)(r,o);return e&&!t}),[o,r]);return{mergedPalettes:(0,s.useDeepMemo)((()=>{const e=[];if(!h().isEmpty(r)&&e.push({label:(0,T.__)("Previous","kubio"),colors:r}),a){const t=(0,T.__)("Current","kubio");e.unshift({label:t,colors:o})}return e.concat(vi)}),[a,o,r]),onHandleClick:i,activePaletteValue:o,customPalette:r,currentPaletteIsCustom:a}},Si=({palette:e,index:t,onHandleClick:n,activePaletteValue:o})=>{const r=(0,ye.getColorPalettesAreEqual)(e.colors,o);return(0,a.createElement)(hi.Item,{className:"kubio-style-preset-list__colors",key:t,isActive:r,onClick:()=>n(e)},!!e.label&&(0,a.createElement)("div",{className:"kubio-style-preset-list__item__title"},e.label),(0,a.createElement)("div",{className:"kubio-style-preset-list__colors__item"},e.colors.map((({slug:e,color:t})=>(0,a.createElement)(Ue.ColorIndicator,{key:e,value:`rgb(${t.join(",")})`})))),r&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(E.Icon,{icon:O})))},wi=({parentAreaIdentifier:e})=>{const t=`${e}/style-presets`,n=(0,T.__)("Style Presets","kubio");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ne,{title:(0,a.createElement)("span",{className:"kubio-sidebar-panel-with-icon__title"},(0,a.createElement)(Ee,{icon:ke.StylePresetsIcon}),(0,a.createElement)("span",null,n)),areaIdentifier:t},(0,a.createElement)(Ci,{AREA_IDENTIFIER:t})))},Ci=(0,u.memo)((({AREA_IDENTIFIER:e})=>e===(0,C.useSelect)((e=>{var t,n;return null===(t=e(g.STORE_KEY))||void 0===t||null===(n=t.getEditorOpenedSidebar())||void 0===n?void 0:n.replace("kubio/edit-site/sidebar/","")}),[])?(0,a.createElement)(Ii,null):(0,a.createElement)(a.Fragment,null))),Ii=(0,u.memo)((()=>(0,a.createElement)("div",{className:"kubio-style-preset-panel__container"},(0,a.createElement)(yi,null),(0,a.createElement)(gi,null))));function Ti({beforeSectionsList:e,afterSectionsList:t}){const n=(0,s.usePageTitle)(),{uiVersion:o}=(0,f.useUIVersion)();return(0,a.createElement)(Fe,{title:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"preview-notice"},(0,T.__)("You are editing","kubio")),(0,a.createElement)("span",{className:"panel-title site-title"},(0,ye.fromHtmlEntities)(n))),areaIdentifier:"document"},e,1===o&&(0,a.createElement)(Tr,{parentAreaIdentifier:"document"}),(0,a.createElement)(xn,null),(0,a.createElement)(wi,{parentAreaIdentifier:"document"}),(0,a.createElement)(bn,null),(0,a.createElement)(kn,null),2===o&&(0,a.createElement)(Tr,{parentAreaIdentifier:"document"}),(0,a.createElement)(er,{parentAreaIdentifier:"document"}),(0,a.createElement)(dr,{parentAreaIdentifier:"document"}),t)}const{Slot:xi,Fill:Pi}=(0,E.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),Ri=()=>{const{currentSidebar:e,selectedBlock:t}=(0,C.useSelect)((e=>{var t,n;return{currentSidebar:(null===(t=e(g.STORE_KEY).getEditorOpenedSidebar())||void 0===t||null===(n=t.split)||void 0===n?void 0:n.call(t,"/sidebar/").at(1))||null,selectedBlock:e("core/block-editor").getSelectedBlock()}}),[]),[n]=(0,_e.useCurrentInspectorTab)();return(0,ye.showSupplementaryUpgradeToPRO)()||"document"===e?(0,a.createElement)(ve.UpgradeToPro,{urlArgs:{source:t?t.name:e,content:t?n:""}}):(0,a.createElement)(u.Fragment,null)},Ai=()=>{const{subsidebars:e}=(0,C.useSelect)((e=>({subsidebars:e(g.STORE_KEY).getSubSidebars()})));return(0,b.useGetGlobalSessionProp)("ready",!1)?(0,a.createElement)(u.Fragment,null,(0,a.createElement)(Ti,null),(0,a.createElement)(He,null,(0,a.createElement)(xi,{bubblesVirtually:!0})),(0,p.map)(e,((e,t)=>(0,a.createElement)(u.Fragment,{key:t},e)))):null},Oi=Pi,Ni={content:()=>(0,a.createElement)(_e.ContentBlockInspector,null),style:()=>(0,a.createElement)(_e.StyleBlockInspector,null),advanced:()=>(0,a.createElement)(_e.AdvancedStyleBlockInspector,null)},Mi=(0,Se.getNamesOfBlocks)(),Di=[Mi.HEADER,Mi.FOOTER,Mi.QUERY_LAYOUT,Mi.HERO,Mi.SECTION,Mi.ROW,Mi.COLUMN,Mi.QUERY,Mi.LOOP,Mi.LOOP_ITEM],Bi=[{name:"content",title:()=>{const e=(0,C.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSelectedBlock())||void 0===t?void 0:t.name}));let t=(0,T.__)("Layout","kubio");return-1===Di.indexOf(e)&&(t=(0,T.__)("Content","kubio")),(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(Ee,{icon:ke.LayoutIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},t))},className:"tab-content"},{name:"style",title:()=>(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(Ee,{icon:ke.StyleIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},(0,T.__)("Style","kubio"))),className:"tab-style"},{name:"advanced",title:()=>(0,a.createElement)("span",{className:"kubio-tab-panel"},(0,a.createElement)(Ee,{icon:ke.AdvancedIcon}),(0,a.createElement)("span",{className:"kubio-tab-panel-text"},(0,T.__)("Advanced","kubio"))),className:"tab-advanced"}],Li=()=>{const e=Ni.content;return(0,a.createElement)("div",{className:"kubio-block-inspector-tab-content default-inspector"},(0,a.createElement)(_e.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,a.createElement)(e,null))},zi=(0,S.compose)((0,C.withSelect)((e=>{const{getSelectedBlock:t}=e("core/block-editor"),{hasBlockSupport:n}=e("core/blocks"),o=t();return{isBlockSelected:o&&o.clientId,supportsKubio:o&&(o.name.startsWith("kubio/")||"core/post-content"===o.name||n(o.name,"kubio"))}})))((({isBlockSelected:e,supportsKubio:t})=>{const[n,o]=(0,_e.useCurrentInspectorTab)(),{selectedBlockName:r}=(0,C.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{selectedBlockName:null==t?void 0:t.name}})),i=(0,u.useRef)(!0);(0,u.useMemo)((()=>{i.current=!0}),[r]);const l=(0,C.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site")||{};return"simple"===(null==t?void 0:t())}),[]),s=(0,u.useMemo)((()=>Bi.filter((e=>l&&"advanced"===e.name?null:e))),[l]);return e?t?(0,a.createElement)(Ue.TabPanel,{className:"kubio-advanced-block-inspector",currentTab:n,onSelect:o,tabs:s},(e=>{let t=Ni[e.name];return!0===i.current&&(t=Ni.content,"content"===e.name&&(i.current=!1)),(0,a.createElement)("div",{className:"kubio-block-inspector-tab-content kubio-inspector"},(0,a.createElement)(_e.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),(0,a.createElement)(t,null))})):(0,a.createElement)(Li,null):null})),Fi=window.kubio.styleManager,Gi="editor-styles-wrapper",Hi="wp-editor-classic-layout-styles",Ui=e=>{if("BUTTON"===e.nodeName){const t=["forminator-ui","wpcf7-form ","wpforms-form","mc4wp-form"],n=e.closest("form"),o=t.some((e=>{var t;return null==n||null===(t=n.classList)||void 0===t?void 0:t.contains(e)}));if(n&&!n.getAttribute("action")&&!o)return}e.addEventListener("click",(e=>{e.preventDefault()}))},Wi=(0,u.forwardRef)((function({contentRef:e,children:t,head:n,headHTML:o,contentHolderSelector:r,assetsHolderSelector:i,src:l,onLoad:c=p.noop,execStylesheetCompat:d=!0,...m},h){const[f,_]=(0,u.useState)(),[v,y]=(0,u.useState)(),k=(0,b.useCurrentPageBodyClasses)(),E=(0,b.useSetGlobalSessionProp)("ownerDocument"),w=(0,b.useSetGlobalSessionProp)("blockEditorRootClasses",""),I=(0,u.useRef)(),x=(0,b.useGetGlobalSessionProp)("ready",!1),{currentTemplateSource:P,kubioThemesBaseURL:R}=(0,C.useSelect)((e=>{const{getCurrentKubioTemplateSource:t,getSettings:n}=e(g.STORE_KEY);return{currentTemplateSource:t(),kubioThemesBaseURL:n().kubioThemesBaseURL}}),[]);(0,u.useEffect)((()=>{!x&&l&&(_(null),y(null),E(window.document),(0,Fi.removeStyleManager)(f))}),[l,x,E,f]),(0,u.useEffect)((()=>{if(!x||!f)return;const e=x&&l&&f;["kubio-custom","kubio"].includes(P)?(e=>{let t=e.querySelector(".kubio-block-vars-reset");t||(t=e.createElement("style"),t.classList.add("kubio-block-vars-reset"),t.textContent="\n\t\t:root,\n\t\tbody,\n\t\tbody *,\n\t\t.editor-styles-wrapper .block-editor-block-list__layout.is-root-container > *\n\t\t{\n\t\t\t--wp--style--block-gap:0px;\n\t\t\t--gallery-block--gutter-size:0.5em;\n\t\t\t--global-content-width: unset;\n\t\t}",e.head.appendChild(t))})(f):(e=>{const t=e.querySelector(".kubio-block-vars-reset");var n;t&&(null==t||null===(n=t.remove)||void 0===n||n.call(t))})(f),f.querySelectorAll(["wp-reset-editor-styles-css","wp-editor-classic-layout-styles-css","common-css","forms-css"].map((e=>`link#${e}`))).forEach((t=>{t.sheet&&(t.sheet.disabled=e)}))}),[x,l,P,f,R]),(0,u.useEffect)((()=>{if(f&&k.length){const e=Array.from(f.body.classList);f.body.setAttribute("class",(0,p.uniq)(e.concat(k)).join(" "))}}),[f,k]);const[,A]=(0,b.useGlobalSessionProp)("blocksOwnerDocument",null,[]),[,O]=(0,b.useGlobalSessionProp)("currentPageHasBlocksContent",null,[]),N=(0,u.useCallback)((t=>{function n(){const{contentDocument:n}=t,{readyState:i,body:a}=n;if("complete"!==i)return!1;"function"==typeof e?e(a):e&&(e.current=a);const s=["a",'[type="submit"]',"form button"];new n.defaultView.MutationObserver((function(e){(0,p.each)(e,(function(e){e.target.querySelectorAll(s.join(",")).forEach(Ui)}))})).observe(n,{childList:!0,subtree:!0}),n.querySelectorAll(s.join(",")).forEach(Ui),d&&function(e){const t=new Map;Array.from(document.styleSheets).forEach((n=>{try{n.cssRules}catch(e){return}const{ownerNode:o,cssRules:r}=n;r&&Array.from(r).find((({selectorText:e})=>e&&(e.includes(`.${Gi}`)||e.includes(".wp-block"))))&&!t.has(o)&&(o.id&&-1!==o.id.indexOf(Hi)||o.href&&-1!==o.href.indexOf(Hi)?e.head.prepend(o.cloneNode(!0)):e.head.appendChild(o.cloneNode(!0)),t.set(o,!0))}))}(n),n.defaultView.isKubioBlockEditor=!0,n.defaultView.isInsideIframe=!0,n.defaultView.requestIdleCallback=n.defaultView.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},n.defaultView.cancelIdleCallback=n.defaultView.cancelIdleCallback||function(e){clearTimeout(e)},function(e,t){e.head.innerHTML="<style>/* head style start */</style>"+t+"<style>/* head style end */</style><style>*{scroll-behavior:  auto !important; } html#kubio {height:auto!important; margin-top:initial !important}</style>"+e.head.innerHTML}(n,o),function(e){const{defaultView:t}=e,{frameElement:n}=t;function o(e){const{keyCode:o,ctrlKey:r,metaKey:i}=e;if((65===o||95===o)&&(r||i)){const t=e.target.hasAttribute("contenteditable")?e.target:e.target.closest("[contenteditable]");if(t)return((e,t)=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e&&e.ownerDocument.execCommand("selectAll",!1,null),!1))(t,e)}const a=Object.getPrototypeOf(e).constructor.name,l=window[a],s={};for(const t in e)s[t]=e[t];if(e instanceof t.MouseEvent){const e=n.getBoundingClientRect();s.clientX+=e.left,s.clientY+=e.top}const c=new l(e.type,s);c.iframeEvent=!0,!n.dispatchEvent(c)&&e.preventDefault()}const r=["keydown","keypress","dragover"];for(const t of r)e.addEventListener(t,o)}(n),_(n),E(n);let u=r&&n.querySelector(r),m="";if(r&&u){const e=u.parentElement;1===e.children.length&&(u.remove(),u=e),m=u.getAttribute("class"),u.setAttribute("class","kubio-hybrid-template-content-edit")}w(m);let h=n.body;return u?(h=u,O(!0)):(l||r)&&(h.classList.add("kubio-hybrid-no-block-content"),O(!1)),h.classList.add(Gi),h.classList.add("wp-embed-responsive"),c(t,n),y(h),A(n),!0}t&&(t.contentDocument.body.parentElement.className="kubio-iframe",l?t.addEventListener("load",(()=>{n()})):n()||t.addEventListener("load",(()=>{n()})))}),[]),M=(0,u.useMemo)((()=>!!f&&(i&&f.querySelector(i)||f.head)),[i,f]),D=(0,u.useMemo)((()=>({ownerDocument:f||window.document})),[f]);return(0,a.createElement)(s.OwnerDocumentContext.Provider,{value:D},(0,a.createElement)("iframe",{...m,ref:(0,S.useMergeRefs)([h,N,I]),tabIndex:"0",title:(0,T.__)("Editor canvas","kubio"),className:"kubio-iframe",name:"editor-canvas",src:l},v&&(0,u.createPortal)(t,v),M&&(0,u.createPortal)(n,M)))})),ji=async(e,t)=>new Promise((n=>{if(-1!==Array.from(e.ownerDocument.querySelectorAll("script[src]")).map((e=>e.src)).indexOf(t))return;const o=e.ownerDocument.createElement("script");o.async=!0,o.src=t,e.appendChild(o),o.addEventListener("load",n)})),Ki=(0,p.debounce)((async(e,t,n=p.noop)=>{for(n(),t=window.structuredClone(t);t.length;){const n=t.shift();await ji(e,n)}}),1e3),Vi=[{value:"infographic-label",label:(0,T.__)("infographic label","kubio")},{value:"infographic-number",label:(0,T.__)("infographic number","kubio")},{value:"address",label:(0,T.__)("address","kubio")},{value:"phone",label:(0,T.__)("phone number","kubio")},{value:"email",label:(0,T.__)("email","kubio")}],$i=({setIsModalVisible:e})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.MenuGroup,{className:"kubio-block-settings-control kubio-block-settings-ai-desc"},(0,a.createElement)(E.MenuItem,{onClick:()=>e(!0)},(0,T.__)("AI block short desc","kubio")))),qi=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,u.useState)(""),r=(0,u.useRef)({clientId:null,onClose:p.noop}),{dataHelper:i}=(0,s.useKubioDataHelper)({clientId:r.current.clientId});(0,u.useEffect)((()=>{o(i.getAttribute("kubioAI.desc",""))}),[i,r.current.clientId]);const l=(0,u.useCallback)((()=>{i.setAttribute("kubioAI.desc",n||""),t(!1),r.current.onClose()}),[i,n]),c=(0,u.useCallback)((()=>{t(!1),r.current.onClose()}),[]),d=(0,u.useCallback)(((e,n)=>{r.current={clientId:n,onClose:e},t(!0)}),[]);return(0,a.createElement)(a.Fragment,null,e&&(0,a.createElement)(E.Modal,{title:(0,T.__)("Element short description","kubio"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:c},(0,a.createElement)(E.BaseControl,null,(0,a.createElement)(Ue.SuggestionsInput,{label:(0,T.__)("Description","kubio"),options:Vi,value:n,onChange:o,filterKeys:["value","label"],onSuggestionClick:(e,t)=>t(e.value),optionRender:e=>(0,a.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,a.createElement)("span",null,e.label),(0,a.createElement)("i",null,e.value))})),(0,a.createElement)(E.Flex,{align:"flex-start"},(0,a.createElement)(E.Button,{variant:"primary",onClick:l},(0,T.__)("Save","kubio")),(0,a.createElement)(E.Button,{variant:"secondary",onClick:c},(0,T.__)("Cancel","kubio")))),(0,a.createElement)(k.BlockSettingsMenuControls,null,(({onClose:e,firstBlockClientId:t})=>(0,a.createElement)($i,{setIsModalVisible:()=>d(e,t)}))))},Yi=e=>{const{children:t,className:n}=e,o=(0,u.useRef)(),r=(0,u.useRef)(),[i,l]=(0,b.useGlobalSessionProp)("containerBgMediaUploadRef",{dataHelper:null,ref:null,blockId:null,value:null});(0,u.useEffect)((()=>{null!==r.current&&l({...i,ref:r})}),[r.current]);const s=(0,b.useGetGlobalSessionProp)("ready",!1);return(0,u.useLayoutEffect)((()=>{const e=o.current;if(e&&s){var t;const n=null===(t=e.ownerDocument.querySelector("#kubio-scripts-template"))||void 0===t?void 0:t.content.querySelectorAll("script");n&&Ki(e.ownerDocument.head,Array.from(n).map((({src:e})=>e)).filter(Boolean))}}),[s]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{ref:o}),(0,a.createElement)(k.WritingFlow,null,(0,a.createElement)(k.BlockList,{className:R()(n,"edit-site-block-editor__block-list","kubio-block-editor__block-list"),renderAppender:Se.KubioBlockAppender}),(0,ye.getShowInternalFeatures)("ai")&&(0,a.createElement)(qi,null),t),(0,a.createElement)(k.MediaUploadCheck,null,(0,a.createElement)(k.MediaUpload,{allowedTypes:["image","video"],value:i.value,onSelect:e=>{const{dataHelper:t}=i;if(!t)return;const n=t.getStyle("background");"image"===n.type&&"image"===e.type?n.image[0].source.url=e.url:"video"===n.type&&"video"===e.type&&(n.video.internal.url=e.url),t.setStyle("background",n)},render:({open:e})=>(0,a.createElement)("div",{ref:r,onClick:e})})))};var Zi=n(9457),Xi=n.n(Zi);const Qi=()=>(0,a.createElement)("div",{className:"kubio-loading-logo"},(0,a.createElement)(E.Icon,{icon:ke.KubioLoader})),Ji=(0,u.memo)((()=>{const e=(0,S.useRefEffect)((e=>{e.contentWindow.document.open(),e.contentWindow.document.write(Xi()),e.contentWindow.document.close();const t=e.contentDocument||e.contentWindow.document,n=null==t?void 0:t.querySelector("#content");n&&(0,s.reactRender)((0,a.createElement)(Qi,null),n)}),[]);return(0,a.createElement)("iframe",{title:"kubio-loader",ref:e,className:"kubio-loading-logo-iframe"})}));let ea;const ta=(e,t)=>{var n,o;e&&(null===(n=e.querySelector("#kubio-editor-view"))||void 0===n||null===(o=n.classList)||void 0===o||o.remove("device-change-animation"),t?ea=e.defaultView.setTimeout((()=>{e.body.classList.add("kubio-iframe-holder--show"),e.body.classList.remove("kubio-iframe-holder--hide"),e.body.classList.remove("h-ui-disable-transitions")}),100):(e.defaultView.clearTimeout(ea),e.body.classList.remove("kubio-iframe-holder--show"),e.body.classList.add("kubio-iframe-holder--hide"),e.body.classList.add("h-ui-disable-transitions")))},na=(0,S.pure)((({iframe:e,deviceType:t})=>{const n=(0,k.__experimentalUseResizeCanvas)(t,!0),o=(0,u.useRef)(),r=(0,u.useRef)(),i=(0,u.useRef)(),l=(0,S.useMergeRefs)([o,(0,k.__unstableUseTypingObserver)()]);return(0,b.useEditorIsLoadedChanged)((e=>{var t,n;ta(null===(t=i.current)||void 0===t?void 0:t.ownerDocument,e),ta(null===(n=o.current)||void 0===n?void 0:n.ownerDocument,e)})),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.BlockTools,{className:"kubio-block-tools",__unstableContentRef:o},(0,a.createElement)("div",{id:"kubio-editor-view",ref:r},(0,a.createElement)("div",{id:"kubio-iframe-holder",className:"editor-styles-wrapper edit-site-block-editor__editor-styles-wrapper",style:n,ref:i},e(l)),(0,a.createElement)(Ji,{key:"kubio-blinking-iframe"}))))})),oa="<style>body{width:100%;max-width:100%;overflow-x:hidden;}</style>",ra=()=>{const[e]=(0,_.useIsAIConnected)(),[t,n]=(0,_.useAIServiceInfo)(),o=(0,b.useGetGlobalSessionProp)("ready"),r=(0,u.useRef)(!1);(0,u.useEffect)((()=>{!r.current&&o&&e&&(r.current=!0,"started"!==t.state&&"ready"!==t.state)&&(n({remainingCredits:0,perPageCredits:1/0,state:"started"}),(async()=>{const{remaining_credits:e=0,per_page_credits:o=480,account_email:r=null,ai_image_cost:i=150,ai_section_cost:a=30}=await(0,_.getAIInfo)();n({...t,state:"ready",remainingCredits:e,perPageCredits:o,email:r,aiImageCost:i,aiSectionCost:a})})())}),[o,e,t])},ia=window.wp.htmlEntities,aa=(e,t)=>`<a ${la(e)}>${t}</a>`,la=e=>`href="${e}" target="_blank" rel="noreferrer noopener"`,sa=e=>{const{title:t,foreign_landing_url:n,creator:o,creator_url:r,license:i,license_version:a,license_url:l}=e,s=((e,t)=>{let n=e.trim();return"pdm"!==e&&(n=e.toUpperCase().replace("SAMPLING","Sampling")),t&&(n+=` ${t}`),["pdm","cc0"].includes(e)||(n=`CC ${n}`),n})(i,a),c=(0,ia.decodeEntities)(o);let u;return u=c?t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s" by %2$s/ %3$s',"caption","kubio"),aa(n,(0,ia.decodeEntities)(t)),r?aa(r,c):c,l?aa(`${l}?ref=openverse`,s):s):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption","kubio"),la(n),r?aa(r,c):c,l?aa(`${l}?ref=openverse`,s):s):t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s"/ %2$s',"caption","kubio"),aa(n,(0,ia.decodeEntities)(t)),l?aa(`${l}?ref=openverse`,s):s):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a>/ %3$s","caption","kubio"),la(n),l?aa(`${l}?ref=openverse`,s):s),u.replace(/\s{2}/g," ")},ca=async(e={})=>(await(0,C.resolveSelect)(w.store).getMediaItems({...e,orderBy:null!=e&&e.search?"relevance":"date"})).map((e=>{var t,n,o,r;return{...e,alt:e.alt_text,url:e.source_url,previewUrl:null===(t=e.media_details)||void 0===t||null===(n=t.sizes)||void 0===n||null===(o=n.medium)||void 0===o?void 0:o.source_url,caption:null===(r=e.caption)||void 0===r?void 0:r.raw}})),ua=[{name:"images",labels:{name:(0,T.__)("Images","kubio"),search_items:(0,T.__)("Search images","kubio")},mediaType:"image",fetch:async(e={})=>ca({...e,media_type:"image"})},{name:"videos",labels:{name:(0,T.__)("Videos","kubio"),search_items:(0,T.__)("Search videos","kubio")},mediaType:"video",fetch:async(e={})=>ca({...e,media_type:"video"})},{name:"audio",labels:{name:(0,T.__)("Audio","kubio"),search_items:(0,T.__)("Search audio","kubio")},mediaType:"audio",fetch:async(e={})=>ca({...e,media_type:"audio"})},{name:"openverse",labels:{name:(0,T.__)("Openverse","kubio"),search_items:(0,T.__)("Search Openverse","kubio")},mediaType:"image",async fetch(e={}){const t={...e,mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},n={per_page:"page_size",search:"q"},o=new URL("https://api.openverse.engineering/v1/images/");Object.entries(t).forEach((([e,t])=>{const r=n[e]||e;o.searchParams.set(r,t)}));const r=await window.fetch(o,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await r.json()).results.map((e=>{var t;return{...e,title:null!==(t=e.title)&&void 0!==t&&t.toLowerCase().startsWith("file:")?e.title.slice(5):e.title,sourceId:e.id,id:void 0,caption:sa(e),previewUrl:e.thumbnail}}))},getReportUrl:({sourceId:e})=>`https://wordpress.org/openverse/image/${e}/report/`,isExternalResource:!0}],da=ua;function ma(){var e,t;const{setOpenInserter:n}=(0,C.useDispatch)(g.STORE_KEY),{storedSettings:o,canvasMode:r,templateType:i,siteSettings:a}=(0,C.useSelect)((e=>{const{canUser:t,getEntityRecord:o}=e(w.store),{getSettings:r,getCanvasMode:i,getEditedPostType:a}=e(g.STORE_KEY);return{storedSettings:r(n),canvasMode:null==i?void 0:i(),templateType:a(),siteSettings:t("read","settings")?o("root","site"):void 0}}),[]),l=null!==(e=o.__experimentalAdditionalBlockPatterns)&&void 0!==e?e:o.__experimentalBlockPatterns,s=null!==(t=o.__experimentalAdditionalBlockPatternCategories)&&void 0!==t?t:o.__experimentalBlockPatternCategories,{restBlockPatterns:c,restBlockPatternCategories:d,templateSlug:m,userPatternCategories:p}=(0,C.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(g.STORE_KEY),{getEditedEntityRecord:o,getUserPatternCategories:r}=e(w.store),i=o("postType",t(),n());return{restBlockPatterns:e(w.store).getBlockPatterns(),restBlockPatternCategories:e(w.store).getBlockPatternCategories(),templateSlug:i.slug,userPatternCategories:(null==r?void 0:r())||[]}}),[]),h=function(e){const t=null==e?void 0:e.match(/^(category|tag|taxonomy-([^-]+))$|^(((category|tag)|taxonomy-([^-]+))-(.+))$/);let n,o,r,i=!1;if(t)t[1]?n=t[2]?t[2]:t[1]:t[3]&&(n=t[6]?t[6]:t[4],o=t[7]),n="tag"===n?"post_tag":n;else{const t=null==e?void 0:e.match(/^(author)$|^author-(.+)$/);t&&(i=!0,t[2]&&(r=t[2]))}return(0,C.useSelect)((e=>{const{getEntityRecords:t,getTaxonomy:a,getAuthors:l}=e(w.store);let s,c;var u,d;if(n&&(s=null===(u=a(n))||void 0===u||null===(d=u.labels)||void 0===d?void 0:d.singular_name),o){const e=t("taxonomy",n,{slug:o,per_page:1});e&&e[0]&&(c=e[0].name)}if(i&&(s="Author",r)){const e=l({slug:r});e&&e[0]&&(c=e[0].name)}return{archiveTypeLabel:s,archiveNameLabel:c}}),[r,i,n,o])}(m),f=(0,u.useMemo)((()=>[...l||[],...c||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name)))).filter((({postTypes:e})=>!e||Array.isArray(e)&&e.includes(i)))),[l,c,i]),b=(0,u.useMemo)((()=>[...s||[],...d||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name))))),[s,d]);return(0,u.useMemo)((()=>{const{__experimentalAdditionalBlockPatterns:e,__experimentalAdditionalBlockPatternCategories:t,focusMode:n,...i}=o;return{...i,inserterMediaCategories:da,__experimentalBlockPatterns:f,__experimentalBlockPatternCategories:b,__experimentalUserPatternCategories:p,focusMode:("view"!==r||!n)&&n,__experimentalArchiveTitleTypeLabel:h.archiveTypeLabel,__experimentalArchiveTitleNameLabel:h.archiveNameLabel,pageOnFront:null==a?void 0:a.page_on_front,pageForPosts:null==a?void 0:a.page_for_posts}}),[o,f,b,p,r,h.archiveTypeLabel,h.archiveNameLabel,null==a?void 0:a.page_on_front,null==a?void 0:a.page_for_posts])}const pa=(0,S.createHigherOrderComponent)((e=>t=>{const{templateType:n,page:o,deviceType:r,templateId:i}=(0,C.useSelect)((e=>{const{getTemplateType:t,getTemplateId:n,getPage:o,__experimentalGetPreviewDeviceType:r}=e(g.STORE_KEY);return{templateType:t(),templateId:n(),page:o(),deviceType:r()}}),[]),l={settings:ma(),templateType:n,page:o,deviceType:r,templateId:i};return o||n?(0,a.createElement)(e,{...t,...l}):null}),"currentEditorEntity"),ha=(0,S.compose)(pa,S.pure)((function({settings:e,templateType:t,page:n,deviceType:o,templateId:r}){ra();const[i,l,s]=(0,w.useEntityBlockEditor)("postType",t,{id:r}),{setPage:c}=(0,C.useDispatch)(g.STORE_KEY),d=(0,k.__unstableUseMouseMoveTypingReset)(),m=window.__kubioEditorStyles.html+oa,p=(0,C.useSelect)((e=>{const t=e(g.STORE_KEY).getCurrentKubioTemplateSource();return null==t?void 0:t.startsWith("kubio")}),[t,r]),h=(0,u.useMemo)((()=>e.styles),[p,e.styles]),f=(0,u.useCallback)((e=>(0,a.createElement)(Wi,{headHTML:m,ref:d,head:(0,a.createElement)(k.__unstableEditorStyles,{styles:h}),contentRef:e},(0,a.createElement)(Yi,null))),[d,m,h]);return(0,a.createElement)(k.BlockEditorProvider,{settings:e,value:i,onInput:l,onChange:s,useSubRegistry:!1},(0,a.createElement)(k.BlockEditorKeyboardShortcuts,null),(0,a.createElement)(k.__experimentalLinkControl.ViewerFill,null,(0,u.useCallback)((e=>(0,a.createElement)(be,{...e,activePage:n,onActivePageChange:c})),[n])),(0,a.createElement)(Oi,null,(0,a.createElement)(zi,null)),(0,a.createElement)(na,{deviceType:o,iframe:f}))})),ga=function(){var e,t;ra();const{setOpenInserter:n}=(0,C.useDispatch)(g.STORE_KEY),[o,r]=(0,u.useState)({}),{page:i,deviceType:l,classicTemplateId:s}=(0,C.useSelect)((e=>{const{getEntity:t,getPage:n,getClassicTemplateId:o,__experimentalGetPreviewDeviceType:r}=e(g.STORE_KEY);return{entity:t(),page:n(),classicTemplateId:o(),deviceType:r()}}),[n]),c=ma();(0,u.useEffect)((()=>{Mn()(i,o)||r(i)}),[i]);const[d,m,p]=(0,w.useEntityBlockEditor)("postType",null==o||null===(e=o.context)||void 0===e?void 0:e.postType,{id:null==o||null===(t=o.context)||void 0===t?void 0:t.postId}),{setPage:h}=(0,C.useDispatch)(g.STORE_KEY),f=(0,k.__unstableUseMouseMoveTypingReset)(),_=(0,b.useSetGlobalSessionProp)("ready"),v=(e,t)=>{t.body.id="kubio",_(!0)},y=window.__kubioEditorStyles.html+oa,E=(0,b.useGetGlobalSessionProp)("blockEditorRootClasses",""),S=(0,u.useCallback)((e=>(null==o?void 0:o.path)&&(0,a.createElement)(Wi,{headHTML:y,ref:f,contentRef:e,src:(0,Cn.addQueryArgs)(null==o?void 0:o.path,{"__kubio-site-edit-iframe-preview":!0,"__kubio-site-edit-iframe-classic-template":s}),contentHolderSelector:"#kubio-site-edit-content-holder",assetsHolderSelector:"#kubio-site-edit-assets-holder",onLoad:v,execStylesheetCompat:!1},(0,a.createElement)(Yi,{className:E},(0,a.createElement)(Ue.LayoutPicker,null)))),[null==o?void 0:o.path,f,y,y,c.styles,E]);return(0,a.createElement)(k.BlockEditorProvider,{settings:c,value:d,onInput:m,onChange:p,useSubRegistry:!1},(0,a.createElement)(k.BlockEditorKeyboardShortcuts,null),(0,a.createElement)(k.__experimentalLinkControl.ViewerFill,null,(0,u.useCallback)((e=>(0,a.createElement)(be,{...e,activePage:o,onActivePageChange:h})),[o,h])),(0,a.createElement)(Oi,null,(0,a.createElement)(zi,null)),(0,a.createElement)(na,{deviceType:l,iframe:S}))},fa=()=>{const[e,t]=(0,u.useState)([]),n=(0,C.useSelect)((e=>{const{getEntityRecords:t}=e("core");return t("postType","kubio_section",{per_page:-1})}),[]),o="kubio-content/custom";return(0,u.useEffect)((()=>{let r=e;null==n||n.forEach((t=>{if(e.includes(t.id))return;const n={name:`${o}/custom-section/${t.id}`,title:t.title.rendered,categories:[o],description:(0,T.__)("Custom section","kubio"),screenshot:!1,fromColibri:!0,fromFirebase:!0,isCustomSection:!0,isProOnFree:!1,isGutentagPattern:!0,content:JSON.parse(t.content.raw),internalTags:[],publicTags:[]};(0,l.registerPattern)(n),r=[...r,t.id]})),t(r)}),[n,e]),null};function ba({record:e,checked:t,onChange:n,closePanel:o}){const{name:r,kind:i,title:l,key:s}=e,c=(0,C.useSelect)((e=>{var t;const{blocks:n=[]}=e("core").getEditedEntityRecord(i,r,s),o=e("core/block-editor").getBlockParents(null===(t=n[0])||void 0===t?void 0:t.clientId);return o[o.length-1]}),[]),d=(0,C.useSelect)((e=>{if("postType"!==i||"wp_template"!==r)return l;const t=e("core").getEditedEntityRecord(i,r,s);return e("core/editor").__experimentalGetTemplateInfo(t).title}),[r,i,l,s]),m=(0,C.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId()===c),[c]),p=m?(0,T.__)("Selected","kubio"):(0,T.__)("Select","kubio"),{selectBlock:h}=(0,C.useDispatch)("core/block-editor"),g=(0,u.useCallback)((()=>h(c)),[c]),f=(0,u.useCallback)((()=>{h(c),o()}),[c]);return(0,a.createElement)(E.PanelRow,null,(0,a.createElement)(E.CheckboxControl,{label:(0,a.createElement)("strong",null,d||(0,T.__)("Untitled","kubio")),checked:t,onChange:n}),c?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{onClick:g,className:"entities-saved-states__find-entity",disabled:m},p),(0,a.createElement)(E.Button,{onClick:f,className:"entities-saved-states__find-entity-small",disabled:m},p)):null)}const _a={site:(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})),page:(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,a.createElement)(A.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"}))};function va({list:e,unselectedEntities:t,setUnselectedEntities:n,closePanel:o}){const r=e[0],i=(0,C.useSelect)((e=>e("core").getEntity(r.kind,r.name)),[r.kind,r.name]),{name:l}=r,s=_a[l];return(0,a.createElement)(E.PanelBody,{title:i.label,initialOpen:!0,icon:s},e.map((e=>(0,a.createElement)(ba,{key:e.key||`${e.kind}-${e.name}-${e.property}`,record:e,checked:!(0,p.some)(t,(t=>t.kind===e.kind&&t.name===e.name&&t.key===e.key)),onChange:t=>n(e,t),closePanel:o}))))}const ya={title:(0,T.__)("Title","kubio"),description:(0,T.__)("Tagline","kubio"),site_logo:(0,T.__)("Logo","kubio"),sitelogo:(0,T.__)("Logo","kubio"),show_on_front:(0,T.__)("Show on front","kubio"),page_on_front:(0,T.__)("Page on front","kubio")},ka={wp_template_part:e=>(0,T._n)("template part","template parts",e,"kubio"),wp_template:e=>(0,T._n)("template","templates",e,"kubio"),post:e=>(0,T._n)("post","posts",e,"kubio"),page:e=>(0,T._n)("page","pages",e,"kubio"),site:e=>(0,T._n)("site","sites",e,"kubio")},Ea=(0,E.withFocusReturn)((function({isOpen:e,close:t}){const{dirtyEntityRecords:n}=(0,C.useSelect)((e=>{const t=e(w.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(w.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",title:ya[e]||e,property:e});return{dirtyEntityRecords:[...t,...o]}}),[]),{saveEditedEntityRecord:o}=(0,C.useDispatch)("core"),r=Object.values((0,p.groupBy)(n,"name")),i=[];r.forEach((e=>{ka[e[0].name]&&i.push(ka[e[0].name](e.length))}));const[l,s]=(0,u.useState)([]),c=({kind:e,name:t,key:n},o)=>{s(o?l.filter((o=>o.kind!==e||o.name!==t||o.key!==n)):[...l,{kind:e,name:t,key:n}])},d=(0,u.useCallback)((()=>t()),[t]),m=(0,T.__)("Save","kubio");return e?(0,a.createElement)("div",{className:"entities-saved-states__panel kubio-entities-saved-states__panel"},(0,a.createElement)("div",{className:"entities-saved-states__panel-header"},(0,a.createElement)(E.Button,{isPrimary:!0,disabled:n.length-l.length==0,onClick:()=>{const e=(()=>{const e=n.filter((({kind:e,name:t,key:n})=>!(0,p.some)(l,(o=>o.kind===e&&o.name===t&&o.key===n))));return e})();t(e),e.forEach((({kind:e,name:t,key:n})=>{o(e,t,n)}))},className:"editor-entities-saved-states__save-button"},m),(0,a.createElement)(E.Button,{onClick:d,icon:we,label:(0,T.__)("Close panel","kubio")})),(0,a.createElement)("div",{className:"entities-saved-states__text-prompt"},(0,a.createElement)("strong",null,(0,T.__)("Select the changes you want to save","kubio")),(0,a.createElement)("p",null,(0,T.__)("Some changes may affect other areas of your site.","kubio"))),r.map((e=>(0,a.createElement)(va,{key:e[0].name,list:e,closePanel:d,unselectedEntities:l,setUnselectedEntities:c})))):null})),Sa=(0,a.createElement)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(A.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"}));var wa=n(4670),Ca=n.n(wa);const Ia="IS_AI_PAGE_GENERATING_"+Ca().generate(),Ta=()=>(0,b.useGlobalSessionProp)(Ia),xa=["front-page","single-post","page","archive","search","404","index"],Pa="root",Ra="template-parts",Aa="templates",Oa="templates-general",Na="templates-pages",Ma="templates-posts",Da="kubio__custom-templates",Ba="kubio__theme-templates",La="kubio__kubio-templates",za=[{area:"header",menu:"template-parts-headers",title:(0,T.__)("Headers","kubio")},{area:"footer",menu:"template-parts-footers",title:(0,T.__)("Footers","kubio")},{area:"sidebar",menu:"template-parts-sidebars",title:(0,T.__)("Sidebars","kubio")},{area:"uncategorized",menu:"template-parts-general",title:(0,T.__)("General","kubio")}];function Fa({openEntitiesSavedStates:e}){const{saveEditedEntityRecord:t}=(0,C.useDispatch)("core"),{isSaving:n,isDirty:o}=(0,C.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=e("core"),o=t();return{isDirty:o.length>0,isSaving:(0,p.some)(o,(e=>n(e.kind,e.name,e.key)))}})),r=!o||n,i=(0,T.__)("Save","kubio"),{dirtyEntityRecords:l}=(0,C.useSelect)((e=>{const t=e(w.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(w.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...o]}}),[]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{isPrimary:!0,className:"edit-site-save-button__button","aria-disabled":r,disabled:r,isBusy:n,onClick:r?void 0:()=>{l.forEach((({kind:e,name:n,key:o})=>{t(e,n,o)}))}},i),(0,a.createElement)(E.Button,{isPrimary:!0,icon:ke.ArrowDown,iconSize:24,className:"edit-site-save-button__dropdown","aria-disabled":r,disabled:r,onClick:r?void 0:e}))}const Ga=(0,u.memo)((({onClose:e})=>{const t=(0,ye.isAdvancedMode)()?(0,T.__)("Switch to quick mode","kubio"):(0,T.__)("Switch to advanced mode","kubio");return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.MenuGroup,{className:"kubio-block-settings-control"},(0,a.createElement)(E.MenuItem,{tag:E.MenuItem,onClick:()=>{e(),(0,ye.toggleAdvancedMode)()}},t)))})),Ha=(0,S.createHigherOrderComponent)((e=>t=>{const{isSelected:n}=t;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(e,{...t}),n&&(0,a.createElement)(k.BlockSettingsMenuControls,null,(({onClose:e})=>(0,a.createElement)(Ga,{onClose:e}))))}));(0,d.addFilter)("editor.BlockListBlock","kubio.withToggleAdvancedMode",Ha,9999);const Ua=()=>{const{kubioEditorMode:e}=(0,C.useSelect)((e=>{const{getKubioEditorMode:t}=e("kubio/edit-site");return{kubioEditorMode:t()}})),{setKubioEditorMode:t}=(0,C.useDispatch)("kubio/edit-site");return(0,a.createElement)("div",{className:"kubio-easy-mode-toggle"},(0,a.createElement)(Ue.ToggleControl,{label:(0,T.__)("Advanced Mode","kubio"),value:e===g.EASY_MODE_VALUES.full,onChange:e=>{t(e?g.EASY_MODE_VALUES.full:g.EASY_MODE_VALUES.simple)}}))},Wa=window.kubio.adminPanel,ja=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})),Ka=window.wp.a11y;function Va({feature:e,label:t,info:n,messageActivated:o,messageDeactivated:r}){const i=(0,C.useSelect)((t=>t(g.STORE_KEY).isFeatureActive(e)),[]),{toggleFeature:l}=(0,C.useDispatch)(g.STORE_KEY);return(0,a.createElement)(E.MenuItem,{icon:i&&O,isSelected:i,onClick:(0,p.flow)(l.bind(null,e),(()=>{i?(0,Ka.speak)(r||(0,T.__)("Feature deactivated","kubio")):(0,Ka.speak)(o||(0,T.__)("Feature activated","kubio"))})),role:"menuitemcheckbox",info:n},t)}const $a={className:"edit-site-more-menu__content",position:"bottom left"},qa={tooltipPosition:"bottom"},Ya=()=>{const e=(0,Wa.useColibriConvertProps)(),[t,n]=(0,u.useState)(!1);return(0,a.createElement)(E.MenuItem,{onClick:async()=>{n(!0),await(0,Wa.convertSiteTemplate)(e),n(!1)},role:"menuitemcheckbox"},(0,T.__)("Convert Colibri Site","kubio"),t&&(0,a.createElement)(E.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,isDismissible:!1,title:(0,T.__)("Convert Colibri template","kubio"),onRequestClose:()=>n(!0)},(0,T.__)("Converting template…","kubio")))},Za=()=>{const{isGutentagDebug:e,baseUrl:t,currentPage:n,hasBlockSelected:o,isAICapabilityEnabled:r}=(0,C.useSelect)((e=>{const{isGutentagDebug:t=h().noop,getPage:n=h().noop,isAICapabilityEnabled:o}=e(g.STORE_KEY)||{},{url:r}=e("core").getEntityRecord("root","site")||{};return{isGutentagDebug:t(),currentPage:n(),baseUrl:r,hasBlockSelected:!!e("core/block-editor").getSelectedBlockClientId(),isAICapabilityEnabled:o()}}),[]),i=(0,u.useRef)(p.noop),l=()=>{const e=null==n?void 0:n.link,o=encodeURIComponent(e);window.open(`${t}/wp-admin/customize.php?url=${o}`).focus()},{toggleGutentagDebug:c}=(0,C.useDispatch)(g.STORE_KEY),d=(0,ye.getShowInternalFeatures)();let m=(0,a.createElement)(a.Fragment,null);var b,v;d&&(m=(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.MenuItem,{icon:e&&O,isSelected:e,onClick:()=>c(!e),role:"menuitemcheckbox"},(0,T.__)("Toggle Kubio debug","kubio")),(null===(b=window)||void 0===b||null===(v=b.kubioUtilsData)||void 0===v?void 0:v.patternsOnTheFly)&&(0,a.createElement)(E.MenuItem,{onClick:()=>window.consoleOutputConvertedData(),role:"menuitemcheckbox"},(0,T.__)("Convert colibri data","kubio")),(0,a.createElement)(E.MenuItem,{onClick:()=>window.kubioSaveConvertedData(),role:"menuitemcheckbox"},(0,T.__)("Save converted content","kubio")),(0,a.createElement)(Ya,null)));const{uiVersion:y,setUIVersion:k}=(0,f.useUIVersion)(),{openSidebar:S,toggleAICapabilities:w}=(0,C.useDispatch)(g.STORE_KEY),I=()=>{const e=2===y?1:2;k(e),2===e&&S(o?"block-inspector":"document")},[x,P]=yn(),[R,A]=(0,_.useIsAIConnected)(),N=(0,u.useCallback)((()=>{const e=!r;w(e),e&&!R&&(P(),i.current())}),[P,r,R,w]),M=1===y?(0,T.__)("Switch to Kubio Editor layout","kubio"):(0,T.__)("Switch to WordPress Editor layout","kubio"),D=1===y?(0,T.__)("Switch to the new Kubio editor layout for a more friendly editing experience","kubio"):(0,T.__)("Switch to the WordPress editor layout to have the default editing experience","kubio"),B=r?(0,T.__)("Disable Kubio AI capabilities","kubio"):(0,T.__)("Enable Kubio AI capabilities","kubio"),L=r?(0,T.__)("Hide Kubio AI buttons in editors interface","kubio"):(0,T.__)("Show Kubio AI buttons in editors interface","kubio"),[z]=(0,_.useAIServiceInfo)();(0,u.useCallback)((()=>{A(!1),(0,_.setAIKey)("")}),[A]);let F,G=(0,a.createElement)(a.Fragment,null);if((0,ye.getShowInternalFeatures)("cloud")){const[e,t,n]=(0,s.useKubioCloudConnect)();G=(0,a.createElement)(E.MenuGroup,{label:"Kubio Cloud"},"connected"!==e.status?(0,a.createElement)(E.MenuItem,{iconPosition:"left",onClick:t,info:(0,T.__)("Connect this site to Kubio Cloud","kubio")},(0,T.__)("Connect to Kubio Cloud","kubio")):(0,a.createElement)(E.MenuItem,{onClick:n,iconPosition:"left",info:(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is Kubio Cloud the account email
// translators: %s is Kubio Cloud the account email
(0,T.__)("Currently connected as %s","kubio"),`<strong><em>${e.email}</em></strong>`)}})},(0,T.__)("Disconnect from Kubio Cloud","kubio")))}return ye.AI_IN_PRO||(F=(0,a.createElement)(E.MenuGroup,{label:"Kubio AI"},(0,a.createElement)(E.MenuItem,{onClick:N,iconPosition:"left",info:L},B))),(0,a.createElement)(a.Fragment,null,x,(0,a.createElement)(E.DropdownMenu,{className:"edit-site-more-menu",icon:ja,label:(0,T.__)("More tools & options","kubio"),popoverProps:$a,toggleProps:qa},(({onClose:e})=>(i.current=e,(0,a.createElement)(a.Fragment,null,G,F,(0,a.createElement)(E.MenuGroup,{label:(0,T._x)("View","noun","kubio")},(0,a.createElement)(E.MenuItem,{onClick:I,info:D},M),(0,a.createElement)(Va,{feature:"focusMode",label:(0,T.__)("Spotlight mode","kubio"),info:(0,T.__)("Focus on one block at a time","kubio"),messageActivated:(0,T.__)("Spotlight mode activated","kubio"),messageDeactivated:(0,T.__)("Spotlight mode deactivated","kubio")}),m,(0,a.createElement)(E.MenuItem,{onClick:l},(0,T.__)("Open theme customizer","kubio")),(0,a.createElement)(ie.Slot,{name:"kubio/edit-site/plugin-more-menu",label:(0,T.__)("Plugins","kubio"),as:[E.MenuGroup,E.MenuItem],fillProps:{onClick:e}}),!1))))))};var Xa=n(5800);function Qa(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ja}=Object.prototype,{getPrototypeOf:el}=Object,tl=(nl=Object.create(null),e=>{const t=Ja.call(e);return nl[t]||(nl[t]=t.slice(8,-1).toLowerCase())});var nl;const ol=e=>(e=e.toLowerCase(),t=>tl(t)===e),rl=e=>t=>typeof t===e,{isArray:il}=Array,al=rl("undefined"),ll=ol("ArrayBuffer"),sl=rl("string"),cl=rl("function"),ul=rl("number"),dl=e=>null!==e&&"object"==typeof e,ml=e=>{if("object"!==tl(e))return!1;const t=el(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},pl=ol("Date"),hl=ol("File"),gl=ol("Blob"),fl=ol("FileList"),bl=ol("URLSearchParams");function _l(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let o,r;if("object"!=typeof e&&(e=[e]),il(e))for(o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(o=0;o<i;o++)a=r[o],t.call(null,e[a],a,e)}}function vl(e,t){t=t.toLowerCase();const n=Object.keys(e);let o,r=n.length;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const yl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,kl=e=>!al(e)&&e!==yl,El=(Sl="undefined"!=typeof Uint8Array&&el(Uint8Array),e=>Sl&&e instanceof Sl);var Sl;const wl=ol("HTMLFormElement"),Cl=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Il=ol("RegExp"),Tl=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};_l(n,((n,r)=>{let i;!1!==(i=t(n,r,e))&&(o[r]=i||n)})),Object.defineProperties(e,o)},xl="abcdefghijklmnopqrstuvwxyz",Pl="0123456789",Rl={DIGIT:Pl,ALPHA:xl,ALPHA_DIGIT:xl+xl.toUpperCase()+Pl},Al=ol("AsyncFunction"),Ol={isArray:il,isArrayBuffer:ll,isBuffer:function(e){return null!==e&&!al(e)&&null!==e.constructor&&!al(e.constructor)&&cl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||cl(e.append)&&("formdata"===(t=tl(e))||"object"===t&&cl(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ll(e.buffer),t},isString:sl,isNumber:ul,isBoolean:e=>!0===e||!1===e,isObject:dl,isPlainObject:ml,isUndefined:al,isDate:pl,isFile:hl,isBlob:gl,isRegExp:Il,isFunction:cl,isStream:e=>dl(e)&&cl(e.pipe),isURLSearchParams:bl,isTypedArray:El,isFileList:fl,forEach:_l,merge:function e(){const{caseless:t}=kl(this)&&this||{},n={},o=(o,r)=>{const i=t&&vl(n,r)||r;ml(n[i])&&ml(o)?n[i]=e(n[i],o):ml(o)?n[i]=e({},o):il(o)?n[i]=o.slice():n[i]=o};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&_l(arguments[e],o);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(_l(t,((t,o)=>{n&&cl(t)?e[o]=Qa(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,o)=>{let r,i,a;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],o&&!o(a,e,t)||l[a]||(t[a]=e[a],l[a]=!0);e=!1!==n&&el(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:tl,kindOfTest:ol,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return-1!==o&&o===n},toArray:e=>{if(!e)return null;if(il(e))return e;let t=e.length;if(!ul(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const n=o.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const o=[];for(;null!==(n=e.exec(t));)o.push(n);return o},isHTMLForm:wl,hasOwnProperty:Cl,hasOwnProp:Cl,reduceDescriptors:Tl,freezeMethods:e=>{Tl(e,((t,n)=>{if(cl(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const o=e[n];cl(o)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},o=e=>{e.forEach((e=>{n[e]=!0}))};return il(e)?o(e):o(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:vl,global:yl,isContextDefined:kl,ALPHABET:Rl,generateString:(e=16,t=Rl.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n},isSpecCompliantForm:function(e){return!!(e&&cl(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,o)=>{if(dl(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[o]=e;const r=il(e)?[]:{};return _l(e,((e,t)=>{const i=n(e,o+1);!al(i)&&(r[t]=i)})),t[o]=void 0,r}}return e};return n(e,0)},isAsyncFn:Al,isThenable:e=>e&&(dl(e)||cl(e))&&cl(e.then)&&cl(e.catch)};function Nl(e,t,n,o,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),r&&(this.response=r)}Ol.inherits(Nl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ol.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ml=Nl.prototype,Dl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Dl[e]={value:e}})),Object.defineProperties(Nl,Dl),Object.defineProperty(Ml,"isAxiosError",{value:!0}),Nl.from=(e,t,n,o,r,i)=>{const a=Object.create(Ml);return Ol.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Nl.call(a,e.message,t,n,o,r),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Bl=Nl;function Ll(e){return Ol.isPlainObject(e)||Ol.isArray(e)}function zl(e){return Ol.endsWith(e,"[]")?e.slice(0,-2):e}function Fl(e,t,n){return e?e.concat(t).map((function(e,t){return e=zl(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Gl=Ol.toFlatObject(Ol,{},null,(function(e){return/^is[A-Z]/.test(e)})),Hl=function(e,t,n){if(!Ol.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const o=(n=Ol.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Ol.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,i=n.dots,a=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Ol.isSpecCompliantForm(t);if(!Ol.isFunction(r))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Ol.isDate(e))return e.toISOString();if(!l&&Ol.isBlob(e))throw new Bl("Blob is not supported. Use a Buffer instead.");return Ol.isArrayBuffer(e)||Ol.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let l=e;if(e&&!r&&"object"==typeof e)if(Ol.endsWith(n,"{}"))n=o?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ol.isArray(e)&&function(e){return Ol.isArray(e)&&!e.some(Ll)}(e)||(Ol.isFileList(e)||Ol.endsWith(n,"[]"))&&(l=Ol.toArray(e)))return n=zl(n),l.forEach((function(e,o){!Ol.isUndefined(e)&&null!==e&&t.append(!0===a?Fl([n],o,i):null===a?n:n+"[]",s(e))})),!1;return!!Ll(e)||(t.append(Fl(r,n,i),s(e)),!1)}const u=[],d=Object.assign(Gl,{defaultVisitor:c,convertValue:s,isVisitable:Ll});if(!Ol.isObject(e))throw new TypeError("data must be an object");return function e(n,o){if(!Ol.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+o.join("."));u.push(n),Ol.forEach(n,(function(n,i){!0===(!(Ol.isUndefined(n)||null===n)&&r.call(t,n,Ol.isString(i)?i.trim():i,o,d))&&e(n,o?o.concat(i):[i])})),u.pop()}}(e),t};function Ul(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Wl(e,t){this._pairs=[],e&&Hl(e,this,t)}const jl=Wl.prototype;jl.append=function(e,t){this._pairs.push([e,t])},jl.toString=function(e){const t=e?function(t){return e.call(this,t,Ul)}:Ul;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Kl=Wl;function Vl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $l(e,t,n){if(!t)return e;const o=n&&n.encode||Vl,r=n&&n.serialize;let i;if(i=r?r(t,n):Ol.isURLSearchParams(t)?t.toString():new Kl(t,n).toString(o),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const ql=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ol.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Yl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zl={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Kl,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},Xl=function(e){function t(e,n,o,r){let i=e[r++];const a=Number.isFinite(+i),l=r>=e.length;return i=!i&&Ol.isArray(o)?o.length:i,l?(Ol.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!a):(o[i]&&Ol.isObject(o[i])||(o[i]=[]),t(e,n,o[i],r)&&Ol.isArray(o[i])&&(o[i]=function(e){const t={},n=Object.keys(e);let o;const r=n.length;let i;for(o=0;o<r;o++)i=n[o],t[i]=e[i];return t}(o[i])),!a)}if(Ol.isFormData(e)&&Ol.isFunction(e.entries)){const n={};return Ol.forEachEntry(e,((e,o)=>{t(function(e){return Ol.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),o,n,0)})),n}return null},Ql={transitional:Yl,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",o=n.indexOf("application/json")>-1,r=Ol.isObject(e);if(r&&Ol.isHTMLForm(e)&&(e=new FormData(e)),Ol.isFormData(e))return o&&o?JSON.stringify(Xl(e)):e;if(Ol.isArrayBuffer(e)||Ol.isBuffer(e)||Ol.isStream(e)||Ol.isFile(e)||Ol.isBlob(e))return e;if(Ol.isArrayBufferView(e))return e.buffer;if(Ol.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Hl(e,new Zl.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,o){return Zl.isNode&&Ol.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Ol.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Hl(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||o?(t.setContentType("application/json",!1),function(e,t,n){if(Ol.isString(e))try{return(0,JSON.parse)(e),Ol.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ql.transitional,n=t&&t.forcedJSONParsing,o="json"===this.responseType;if(e&&Ol.isString(e)&&(n&&!this.responseType||o)){const n=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Bl.from(e,Bl.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zl.classes.FormData,Blob:Zl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ol.forEach(["delete","get","head","post","put","patch"],(e=>{Ql.headers[e]={}}));const Jl=Ql,es=Ol.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ts=Symbol("internals");function ns(e){return e&&String(e).trim().toLowerCase()}function os(e){return!1===e||null==e?e:Ol.isArray(e)?e.map(os):String(e)}function rs(e,t,n,o,r){return Ol.isFunction(o)?o.call(this,t,n):(r&&(t=n),Ol.isString(t)?Ol.isString(o)?-1!==t.indexOf(o):Ol.isRegExp(o)?o.test(t):void 0:void 0)}class is{constructor(e){e&&this.set(e)}set(e,t,n){const o=this;function r(e,t,n){const r=ns(t);if(!r)throw new Error("header name must be a non-empty string");const i=Ol.findKey(o,r);(!i||void 0===o[i]||!0===n||void 0===n&&!1!==o[i])&&(o[i||t]=os(e))}const i=(e,t)=>Ol.forEach(e,((e,n)=>r(e,n,t)));return Ol.isPlainObject(e)||e instanceof this.constructor?i(e,t):Ol.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i((e=>{const t={};let n,o,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),o=e.substring(r+1).trim(),!n||t[n]&&es[n]||("set-cookie"===n?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=ns(e)){const n=Ol.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}(e);if(Ol.isFunction(t))return t.call(this,e,n);if(Ol.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ns(e)){const n=Ol.findKey(this,e);return!(!n||void 0===this[n]||t&&!rs(0,this[n],n,t))}return!1}delete(e,t){const n=this;let o=!1;function r(e){if(e=ns(e)){const r=Ol.findKey(n,e);!r||t&&!rs(0,n[r],r,t)||(delete n[r],o=!0)}}return Ol.isArray(e)?e.forEach(r):r(e),o}clear(e){const t=Object.keys(this);let n=t.length,o=!1;for(;n--;){const r=t[n];e&&!rs(0,this[r],r,e,!0)||(delete this[r],o=!0)}return o}normalize(e){const t=this,n={};return Ol.forEach(this,((o,r)=>{const i=Ol.findKey(n,r);if(i)return t[i]=os(o),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();a!==r&&delete t[r],t[a]=os(o),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ol.forEach(this,((n,o)=>{null!=n&&!1!==n&&(t[o]=e&&Ol.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ts]=this[ts]={accessors:{}}).accessors,n=this.prototype;function o(e){const o=ns(e);t[o]||(function(e,t){const n=Ol.toCamelCase(" "+t);["get","set","has"].forEach((o=>{Object.defineProperty(e,o+n,{value:function(e,n,r){return this[o].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[o]=!0)}return Ol.isArray(e)?e.forEach(o):o(e),this}}is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ol.reduceDescriptors(is.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Ol.freezeMethods(is);const as=is;function ls(e,t){const n=this||Jl,o=t||n,r=as.from(o.headers);let i=o.data;return Ol.forEach(e,(function(e){i=e.call(n,i,r.normalize(),t?t.status:void 0)})),r.normalize(),i}function ss(e){return!(!e||!e.__CANCEL__)}function cs(e,t,n){Bl.call(this,null==e?"canceled":e,Bl.ERR_CANCELED,t,n),this.name="CanceledError"}Ol.inherits(cs,Bl,{__CANCEL__:!0});const us=cs,ds=Zl.isStandardBrowserEnv?{write:function(e,t,n,o,r,i){const a=[];a.push(e+"="+encodeURIComponent(t)),Ol.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ol.isString(o)&&a.push("path="+o),Ol.isString(r)&&a.push("domain="+r),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ms(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ps=Zl.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function o(n){let o=n;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=o(window.location.href),function(e){const t=Ol.isString(e)?o(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};function hs(e,t){let n=0;const o=function(e,t){e=e||10;const n=new Array(e),o=new Array(e);let r,i=0,a=0;return t=void 0!==t?t:1e3,function(l){const s=Date.now(),c=o[a];r||(r=s),n[i]=l,o[i]=s;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),s-r<t)return;const m=c&&s-c;return m?Math.round(1e3*d/m):void 0}}(50,250);return r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,l=i-n,s=o(l);n=i;const c={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:s||void 0,estimated:s&&a&&i<=a?(a-i)/s:void 0,event:r};c[t?"download":"upload"]=!0,e(c)}}const gs="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let o=e.data;const r=as.from(e.headers).normalize(),i=e.responseType;let a,l;function s(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}Ol.isFormData(o)&&(Zl.isStandardBrowserEnv||Zl.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.getContentType(/^\s*multipart\/form-data/)?Ol.isString(l=r.getContentType())&&r.setContentType(l.replace(/^\s*(multipart\/form-data);+/,"$1")):r.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const u=ms(e.baseURL,e.url);function d(){if(!c)return;const o=as.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new Bl("Request failed with status code "+n.status,[Bl.ERR_BAD_REQUEST,Bl.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:o,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),$l(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new Bl("Request aborted",Bl.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Bl("Network Error",Bl.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const o=e.transitional||Yl;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Bl(t,o.clarifyTimeoutError?Bl.ETIMEDOUT:Bl.ECONNABORTED,e,c)),c=null},Zl.isStandardBrowserEnv){const t=ps(u)&&e.xsrfCookieName&&ds.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===o&&r.setContentType(null),"setRequestHeader"in c&&Ol.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Ol.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",hs(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",hs(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{c&&(n(!t||t.type?new us(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);m&&-1===Zl.protocols.indexOf(m)?n(new Bl("Unsupported protocol "+m+":",Bl.ERR_BAD_REQUEST,e)):c.send(o||null)}))},fs={http:null,xhr:gs};Ol.forEach(fs,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const bs=e=>`- ${e}`,_s=e=>Ol.isFunction(e)||null===e||!1===e,vs=e=>{e=Ol.isArray(e)?e:[e];const{length:t}=e;let n,o;const r={};for(let i=0;i<t;i++){let t;if(n=e[i],o=n,!_s(n)&&(o=fs[(t=String(n)).toLowerCase()],void 0===o))throw new Bl(`Unknown adapter '${t}'`);if(o)break;r[t||"#"+i]=o}if(!o){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(bs).join("\n"):" "+bs(e[0]):"as no adapter specified";throw new Bl("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return o};function ys(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new us(null,e)}function ks(e){return ys(e),e.headers=as.from(e.headers),e.data=ls.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vs(e.adapter||Jl.adapter)(e).then((function(t){return ys(e),t.data=ls.call(e,e.transformResponse,t),t.headers=as.from(t.headers),t}),(function(t){return ss(t)||(ys(e),t&&t.response&&(t.response.data=ls.call(e,e.transformResponse,t.response),t.response.headers=as.from(t.response.headers))),Promise.reject(t)}))}const Es=e=>e instanceof as?e.toJSON():e;function Ss(e,t){t=t||{};const n={};function o(e,t,n){return Ol.isPlainObject(e)&&Ol.isPlainObject(t)?Ol.merge.call({caseless:n},e,t):Ol.isPlainObject(t)?Ol.merge({},t):Ol.isArray(t)?t.slice():t}function r(e,t,n){return Ol.isUndefined(t)?Ol.isUndefined(e)?void 0:o(void 0,e,n):o(e,t,n)}function i(e,t){if(!Ol.isUndefined(t))return o(void 0,t)}function a(e,t){return Ol.isUndefined(t)?Ol.isUndefined(e)?void 0:o(void 0,e):o(void 0,t)}function l(n,r,i){return i in t?o(n,r):i in e?o(void 0,n):void 0}const s={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(e,t)=>r(Es(e),Es(t),!0)};return Ol.forEach(Object.keys(Object.assign({},e,t)),(function(o){const i=s[o]||r,a=i(e[o],t[o],o);Ol.isUndefined(a)&&i!==l||(n[o]=a)})),n}const ws={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ws[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Cs={};ws.transitional=function(e,t,n){function o(e,t){return"[Axios v1.6.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,i)=>{if(!1===e)throw new Bl(o(r," has been removed"+(t?" in "+t:"")),Bl.ERR_DEPRECATED);return t&&!Cs[r]&&(Cs[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,i)}};const Is={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Bl("options must be an object",Bl.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let r=o.length;for(;r-- >0;){const i=o[r],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new Bl("option "+i+" must be "+n,Bl.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Bl("Unknown option "+i,Bl.ERR_BAD_OPTION)}},validators:ws},Ts=Is.validators;class xs{constructor(e){this.defaults=e,this.interceptors={request:new ql,response:new ql}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ss(this.defaults,t);const{transitional:n,paramsSerializer:o,headers:r}=t;void 0!==n&&Is.assertOptions(n,{silentJSONParsing:Ts.transitional(Ts.boolean),forcedJSONParsing:Ts.transitional(Ts.boolean),clarifyTimeoutError:Ts.transitional(Ts.boolean)},!1),null!=o&&(Ol.isFunction(o)?t.paramsSerializer={serialize:o}:Is.assertOptions(o,{encode:Ts.function,serialize:Ts.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&Ol.merge(r.common,r[t.method]);r&&Ol.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=as.concat(i,r);const a=[];let l=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const s=[];let c;this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)}));let u,d=0;if(!l){const e=[ks.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,s),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let m=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{m=e(m)}catch(e){t.call(this,e);break}}try{c=ks.call(this,m)}catch(e){return Promise.reject(e)}for(d=0,u=s.length;d<u;)c=c.then(s[d++],s[d++]);return c}getUri(e){return $l(ms((e=Ss(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Ol.forEach(["delete","get","head","options"],(function(e){xs.prototype[e]=function(t,n){return this.request(Ss(n||{},{method:e,url:t,data:(n||{}).data}))}})),Ol.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,r){return this.request(Ss(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}xs.prototype[e]=t(),xs.prototype[e+"Form"]=t(!0)}));const Ps=xs;class Rs{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const o=new Promise((e=>{n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e,o,r){n.reason||(n.reason=new us(e,o,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Rs((function(t){e=t})),cancel:e}}}const As=Rs,Os={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Os).forEach((([e,t])=>{Os[t]=e}));const Ns=Os,Ms=function e(t){const n=new Ps(t),o=Qa(Ps.prototype.request,n);return Ol.extend(o,Ps.prototype,n,{allOwnKeys:!0}),Ol.extend(o,n,null,{allOwnKeys:!0}),o.create=function(n){return e(Ss(t,n))},o}(Jl);Ms.Axios=Ps,Ms.CanceledError=us,Ms.CancelToken=As,Ms.isCancel=ss,Ms.VERSION="1.6.0",Ms.toFormData=Hl,Ms.AxiosError=Bl,Ms.Cancel=Ms.CanceledError,Ms.all=function(e){return Promise.all(e)},Ms.spread=function(e){return function(t){return e.apply(null,t)}},Ms.isAxiosError=function(e){return Ol.isObject(e)&&!0===e.isAxiosError},Ms.mergeConfig=Ss,Ms.AxiosHeaders=as,Ms.formToJSON=e=>Xl(Ol.isHTMLForm(e)?new FormData(e):e),Ms.getAdapter=vs,Ms.HttpStatusCode=Ns,Ms.default=Ms;const Ds=Ms,Bs={demoParts:null,demoSitesList:null,demoSitesListBySlug:null,demoPartsContentById:{pages:{},templates:{},templateParts:{},globalData:{}}};function Ls(e){if(!e)return;const t=["demoPartsContentById","globalData",e.id];if(h().get(Bs,t))return;const n={contentUrlPath:e.content_url_path,content:null};h().set(Bs,t,n)}async function zs(e){return Fs(e,"globalData")}async function Fs(e,t){const n=h().get(Bs,["demoPartsContentById",t,e]);let o=null==n?void 0:n.content;if(o)await(10,new Promise((e=>setTimeout((()=>{e()}),10))));else{const e=null==n?void 0:n.contentUrlPath;if(!e)return;try{const t=await Ds.get(e);o=null==t?void 0:t.data,n.content=o}catch(e){console.error(e)}}return o}async function Gs(){if(Bs.demoParts)return Bs.demoParts;let e=h().get(window,["kubioUtilsData","demo_parts_by_slug"]);h().isEmpty(e)&&(e=await async function(){try{var e;const t=h().get(window,["kubioUtilsData","demo_parts_url"],""),n=await Ds.get(t);return(null==n||null===(e=n.data)||void 0===e?void 0:e.body)||{}}catch(e){return console.error(e),[]}}());const t=[];return h().each(e,((e,n)=>{t[n]=function(e,t){const n=h().get(window,["kubioUtilsData","demo_sites"],{}),o=h().get(n,t),r=h().get(o,"thumb",""),i=["index","home"],a=[],l=i.concat(["single","search","404"]);let s=e.filter((({slug:e,type:t})=>"template"===t?(i.includes(e)&&a.push(e),l.includes(e)):"page"!==t||"sample-page"!==e));if(a.length>1){const e=i.filter((e=>a.includes(e)));e.pop(),s=s.filter((({slug:t,type:n})=>"template"!==n||!e.includes(t)))}const c={};return s.forEach(((e,t)=>{c[e.content_url_path]=t})),h().sortBy(s,(e=>"page"===e.type?c[e.content_url_path]:100+h().indexOf(l,e.slug))).map((({content_url_path:e,id:n,preview_image_url:i,preview_image_url_full:a,page_preview_url:l,title:s,type:c,slug:u})=>{return{contentUrlPath:e,id:n,slug:u,uniqueId:Ca().generate(),screenshot:i||r,screenshotFull:a||r,label:(d=Hs({title:s,slug:u,type:c}),function(e){return e.split(" ").map((e=>{return(t=e).charAt(0).toUpperCase()+t.slice(1);var t})).join(" ")}((m=d,Ks.innerHTML=m,Ks.innerText))),isPro:!(null==o||!o.is_pro),type:c,demoSiteSlug:t,pagePreviewUrl:Vs({page_preview_url:l,currentDemoSite:o,type:c,slug:u}),categories:(null==o?void 0:o.categories)||[]};var d,m}))}(e,n)})),n=e,h().each(n,((e,t)=>{e.forEach((e=>{"page"===(null==e?void 0:e.type)?function(e){var t,n;const o={templateId:null==e||null===(t=e.template)||void 0===t?void 0:t.id,globalDataId:null==e||null===(n=e.globalData)||void 0===n?void 0:n.id,contentUrlPath:e.content_url_path,content:null},r=e.globalData;r&&(o.globalDataId=null==r?void 0:r.id),h().set(Bs,["demoPartsContentById","pages",e.id],o),Ls(r)}(e):function(e){const t=["demoPartsContentById","templates",e.id],n=h().get(e,"templateParts",[]);n.forEach((e=>{!function(e){const t=["demoPartsContentById","templateParts",e.id];if(h().get(Bs,t))return;const n={area:e.area,contentUrlPath:e.content_url_path,content:null};h().set(Bs,t,n)}(e)}));const o=null==e?void 0:e.globalData;if(Ls(),h().get(Bs,t))return;const r={templatePartsIds:n.map((e=>e.id)),contentUrlPath:e.content_url_path,content:null};o&&(r.globalDataId=null==o?void 0:o.id),h().set(Bs,t,r)}(e)}))})),Bs.demoParts=t,h().isEmpty(t)?{}:Bs.demoParts;var n}function Hs({title:e,slug:t,type:n}){if("template"===n)switch(t){case"index":case"home":return(0,T.__)("Blog","kubio");case"search":return(0,T.__)("Search","kubio");case"single":return(0,T.__)("Post Page","kubio");default:return e}return e}async function Us(){if(Bs.demoSitesList)return Bs.demoSitesList;let e=h().get(window,["kubioUtilsData","demo_sites"],null);if(h().isEmpty(e)&&(e=await async function(){const e=h().get(window,["kubioUtilsData","demo_sites_url"],null);if(e){try{var t;const n=await Ds.get(e),o=(null==n||null===(t=n.data)||void 0===t?void 0:t.body)||{};o.forEach((e=>{const t=h().get(e,"plugins",[]),n=[];h().each(t,((e,t)=>{const o=null==t?void 0:t.split("/")[0];n.push({label:e,slug:o})})),e.plugins=n}));const r=h().keyBy(o,"slug");return h().set(window,["kubioUtilsData","demo_sites"],r),r}catch(e){console.error(e)}return null}}()),h().isEmpty(e))return[];const t=Object.values(e).map((({is_pro:e,name:t,thumb:n,categories:o,slug:r,preview:i,pro_template_slug:a,plugins:l})=>({isPro:!!e,label:js(t),preview:i,screenshot:n,proTemplateSlug:a,categories:o,slug:r,plugins:l}))),n=h().keyBy(t,"slug");return t.forEach((e=>{const{proTemplateSlug:t}=e;if(!t)return;const o=h().get(n,t);o&&(e.relatedDemoSite=o,o.relatedDemoSite=e)})),Bs.demoSitesList=t,Bs.demoSitesListBySlug=n,Bs.demoSitesList}const Ws=e=>{e&&setTimeout((()=>{const t=document.querySelector(".kubio-iframe");if(t){const n=null==t?void 0:t.contentDocument,o=null==n?void 0:n.querySelector(`[data-block="${e}"]`);null==o||o.scrollIntoView({behavior:"smooth"})}}),100)};function js(e=""){return(e=e.replace(/ (Free|Pro)/i,"")).trim()}const Ks=document.createElement("div");function Vs({page_preview_url:e,currentDemoSite:t,type:n,slug:o}){if("page"===n||!["404","search"].includes(o))return e;const r=null==t?void 0:t.preview;switch(o){case"404":return`${r}/404-page`;case"search":return`${r}?s="lorem"`}}!async function(){await Us(),await Gs()}();const $s={currentDemoParts:[],demoPartsIsLoaded:!1,selectedDemoPart:null,setSelectedDemoPart:h().noop},qs=(0,u.createContext)($s),Ys=(0,u.memo)((({children:e})=>{const{selectedDemoSlug:t,initialDemoPart:n,setInitialDemoPart:o,demosPartsPerSlug:r,demoPartsIsLoaded:i,currentDemoSite:l}=dh(),s=(0,u.useMemo)((()=>h().get(r,null==l?void 0:l.slug,[])),[l,r]),c=null==l?void 0:l.relatedDemoSite,d=(0,u.useMemo)((()=>h().get(r,null==c?void 0:c.slug,[])),[c,r]),m=(0,u.useMemo)((()=>{const e=h().get(s,[0]);if(!n)return e;return s.find((e=>(null==e?void 0:e.uniqueId)===(null==n?void 0:n.uniqueId)))||e}),[t,n]),[p,g]=(0,u.useState)(m),f=(0,u.useCallback)((e=>{n&&o(null),g(e)}),[g,n,o]);(0,u.useEffect)((()=>{n&&f(n)}),[n]),(0,u.useEffect)((()=>{f(m)}),[t]);const b=(0,u.useMemo)((()=>({currentDemoParts:s,demoPartsIsLoaded:i,selectedDemoPart:p,setSelectedDemoPart:f,relatedDemoParts:d})),[s,i,p,f,d]);return(0,a.createElement)(qs.Provider,{value:b},e)})),Zs=()=>(0,u.useContext)(qs),Xs="content",Qs="wholePage",Js=((0,T.__)("Content","kubio"),(0,T.__)("Full page","kubio"),"onlyThisPage"),ec="allPages",tc=((0,T.__)("Only this page","kubio"),(0,T.__)("All pages","kubio"),["singular","single"]),nc=["index","archive","home"],oc=tc.concat(nc),rc=(0,u.createContext)({}),ic="starterSite",ac="pages",lc="sections",sc="favorites",cc=[{label:(0,T.__)("Starter sites","kubio"),value:ic},{label:(0,T.__)("Pages","kubio"),value:ac},{label:(0,T.__)("Sections","kubio"),value:lc},{label:(0,T.__)("Favorites","kubio"),value:sc}],uc=(0,u.memo)((({onClose:e,children:t,initialParams:n})=>{const o=h().get(n,"page",ic),[r,i]=(0,u.useState)(o),[l,s]=(0,u.useState)(o),c=(0,u.useCallback)((e=>{s(r),i(e)}),[r]),[d,m]=(0,u.useState)(!1),{templateId:p,postId:g}=(0,C.useSelect)((e=>{const{getPage:t=h().noop,getTemplateId:n=h().noop}=e("kubio/edit-site")||{},o=t();return{templateId:n()||"",postId:h().get(o,"context.postId")}}),[]);(0,u.useEffect)((()=>{d&&m(!1)}),[p,g]);const f=(0,u.useMemo)((()=>({activePage:r,setActivePage:c,onClose:e,showLoadingOverlay:d,setShowLoadingOverlay:m,initialParams:n,previousActivePage:l})),[r,c,e,d,m,n,l]);return(0,a.createElement)(rc.Provider,{value:f},t)})),dc=()=>(0,u.useContext)(rc),mc={isImporting:!1,importDemoPart:h().noop},pc=(0,u.createContext)(mc),hc=(0,u.memo)((({children:e})=>{const t=(0,u.useRef)(!1),[n,o]=(0,u.useState)(!1),{selectedDemoPart:r}=Zs(),[i,l]=(0,u.useState)(Xs),[s,c]=(0,u.useState)(Js),[d,m]=(0,u.useState)(),p=t.current,h=(0,u.useCallback)((e=>{t.current=e}),[t]),g=(0,u.useCallback)((()=>{p||m(r)}),[p,m,r]),f=(0,u.useMemo)((()=>({isImporting:p,setIsImporting:h,importDemoPart:g,demoPartThatIsImporting:d,setDemoPartThatIsImporting:m,whatToImport:i,setWhatToImport:l,whereToApplyChanges:s,setWhereToApplyChanges:c,shouldConvertGlobalColors:n,setShouldConvertGlobalColors:o})),[p,h,d,m,g,i,l,s,c,n,o]);return(0,a.createElement)(pc.Provider,{value:f},e)})),gc=()=>(0,u.useContext)(pc),fc={typography:{holders:{}}};["a","lead","p","h1","h2","h3","h4","h5","h6"].forEach((e=>{h().set(fc,`typography.holders.${e}`,{transform:"none",style:"normal",decoration:"none"})}));const bc=e=>(e.forEach((e=>{switch(null==e?void 0:e.name){case"kubio/contact":case"kubio/subscribe-form":h().set(e,["attributes","shortcode"],""),h().set(e,["attributes","formId"],"");break;case"kubio/shortcode":h().set(e,["attributes","shortcode"],"")}const t=h().get(e,"innerBlocks",[]);bc(t)})),e),_c=e=>h().cloneDeep(h().get(e,"globalStyle.style.descendants.body",{}));function vc(e){return h()(e).pickBy(h().isObject).mapValues(vc).omitBy(h().isEmpty).assign(h().omitBy(e,(e=>h().isObject(e)&&!Array.isArray(e)))).value()}const yc=["header","footer","sidebar"],kc={header:"kubio/header",footer:"kubio/footer",sidebar:"kubio/sidebar"},Ec=e=>{const t=top.document;e?t.defaultView.setTimeout((()=>{t.body.classList.add("kubio-iframe-holder--show"),t.body.classList.remove("kubio-iframe-holder--hide"),t.body.classList.remove("h-ui-disable-transitions")}),100):(t.body.classList.remove("kubio-iframe-holder--show"),t.body.classList.add("kubio-iframe-holder--hide"),t.body.classList.add("h-ui-disable-transitions"))},Sc=(0,u.memo)((()=>{const{isImporting:e,setIsImporting:t,demoPartThatIsImporting:n,setDemoPartThatIsImporting:o,whereToApplyChanges:r,whatToImport:i,shouldConvertGlobalColors:l}=gc(),{onClose:c=h().noop}=dc(),{contentClientId:d,nrOfBlocksInsideContent:m,postType:p,postId:g,isClassicTemplate:f,pagePath:_,isFrontPageClassic:y,currentTheme:k,currentPostTitle:E}=(0,C.useSelect)((e=>{var t,n;const{getBlocks:o,getBlockOrder:r}=e("core/block-editor"),{getPage:i=h().noop,getTemplateId:a}=e("kubio/edit-site")||{},{getEditedEntityRecord:l,getCurrentTheme:s,getEntityRecord:c}=e("core"),u=l("root","site"),d=null===(t=s())||void 0===t?void 0:t.stylesheet,m=i()||{},{path:p}=m,{postType:g,postId:f}=(null==m?void 0:m.context)||{},b=a()||"",_=!h().get(b.split("//"),"[1]"),v=null==u?void 0:u.page_on_front,y="page"===u.show_on_front,k=_&&y&&parseInt(v)===parseInt(f),E=o()||[],S=(0,ye.findBlockByName)(E,"core/post-content"),w=null==S?void 0:S.clientId,C=null===(n=r(w))||void 0===n?void 0:n.length,I=c("postType",g,f);return{contentClientId:w,nrOfBlocksInsideContent:C,postType:g,postId:f,pagePath:p,isClassicTemplate:_,isFrontPageClassic:k,currentTheme:d,currentPost:I,currentPostTitle:h().get(I,"title.rendered","Kubio")}}),[]),{saveEntityRecord:w,editEntityRecord:I}=(0,C.useDispatch)("core"),{insertBlocks:x,replaceInnerBlocks:P,resetBlocks:R,selectBlock:A,removeBlocks:O}=(0,C.useDispatch)("core/block-editor"),{createErrorNotice:N}=(0,s.useKubioNotices)(),M=(0,b.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[_],D=(0,u.useRef)(),[,B=h().noop]=(0,b.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{onProcessGlobalDataSettings:L}=(({shouldConvertGlobalColors:e,whatToImport:t,contentClientId:n,isClassicTemplate:o})=>{const{parseVariableColor:r,setPalette:i,getPalette:a}=(0,v.useGlobalDataColors)(),{updateBlockAttributes:l}=(0,C.useDispatch)("core/block-editor"),{editEntityRecord:c}=(0,C.useDispatch)("core"),d=(0,u.useRef)(!1),m=(0,u.useRef)(!1),p="globalStyle.style.descendants.body",{globalStyle:g}=(0,v.useGlobalDataStyle)(),f=(0,u.useMemo)((()=>a()),[]),b=(0,u.useMemo)((()=>g.getStyle("",{},{styledComponent:"body",fromRoot:!0})),[g]),_=(0,u.useMemo)((()=>g.getStyle("",{},{styledComponent:"sectionSpacing",fromRoot:!0})),[g]),{getBlocks:y,pages:k,templateParts:E,templates:S,currentPostId:w}=(0,C.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core"),{getPage:o=h().noop}=e("kubio/edit-site")||{},r=o(),{postId:i}=(null==r?void 0:r.context)||{},a=e=>n("postType",e,{per_page:-1});return{currentPostId:i,getBlocks:t,pages:a("page"),templateParts:a("wp_template_part"),templates:a("wp_template").filter((({slug:e})=>oc.includes(e)))}})),I=(0,u.useCallback)((e=>{i(e)}),[i]),T=(0,u.useCallback)((e=>{g.setStyle("",e,{styledComponent:"body"})}),[g]),x=(0,u.useCallback)((e=>{g.setStyle("",e,{styledComponent:"sectionSpacing"})}),[g]),P=(0,u.useCallback)(((e,t)=>{const n=t.colors;return h().isEqual(n,f)||(e=(0,ye.removeThemeColorsFromBlocks)({blocks:e,colorPalette:n,parseVariableColor:r,generateColorVariants:v.generateColorVariants,shouldUpdateAttributes:!1})),e}),[f,I,r]),R=(0,u.useCallback)(((e,t)=>{const n=_c(t);let o=h().merge({},fc,n);const i=t.colors;o=(0,ye.removeThemeColorsFromObject)(o,{colorPalette:i,parseVariableColor:r,generateColorVariants:v.generateColorVariants});const a=h().merge({},fc,b);let l=(0,ye.getObjectDifference)(o,a);if(l=vc(l),h().isEmpty(l))return e;const c="typography.holders.lead";h().set(l,c,h().merge({},h().get(b,c),h().get(l,c))),h().each(h().get(l,"typography.holders"),((e,t)=>{h().isEmpty(e)||null==e||!e.family||null!=e&&e.weight||(e.weight=h().get(n,`typography.holders.${t}.weight`))}));const u=["kubio/header","kubio/footer","kubio/sidebar","core/post-content"],d="typography.holders.lead.color",m=h().get(l,d);return e.forEach((e=>{var t;const n=!!h().get(e,"attributes.kubio");if(u.includes(null==e?void 0:e.name)||!n)return;const o=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`;let r=h().get(e,o,{});const i=h().get(r,"typography.holders.p.color");i&&m&&(r=h().cloneDeep(r),h().set(r,d,i));const a=h().merge({},l,r);h().set(e,o,a)})),e}),[b,r,v.generateColorVariants]),A=(0,u.useCallback)((e=>{const t=e.colors;h().isEqual(t,f)||I(t)}),[f,I]),O=(0,u.useCallback)((e=>{const t=h().get(e,p,{}),n=h().merge({},fc,t),o=h().merge({},fc,b),r=vc((0,ye.getObjectDifference)(n,o));h().isEmpty(r)||T(n)}),[b,p]),N=(0,u.useCallback)((e=>{const t=h().get(e,"globalStyle.style.descendants.sectionSpacing",{});h().isEqual(_,t)||x(t)}),[_,x]),M=(0,u.useCallback)((e=>{d.current||(d.current=!0,A(e),O(e),N(e))}),[A,O,N,d]),D=(0,u.useCallback)(((e,t,n=!0)=>{const o=t.colors;let r=!1;const i=e.map((e=>{if(!h().get(e,"attributes.kubio"))return e;const{updatedBlock:i,hasUpdates:a}=(({block:e,colorPalette:t})=>{t=h().cloneDeep(t);const n=h().cloneDeep(e);let o=!1;const r=(0,v.generateColorVariants)(t),i=e=>{if(!Array.isArray(e))return e;let t;return t=4===e.length?"rgba":"rgb",`${t}(${e.join(", ")})`};t.forEach((e=>{e.color=i(e.color)})),r.forEach((e=>{e.color=i(e.color)}));const a=e=>{const n=h().get(e,"attributes.kubio",{});h().eachDeep(n,((e,n,i)=>{if("string"==typeof e&&(e.startsWith("#")&&(e=zn(e).toRgbString()),e.startsWith("rgb"))){const a=({color:t,slug:r})=>{if(t===e){o=!0;const e=zn(t);return i[n]=`rgba(var(--${r}),${e.getAlpha()})`,!0}return!1};t.find(a)||r.find(a)}}),{leavesOnly:!0});const{innerBlocks:i}=e;i.forEach((e=>{a(e)}))};return a(n),{updatedBlock:n,hasUpdates:o}})({block:e,colorPalette:o}),c=_c(t),{updatedBlock:u,hasUpdates:d}=(({block:e,generalBodyStyle:t})=>{var n;let o=!1;const r=`attributes.kubio.style.descendants.${null===(n=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===n?void 0:n.name}`,i=h().get(e,r,{}),a=h().merge({},fc,t),l=vc((0,ye.getObjectDifference)(i,a));return h().isEmpty(l)||h().isEqual(l,i)||(h().set(e,r,l),o=!0),{updatedBlock:e,hasUpdates:o}})({block:i,generalBodyStyle:c});return r=r||d||a,n&&(d||a)&&l(null==u?void 0:u.clientId,u.attributes),u}));return{blocks:i,blocksHaveChanges:r}}),[l]),B=(0,u.useCallback)((e=>{if(m.current=!0,t===Qs)return;let r=[],i=[];o||(i=y(),["kubio/header","kubio/footer","kubio/sidebar"].forEach((e=>{const t=(0,ye.findBlockByName)(i,e);if(!t)return;const n=y(null==t?void 0:t.clientId);r=r.concat(n)})));const a=y(n),l=i.concat(r,a);D(l,e)}),[t,n,o,D]),L=((0,u.useCallback)((e=>{k.concat(E,S).forEach((t=>{if(t.id===w)return;const n=h().get(t,"content.raw",""),o=(0,Ge.parse)(n);if(h().isEmpty(o))return;const{blocks:r,blocksHaveChanges:i}=D(o,e,!1);if(!i)return;const a={content:(0,Ge.serialize)(r)},{id:l,type:s}=t;c("postType",s,l,a)}))}),[D,k,E,S,w]),(0,u.useCallback)((e=>{m.current||B(e)}),[B])),z=(0,u.useCallback)(((e,t)=>{const n=h().get(t,"globalStyle.style.descendants.sectionSpacing",{});if(h().isEqual(_,n))return e;let o=(0,ye.getObjectDifference)(n,_);o=vc(o);const r=["kubio/section","kubio/navigation","kubio/hero","kubio/query-layout"];return e.forEach((e=>{var t;const n=!!h().get(e,"attributes.kubio");if(!r.includes(null==e?void 0:e.name)||!n)return;const i=`attributes.kubio.style.descendants.${null===(t=(0,s.getBlockDefaultElement)(null==e?void 0:e.name))||void 0===t?void 0:t.name}`,a=h().get(e,i,{}),l=h().merge({},o,a);h().set(e,i,l)})),e}),[_]);return{onProcessGlobalDataSettings:(0,u.useCallback)(((t,n)=>(e?(M(n),L(n)):(t=P(t,n),t=R(t,n),t=z(t,n)),t)),[P,R,z,L,e,M])}})({shouldConvertGlobalColors:l,whatToImport:i,contentClientId:d,isClassicTemplate:f}),z=(0,u.useCallback)(((e,t)=>(e=bc(e),e=L(e,t),(0,s.getBlocksWithNewRefs)(e))),[L]),F=(0,S.useDebounce)((0,u.useCallback)((e=>{clearTimeout(D.current),Ec(!0),D.current=setTimeout((()=>{Ws(e)}),100)}),[]),100);(0,u.useEffect)((()=>()=>{clearTimeout(D.current)}),[]);const G=(0,u.useCallback)((()=>{o(null),t(!1)}),[o,t]),{templatePartIsUsedOnMultipleTemplates:H,templatePartIsFoundOnPage:U,refreshPage:W,templateIsUsedOnMultiplePages:j}=(0,s.useTemplateData)("header"),{templatePartIsUsedOnMultipleTemplates:K,templatePartIsFoundOnPage:V}=(0,s.useTemplateData)("footer"),{templatePartIsUsedOnMultipleTemplates:$,templatePartIsFoundOnPage:q}=(0,s.useTemplateData)("sidebar"),Y=(0,u.useMemo)((()=>({header:H,footer:K,sidebar:$})),[H,K,$]),Z=(0,u.useMemo)((()=>({header:U,footer:V,sidebar:q})),[U,V,q]),{getBlocks:X}=(0,C.useSelect)((e=>{const{getBlocks:t}=e("core/block-editor"),{getEntityRecords:n}=e("core");return{getBlocks:t,getEntityRecords:n}})),Q=(0,u.useCallback)((()=>{t(!0),c(),Ec(!1)}),[t,c]),J=(0,u.useCallback)((({templatePartName:e,templateBlocks:t,newSlug:n,newTheme:o})=>{const r=(0,ye.findBlockByName)(t,e);r&&(r.attributes.slug=n,r.attributes.theme=o)}),[]),ee=(0,u.useCallback)((async(e,t,n)=>{var o;const r=X(),i=kc[t],a=(0,ye.findBlockByName)(r,i),l=null==a?void 0:a.clientId;if(!l)return;await P(l,e);const s=null==a||null===(o=a.attributes)||void 0===o?void 0:o.slug;J({templateBlocks:n,templatePartName:i,newSlug:s,newTheme:k})}),[X,P,k,J]),te=(0,u.useCallback)((async(e,t,n)=>{const o=`${E} ${t}`,r={title:o,slug:o,area:t,kubio_template_source:"kubio-custom",content:(0,Ge.serialize)(e)},i=await w("postType","wp_template_part",r),a=kc[t],l=null==i?void 0:i.slug,s=null==i?void 0:i.theme;l&&s&&J({templateBlocks:n,templatePartName:a,newSlug:l,newTheme:s})}),[E,w,J]),ne=(0,u.useCallback)((async e=>{const{title:t,slug:n,assignTemplateToPage:o}=(({isFrontPageClassic:e,isClassicTemplate:t,classicTemplateSlug:n,postType:o,currentPostTitle:r})=>{let i="page"===o,a=`${r} template`,l=a;const s=tc,c="search"===n,u="404"===n,d=t&&nc.includes(n),m=t&&s.includes(n);return e?(a="Front page",l="front-page",i=!1):d?(a="Index",l="index",i=!1):m?(a="Single Post",l="single",i=!1):c?(a="Search",l="search",i=!1):u?(a="404",l="404",i=!1):o&&(l=`${o}-${l}`),{title:a,slug:l,assignTemplateToPage:i}})({isFrontPageClassic:y,isClassicTemplate:f,classicTemplateSlug:M,postType:p,currentPostTitle:E}),r={title:t,slug:n,kubio_template_source:o?"kubio-custom":"kubio",content:(0,Ge.serialize)(e)},i=await w("postType","wp_template",r);return o&&await I("postType",p,g,{template:null==i?void 0:i.slug}),B(!0),await W(i),i}),[y,f,M,p,E,w,B,W,I,g]),oe=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{const o=X(),r={};if(yc.forEach((e=>{const t=kc[e];r[e]=(0,ye.findBlockByName)(o,t)})),await Promise.all(t.map((async({area:t,content:o})=>{var i;const a=z((0,Ge.parse)(o),n),l=null===(i=r[t])||void 0===i?void 0:i.clientId;l?await P(l,a):await te(a,t,e)}))),!h().isEmpty(t)){const n=Object.values(r),o=t.map((({area:e})=>kc[e]));n.forEach((t=>{var n;if(!t)return;const r=null==t?void 0:t.name;if(!o.includes(r))return;const i=null==t||null===(n=t.attributes)||void 0===n?void 0:n.slug;J({templateBlocks:e,templatePartName:r,newSlug:i,newTheme:k})}))}f?await ne(e):await R(e),F()}),[X,f,F,z,P,te,k,J,ne,R]),re=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{await Promise.all(t.map((async({area:t,content:o})=>{const r=z((0,Ge.parse)(o),n);Y[t]||!Z[t]?await te(r,t,e):await ee(r,t,e)}))),await R(e)}),[R,z,Y,Z,te,ee]),ie=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{await Promise.all(t.map((async({area:t,content:o})=>{const r=z((0,Ge.parse)(o),n);await te(r,t,e)}))),await ne(e)}),[te,ne,z]),ae=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{j||f?await ie({templateBlocks:e,templateParts:t,globalData:n}):await re({templateBlocks:e,templateParts:t,globalData:n}),B(!0),F()}),[j,f,B,F,ie,re]),le=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{let o=r;p&&"page"!==p&&!f&&(o=ec);const i=ec===o;Js===o&&await ae({templateBlocks:e,templateParts:t,globalData:n}),i&&await re({templateBlocks:e,templateParts:t,globalData:n})}),[f,p,r,re,ae]),se=(0,u.useCallback)((async({templateBlocks:e,templateParts:t,globalData:n})=>{const o=X(),r=e[1];let i,a;o.forEach(((e,t)=>{("kubio/header"===e.name||"core/template-part"===e.name&&"header"===(null==e?void 0:e.area))&&(i=t),("kubio/footer"===e.name||"core/template-part"===e.name&&"footer"===(null==e?void 0:e.area))&&(a=t)}));let l=[];l=l.concat(o.slice(0,i+1)),l.push(r),l=l.concat(o.slice(a));const s=t.filter((({area:e})=>!["footer","header"].includes(e)));oe({templateBlocks:l,templateParts:s,globalData:n}),F()}),[X,F,oe]),ce=(0,u.useCallback)((async e=>{let t=i===Xs;f&&(t=!1);const{template:n,templateParts:o,globalData:r}=await async function(e,t=!0){const n=["demoPartsContentById","templates",e],o=h().get(Bs,n),r=h().get(o,"templatePartsIds",[]);let i={template:await async function(e){return Fs(e,"templates")}(e),templateParts:await Promise.all(r.map((async e=>({area:h().get(Bs,["demoPartsContentById","templateParts",e,"area"]),content:await async function(e){return Fs(e,"templateParts")}(e)}))))};if(t){const e=null==o?void 0:o.globalDataId,t=await zs(e);i.globalData=t}return i=h().cloneDeep(i),i}(e);if(!n)return void G();const a=z((0,Ge.parse)(n),r);t?await se({templateBlocks:a,templateParts:o,globalData:r}):await le({templateBlocks:a,templateParts:o,globalData:r})}),[i,f,Q,z,G,se,le]),ue=(0,u.useCallback)((async({pageBlocks:e,globalData:t})=>{const n=h().get(e,[0,"clientId"]);await x(e,m,d,!1),F(n)}),[x,m,d,F]),de=(0,u.useCallback)((async({pageBlocks:e,pageId:t})=>{f&&await R([]),await P(d,e);const n=(o=t,h().get(Bs,["demoPartsContentById","pages",o]));var o;const r=null==n?void 0:n.templateId;await ce(r),F()}),[f,P,d,ce,F,R]),me=(0,u.useCallback)((async e=>{const t=i===Xs,n=i===Qs,{page:o,globalData:r}=await async function(e){const t=["demoPartsContentById","pages",e],n=h().get(Bs,t),o=await async function(e){return Fs(e,"pages")}(e),r=null==n?void 0:n.globalDataId;let i={page:o,globalData:await zs(r)};return i=h().cloneDeep(i),i}(e);if(!o)return void G();const a=z((0,Ge.parse)(o),r);t&&await ue({pageBlocks:a,globalData:r,pageId:e}),n&&await de({pageBlocks:a,globalData:r,pageId:e})}),[i,z,G,ue,de]),pe=(0,u.useCallback)((async()=>{if(!n||e)return;const t="page"===(null==n?void 0:n.type),o="template"===(null==n?void 0:n.type),r=null==n?void 0:n.id;if(r)try{Q(),t&&await me(r),o&&await ce(r)}catch(e){console.error(e),N((0,T.__)("Could not import content. Please try again later","kubio"))}finally{F()}}),[n,e,Q,me,ce,N,F]);return(0,u.useEffect)((()=>{pe()}),[n,pe]),(0,a.createElement)(a.Fragment,null)})),wc=(0,u.memo)((()=>{const{categoriesList:e=[],selectedCategory:t,setSelectedCategory:n,nrOfItemsPerCategory:o}=ah(),r=(0,C.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),i=e.filter((e=>!r.includes(e.value))),[l,s]=(0,u.useState)(t),c=(0,u.useCallback)((e=>{e!==t&&(s(e),n(e))}),[n,t,s]);return(0,u.useEffect)((()=>{l!==t&&s(t)}),[t]),(0,a.createElement)("div",{className:"kubio-predefined-layouts__category-list",onClick:e=>e.stopPropagation()},(0,a.createElement)("div",{className:"kubio-predefined-layouts__category-list__title"},"CATEGORIES"),i.map((({label:e,value:t})=>(0,a.createElement)(E.Button,{key:t,onClick:()=>c(t),className:R()("kubio-predefined-layouts__category-list__item",{"kubio-predefined-layouts__category-list__item--active":t===l})},e,(0,a.createElement)("span",null,o[t])))))})),Cc=(0,u.memo)((({type:e,id:t,relatedFavoriteId:n})=>{const{favoritesDataByType:o,onAddToFavorites:r}=fh(),i=(0,u.useMemo)((()=>h().get(o,[e,t],!1)),[o]),[l,s]=(0,u.useState)(i);(0,u.useEffect)((()=>{i!==l&&s(i)}),[i]);const c=(0,u.useMemo)((()=>l?"font-awesome/heart":"font-awesome/heart-o"),[l]),d=(0,u.useCallback)((async o=>{o.stopPropagation();const i=!l;s(i),r(e,n?[t,n]:t,i)}),[l,r,s,n]);return(0,a.createElement)(Ue.CanvasIcon,{onClick:d,className:"kubio-predefined-layouts__favorite-button",name:c})})),Ic=(0,u.memo)((({fontsToLoad:e})=>{const t=(0,u.useCallback)((e=>{e.target.rel="stylesheet"}),[e]);return Array.isArray(e)?(0,a.createElement)(a.Fragment,null,e.map((e=>(0,a.createElement)("link",{href:`https://fonts.googleapis.com/css?family=${e}&display=swap`,key:e,rel:"preload",as:"style",onLoad:t})))):(0,a.createElement)(a.Fragment,null)})),Tc=(0,u.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__img__placeholder"}))),xc=({src:e,uniqueId:t,showAnimationAtLoad:n,addImageType:o=!0,onLoad:r=h().noop,...i})=>{const[l,s]=(0,u.useState)(!0),c=(0,u.useRef)(),d=(0,u.useRef)(),m=(0,u.useRef)(!1),p=(0,u.useRef)(),g=(0,u.useRef)(!1),f=(0,u.useRef)(!1);(0,u.useEffect)((()=>{l||s(!0)}),[e]);const b=(0,u.useCallback)((()=>{var e,t;const n=c.current;if(!n)return;const o=parseInt((null===(e=d.current)||void 0===e?void 0:e.naturalWidth)||0),r=parseInt((null===(t=d.current)||void 0===t?void 0:t.naturalHeight)||0),i=n.parentNode;let a=!1;if(0!==o&&0!==r){const e=(r+10)/o;a=parseInt(i.clientHeight)/parseInt(i.clientWidth)>e}}),[c,d]),_=(0,u.useCallback)((()=>{f.current=!0;const t=c.current;t&&(t.src=e,t.setAttribute("data-is-loaded",""),s(!1),m.current&&r(),o&&b())}),[e,s,o,b]),v=(0,u.useMemo)((()=>{if(e.startsWith("data:image/"))return!0;f.current=!1,g.current=!1;const t=new Image;return d.current=t,clearTimeout(g.current),p.current=setTimeout((()=>{g.current=!0,f.current||t.complete&&_()}),350),t.onload=()=>{g.current&&_()},t.src=e,t.complete}),[e]);return(0,u.useEffect)((()=>()=>{clearTimeout(g.current)}),[]),(0,u.useLayoutEffect)((()=>{var e;null!==(e=d.current)&&void 0!==e&&e.complete&&b()}),[]),(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__img__outer",{"kubio-predefined-layouts__img__outer--with-placeholder":!v&&l}),...i},(0,a.createElement)("img",{className:R()("kubio-predefined-layouts__img",{"kubio-predefined-layouts__img--with-animation":!v}),ref:c,src:e,onLoad:()=>{l||(m.current=!0,r())}}),!v&&l&&(0,a.createElement)(Tc,null))},Pc=(0,u.memo)((({list:e,children:t=h().noop})=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list"},e.map((e=>t(e)))))),Rc=(0,u.memo)((0,u.forwardRef)((({screenshot:e,screenshotFull:t,label:n="",isPack:o=!1,labelSlot:r,showFull:i=!1,uniqueId:l,isPro:s=!1,showFavorite:c=!0,isLandscape:d=!1,showLabel:m=!0,addUniquePreviewAttribute:p=!0,showAnimationAtLoad:h,onClick:g,onLoad:f,favoriteType:b,favoriteId:_,relatedFavoriteId:v,children:y,addImageType:k,...E},S)=>{const w=i?t:e;l=l||w;const C=(0,u.useMemo)((()=>Math.random()),[l]),I=s;let T={};return p&&(T={"data-unique-id":l}),(0,a.createElement)("div",{key:C,className:"kubio-predefined-layouts__screenshot-preview__outer",...T,...E},(0,a.createElement)("div",{ref:S,className:R()("kubio-predefined-layouts__screenshot-preview__parent",{"kubio-predefined-layouts__screenshot-preview__parent--with-pack":o,"kubio-predefined-layouts__screenshot-preview__parent--is-landscape":d})},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview kubio-pro-item--small",onClick:g},(0,a.createElement)(xc,{src:w,uniqueId:l,showAnimationAtLoad:h,onLoad:f,addImageType:k})),m&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__label__with-badge"},I&&(0,a.createElement)("span",{className:"kubio-pro-item__badge"},"PRO"),n),c&&(0,a.createElement)(Cc,{type:b,id:_,relatedFavoriteId:v}),r),y),o&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-1"}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-preview__pack__layer kubio-predefined-layouts__screenshot-preview__pack--layer-2"})))}))),Ac=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})),Oc=(0,u.memo)((({placeholder:e="Search"})=>{const{searchString:t,setSearchString:n}=ih(),[o,r]=(0,u.useState)(t),i=(0,s.useDebounce)(n,300),l=(0,u.useCallback)((e=>{const t=e.target.value;r(t),i(t)}),[r,i]);return(0,u.useEffect)((()=>{o!==t&&r(t)}),[t]),(0,a.createElement)(Ue.InputControl,{className:"kubio-predefined-layouts__search-input",value:o,onInput:l,placeholder:e,suffix:(0,a.createElement)(E.Icon,{icon:Ac})})})),Nc=(0,u.memo)((({label:e=(0,T.__)("PRO","kubio"),className:t})=>(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__free-pro-separator",t)},e,(0,a.createElement)("div",{className:"kubio-predefined-layouts__free-pro-separator__line"}))));function Mc(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Dc(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Bc(e,t){try{var n=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}function Lc(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,r=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?r="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==r){var i=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=Mc,t.componentWillReceiveProps=Dc),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Bc;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,o)}}return e}function zc(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=zc(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}(0,T.__)("ALL","kubio"),(0,T.__)("FREE","kubio"),(0,T.__)("PRO","kubio"),Mc.__suppressDeprecationWarning=!0,Dc.__suppressDeprecationWarning=!0,Bc.__suppressDeprecationWarning=!0;const Fc=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=zc(e))&&(o&&(o+=" "),o+=t);return o};function Gc(e){var t=e.cellCount,n=e.cellSize,o=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,i=e.nextCellsCount,a=e.nextCellSize,l=e.nextScrollToIndex,s=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===i&&("number"!=typeof n&&"number"!=typeof a||n===a)||(o(r),s>=0&&s===l&&c())}function Hc(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Uc=function(){function e(t){var n=t.cellCount,o=t.cellSizeGetter,r=t.estimatedCellSize;Xe(this,e),Ye(this,"_cellSizeAndPositionData",{}),Ye(this,"_lastMeasuredIndex",-1),Ye(this,"_lastBatchedIndex",-1),Ye(this,"_cellCount",void 0),Ye(this,"_cellSizeGetter",void 0),Ye(this,"_estimatedCellSize",void 0),this._cellSizeGetter=o,this._cellCount=n,this._estimatedCellSize=r}return Je(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize,o=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=o}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,o=this._lastMeasuredIndex+1;o<=e;o++){var r=this._cellSizeGetter({index:o});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell ".concat(o," of value ").concat(r));null===r?(this._cellSizeAndPositionData[o]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[o]={offset:n,size:r},n+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;if(o<=0)return 0;var a,l=this.getSizeAndPositionOfCell(i),s=l.offset,c=s-o+l.size;switch(n){case"start":a=s;break;case"end":a=c;break;case"center":a=s-(o-l.size)/2;break;default:a=Math.max(c,Math.min(s,r))}var u=this.getTotalSize();return Math.max(0,Math.min(u-o,a))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var o=n+t,r=this._findNearestCell(n),i=this.getSizeAndPositionOfCell(r);n=i.offset+i.size;for(var a=r;n<o&&a<this._cellCount-1;)a++,n+=this.getSizeAndPositionOfCell(a).size;return{start:r,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var o=t+Math.floor((e-t)/2),r=this.getSizeAndPositionOfCell(o).offset;if(r===n)return o;r<n?t=o+1:r>n&&(e=o-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}(),Wc=function(){function e(t){var n=t.maxScrollSize,o=void 0===n?"undefined"!=typeof window&&window.chrome?16777100:15e5:n,r=Hc(t,["maxScrollSize"]);Xe(this,e),Ye(this,"_cellSizeAndPositionManager",void 0),Ye(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Uc(r),this._maxScrollSize=o}return Je(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize(),i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(r-o))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,o=e.containerSize,r=e.currentOffset,i=e.targetIndex;r=this._safeOffsetToOffset({containerSize:o,offset:r});var a=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:o,currentOffset:r,targetIndex:i});return this._offsetToSafeOffset({containerSize:o,offset:a})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,o=e.totalSize;return o<=t?0:n/(o-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:o});return Math.round(i*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,o=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();if(o===r)return n;var i=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(i*(o-t))}}]),e}();function jc(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var o=n.callback,r=n.indices,i=Object.keys(r),a=!e||i.every((function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0})),l=i.length!==Object.keys(t).length||i.some((function(e){var n=t[e],o=r[e];return Array.isArray(o)?n.join(",")!==o.join(","):n!==o}));t=r,a&&l&&o(r)}}function Kc(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,o=e.previousCellsCount,r=e.previousCellSize,i=e.previousScrollToAlignment,a=e.previousScrollToIndex,l=e.previousSize,s=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,d=e.size,m=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,h=n.getCellCount(),g=u>=0&&u<h;g&&(d!==l||m||!r||"number"==typeof t&&t!==r||c!==i||u!==a)?p(u):!g&&h>0&&(d<l||h<o)&&s>n.getTotalSize()-d&&p(h-1)}const Vc=!("undefined"==typeof window||!window.document||!window.document.createElement);var $c,qc;function Yc(e){if((!$c&&0!==$c||e)&&Vc){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),$c=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return $c}var Zc,Xc,Qc=(qc="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||qc.webkitRequestAnimationFrame||qc.mozRequestAnimationFrame||qc.oRequestAnimationFrame||qc.msRequestAnimationFrame||function(e){return qc.setTimeout(e,1e3/60)},Jc=qc.cancelAnimationFrame||qc.webkitCancelAnimationFrame||qc.mozCancelAnimationFrame||qc.oCancelAnimationFrame||qc.msCancelAnimationFrame||function(e){qc.clearTimeout(e)},eu=Qc,tu=Jc,nu=function(e){return tu(e.id)},ou=function(e,t){var n;Promise.resolve().then((function(){n=Date.now()}));var o={id:eu((function r(){Date.now()-n>=t?e.call():o.id=eu(r)}))};return o};function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var au="requested",lu=(Xc=Zc=function(e){function t(e){var n;Xe(this,t),Ye(et(n=tt(this,nt(t).call(this,e))),"_onGridRenderedMemoizer",jc()),Ye(et(n),"_onScrollMemoizer",jc(!1)),Ye(et(n),"_deferredInvalidateColumnIndex",null),Ye(et(n),"_deferredInvalidateRowIndex",null),Ye(et(n),"_recomputeScrollLeftFlag",!1),Ye(et(n),"_recomputeScrollTopFlag",!1),Ye(et(n),"_horizontalScrollBarSize",0),Ye(et(n),"_verticalScrollBarSize",0),Ye(et(n),"_scrollbarPresenceChanged",!1),Ye(et(n),"_scrollingContainer",void 0),Ye(et(n),"_childrenToDisplay",void 0),Ye(et(n),"_columnStartIndex",void 0),Ye(et(n),"_columnStopIndex",void 0),Ye(et(n),"_rowStartIndex",void 0),Ye(et(n),"_rowStopIndex",void 0),Ye(et(n),"_renderedColumnStartIndex",0),Ye(et(n),"_renderedColumnStopIndex",0),Ye(et(n),"_renderedRowStartIndex",0),Ye(et(n),"_renderedRowStopIndex",0),Ye(et(n),"_initialScrollTop",void 0),Ye(et(n),"_initialScrollLeft",void 0),Ye(et(n),"_disablePointerEventsTimeoutId",void 0),Ye(et(n),"_styleCache",{}),Ye(et(n),"_cellCache",{}),Ye(et(n),"_debounceScrollEndedCallback",(function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})})),Ye(et(n),"_invokeOnGridRenderedHelper",(function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})})),Ye(et(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Ye(et(n),"_onScroll",(function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)}));var o=new Wc({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),r=new Wc({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:o,rowSizeAndPositionManager:r,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),e.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return rt(t,e),Je(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,o=e.columnIndex,r=void 0===o?this.props.scrollToColumn:o,i=e.rowIndex,a=void 0===i?this.props.scrollToRow:i,l=iu({},this.props,{scrollToAlignment:n,scrollToColumn:r,scrollToRow:a});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,o=e.scrollTop,r=void 0===o?0:o;if(!(r<0)){this._debounceScrollEnded();var i=this.props,a=i.autoHeight,l=i.autoWidth,s=i.height,c=i.width,u=this.state.instanceProps,d=u.scrollbarSize,m=u.rowSizeAndPositionManager.getTotalSize(),p=u.columnSizeAndPositionManager.getTotalSize(),h=Math.min(Math.max(0,p-c+d),n),g=Math.min(Math.max(0,m-s+d),r);if(this.state.scrollLeft!==h||this.state.scrollTop!==g){var f={isScrolling:!0,scrollDirectionHorizontal:h!==this.state.scrollLeft?h>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:g!==this.state.scrollTop?g>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};a||(f.scrollTop=g),l||(f.scrollLeft=h),f.needToResetStyleCache=!1,this.setState(f)}this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:g,totalColumnsWidth:p,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount,o=this.state.instanceProps;o.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),o.rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,a=i.scrollToColumn,l=i.scrollToRow,s=this.state.instanceProps;s.columnSizeAndPositionManager.resetCell(n),s.rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=a>=0&&(1===this.state.scrollDirectionHorizontal?n<=a:n>=a),this._recomputeScrollTopFlag=l>=0&&(1===this.state.scrollDirectionVertical?r<=l:r>=l),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,o=this.props.columnCount,r=this.props;o>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(iu({},r,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow(iu({},r,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,n=e.getScrollbarSize,o=e.height,r=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,l=e.scrollToRow,s=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=iu({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=n(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof r&&r>=0||"number"==typeof a&&a>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:a});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var d=o>0&&s>0;i>=0&&d&&this._updateScrollLeftForScrollToColumn(),l>=0&&d&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:a||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,o=this.props,r=o.autoHeight,i=o.autoWidth,a=o.columnCount,l=o.height,s=o.rowCount,c=o.scrollToAlignment,u=o.scrollToColumn,d=o.scrollToRow,m=o.width,p=this.state,h=p.scrollLeft,g=p.scrollPositionChangeReason,f=p.scrollTop,b=p.instanceProps;this._handleInvalidatedGridSize();var _=a>0&&0===e.columnCount||s>0&&0===e.rowCount;g===au&&(!i&&h>=0&&(h!==this._scrollingContainer.scrollLeft||_)&&(this._scrollingContainer.scrollLeft=h),!r&&f>=0&&(f!==this._scrollingContainer.scrollTop||_)&&(this._scrollingContainer.scrollTop=f));var v=(0===e.width||0===e.height)&&l>0&&m>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Kc({cellSizeAndPositionManager:b.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:h,scrollToAlignment:c,scrollToIndex:u,size:m,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Kc({cellSizeAndPositionManager:b.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:f,scrollToAlignment:c,scrollToIndex:d,size:l,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),h!==t.scrollLeft||f!==t.scrollTop){var y=b.rowSizeAndPositionManager.getTotalSize(),k=b.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:f,totalColumnsWidth:k,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&nu(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,o=e.autoWidth,r=e.className,i=e.containerProps,l=e.containerRole,s=e.containerStyle,c=e.height,u=e.id,d=e.noContentRenderer,m=e.role,p=e.style,h=e.tabIndex,g=e.width,f=this.state,b=f.instanceProps,_=f.needToResetStyleCache,v=this._isScrolling(),y={boxSizing:"border-box",direction:"ltr",height:n?"auto":c,position:"relative",width:o?"auto":g,WebkitOverflowScrolling:"touch",willChange:"transform"};_&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var k=b.columnSizeAndPositionManager.getTotalSize(),E=b.rowSizeAndPositionManager.getTotalSize(),S=E>c?b.scrollbarSize:0,w=k>g?b.scrollbarSize:0;w===this._horizontalScrollBarSize&&S===this._verticalScrollBarSize||(this._horizontalScrollBarSize=w,this._verticalScrollBarSize=S,this._scrollbarPresenceChanged=!0),y.overflowX=k+S<=g?"hidden":"auto",y.overflowY=E+w<=c?"hidden":"auto";var C=this._childrenToDisplay,I=0===C.length&&c>0&&g>0;return a.createElement("div",x({ref:this._setScrollingContainerRef},i,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Fc("ReactVirtualized__Grid",r),id:u,onScroll:this._onScroll,role:m,style:iu({},y,{},p),tabIndex:h}),C.length>0&&a.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:l,style:iu({width:t?"auto":k,height:E,maxWidth:k,maxHeight:E,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"},s)},C),I&&d())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,o=e.cellRangeRenderer,r=e.columnCount,i=e.deferredMeasurementCache,a=e.height,l=e.overscanColumnCount,s=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,d=e.width,m=e.isScrollingOptOut,p=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,g=t.instanceProps,f=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,b=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,_=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&d>0){var v=g.columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:b}),y=g.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:f}),k=g.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:b}),E=g.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:f});this._renderedColumnStartIndex=v.start,this._renderedColumnStopIndex=v.stop,this._renderedRowStartIndex=y.start,this._renderedRowStopIndex=y.stop;var S=s({direction:"horizontal",cellCount:r,overscanCellsCount:l,scrollDirection:p,startIndex:"number"==typeof v.start?v.start:0,stopIndex:"number"==typeof v.stop?v.stop:-1}),w=s({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:h,startIndex:"number"==typeof y.start?y.start:0,stopIndex:"number"==typeof y.stop?y.stop:-1}),C=S.overscanStartIndex,I=S.overscanStopIndex,T=w.overscanStartIndex,x=w.overscanStopIndex;if(i){if(!i.hasFixedHeight())for(var P=T;P<=x;P++)if(!i.has(P,0)){C=0,I=r-1;break}if(!i.hasFixedWidth())for(var R=C;R<=I;R++)if(!i.has(0,R)){T=0,x=u-1;break}}this._childrenToDisplay=o({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:g.columnSizeAndPositionManager,columnStartIndex:C,columnStopIndex:I,deferredMeasurementCache:i,horizontalOffsetAdjustment:k,isScrolling:_,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:g.rowSizeAndPositionManager,rowStartIndex:T,rowStopIndex:x,scrollLeft:b,scrollTop:f,styleCache:this._styleCache,verticalOffsetAdjustment:E,visibleColumnIndices:v,visibleRowIndices:y}),this._columnStartIndex=C,this._columnStopIndex=I,this._rowStartIndex=T,this._rowStopIndex=x}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&nu(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=ou(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:i,scrollLeft:n,scrollTop:o,scrollWidth:r})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft,o=e.scrollTop,r=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:o});r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollLeftForScrollToColumnStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,n=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var o=this._rowStartIndex;o<=this._rowStopIndex;o++)for(var r=this._columnStartIndex;r<=this._columnStopIndex;r++){var i="".concat(o,"-").concat(r);this._styleCache[i]=e[i],n&&(this._cellCache[i]=t[i])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=t._getScrollTopForScrollToRowStateUpdate(e,n);o&&(o.needToResetStyleCache=!1,this.setState(o))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var o={};0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(o.scrollLeft=0,o.scrollTop=0):(e.scrollLeft!==n.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==n.scrollTop&&e.scrollToRow<0)&&Object.assign(o,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var r,i,a=n.instanceProps;return o.needToResetStyleCache=!1,e.columnWidth===a.prevColumnWidth&&e.rowHeight===a.prevRowHeight||(o.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==a.prevColumnCount&&0!==a.prevRowCount||(a.prevColumnCount=0,a.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===a.prevIsScrolling&&Object.assign(o,{isScrolling:!1}),Gc({cellCount:a.prevColumnCount,cellSize:"number"==typeof a.prevColumnWidth?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),Gc({cellCount:a.prevRowCount,cellSize:"number"==typeof a.prevRowHeight?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){i=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),a.prevColumnCount=e.columnCount,a.prevColumnWidth=e.columnWidth,a.prevIsScrolling=!0===e.isScrolling,a.prevRowCount=e.rowCount,a.prevRowHeight=e.rowHeight,a.prevScrollToColumn=e.scrollToColumn,a.prevScrollToRow=e.scrollToRow,a.scrollbarSize=e.getScrollbarSize(),void 0===a.scrollbarSize?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,o.instanceProps=a,iu({},o,{},r,{},i)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,o=e.scrollTop,r={scrollPositionChangeReason:au};return"number"==typeof n&&n>=0&&(r.scrollDirectionHorizontal=n>t.scrollLeft?1:-1,r.scrollLeft=n),"number"==typeof o&&o>=0&&(r.scrollDirectionVertical=o>t.scrollTop?1:-1,r.scrollTop=o),"number"==typeof n&&n>=0&&n!==t.scrollLeft||"number"==typeof o&&o>=0&&o!==t.scrollTop?r:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,o=e.height,r=e.scrollToAlignment,i=e.scrollToColumn,a=e.width,l=t.scrollLeft,s=t.instanceProps;if(n>0){var c=n-1,u=i<0?c:Math.min(c,i),d=s.rowSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>o?s.scrollbarSize:0;return s.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:a-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var o=n.scrollLeft,r=t._getCalculatedScrollLeft(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:r,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,o=e.rowCount,r=e.scrollToAlignment,i=e.scrollToRow,a=e.width,l=t.scrollTop,s=t.instanceProps;if(o>0){var c=o-1,u=i<0?c:Math.min(c,i),d=s.columnSizeAndPositionManager.getTotalSize(),m=s.scrollbarSizeMeasured&&d>a?s.scrollbarSize:0;return s.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:n-m,currentOffset:l,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var o=n.scrollTop,r=t._getCalculatedScrollTop(e,n);return"number"==typeof r&&r>=0&&o!==r?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:r}):{}}}]),t}(a.PureComponent),Ye(Zc,"propTypes",null),Xc);Ye(lu,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,n=e.cellRenderer,o=e.columnSizeAndPositionManager,r=e.columnStartIndex,i=e.columnStopIndex,a=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,s=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,d=e.rowSizeAndPositionManager,m=e.rowStartIndex,p=e.rowStopIndex,h=e.styleCache,g=e.verticalOffsetAdjustment,f=e.visibleColumnIndices,b=e.visibleRowIndices,_=[],v=o.areOffsetsAdjusted()||d.areOffsetsAdjusted(),y=!s&&!v,k=m;k<=p;k++)for(var E=d.getSizeAndPositionOfCell(k),S=r;S<=i;S++){var w=o.getSizeAndPositionOfCell(S),C=S>=f.start&&S<=f.stop&&k>=b.start&&k<=b.stop,I="".concat(k,"-").concat(S),T=void 0;y&&h[I]?T=h[I]:a&&!a.has(k,S)?T={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(T={height:E.size,left:w.offset+l,position:"absolute",top:E.offset+g,width:w.size},h[I]=T);var x={columnIndex:S,isScrolling:s,isVisible:C,key:I,parent:u,rowIndex:k,style:T},P=void 0;!c&&!s||l||g?P=n(x):(t[I]||(t[I]=n(x)),P=t[I]),null!=P&&!1!==P&&_.push(P)}return _},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Yc,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,i=e.stopIndex;return 1===o?{overscanStartIndex:Math.max(0,r),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,i)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Lc(lu);const su=lu;function cu(e){var t=e.cellCount,n=e.overscanCellsCount,o=e.scrollDirection,r=e.startIndex,i=e.stopIndex;return n=Math.max(1,n),1===o?{overscanStartIndex:Math.max(0,r-1),overscanStopIndex:Math.min(t-1,i+n)}:{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,i+1)}}var uu,du;function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var pu,hu,gu=(du=uu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Ye(et(n),"_columnStartIndex",0),Ye(et(n),"_columnStopIndex",0),Ye(et(n),"_rowStartIndex",0),Ye(et(n),"_rowStopIndex",0),Ye(et(n),"_onKeyDown",(function(e){var t=n.props,o=t.columnCount,r=t.disabled,i=t.mode,a=t.rowCount;if(!r){var l=n._getScrollState(),s=l.scrollToColumn,c=l.scrollToRow,u=n._getScrollState(),d=u.scrollToColumn,m=u.scrollToRow;switch(e.key){case"ArrowDown":m="cells"===i?Math.min(m+1,a-1):Math.min(n._rowStopIndex+1,a-1);break;case"ArrowLeft":d="cells"===i?Math.max(d-1,0):Math.max(n._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===i?Math.min(d+1,o-1):Math.min(n._columnStopIndex+1,o-1);break;case"ArrowUp":m="cells"===i?Math.max(m-1,0):Math.max(n._rowStartIndex-1,0)}d===s&&m===c||(e.preventDefault(),n._updateScrollState({scrollToColumn:d,scrollToRow:m}))}})),Ye(et(n),"_onSectionRendered",(function(e){var t=e.columnStartIndex,o=e.columnStopIndex,r=e.rowStartIndex,i=e.rowStopIndex;n._columnStartIndex=t,n._columnStopIndex=o,n._rowStartIndex=r,n._rowStopIndex=i})),n}return rt(t,e),Je(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow;this.setState({scrollToRow:n,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=this._getScrollState(),r=o.scrollToColumn,i=o.scrollToRow;return a.createElement("div",{className:t,onKeyDown:this._onKeyDown},n({onSectionRendered:this._onSectionRendered,scrollToColumn:r,scrollToRow:i}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow,o=this.props,r=o.isControlled,i=o.onScrollToChange;"function"==typeof i&&i({scrollToColumn:t,scrollToRow:n}),r||this.setState({scrollToColumn:t,scrollToRow:n})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mu(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(a.PureComponent),Ye(uu,"propTypes",null),du);function fu(e,t){var o,r=void 0!==(o=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n.g).document&&o.document.attachEvent;if(!r){var i=function(){var e=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||function(e){return o.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.clearTimeout;return function(t){return e(t)}}(),l=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,r=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;l(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=i((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},c=!1,u="",d="animationstart",m="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=o.document.createElement("fakeelement");if(void 0!==h.style.animationName&&(c=!0),!1===c)for(var g=0;g<m.length;g++)if(void 0!==h.style[m[g]+"AnimationName"]){u="-"+m[g].toLowerCase()+"-",d=p[g],c=!0;break}var f="resizeanim",b="@"+u+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",_=u+"animation: 1ms "+f+"; "}return{addResizeListener:function(t,n){if(r)t.attachEvent("onresize",n);else{if(!t.__resizeTriggers__){var i=t.ownerDocument,a=o.getComputedStyle(t);a&&"static"==a.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var n=(b||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=t.head||t.getElementsByTagName("head")[0],r=t.createElement("style");r.id="detectElementResize",r.type="text/css",null!=e&&r.setAttribute("nonce",e),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(t.createTextNode(n)),o.appendChild(r)}}(i),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=i.createElement("div")).className="resize-triggers";var c='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var u=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return c}});t.__resizeTriggers__.innerHTML=u.createHTML("")}else t.__resizeTriggers__.innerHTML=c;t.appendChild(t.__resizeTriggers__),l(t),t.addEventListener("scroll",s,!0),d&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==f&&l(t)},t.__resizeTriggers__.addEventListener(d,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(r)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}function bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bu(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bu(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ye(gu,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Lc(gu);var vu=(hu=pu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"state",{height:n.props.defaultHeight||0,width:n.props.defaultWidth||0}),Ye(et(n),"_parentNode",void 0),Ye(et(n),"_autoSizer",void 0),Ye(et(n),"_window",void 0),Ye(et(n),"_detectElementResize",void 0),Ye(et(n),"_onResize",(function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,r=e.onResize;if(n._parentNode){var i=n._parentNode.offsetHeight||0,a=n._parentNode.offsetWidth||0,l=(n._window||window).getComputedStyle(n._parentNode)||{},s=parseInt(l.paddingLeft,10)||0,c=parseInt(l.paddingRight,10)||0,u=parseInt(l.paddingTop,10)||0,d=parseInt(l.paddingBottom,10)||0,m=i-u-d,p=a-s-c;(!t&&n.state.height!==m||!o&&n.state.width!==p)&&(n.setState({height:i-u-d,width:a-s-c}),r({height:i,width:a}))}})),Ye(et(n),"_setRef",(function(e){n._autoSizer=e})),n}return rt(t,e),Je(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=fu(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.disableHeight,r=e.disableWidth,i=e.style,l=this.state,s=l.height,c=l.width,u={overflow:"visible"},d={};return o||(u.height=0,d.height=s),r||(u.width=0,d.width=c),a.createElement("div",{className:n,ref:this._setRef,style:_u({},u,{},i)},t(d))}}]),t}(a.Component),Ye(pu,"propTypes",null),hu);Ye(vu,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var yu,ku,Eu=(ku=yu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"_child",void 0),Ye(et(n),"_measure",(function(){var e=n.props,t=e.cache,o=e.columnIndex,r=void 0===o?0:o,i=e.parent,a=e.rowIndex,l=void 0===a?n.props.index||0:a,s=n._getCellMeasurements(),c=s.height,u=s.width;c===t.getHeight(l,r)&&u===t.getWidth(l,r)||(t.set(l,r,u,c),i&&"function"==typeof i.recomputeGridSize&&i.recomputeGridSize({columnIndex:r,rowIndex:l}))})),Ye(et(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),n._child=e,e&&n._maybeMeasureCell()})),n}return rt(t,e),Je(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||(0,lt.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var n=t.style.width,o=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var r=Math.ceil(t.offsetHeight),i=Math.ceil(t.offsetWidth);return n&&(t.style.width=n),o&&(t.style.height=o),{height:r,width:i}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,n=e.columnIndex,o=void 0===n?0:n,r=e.parent,i=e.rowIndex,a=void 0===i?this.props.index||0:i;if(!t.has(a,o)){var l=this._getCellMeasurements(),s=l.height,c=l.width;t.set(a,o,c,s),r&&"function"==typeof r.invalidateCellSizeAfterRender&&r.invalidateCellSizeAfterRender({columnIndex:o,rowIndex:a})}}}]),t}(a.PureComponent),Ye(yu,"propTypes",null),ku);function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ye(Eu,"__internalCellMeasurerFlag",!1);var Cu="requested",Iu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Ye(et(n),"_calculateSizeAndPositionDataOnNextUpdate",!1),Ye(et(n),"_onSectionRenderedMemoizer",jc()),Ye(et(n),"_onScrollMemoizer",jc(!1)),Ye(et(n),"_invokeOnSectionRenderedHelper",(function(){var e=n.props,t=e.cellLayoutManager,o=e.onSectionRendered;n._onSectionRenderedMemoizer({callback:o,indices:{indices:t.getLastRenderedIndices()}})})),Ye(et(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Ye(et(n),"_updateScrollPositionForScrollToCell",(function(){var e=n.props,t=e.cellLayoutManager,o=e.height,r=e.scrollToAlignment,i=e.scrollToCell,a=e.width,l=n.state,s=l.scrollLeft,c=l.scrollTop;if(i>=0){var u=t.getScrollPositionForCell({align:r,cellIndex:i,height:o,scrollLeft:s,scrollTop:c,width:a});u.scrollLeft===s&&u.scrollTop===c||n._setScrollPosition(u)}})),Ye(et(n),"_onScroll",(function(e){if(e.target===n._scrollingContainer){n._enablePointerEventsAfterDelay();var t=n.props,o=t.cellLayoutManager,r=t.height,i=t.isScrollingChange,a=t.width,l=n._scrollbarSize,s=o.getTotalSize(),c=s.height,u=s.width,d=Math.max(0,Math.min(u-a+l,e.target.scrollLeft)),m=Math.max(0,Math.min(c-r+l,e.target.scrollTop));if(n.state.scrollLeft!==d||n.state.scrollTop!==m){var p=e.cancelable?"observed":Cu;n.state.isScrolling||i(!0),n.setState({isScrolling:!0,scrollLeft:d,scrollPositionChangeReason:p,scrollTop:m})}n._invokeOnScrollMemoizer({scrollLeft:d,scrollTop:m,totalWidth:u,totalHeight:c})}})),n._scrollbarSize=Yc(),void 0===n._scrollbarSize?(n._scrollbarSizeMeasured=!1,n._scrollbarSize=0):n._scrollbarSizeMeasured=!0,n}return rt(t,e),Je(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.scrollLeft,o=e.scrollToCell,r=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Yc(),this._scrollbarSizeMeasured=!0,this.setState({})),o>=0?this._updateScrollPositionForScrollToCell():(n>=0||r>=0)&&this._setScrollPosition({scrollLeft:n,scrollTop:r}),this._invokeOnSectionRenderedHelper();var i=t.getTotalSize(),a=i.height,l=i.width;this._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:r||0,totalHeight:a,totalWidth:l})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,o=n.height,r=n.scrollToAlignment,i=n.scrollToCell,a=n.width,l=this.state,s=l.scrollLeft,c=l.scrollPositionChangeReason,u=l.scrollTop;c===Cu&&(s>=0&&s!==t.scrollLeft&&s!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=s),u>=0&&u!==t.scrollTop&&u!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=u)),o===e.height&&r===e.scrollToAlignment&&i===e.scrollToCell&&a===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,n=e.cellCount,o=e.cellLayoutManager,r=e.className,i=e.height,l=e.horizontalOverscanSize,s=e.id,c=e.noContentRenderer,u=e.style,d=e.verticalOverscanSize,m=e.width,p=this.state,h=p.isScrolling,g=p.scrollLeft,f=p.scrollTop;(this._lastRenderedCellCount!==n||this._lastRenderedCellLayoutManager!==o||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=n,this._lastRenderedCellLayoutManager=o,this._calculateSizeAndPositionDataOnNextUpdate=!1,o.calculateSizeAndPositionData());var b=o.getTotalSize(),_=b.height,v=b.width,y=Math.max(0,g-l),k=Math.max(0,f-d),E=Math.min(v,g+m+l),S=Math.min(_,f+i+d),w=i>0&&m>0?o.cellRenderers({height:S-k,isScrolling:h,width:E-y,x:y,y:k}):[],C={boxSizing:"border-box",direction:"ltr",height:t?"auto":i,position:"relative",WebkitOverflowScrolling:"touch",width:m,willChange:"transform"},I=_>i?this._scrollbarSize:0,T=v>m?this._scrollbarSize:0;return C.overflowX=v+I<=m?"hidden":"auto",C.overflowY=_+T<=i?"hidden":"auto",a.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Fc("ReactVirtualized__Collection",r),id:s,onScroll:this._onScroll,role:"grid",style:wu({},C,{},u),tabIndex:0},n>0&&a.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:_,maxHeight:_,maxWidth:v,overflow:"hidden",pointerEvents:h?"none":"",width:v}},w),0===n&&c())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,o=e.scrollTop,r=e.totalHeight,i=e.totalWidth;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,o=e.scrollTop,a=t.props,l=a.height;(0,a.onScroll)({clientHeight:l,clientWidth:a.width,scrollHeight:r,scrollLeft:n,scrollTop:o,scrollWidth:i})},indices:{scrollLeft:n,scrollTop:o}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,o={scrollPositionChangeReason:Cu};t>=0&&(o.scrollLeft=t),n>=0&&(o.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(o)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:Cu}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Cu}}}]),t}(a.PureComponent);Ye(Iu,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Iu.propTypes={},Lc(Iu);const Tu=Iu;var xu=function(){function e(t){var n=t.height,o=t.width,r=t.x,i=t.y;Xe(this,e),this.height=n,this.width=o,this.x=r,this.y=i,this._indexMap={},this._indices=[]}return Je(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),Pu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Xe(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return Je(e,[{key:"getCellIndices",value:function(e){var t=e.height,n=e.width,o=e.x,r=e.y,i={};return this.getSections({height:t,width:n,x:o,y:r}).forEach((function(e){return e.getCellIndices().forEach((function(e){i[e]=e}))})),Object.keys(i).map((function(e){return i[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,n=e.width,o=e.x,r=e.y,i=Math.floor(o/this._sectionSize),a=Math.floor((o+n-1)/this._sectionSize),l=Math.floor(r/this._sectionSize),s=Math.floor((r+t-1)/this._sectionSize),c=[],u=i;u<=a;u++)for(var d=l;d<=s;d++){var m="".concat(u,".").concat(d);this._sections[m]||(this._sections[m]=new xu({height:this._sectionSize,width:this._sectionSize,x:u*this._sectionSize,y:d*this._sectionSize})),c.push(this._sections[m])}return c}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,n=e.index;this._cellMetadata[n]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:n})}))}}]),e}();function Ru(e){var t=e.align,n=void 0===t?"auto":t,o=e.cellOffset,r=e.cellSize,i=e.containerSize,a=e.currentOffset,l=o,s=l-i+r;switch(n){case"start":return l;case"end":return s;case"center":return l-(i-r)/2;default:return Math.max(s,Math.min(l,a))}}var Au=function(e){function t(e,n){var o;return Xe(this,t),(o=tt(this,nt(t).call(this,e,n)))._cellMetadata=[],o._lastRenderedCellIndices=[],o._cellCache=[],o._isScrollingChange=o._isScrollingChange.bind(et(o)),o._setCollectionViewRef=o._setCollectionViewRef.bind(et(o)),o}return rt(t,e),Je(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=x({},this.props);return a.createElement(Tu,x({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,n=e.cellSizeAndPositionGetter,o=[],r=new Pu(e.sectionSize),i=0,a=0,l=0;l<t;l++){var s=n({index:l});if(null==s.height||isNaN(s.height)||null==s.width||isNaN(s.width)||null==s.x||isNaN(s.x)||null==s.y||isNaN(s.y))throw Error("Invalid metadata returned for cell ".concat(l,":\n        x:").concat(s.x,", y:").concat(s.y,", width:").concat(s.width,", height:").concat(s.height));i=Math.max(i,s.y+s.height),a=Math.max(a,s.x+s.width),o[l]=s,r.registerCell({cellMetadatum:s,index:l})}return{cellMetadata:o,height:i,sectionManager:r,width:a}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,n=e.cellIndex,o=e.height,r=e.scrollLeft,i=e.scrollTop,a=e.width,l=this.props.cellCount;if(n>=0&&n<l){var s=this._cellMetadata[n];r=Ru({align:t,cellOffset:s.x,cellSize:s.width,containerSize:a,currentOffset:r,targetIndex:n}),i=Ru({align:t,cellOffset:s.y,cellSize:s.height,containerSize:o,currentOffset:i,targetIndex:n})}return{scrollLeft:r,scrollTop:i}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,n=e.height,o=e.isScrolling,r=e.width,i=e.x,a=e.y,l=this.props,s=l.cellGroupRenderer,c=l.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:n,width:r,x:i,y:a}),s({cellCache:this._cellCache,cellRenderer:c,cellSizeAndPositionGetter:function(e){var n=e.index;return t._sectionManager.getCellMetadata({index:n})},indices:this._lastRenderedCellIndices,isScrolling:o})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(a.PureComponent);Ye(Au,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,n=e.cellRenderer,o=e.cellSizeAndPositionGetter,r=e.indices,i=e.isScrolling;return r.map((function(e){var r=o({index:e}),a={index:e,isScrolling:i,key:e,style:{height:r.height,left:r.x,position:"absolute",top:r.y,width:r.width}};return i?(e in t||(t[e]=n(a)),t[e]):n(a)})).filter((function(e){return!!e}))}}),Au.propTypes={},(function(e){function t(e,n){var o;return Xe(this,t),(o=tt(this,nt(t).call(this,e,n)))._registerChild=o._registerChild.bind(et(o)),o}return rt(t,e),Je(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.columnMaxWidth,o=t.columnMinWidth,r=t.columnCount,i=t.width;n===e.columnMaxWidth&&o===e.columnMinWidth&&r===e.columnCount&&i===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.columnMaxWidth,o=e.columnMinWidth,r=e.columnCount,i=e.width,a=o||1,l=n?Math.min(n,i):i,s=i/r;return s=Math.max(a,s),s=Math.min(l,s),s=Math.floor(s),t({adjustedWidth:Math.min(i,s*r),columnWidth:s,getColumnWidth:function(){return s},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(a.PureComponent)).propTypes={};var Ou=function(e){function t(e,n){var o;return Xe(this,t),(o=tt(this,nt(t).call(this,e,n)))._loadMoreRowsMemoizer=jc(),o._onRowsRendered=o._onRowsRendered.bind(et(o)),o._registerChild=o._registerChild.bind(et(o)),o}return rt(t,e),Je(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=jc(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreRows;e.forEach((function(e){var o=n(e);o&&o.then((function(){var n;(n={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex}).startIndex>n.lastRenderedStopIndex||n.stopIndex<n.lastRenderedStartIndex||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;n?n.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,n=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=n,this._doStuff(t,n)}},{key:"_doStuff",value:function(e,t){var n,o=this,r=this.props,i=r.isRowLoaded,a=r.minimumBatchSize,l=r.rowCount,s=r.threshold,c=function(e){for(var t=e.isRowLoaded,n=e.minimumBatchSize,o=e.rowCount,r=e.stopIndex,i=[],a=null,l=null,s=e.startIndex;s<=r;s++)t({index:s})?null!==l&&(i.push({startIndex:a,stopIndex:l}),a=l=null):(l=s,null===a&&(a=s));if(null!==l){for(var c=Math.min(Math.max(l,a+n-1),o-1),u=l+1;u<=c&&!t({index:u});u++)l=u;i.push({startIndex:a,stopIndex:l})}if(i.length)for(var d=i[0];d.stopIndex-d.startIndex+1<n&&d.startIndex>0;){var m=d.startIndex-1;if(t({index:m}))break;d.startIndex=m}return i}({isRowLoaded:i,minimumBatchSize:a,rowCount:l,startIndex:Math.max(0,e-s),stopIndex:Math.min(l-1,t+s)}),u=(n=[]).concat.apply(n,ut(c.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){o._loadUnloadedRanges(c)},indices:{squashedUnloadedRanges:u}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(a.PureComponent);Ye(Ou,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),Ou.propTypes={};var Nu,Mu,Du=(Mu=Nu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"Grid",void 0),Ye(et(n),"_cellRenderer",(function(e){var t=e.parent,o=e.rowIndex,r=e.style,i=e.isScrolling,a=e.isVisible,l=e.key,s=n.props.rowRenderer,c=Object.getOwnPropertyDescriptor(r,"width");return c&&c.writable&&(r.width="100%"),s({index:o,style:r,isScrolling:i,isVisible:a,key:l,parent:t})})),Ye(et(n),"_setRef",(function(e){n.Grid=e})),Ye(et(n),"_onScroll",(function(e){var t=e.clientHeight,o=e.scrollHeight,r=e.scrollTop;(0,n.props.onScroll)({clientHeight:t,scrollHeight:o,scrollTop:r})})),Ye(et(n),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,o=e.rowOverscanStopIndex,r=e.rowStartIndex,i=e.rowStopIndex;(0,n.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:o,startIndex:r,stopIndex:i})})),n}return rt(t,e),Je(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,o=e.scrollToIndex,r=e.width,i=Fc("ReactVirtualized__List",t);return a.createElement(su,x({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:i,columnWidth:r,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:o}))}}]),t}(a.PureComponent),Ye(Nu,"propTypes",null),Mu);Ye(Du,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:cu,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});const Bu=function(e,t,n,o,r){return"function"==typeof n?function(e,t,n,o,r){for(var i=n+1;t<=n;){var a=t+n>>>1;r(e[a],o)>=0?(i=a,n=a-1):t=a+1}return i}(e,void 0===o?0:0|o,void 0===r?e.length-1:0|r,t,n):function(e,t,n,o){for(var r=n+1;t<=n;){var i=t+n>>>1;e[i]>=o?(r=i,n=i-1):t=i+1}return r}(e,void 0===n?0:0|n,void 0===o?e.length-1:0|o,t)};function Lu(e,t,n,o,r){this.mid=e,this.left=t,this.right=n,this.leftPoints=o,this.rightPoints=r,this.count=(t?t.count:0)+(n?n.count:0)+o.length}var zu=Lu.prototype;function Fu(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function Gu(e,t){var n=Yu(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function Hu(e,t){var n=e.intervals([]);n.push(t),Gu(e,n)}function Uu(e,t){var n=e.intervals([]),o=n.indexOf(t);return o<0?0:(n.splice(o,1),Gu(e,n),1)}function Wu(e,t,n){for(var o=0;o<e.length&&e[o][0]<=t;++o){var r=n(e[o]);if(r)return r}}function ju(e,t,n){for(var o=e.length-1;o>=0&&e[o][1]>=t;--o){var r=n(e[o]);if(r)return r}}function Ku(e,t){for(var n=0;n<e.length;++n){var o=t(e[n]);if(o)return o}}function Vu(e,t){return e-t}function $u(e,t){return e[0]-t[0]||e[1]-t[1]}function qu(e,t){return e[1]-t[1]||e[0]-t[0]}function Yu(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(Vu);var o=t[t.length>>1],r=[],i=[],a=[];for(n=0;n<e.length;++n){var l=e[n];l[1]<o?r.push(l):o<l[0]?i.push(l):a.push(l)}var s=a,c=a.slice();return s.sort($u),c.sort(qu),new Lu(o,Yu(r),Yu(i),s,c)}function Zu(e){this.root=e}zu.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},zu.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?Hu(this,e):this.left.insert(e):this.left=Yu([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?Hu(this,e):this.right.insert(e):this.right=Yu([e]);else{var n=Bu(this.leftPoints,e,$u),o=Bu(this.rightPoints,e,qu);this.leftPoints.splice(n,0,e),this.rightPoints.splice(o,0,e)}},zu.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?Uu(this,e):2===(i=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?Uu(this,e):2===(i=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===i&&(this.count-=1),i):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var n=this,o=this.left;o.right;)n=o,o=o.right;if(n===this)o.right=this.right;else{var r=this.left,i=this.right;n.count-=o.count,n.right=o.left,o.left=r,o.right=i}Fu(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Fu(this,this.left):Fu(this,this.right);return 1}for(r=Bu(this.leftPoints,e,$u);r<this.leftPoints.length&&this.leftPoints[r][0]===e[0];++r)if(this.leftPoints[r]===e)for(this.count-=1,this.leftPoints.splice(r,1),i=Bu(this.rightPoints,e,qu);i<this.rightPoints.length&&this.rightPoints[i][1]===e[1];++i)if(this.rightPoints[i]===e)return this.rightPoints.splice(i,1),1;return 0},zu.queryPoint=function(e,t){return e<this.mid?this.left&&(n=this.left.queryPoint(e,t))?n:Wu(this.leftPoints,e,t):e>this.mid?this.right&&(n=this.right.queryPoint(e,t))?n:ju(this.rightPoints,e,t):Ku(this.leftPoints,t);var n},zu.queryInterval=function(e,t,n){var o;return e<this.mid&&this.left&&(o=this.left.queryInterval(e,t,n))||t>this.mid&&this.right&&(o=this.right.queryInterval(e,t,n))?o:t<this.mid?Wu(this.leftPoints,t,n):e>this.mid?ju(this.rightPoints,e,n):Ku(this.leftPoints,n)};var Xu=Zu.prototype;Xu.insert=function(e){this.root?this.root.insert(e):this.root=new Lu(e[0],null,null,[e],[e])},Xu.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},Xu.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},Xu.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(Xu,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Xu,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Qu,Ju,ed=function(){function e(){Xe(this,e),Ye(this,"_columnSizeMap",{}),Ye(this,"_intervalTree",new Zu(null)),Ye(this,"_leftMap",{})}return Je(e,[{key:"estimateTotalHeight",value:function(e,t,n){var o=e-this.count;return this.tallestColumnSize+Math.ceil(o/t)*n}},{key:"range",value:function(e,t,n){var o=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=Ve(e,3),r=t[0],i=(t[1],t[2]);return n(i,o._leftMap[i],r)}))}},{key:"setPosition",value:function(e,t,n,o){this._intervalTree.insert([n,n+o,e]),this._leftMap[e]=t;var r=this._columnSizeMap,i=r[t];r[t]=void 0===i?n+o:Math.max(i,n+o)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=0===t?o:Math.min(t,o)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var o=e[n];t=Math.max(t,o)}return t}}]),e}();function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var od=(Ju=Qu=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"state",{isScrolling:!1,scrollTop:0}),Ye(et(n),"_debounceResetIsScrollingId",void 0),Ye(et(n),"_invalidateOnUpdateStartIndex",null),Ye(et(n),"_invalidateOnUpdateStopIndex",null),Ye(et(n),"_positionCache",new ed),Ye(et(n),"_startIndex",null),Ye(et(n),"_startIndexMemoized",null),Ye(et(n),"_stopIndex",null),Ye(et(n),"_stopIndexMemoized",null),Ye(et(n),"_debounceResetIsScrollingCallback",(function(){n.setState({isScrolling:!1})})),Ye(et(n),"_setScrollingContainerRef",(function(e){n._scrollingContainer=e})),Ye(et(n),"_onScroll",(function(e){var t=n.props.height,o=e.currentTarget.scrollTop,r=Math.min(Math.max(0,n._getEstimatedTotalHeight()-t),o);o===r&&(n._debounceResetIsScrolling(),n.state.scrollTop!==r&&n.setState({isScrolling:!0,scrollTop:r}))})),n}return rt(t,e),Je(t,[{key:"clearCellPositions",value:function(){this._positionCache=new ed,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new ed,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&nu(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.autoHeight,r=n.cellCount,i=n.cellMeasurerCache,l=n.cellRenderer,s=n.className,c=n.height,u=n.id,d=n.keyMapper,m=n.overscanByPixels,p=n.role,h=n.style,g=n.tabIndex,f=n.width,b=n.rowDirection,_=this.state,v=_.isScrolling,y=_.scrollTop,k=[],E=this._getEstimatedTotalHeight(),S=this._positionCache.shortestColumnSize,w=this._positionCache.count,C=0;if(this._positionCache.range(Math.max(0,y-m),c+2*m,(function(n,o,r){var a;void 0===e?(C=n,e=n):(C=Math.min(C,n),e=Math.max(e,n)),k.push(l({index:n,isScrolling:v,key:d(n),parent:t,style:(a={height:i.getHeight(n)},Ye(a,"ltr"===b?"left":"right",o),Ye(a,"position","absolute"),Ye(a,"top",r),Ye(a,"width",i.getWidth(n)),a)}))})),S<y+c+m&&w<r)for(var I=Math.min(r-w,Math.ceil((y+c+m-S)/i.defaultHeight*f/i.defaultWidth)),T=w;T<w+I;T++)e=T,k.push(l({index:T,isScrolling:v,key:d(T),parent:this,style:{width:i.getWidth(T)}}));return this._startIndex=C,this._stopIndex=e,a.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Fc("ReactVirtualized__Masonry",s),id:u,onScroll:this._onScroll,role:p,style:nd({boxSizing:"border-box",direction:"ltr",height:o?"auto":c,overflowX:"hidden",overflowY:E<c?"hidden":"auto",position:"relative",width:f,WebkitOverflowScrolling:"touch",willChange:"transform"},h),tabIndex:g},a.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:E,maxWidth:"100%",maxHeight:E,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"}},k))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&nu(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=ou(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,n=e.cellMeasurerCache,o=e.width,r=Math.max(1,Math.floor(o/n.defaultWidth));return this._positionCache.estimateTotalHeight(t,r,n.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,n=e.onScroll,o=this.state.scrollTop;this._onScrollMemoized!==o&&(n({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:o}),this._onScrollMemoized=o)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var n=this.props,o=n.cellMeasurerCache,r=n.cellPositioner,i=e;i<=t;i++){var a=r(i),l=a.left,s=a.top;this._positionCache.setPosition(i,l,s,o.getHeight(i))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(a.PureComponent),Ye(Qu,"propTypes",null),Ju);function rd(){}Ye(od,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:rd,onScroll:rd,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),Lc(od);var id=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Xe(this,e),Ye(this,"_cellMeasurerCache",void 0),Ye(this,"_columnIndexOffset",void 0),Ye(this,"_rowIndexOffset",void 0),Ye(this,"columnWidth",(function(e){var n=e.index;t._cellMeasurerCache.columnWidth({index:n+t._columnIndexOffset})})),Ye(this,"rowHeight",(function(e){var n=e.index;t._cellMeasurerCache.rowHeight({index:n+t._rowIndexOffset})}));var o=n.cellMeasurerCache,r=n.columnIndexOffset,i=void 0===r?0:r,a=n.rowIndexOffset,l=void 0===a?0:a;this._cellMeasurerCache=o,this._columnIndexOffset=i,this._rowIndexOffset=l}return Je(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,n,o){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,n,o)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ad(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ad(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sd=function(e){function t(e,n){var o;Xe(this,t),Ye(et(o=tt(this,nt(t).call(this,e,n))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Ye(et(o),"_deferredInvalidateColumnIndex",null),Ye(et(o),"_deferredInvalidateRowIndex",null),Ye(et(o),"_bottomLeftGridRef",(function(e){o._bottomLeftGrid=e})),Ye(et(o),"_bottomRightGridRef",(function(e){o._bottomRightGrid=e})),Ye(et(o),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,n=Hc(e,["rowIndex"]),r=o.props,i=r.cellRenderer,l=r.fixedRowCount;return t===r.rowCount-l?a.createElement("div",{key:n.key,style:ld({},n.style,{height:20})}):i(ld({},n,{parent:et(o),rowIndex:t+l}))})),Ye(et(o),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,n=e.rowIndex,r=Hc(e,["columnIndex","rowIndex"]),i=o.props,a=i.cellRenderer,l=i.fixedColumnCount,s=i.fixedRowCount;return a(ld({},r,{columnIndex:t+l,parent:et(o),rowIndex:n+s}))})),Ye(et(o),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,n=Hc(e,["columnIndex"]),r=o.props,i=r.cellRenderer,l=r.columnCount,s=r.fixedColumnCount;return t===l-s?a.createElement("div",{key:n.key,style:ld({},n.style,{width:20})}):i(ld({},n,{columnIndex:t+s,parent:et(o)}))})),Ye(et(o),"_columnWidthRightGrid",(function(e){var t=e.index,n=o.props,r=n.columnCount,i=n.fixedColumnCount,a=n.columnWidth,l=o.state,s=l.scrollbarSize;return l.showHorizontalScrollbar&&t===r-i?s:"function"==typeof a?a({index:t+i}):a})),Ye(et(o),"_onScroll",(function(e){var t=e.scrollLeft,n=e.scrollTop;o.setState({scrollLeft:t,scrollTop:n});var r=o.props.onScroll;r&&r(e)})),Ye(et(o),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,n=e.size,r=e.vertical,i=o.state,a=i.showHorizontalScrollbar,l=i.showVerticalScrollbar;if(t!==a||r!==l){o.setState({scrollbarSize:n,showHorizontalScrollbar:t,showVerticalScrollbar:r});var s=o.props.onScrollbarPresenceChange;"function"==typeof s&&s({horizontal:t,size:n,vertical:r})}})),Ye(et(o),"_onScrollLeft",(function(e){var t=e.scrollLeft;o._onScroll({scrollLeft:t,scrollTop:o.state.scrollTop})})),Ye(et(o),"_onScrollTop",(function(e){var t=e.scrollTop;o._onScroll({scrollTop:t,scrollLeft:o.state.scrollLeft})})),Ye(et(o),"_rowHeightBottomGrid",(function(e){var t=e.index,n=o.props,r=n.fixedRowCount,i=n.rowCount,a=n.rowHeight,l=o.state,s=l.scrollbarSize;return l.showVerticalScrollbar&&t===i-r?s:"function"==typeof a?a({index:t+r}):a})),Ye(et(o),"_topLeftGridRef",(function(e){o._topLeftGrid=e})),Ye(et(o),"_topRightGridRef",(function(e){o._topRightGrid=e}));var r=e.deferredMeasurementCache,i=e.fixedColumnCount,l=e.fixedRowCount;return o._maybeCalculateCachedStyles(!0),r&&(o._deferredMeasurementCacheBottomLeftGrid=l>0?new id({cellMeasurerCache:r,columnIndexOffset:0,rowIndexOffset:l}):r,o._deferredMeasurementCacheBottomRightGrid=i>0||l>0?new id({cellMeasurerCache:r,columnIndexOffset:i,rowIndexOffset:l}):r,o._deferredMeasurementCacheTopRightGrid=i>0?new id({cellMeasurerCache:r,columnIndexOffset:i,rowIndexOffset:0}):r),o}return rt(t,e),Je(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o,i=this.props,a=i.fixedColumnCount,l=i.fixedRowCount,s=Math.max(0,n-a),c=Math.max(0,r-l);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:c}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:s,rowIndex:c}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:r}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:s,rowIndex:r}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop;if(t>0||n>0){var o={};t>0&&(o.scrollLeft=t),n>0&&(o.scrollTop=n),this.setState(o)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,n=e.onSectionRendered,o=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),r=(e.scrollTop,e.scrollToRow),i=Hc(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var l=this.state,s=l.scrollLeft,c=l.scrollTop;return a.createElement("div",{style:this._containerOuterStyle},a.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(i),this._renderTopRightGrid(ld({},i,{onScroll:t,scrollLeft:s}))),a.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(ld({},i,{onScroll:t,scrollTop:c})),this._renderBottomRightGrid(ld({},i,{onScroll:t,onSectionRendered:n,scrollLeft:s,scrollToColumn:o,scrollToRow:r,scrollTop:c}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,n=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._leftGridWidth=o}else this._leftGridWidth=n*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,n=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof n){for(var o=0,r=0;r<t;r++)o+=n({index:r});this._topGridHeight=o}else this._topGridHeight=n*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,n=t.columnWidth,o=t.enableFixedColumnScroll,r=t.enableFixedRowScroll,i=t.height,a=t.fixedColumnCount,l=t.fixedRowCount,s=t.rowHeight,c=t.style,u=t.styleBottomLeftGrid,d=t.styleBottomRightGrid,m=t.styleTopLeftGrid,p=t.styleTopRightGrid,h=t.width,g=e||i!==this._lastRenderedHeight||h!==this._lastRenderedWidth,f=e||n!==this._lastRenderedColumnWidth||a!==this._lastRenderedFixedColumnCount,b=e||l!==this._lastRenderedFixedRowCount||s!==this._lastRenderedRowHeight;(e||g||c!==this._lastRenderedStyle)&&(this._containerOuterStyle=ld({height:i,overflow:"visible",width:h},c)),(e||g||b)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:h},this._containerBottomStyle={height:i-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:h}),(e||u!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=ld({left:0,overflowX:"hidden",overflowY:o?"auto":"hidden",position:"absolute"},u)),(e||f||d!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=ld({left:this._getLeftGridWidth(this.props),position:"absolute"},d)),(e||m!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=ld({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},m)),(e||f||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=ld({left:this._getLeftGridWidth(this.props),overflowX:r?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=n,this._lastRenderedFixedColumnCount=a,this._lastRenderedFixedRowCount=l,this._lastRenderedHeight=i,this._lastRenderedRowHeight=s,this._lastRenderedStyle=c,this._lastRenderedStyleBottomLeftGrid=u,this._lastRenderedStyleBottomRightGrid=d,this._lastRenderedStyleTopLeftGrid=m,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=h}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,i=e.hideBottomLeftGridScrollbar,l=this.state.showVerticalScrollbar;if(!n)return null;var s=l?1:0,c=this._getBottomGridHeight(e),u=this._getLeftGridWidth(e),d=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,m=i?u+d:u,p=a.createElement(su,x({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:n,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:c,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,r-o)+s,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:m}));return i?a.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:ld({},this._bottomLeftGridStyle,{height:c,width:u,overflowY:"hidden"})},p):p}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,n=e.fixedColumnCount,o=e.fixedRowCount,r=e.rowCount,i=e.scrollToColumn,l=e.scrollToRow;return a.createElement(su,x({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-n),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,r-o),rowHeight:this._rowHeightBottomGrid,scrollToColumn:i-n,scrollToRow:l-o,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,n=e.fixedRowCount;return t&&n?a.createElement(su,x({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:n,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,n=e.enableFixedRowScroll,o=e.fixedColumnCount,r=e.fixedRowCount,i=e.scrollLeft,l=e.hideTopRightGridScrollbar,s=this.state,c=s.showHorizontalScrollbar,u=s.scrollbarSize;if(!r)return null;var d=c?1:0,m=this._getTopGridHeight(e),p=this._getRightGridWidth(e),h=c?u:0,g=m,f=this._topRightGridStyle;l&&(g=m+h,f=ld({},this._topRightGridStyle,{left:0}));var b=a.createElement(su,x({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-o)+d,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:g,onScroll:n?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:r,scrollLeft:i,style:f,tabIndex:null,width:p}));return l?a.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:ld({},this._topRightGridStyle,{height:m,width:p,overflowX:"hidden"})},b):b}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}(a.PureComponent);function cd(e){var t=e.className,n=e.columns,o=e.style;return a.createElement("div",{className:t,role:"row",style:o},n)}Ye(sd,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),sd.propTypes={},Lc(sd),(function(e){function t(e,n){var o;return Xe(this,t),(o=tt(this,nt(t).call(this,e,n))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},o._onScroll=o._onScroll.bind(et(o)),o}return rt(t,e),Je(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.clientHeight,o=t.clientWidth,r=t.scrollHeight,i=t.scrollLeft,a=t.scrollTop,l=t.scrollWidth;return e({clientHeight:n,clientWidth:o,onScroll:this._onScroll,scrollHeight:r,scrollLeft:i,scrollTop:a,scrollWidth:l})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.clientWidth,o=e.scrollHeight,r=e.scrollLeft,i=e.scrollTop,a=e.scrollWidth;this.setState({clientHeight:t,clientWidth:n,scrollHeight:o,scrollLeft:r,scrollTop:i,scrollWidth:a})}}]),t}(a.PureComponent)).propTypes={},cd.propTypes=null;const ud={ASC:"ASC",DESC:"DESC"};function dd(e){var t=e.sortDirection,n=Fc("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===ud.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===ud.DESC});return a.createElement("svg",{className:n,width:18,height:18,viewBox:"0 0 24 24"},t===ud.ASC?a.createElement("path",{d:"M7 14l5-5 5 5z"}):a.createElement("path",{d:"M7 10l5 5 5-5z"}),a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function md(e){var t=e.dataKey,n=e.label,o=e.sortBy,r=e.sortDirection,i=o===t,l=[a.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof n?n:null},n)];return i&&l.push(a.createElement(dd,{key:"SortIndicator",sortDirection:r})),l}function pd(e){var t=e.className,n=e.columns,o=e.index,r=e.key,i=e.onRowClick,l=e.onRowDoubleClick,s=e.onRowMouseOut,c=e.onRowMouseOver,u=e.onRowRightClick,d=e.rowData,m=e.style,p={"aria-rowindex":o+1};return(i||l||s||c||u)&&(p["aria-label"]="row",p.tabIndex=0,i&&(p.onClick=function(e){return i({event:e,index:o,rowData:d})}),l&&(p.onDoubleClick=function(e){return l({event:e,index:o,rowData:d})}),s&&(p.onMouseOut=function(e){return s({event:e,index:o,rowData:d})}),c&&(p.onMouseOver=function(e){return c({event:e,index:o,rowData:d})}),u&&(p.onContextMenu=function(e){return u({event:e,index:o,rowData:d})})),a.createElement("div",x({},p,{className:t,key:r,role:"row",style:m}),n)}dd.propTypes={},md.propTypes=null,pd.propTypes=null;var hd=function(e){function t(){return Xe(this,t),tt(this,nt(t).apply(this,arguments))}return rt(t,e),t}(a.Component);function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gd(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ye(hd,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,n=e.rowData;return"function"==typeof n.get?n.get(t):n[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:ud.ASC,flexGrow:0,flexShrink:1,headerRenderer:md,style:{}}),hd.propTypes={};var bd=function(e){function t(e){var n;return Xe(this,t),(n=tt(this,nt(t).call(this,e))).state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(et(n)),n._createRow=n._createRow.bind(et(n)),n._onScroll=n._onScroll.bind(et(n)),n._onSectionRendered=n._onSectionRendered.bind(et(n)),n._setRef=n._setRef.bind(et(n)),n}return rt(t,e),Je(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,o=e.rowIndex,r=void 0===o?0:o;this.Grid&&this.Grid.recomputeGridSize({rowIndex:r,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=(0,lt.findDOMNode)(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,r=t.disableHeader,i=t.gridClassName,l=t.gridStyle,s=t.headerHeight,c=t.headerRowRenderer,u=t.height,d=t.id,m=t.noRowsRenderer,p=t.rowClassName,h=t.rowStyle,g=t.scrollToIndex,f=t.style,b=t.width,_=this.state.scrollbarWidth,v=r?u:u-s,y="function"==typeof p?p({index:-1}):p,k="function"==typeof h?h({index:-1}):h;return this._cachedColumnStyles=[],a.Children.toArray(n).forEach((function(t,n){var o=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[n]=fd({overflow:"hidden"},o)})),a.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":a.Children.toArray(n).length,"aria-rowcount":this.props.rowCount,className:Fc("ReactVirtualized__Table",o),id:d,role:"grid",style:f},!r&&c({className:Fc("ReactVirtualized__Table__headerRow",y),columns:this._getHeaderColumns(),style:fd({height:s,overflow:"hidden",paddingRight:_,width:b},k)}),a.createElement(su,x({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Fc("ReactVirtualized__Table__Grid",i),cellRenderer:this._createRow,columnWidth:b,columnCount:1,height:v,id:void 0,noContentRenderer:m,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:_,scrollToRow:g,style:fd({},l,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,n=e.columnIndex,o=e.isScrolling,r=e.parent,i=e.rowData,l=e.rowIndex,s=this.props.onColumnClick,c=t.props,u=c.cellDataGetter,d=c.cellRenderer,m=c.className,p=c.columnData,h=c.dataKey,g=c.id,f=d({cellData:u({columnData:p,dataKey:h,rowData:i}),columnData:p,columnIndex:n,dataKey:h,isScrolling:o,parent:r,rowData:i,rowIndex:l}),b=this._cachedColumnStyles[n],_="string"==typeof f?f:null;return a.createElement("div",{"aria-colindex":n+1,"aria-describedby":g,className:Fc("ReactVirtualized__Table__rowColumn",m),key:"Row"+l+"-Col"+n,onClick:function(e){s&&s({columnData:p,dataKey:h,event:e})},role:"gridcell",style:b,title:_},f)}},{key:"_createHeader",value:function(e){var t,n,o,r,i,l=e.column,s=e.index,c=this.props,u=c.headerClassName,d=c.headerStyle,m=c.onHeaderClick,p=c.sort,h=c.sortBy,g=c.sortDirection,f=l.props,b=f.columnData,_=f.dataKey,v=f.defaultSortDirection,y=f.disableSort,k=f.headerRenderer,E=f.id,S=f.label,w=!y&&p,C=Fc("ReactVirtualized__Table__headerColumn",u,l.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:w}),I=this._getFlexStyleForColumn(l,fd({},d,{},l.props.headerStyle)),T=k({columnData:b,dataKey:_,disableSort:y,label:S,sortBy:h,sortDirection:g});if(w||m){var x=h!==_?v:g===ud.DESC?ud.ASC:ud.DESC,P=function(e){w&&p({defaultSortDirection:v,event:e,sortBy:_,sortDirection:x}),m&&m({columnData:b,dataKey:_,event:e})};i=l.props["aria-label"]||S||_,r="none",o=0,t=P,n=function(e){"Enter"!==e.key&&" "!==e.key||P(e)}}return h===_&&(r=g===ud.ASC?"ascending":"descending"),a.createElement("div",{"aria-label":i,"aria-sort":r,className:C,id:E,key:"Header-Col"+s,onClick:t,onKeyDown:n,role:"columnheader",style:I,tabIndex:o},T)}},{key:"_createRow",value:function(e){var t=this,n=e.rowIndex,o=e.isScrolling,r=e.key,i=e.parent,l=e.style,s=this.props,c=s.children,u=s.onRowClick,d=s.onRowDoubleClick,m=s.onRowRightClick,p=s.onRowMouseOver,h=s.onRowMouseOut,g=s.rowClassName,f=s.rowGetter,b=s.rowRenderer,_=s.rowStyle,v=this.state.scrollbarWidth,y="function"==typeof g?g({index:n}):g,k="function"==typeof _?_({index:n}):_,E=f({index:n}),S=a.Children.toArray(c).map((function(e,r){return t._createColumn({column:e,columnIndex:r,isScrolling:o,parent:i,rowData:E,rowIndex:n,scrollbarWidth:v})})),w=Fc("ReactVirtualized__Table__row",y),C=fd({},l,{height:this._getRowHeight(n),overflow:"hidden",paddingRight:v},k);return b({className:w,columns:S,index:n,isScrolling:o,key:r,onRowClick:u,onRowDoubleClick:d,onRowRightClick:m,onRowMouseOver:p,onRowMouseOut:h,rowData:E,style:C})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),o=fd({},t,{flex:n,msFlex:n,WebkitFlex:n});return e.props.maxWidth&&(o.maxWidth=e.props.maxWidth),e.props.minWidth&&(o.minWidth=e.props.minWidth),o}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,n=t.children;return(t.disableHeader?[]:a.Children.toArray(n)).map((function(t,n){return e._createHeader({column:t,index:n})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,o=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:o})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,o=e.rowStartIndex,r=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:o,stopIndex:r})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}(a.PureComponent);Ye(bd,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:cu,overscanRowCount:10,rowRenderer:pd,headerRowRenderer:cd,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),bd.propTypes={};var _d=[],vd=null,yd=null;function kd(){yd&&(yd=null,document.body&&null!=vd&&(document.body.style.pointerEvents=vd),vd=null)}function Ed(){kd(),_d.forEach((function(e){return e.__resetIsScrolling()}))}function Sd(e){e.currentTarget===window&&null==vd&&document.body&&(vd=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){yd&&nu(yd);var e=0;_d.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),yd=ou(Ed,e)}(),_d.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function wd(e,t){_d.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",Sd),_d.push(e)}function Cd(e,t){(_d=_d.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",Sd),yd&&(nu(yd),kd()))}var Id,Td,xd=function(e){return e===window},Pd=function(e){return e.getBoundingClientRect()};function Rd(e,t){if(e){if(xd(e)){var n=window,o=n.innerHeight,r=n.innerWidth;return{height:"number"==typeof o?o:0,width:"number"==typeof r?r:0}}return Pd(e)}return{height:t.serverHeight,width:t.serverWidth}}function Ad(e){return xd(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function Od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Nd=function(){return"undefined"!=typeof window?window:void 0},Md=(Td=Id=function(e){function t(){var e,n;Xe(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return Ye(et(n=tt(this,(e=nt(t)).call.apply(e,[this].concat(r)))),"_window",Nd()),Ye(et(n),"_isMounted",!1),Ye(et(n),"_positionFromTop",0),Ye(et(n),"_positionFromLeft",0),Ye(et(n),"_detectElementResize",void 0),Ye(et(n),"_child",void 0),Ye(et(n),"state",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Od(n,!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Od(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Rd(n.props.scrollElement,n.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Ye(et(n),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),n._child=e,n.updatePosition()})),Ye(et(n),"_onChildScroll",(function(e){var t=e.scrollTop;if(n.state.scrollTop!==t){var o=n.props.scrollElement;o&&("function"==typeof o.scrollTo?o.scrollTo(0,t+n._positionFromTop):o.scrollTop=t+n._positionFromTop)}})),Ye(et(n),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",n._onResize,!1):n._detectElementResize.addResizeListener(e,n._onResize)})),Ye(et(n),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",n._onResize,!1):e&&n._detectElementResize.removeResizeListener(e,n._onResize)})),Ye(et(n),"_onResize",(function(){n.updatePosition()})),Ye(et(n),"__handleWindowScrollEvent",(function(){if(n._isMounted){var e=n.props.onScroll,t=n.props.scrollElement;if(t){var o=Ad(t),r=Math.max(0,o.left-n._positionFromLeft),i=Math.max(0,o.top-n._positionFromTop);n.setState({isScrolling:!0,scrollLeft:r,scrollTop:i}),e({scrollLeft:r,scrollTop:i})}}})),Ye(et(n),"__resetIsScrolling",(function(){n.setState({isScrolling:!1})})),n}return rt(t,e),Je(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,n=this.state,o=n.height,r=n.width,i=this._child||lt.findDOMNode(this);if(i instanceof Element&&e){var a=function(e,t){if(xd(t)&&document.documentElement){var n=document.documentElement,o=Pd(e),r=Pd(n);return{top:o.top-r.top,left:o.left-r.left}}var i=Ad(t),a=Pd(e),l=Pd(t);return{top:a.top+i.top-l.top,left:a.left+i.left-l.left}}(i,e);this._positionFromTop=a.top,this._positionFromLeft=a.left}var l=Rd(e,this.props);o===l.height&&r===l.width||(this.setState({height:l.height,width:l.width}),t({height:l.height,width:l.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=fu(),this.updatePosition(e),e&&(wd(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.scrollElement,o=e.scrollElement;o!==n&&null!=o&&null!=n&&(this.updatePosition(n),Cd(this,o),wd(this,n),this._unregisterResizeListener(o),this._registerResizeListener(n))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(Cd(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.isScrolling,o=t.scrollTop,r=t.scrollLeft,i=t.height,a=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:i,isScrolling:n,scrollLeft:r,scrollTop:o,width:a})}}]),t}(a.PureComponent),Ye(Id,"propTypes",null),Td);Ye(Md,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:Nd(),serverHeight:0,serverWidth:0});const Dd=(0,u.memo)((e=>{const[t,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)(Math.random());return(0,u.useEffect)((()=>{n(!0)}),[]),(0,s.useEffectDeep)((()=>{r(Math.random)}),[e.list]),(0,a.createElement)("div",{className:"kubio-predefined-layouts__virtual-grid"},t&&(0,a.createElement)(Bd,{key:o,...e}))})),Bd=(0,u.memo)((({list:e,onSelect:t,ListItemComponent:n})=>{var o;const r=(0,u.useRef)(),[i,l]=(0,u.useState)(Math.random()),[c,d]=(0,u.useState)(Ld()),m=(0,u.useMemo)((()=>{const t=c;let n=0,o=0;const r=[];return e.forEach((e=>{0===n&&(r[o]=[]),r[o][n]=e,n===t-1?(n=0,o++):n++})),r}),[e,c,i]),p=(0,u.useCallback)((({columnIndex:e,key:o,rowIndex:r,style:i})=>{const l=m[r][e];return l?(0,a.createElement)("div",{key:o,style:i},(0,a.createElement)(n,{key:l.uniqueId,value:l,onSelect:t})):(0,a.createElement)(a.Fragment,null)}),[m,i]),g=(0,u.useMemo)((()=>{const e=document.querySelector(".kubio-predefined-layouts__modal-layout__list");if(!e)return null;const t=window.getComputedStyle(e),n=parseInt(t.paddingLeft)+parseInt(t.paddingRight),o=parseInt(t.paddingTop)+parseInt(t.paddingBottom),r=e.clientWidth-n,i=e.clientHeight-o-5,a=r/c;return{containerWidth:r,containerHeight:i,columnWidth:a,columnHeight:a}}),[c,i]),f=null===(o=h().get(m,"0",[]))||void 0===o?void 0:o.length,b=(0,u.useCallback)((()=>{const e=Ld();e!==c&&d(e),l(Math.random())}),[c,d,l]),_=(0,s.useDebounce)(b,50);return(0,u.useEffect)((()=>(window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)})),[_]),(0,a.createElement)("div",{ref:r,className:"kubio-predefined-layouts__virtual-grid__inner"},g&&(0,a.createElement)(su,{key:i,cellRenderer:p,columnCount:f,columnWidth:g.columnWidth,rowCount:m.length,rowHeight:g.columnHeight,height:g.containerHeight,width:g.containerWidth}))})),Ld=()=>{const e=document.querySelector(".kubio-predefined-layouts__virtual-grid");if(e)return parseInt(getComputedStyle(e).getPropertyValue("--number-columns"))},zd=e=>e.preventDefault(),Fd=(0,u.memo)((({title:e,onClose:t=h().noop,className:n,children:o,...r})=>{const i=(0,u.useRef)(),l=(0,u.useMemo)((()=>document.querySelector(".kubio-predefined-layouts__popup-slot")),[]),c=(0,u.useCallback)((e=>{var n;null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest(".kubio-predefined-layouts__inner-modal")||t()}),[t]);return(0,s.useOnClickOutside)(i,c),(0,u.createPortal)((0,a.createElement)("div",{className:R()("kubio-predefined-layouts__inner-modal__overlay",n),onClick:zd,onMouseDown:zd,...r},(0,a.createElement)("div",{className:"kubio-predefined-layouts__inner-modal",ref:i},(0,a.createElement)("div",{className:" components-modal__content"},(0,a.createElement)("div",{className:"components-modal__header"},(0,a.createElement)("div",{className:"components-modal__header-heading-container"},(0,a.createElement)("h1",{className:"components-modal__header-heading"},e)),(0,a.createElement)(E.Button,{onClick:t,icon:B,label:(0,T.__)("Close dialog","kubio")})),o))),l)})),Gd=(0,u.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__loading-overlay"},(0,a.createElement)(E.Icon,{icon:ke.KubioLoader}),";"))),Hd=(0,u.memo)((({searchPlaceholder:e=(0,T.__)("Find a starter site…","kubio")})=>(0,a.createElement)(Vm.Sidebar,null,(0,a.createElement)(Vm.Sidebar.Header,null),(0,a.createElement)(Vm.Sidebar.Content,null,(0,a.createElement)(zm.Slot,null),(0,a.createElement)(Oc,{placeholder:e}),(0,a.createElement)(wc,null))))),Ud=(0,u.memo)((({value:e={},onSelect:t})=>{const{screenshot:n,isPro:o,label:r,slug:i,uniqueId:l,relatedDemoSite:s}=e,c=(0,u.useMemo)((()=>!o&&s?null==s?void 0:s.screenshot:n),[l,o,n,s]),d=h().get(s,"slug");return(0,a.createElement)(Rc,{screenshot:c,label:r,isPack:!0,uniqueId:l,isPro:o,onClick:()=>{t(e)},favoriteType:"demoSite",favoriteId:i,relatedFavoriteId:d})}));var Wd=n(246),jd=n.n(Wd);const Kd=(0,u.memo)((({list:e,onSelect:t})=>{const n=(0,u.useRef)(),[o,r]=(0,u.useState)(1),i=(0,u.useMemo)((()=>{let t=20*o;return t=Math.min(e.length,t),e.slice(0,t)}),[o,e]),l=(0,u.useCallback)((()=>{const t=o+1;20*t-20>e.length||r(t)}),[r,o,e]),c=(0,s.useDebounce)(l,100),d=(0,u.useMemo)((()=>e.length!==i.length),[i,e]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:n},(0,a.createElement)(jd(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:c,hasMore:d,threshold:2e3,loader:(0,a.createElement)("div",{className:"loader",key:0})},i.map(((e,n)=>(0,a.createElement)(Ud,{key:e.slug+"__"+n,value:e,onSelect:t})))))})),Vd=()=>{const{onSelectDemo:e}=dh(),{list:t}=rh(),n=(0,u.useCallback)((t=>{e(null==t?void 0:t.slug)}),[e]);return(0,a.createElement)(Vm.Page.Content,null,(0,a.createElement)(Kd,{list:t,onSelect:n}))},$d=(0,u.memo)((()=>{const{currentDemoSite:e}=dh();return(0,a.createElement)(Vm.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,a.createElement)(Vm.Sidebar.Header,null,(0,T.__)("Import Starter Site","kubio")),(0,a.createElement)(Vm.Sidebar.Content,null,(0,a.createElement)(Rc,{showAnimationAtLoad:!0,...e,showFavorite:!1,showLabel:!1})),(0,a.createElement)(Vm.Sidebar.Footer,null,(0,a.createElement)("div",{className:"d-flex justify-content-end align-items-center"},(0,a.createElement)("a",{href:null==e?void 0:e.preview,target:"_blank",rel:"noreferrer"},(0,T.__)("Preview starter site","kubio")))))})),qd={ACTIVE:(0,T.__)("Active","kubio"),INSTALLED:(0,T.__)("Installed","kubio"),NOT_INSTALLED:(0,T.__)("Not installed","kubio")},Yd=h().get(window,["kubioUtilsData","plugins_states"],{}),Zd=(0,u.memo)((()=>{const{currentDemoSite:e}=dh(),t=(0,u.useMemo)((()=>{const t=h().get(e,"plugins",[]);return Array.isArray(t)?t.map((e=>{const t=h().get(Yd,null==e?void 0:e.slug),n=h().get(qd,t);return{...e,statusLabel:n}})):[]}),[e]);return(0,a.createElement)(a.Fragment,null,t.map((({slug:e,label:t,statusLabel:n})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)("li",{key:e,className:"kubio-predefined-layouts__demo-site-import-page__plugin"},(0,a.createElement)("div",{className:"d-flex justify-content-between"},(0,a.createElement)("span",{className:"d-flex align-items-center"},t),(0,a.createElement)("span",{className:"kubio-predefined-layouts__demo-site-import-page__plugin__status"},n))),(0,a.createElement)("hr",null)))))})),Xd=(0,u.memo)((()=>{const{currentDemoSite:e}=dh(),t=!h().isEmpty(null==e?void 0:e.plugins);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel"},(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,T.__)("You are about to import a demo site","kubio")),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,T.__)("Current pages will be moved to trash. You can restore the content back at any time.","kubio")),(0,a.createElement)("li",null,(0,T.__)("Posts, pages, images, widgets, menus and other theme settings will get imported.","kubio")),(0,a.createElement)("li",{className:"text-danger"},(0,T.__)("Your current design will be completely overwritten by the new template. This process is irreversible. If you wish to be able to go back to the current design,please create a backup of your site before proceedingwith the import.","kubio")))),t&&(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-site-import-page__import-panel__title"},(0,T.__)("The following plugins will be installed as they are part of the demo","kubio")),(0,a.createElement)("ul",{className:"kubio-predefined-layouts__demo-site-import-page__plugins-list"},(0,a.createElement)(Zd,null))))})),Qd=(0,u.memo)((()=>{const{currentDemoSite:e}=dh(),t=null==e?void 0:e.label;return(0,a.createElement)(Vm.Page.Content,null,(0,a.createElement)(Vm.Page.Content.Title,null,(0,a.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t)),(0,a.createElement)(Xd,null))})),Jd=(0,u.memo)((()=>{const{currentDemoSite:e,setShowDemoSiteImportPage:t}=dh(),{baseUrl:n}=(0,C.useSelect)((e=>{const{url:t}=e("core").getEntityRecord("root","site")||{};return{baseUrl:t}}),[]),o=(0,s.useUnloadStoreEntities)(),r=(0,s.useResetUndoStack)(),i=(0,u.useCallback)((()=>{o(),r()}),[o,r]),l=(0,u.useMemo)((()=>!0),[])&&(null==e?void 0:e.isPro)?ve.ProItem:E.Button,c=(0,u.useCallback)((()=>{t(!1)}),[t]),d=(0,u.useCallback)((async()=>{if(!(null==e?void 0:e.slug))return;const t=new URL(`${n}/wp-admin/admin.php`),o=t.searchParams;o.set("page","kubio-get-started"),o.set("tab","demo-sites"),o.set("import",null==e?void 0:e.slug);const r=t.toString();i(),document.location.href=r}),[e]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Vm.Page.Footer,null,(0,a.createElement)("div",{className:" d-flex w-100 justify-content-end align-items-center"},(0,a.createElement)(E.Button,{isSecondary:!0,onClick:c},(0,T.__)("Cancel","kubio")),(0,a.createElement)(l,{tag:E.Button,isPrimary:!0,urlArgs:{source:"templates_gallery",content:null==e?void 0:e.label},onClick:d},(0,T.__)("Import full starter site","kubio")))))})),em=(0,u.memo)((e=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Vm,{...e,className:"kubio-predefined-layouts__demo-site-import-page",sidebar:(0,a.createElement)($d,null),pageContent:(0,a.createElement)(Qd,null),pageFooter:(0,a.createElement)(Jd,null)})))),tm=(0,u.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n}=dh(),{list:o}=rh();return(0,a.createElement)(a.Fragment,null,t&&(0,a.createElement)(Zp,{...e}),n&&(0,a.createElement)(em,null),(0,a.createElement)(Vm,{...e,className:"kubio-predefined-layouts__demo-list-page",items:o,sidebar:(0,a.createElement)(Hd,null),pageContent:(0,a.createElement)(Vd,null),emptyContent:(0,T.__)("No Starter Site Found","kubio")}))})),nm=(0,u.memo)((({children:e})=>{const{rawDemoList:t}=dh(),{favoritesDataByType:n}=vh(),o=(0,u.useMemo)((()=>null===n?t:h().isEmpty(n)?[]:t.filter((e=>!!h().get(n,["demoSite",null==e?void 0:e.slug])))),[t,n]),r=(0,u.useMemo)((()=>{const e=h().cloneDeep(o),t=[];return e.forEach((e=>{const{isPro:n,relatedDemoSite:o}=e;o?!n&&t.push(e):t.push(e)})),t}),[o]),i=(0,u.useMemo)((()=>({list:r})),[r]);return(0,a.createElement)(Xp.Provider,{value:i},e)})),om=(0,u.memo)((e=>(0,a.createElement)(uh,null,(0,a.createElement)(nm,null,(0,a.createElement)(nh,null,(0,a.createElement)(tm,{...e})))))),rm=(0,u.memo)((({value:e={},onSelect:t})=>{const{screenshot:n,isPro:o,label:r,slug:i,uniqueId:l,demoSiteSlug:s,id:c,type:d}=e,m=(0,u.useMemo)((()=>{const e=(e=>h().get(Bs,["demoSitesListBySlug",e]))(s);return`STARTER SITE: ${null==e?void 0:e.label}`}),[s]),p=(0,u.useMemo)((()=>({favoriteType:`demo-${d}`,favoriteId:c})),[d,c]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item",onClick:()=>{t(e)}},(0,a.createElement)(Rc,{screenshot:n,label:r,uniqueId:l,isPro:o,...p}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__demo-part-list-page__item__pack-label",onClick:e=>e.stopPropagation()},m))})),im=(0,u.memo)((({list:e,onSelect:t})=>(0,a.createElement)(Dd,{list:e,onSelect:t,ListItemComponent:rm}))),am=()=>{const{onSelectDemo:e}=dh(),{list:t}=rh(),n=(0,u.useCallback)((t=>{e(null==t?void 0:t.demoSiteSlug,t)}),[e]);return(0,a.createElement)(Vm.Page.Content,null,(0,a.createElement)(im,{list:t,onSelect:n}))},lm=(0,u.memo)((e=>{const{selectedDemoSlug:t,showDemoSiteImportPage:n,demoPartsIsLoaded:o}=dh(),{list:r}=rh();return(0,a.createElement)(a.Fragment,null,t&&(0,a.createElement)(Zp,{...e}),n&&(0,a.createElement)(em,null),(0,a.createElement)(Vm,{...e,className:"kubio-predefined-layouts__demo-part-list-page",isLoading:!o,items:r,sidebar:(0,a.createElement)(Hd,{searchPlaceholder:(0,T.__)("Find a page…","kubio")}),pageContent:(0,a.createElement)(am,null),emptyContent:(0,T.__)("No Page Found","kubio")}))})),sm=(0,u.memo)((({children:e})=>{const{rawDemoList:t,demosPartsPerSlug:n}=dh(),{favoritesDataByType:o}=vh(),r=(0,u.useMemo)((()=>{let e=[];return t.forEach((({slug:t,isPro:o,relatedDemoSite:r})=>{if(r){if(o)return;const i=t,a=null==r?void 0:r.slug,l=h().get(n,i,[]),s=h().get(n,a,[]);e=e.concat(l,s)}else{const o=h().get(n,t,[]);e=e.concat(o)}})),e}),[t,n]),i=(0,u.useMemo)((()=>null===o?r:h().isEmpty(o)?[]:r.filter((e=>{const{type:t,id:n}=e,r=[`demo-${t}`,n];return!!h().get(o,r)}))),[r,o]),l=(0,u.useMemo)((()=>({list:i})),[i]);return(0,a.createElement)(Xp.Provider,{value:l},e)})),cm=(0,u.memo)((e=>(0,a.createElement)(uh,null,(0,a.createElement)(sm,null,(0,a.createElement)(nh,null,(0,a.createElement)(lm,{...e})))))),um=(0,u.memo)((({value:e={},onSelect:t,onLoad:n})=>{const{screenshot:o,isProOnFree:r,label:i,name:l,categoryLabelWithIndex:s}=e,c=(0,u.useRef)(),d=r,m=d?ve.ProItem:Rc;let p={};return d&&(p={urlArgs:{source:"templates_gallery",content:i}}),(0,a.createElement)(ve.ProModalTextContext.Provider,{value:(0,T.__)("This section is available only in the PRO version.","kubio")},(0,a.createElement)(m,{tag:Rc,ref:c,title:i,screenshot:o,label:s,uniqueId:l,isPro:r,isLandscape:!0,onClick:()=>t(e),favoriteType:"section",favoriteId:l,onLoad:n,addImageType:!1,...p}))})),dm=(0,u.createContext)({}),mm=(0,u.memo)((({children:e,filterByPublicTag:t=!0,activeTag:n,setActiveTag:o})=>{const[r,i]=pm(h().noop,"content"),[l]=pm(h().noop,"header"),[s]=pm(h().noop,"footer"),{favoritesDataByType:c}=vh(),{initialParams:d,activePage:m}=dc(),f=h().get(d,["sections","internalTag"]),{isFrontPage:b}=(0,C.useSelect)((e=>{const{getIsFrontPage:t=h().noop}=e("kubio/edit-site")||{};return{isFrontPage:t()}}),[]),_=new URLSearchParams(window.location.search);let v=null;_.get("postId").match(/front-header|header|footer/gi)&&(v=_.get("postId").match(/front-header|header|footer/gi)[0]);let y="kubio-content";y=v?v.includes("header")?"kubio-header":"kubio-footer":h().get(d,[m,"categoryType"],"kubio-content");const k=(0,u.useMemo)((()=>l.concat(r,s)),[l,r,s]),E=(0,u.useMemo)((()=>k.filter((e=>{if(!y)return!0;const t=h().get(e,"categories.0"),n=t.split("/")[0];return(!b&&"front-header"!==v||t!==g.INNER_HEADERS_CATEGORY)&&n===y})).filter((e=>!(f&&!((null==e?void 0:e.internalTags)||[]).includes(f))&&!!(0,ye.isPatternAvailableInCurrentTheme)(e)))),[k,y,b,f]),S=(0,u.useMemo)((()=>null===c?E:h().isEmpty(c)?[]:E.filter((e=>!!h().get(c,["section",null==e?void 0:e.name])))),[E,c]),w=(0,u.useMemo)((()=>{const e={};return S.map(((t,n)=>{var o;let r=t.screenshot;!r&&t.isCustomSection&&(r="data:image/svg+xml,"+`<svg background='#fff' xmlns='http://www.w3.org/2000/svg' width='400'  height='250'>\t<rect x='0' y='0' width='400' height='250' fill='white'></rect>\t<text x='50%' y="50%" fill='#a6adb5' dominant-baseline='middle' font-family='Open Sans, Arial, Helvetica, sans-serif' text-anchor='middle'>\t\t${t.title}\t</text></svg>`.replace(/"/g,"'").replace(/>\s{1,}</g,"><").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent));const a=null===(o=(0,p.find)(i,{name:h().get(t,"categories.0")}))||void 0===o?void 0:o.label;h().get(e,a)?e[a]++:e[a]=1;const l=`${a} #${e[a]}`;return{...t,label:t.title,categoryLabelWithIndex:l,screenshot:r}})).filter((e=>{const o=(null==e?void 0:e.publicTags)||[];return!(t&&n!==ye.ALL_TAG&&!o.includes(n))})).sort(((e,t)=>0+e.isProPattern-t.isProPattern))}),[i,S,n]),I=(0,u.useMemo)((()=>i.map((({name:e,label:t})=>({label:t,value:e})))),[i]),T=(0,u.useCallback)(((e,t)=>{const n=e=>null==e?void 0:e.toLowerCase().replace("#",""),o=n(t);return e.filter((({label:e,categoryLabelWithIndex:t})=>{var r,i,a,l;return(null===(r=n(e))||void 0===r||null===(i=r.includes)||void 0===i?void 0:i.call(r,o))||(null===(a=n(t))||void 0===a||null===(l=a.includes)||void 0===l?void 0:l.call(a,o))}))}),[]),x=(0,u.useMemo)((()=>({list:w,categories:I,filterFunction:T})),[w,I,T]),P=(0,u.useMemo)((()=>({activeTag:n,setActiveTag:o})),[n,o]);return(0,a.createElement)(dm.Provider,{value:P},(0,a.createElement)(Xp.Provider,{value:x},e))})),pm=(e,t="content")=>{const{patternCategories:n,patterns:o}=(0,C.useSelect)((e=>{const{getSettings:n}=e("core/block-editor");return{patterns:n().__experimentalBlockPatterns.filter((e=>e.isGutentagPattern&&0===e.name.indexOf(`kubio-${t}`))),patternCategories:n().__experimentalBlockPatternCategories}}),[t]),r=(0,u.useMemo)((()=>{const e={};n.forEach((({name:t},n)=>e[t]=n));const t=o.map(((t,n)=>{const o=h().get(t,"categories[0]"),r=e[o];return{...t,arrayIndex:n,categoryIndex:r}}));return h().orderBy(t,["categoryIndex","arrayIndex"],["asc","asc"])}),[o,n]),i=(0,u.useCallback)(((t,n)=>{const o=t.isGutentagPattern?(0,ye.transformTemplateToBlock)(n):(0,p.map)(n,(e=>(0,Ge.cloneBlock)(e)));e(o,t)}),[]);return[r,n,i]},hm=()=>(0,u.useContext)(dm),gm=()=>{const{activeTag:e,setActiveTag:t}=hm();return(0,a.createElement)(mm,{activeTag:e,setActiveTag:t,filterByPublicTag:!1},(0,a.createElement)(nh,null,(0,a.createElement)(fm,null)))},fm=()=>{const{list:e}=rh(),{activeTag:t,setActiveTag:n}=hm(),o=(0,u.useMemo)((()=>{const t=new Set;return e.forEach((e=>{(e.publicTags||[]).forEach((e=>t.add(e)))})),[...t]}),[e]);return(0,a.createElement)(a.Fragment,null,!!o.length&&(0,a.createElement)(ye.KubioSectionsTags,{activeTag:t,setActiveTag:n,availableTagSlugs:o}))},bm=(0,u.memo)((({list:e,onSelect:t})=>{const n=(0,u.useRef)(),[o,r]=(0,u.useState)(1),i=(0,u.useMemo)((()=>{let t=40*o;return t=Math.min(e.length,t),e.slice(0,t).map(((e,t)=>({...e,__internalId:t})))}),[o,e]),l=(0,u.useCallback)((()=>{r((t=>{const n=t+1;return 40*n-40>e.length?t:n}))}),[e]),c=(0,s.useDebounce)(l,100),d=(0,u.useMemo)((()=>e.length!==i.length),[i,e]),{onRestartMasonry:m}=(({containerRef:e})=>{const t=(0,u.useRef)({}),n=(0,u.useRef)({}),o=(0,u.useRef)(0),r="data-masonry-loaded",i=(0,u.useRef)(0),a=(0,u.useRef)(!1),[l,c]=(0,u.useState)(!1),d=(0,u.useRef)(!1),m=(0,u.useCallback)((e=>{if("top"!==e.propertyName)return;const t=e.target;i.current>0&&i.current--,t.removeEventListener("transitionend",m),0===i.current&&a.current&&c(!0)}),[]),p=(0,u.useCallback)((()=>{if(0!==i.current||d.current)return a.current=!0,void(d.current=!1);d.current=!0;const l=e.current.children[0],s=n.current,c=t.current,u=o.current,p=Array.from(l.children).filter((e=>!e.hasAttribute(r)&&e.querySelector("img").hasAttribute("data-is-loaded"))),h=e.current,g=l.offsetHeight;l.style.paddingTop=`${g}px`;const f=l.clientWidth,{getComputedStyle:b}=h.ownerDocument.defaultView,_=parseInt(b(h).getPropertyValue("--number-columns")),v=f/_;p.forEach(((e,t)=>{const n=u+t,o=Math.floor(n/_);void 0===c[o]&&(c[o]=0);const i=0!==o?c[o-1]:0,a=e.offsetHeight+i;if(a>c[o]&&(c[o]=a),n>=_){const t=c[o-1];e.style.top=`${t}px`}else e.style.top=0;const l=n%_*v;e.style.left=`${l}px`,e.style.width=`${v}px`,e.style.position="absolute",e.setAttribute(r,!0)})),p.forEach(((e,t)=>{const n=u+t,o=e.querySelector(".kubio-predefined-layouts__screenshot-preview__parent");let r;if(n>=_){const e=s[n-_];r=`${e}px`,s[n]=e+o.offsetHeight+30}else s[n]=o.offsetHeight+30,r="0.1px";e.style.top!==r&&(i.current++,e.addEventListener("transitionend",m)),e.style.top=r}));let y=0;for(let e=0;e<_;e++){const t=p[p.length-1-e];if(!t)continue;const n=t.offsetHeight+parseFloat(t.style.top);y<n&&(y=n)}o.current+=p.length,l.style.paddingTop=`${y}px`,d.current=!1}),[e,m]);(0,u.useEffect)((()=>{l&&(c(!1),p())}),[l]);const h=(0,u.useCallback)((()=>{t.current={},n.current={},o.current=0;const i=e.current.children[0];i.style.paddingTop="0",Array.from(i.children).forEach((e=>{e.hasAttribute(r)&&e.removeAttribute(r),e.style.left="",e.style.top="",e.style.width="",e.style.position=""})),p()}),[e,p]),g=(0,s.useDebounce)(h,50);return(0,u.useEffect)((()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)})),[g]),{onRestartMasonry:p}})({containerRef:n}),p=(0,s.useDebounce)((0,u.useCallback)(m,[]),500);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__screenshot-list kubio-predefined-layouts__screenshot-list--infinite-list",ref:n},(0,a.createElement)(jd(),{pageStart:0,initialLoad:!1,useWindow:!1,loadMore:c,hasMore:d,threshold:2e3,loader:(0,a.createElement)(a.Fragment,null)},i.map(((e,n)=>(0,a.createElement)(um,{onLoad:p,key:e.name+"__"+n,value:e,index:n,onSelect:t})))),(0,a.createElement)(gm,null)))})),_m=()=>{const{list:e}=rh(),{initialParams:t,activePage:n}=dc(),o=h().get(t,[n,"onActionFunc"]),{insertBlocks:r}=(0,C.useDispatch)("core/block-editor"),{contentClientId:i,nrOfBlocksInsideContent:l,patternCategories:c,sectionNameAndIdHooks:d}=(0,C.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o,getClientIdsWithDescendants:r,getBlock:i}=e("core/block-editor"),{__experimentalBlockPatternCategories:a}=e("core/block-editor").getSettings(),l=n()||[],s=(0,ye.findBlockByName)(l,"core/post-content"),c=null==s?void 0:s.clientId;return{patternCategories:a,contentClientId:c,nrOfBlocksInsideContent:null===(t=o(c))||void 0===t?void 0:t.length,sectionNameAndIdHooks:{getClientIdsWithDescendants:r,getBlock:i}}}),[]),{onClose:m=h().noop}=dc(),f=(0,u.useCallback)((async e=>{var t;const n=null==e?void 0:e.content;let o=(0,ye.transformTemplateToBlock)(n);o=function({block:e,pattern:t,patternCategories:n,hooks:o}){var r,i,a;const{categories:l}=t,s=null!==(r=null==l?void 0:l[0])&&void 0!==r?r:"__undefined__category__",c=null!==(i=null===(a=(0,p.find)(n,{name:s}))||void 0===a?void 0:a.label)&&void 0!==i?i:"Custom Section",{anchor:u,name:d}=(0,ye.getNextSectionNameAndId)(c,o);return"kubio/section"===e.name&&(e={...e,attributes:{...e.attributes,anchor:u,attrs:{...e.attributes.attrs,name:d}}}),e}({pattern:e,block:o,hooks:d,patternCategories:c});let a=l;var s;-1!==e.categories.indexOf(g.HERO_ACCENT_CATEGORY)&&(a=0),await r((0,ye.cleanFontFamilyFromBlocks)(o),a,i,!1),m(),null!==(t=o)&&void 0!==t&&t.clientId&&Ws(null===(s=o)||void 0===s?void 0:s.clientId)}),[i,l,r,m,c,d]),b=(0,s.useDeepMemo)((()=>Ca().generate()),[e]),_=(0,u.useCallback)((async e=>{o?(o(e),m()):f(e)}),[o,m,f]);return(0,a.createElement)(Vm.Page.Content,null,(0,a.createElement)(bm,{key:b,list:e,onSelect:_}))},vm="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found.png",ym="https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/no+elements+found+favorites.png";[vm,ym].forEach((e=>{(new Image).src=e}));const km=(0,u.memo)((({children:e})=>{const{activePage:t}=dc(),n=e||(0,T.__)("NO ELEMENTS FOUND","kubio"),o=(0,u.useMemo)((()=>t===sc?ym:vm),[t]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,a.createElement)("img",{src:o}),n)})),Em=(0,u.memo)((({children:e})=>{const{activePage:t}=dc(),{activeTag:n,setActiveTag:o}=hm(),r=(0,u.useMemo)((()=>t===sc?ym:vm),[t]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--empty-content"},(0,a.createElement)(ye.KubioSectionsTags,{activeTag:n,setActiveTag:o}),(0,a.createElement)("img",{src:r}),(0,T.__)("No Section Found","kubio"))})),Sm=(0,u.memo)((e=>{const{list:t}=rh(),n=!window.kubioPatternsRegistered;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Vm,{...e,className:"kubio-predefined-layouts__sections-page",isLoading:n,items:t,sidebar:(0,a.createElement)(Hd,{searchPlaceholder:(0,T.__)("Find a section…","kubio")}),pageContent:(0,a.createElement)(_m,null),EmptyContentComponent:Em}))})),wm=(0,u.memo)((e=>{const{initialParams:t,activePage:n}=dc(),o=h().get(t,["sections","tag"],ye.ALL_TAG),[r,i]=(0,u.useState)(o);return(0,a.createElement)(mm,{activeTag:r,setActiveTag:i},(0,a.createElement)(nh,null,(0,a.createElement)(Sm,{...e})))})),Cm=(0,u.createContext)({value:null}),Im=(0,u.memo)((({children:e})=>{const{previousActivePage:t}=dc(),[n,o]=(0,u.useState)(t),r=(0,u.useMemo)((()=>({activeTab:n,setActiveTab:o})),[n,o]);return(0,a.createElement)(Cm.Provider,{value:r},e)})),Tm=()=>(0,u.useContext)(Cm),xm=cc.filter((({value:e})=>e!==sc)),Pm=(0,u.memo)((()=>{const{activeTab:e,setActiveTab:t}=Tm(),{initialParams:n}=dc(),o=h().get(n,"disabledPages",[]);return(0,a.createElement)(Ue.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:xm})})),Rm=(0,u.memo)((()=>(0,a.createElement)(zm.Fill,null,(0,a.createElement)(Pm,null)))),Am=(0,u.memo)((e=>{const{activeTab:t}=Tm(),n=(0,u.useMemo)((()=>h().get(Nm,t,u.Fragment)),[t]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__favorite-page"},(0,a.createElement)(n,{...e}),(0,a.createElement)(Rm,null))})),Om=(0,u.memo)((e=>(0,a.createElement)(Im,null,(0,a.createElement)(_h,null,(0,a.createElement)(Am,{...e}))))),Nm={[ic]:om,[ac]:cm,[lc]:wm,[sc]:Om},Mm=(0,u.memo)((e=>{const{activePage:t,onClose:n,showLoadingOverlay:o}=dc(),r=(0,u.useRef)(),i=(0,u.useMemo)((()=>h().get(Nm,t,u.Fragment)),[t]),l=(0,u.useCallback)((()=>{n()}),[n]);return(0,s.useOnClickOutside)(r,l),(0,a.createElement)("div",{ref:r,className:"kubio-predefined-layouts__pages-container position-relative"},(0,a.createElement)(i,{...e}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__popup-slot"}),o&&(0,a.createElement)(Gd,null))})),Dm=(0,u.memo)((({children:e})=>{const t=e||(0,T.__)("Kubio Library","kubio");return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__header__inner"},t))})),Bm=(0,u.memo)((({children:e})=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__content"},e))),Lm=(0,u.memo)((({children:e})=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__sidebar__footer"},e))),zm=(0,E.createSlotFill)("PredefinedLayoutsSidebarTop"),Fm=(0,u.memo)((({children:e,className:t})=>(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__modal-layout__sidebar",t)},e)));Fm.Header=Dm,Fm.Content=Bm,Fm.Footer=Lm;const Gm=(0,u.memo)((({children:e})=>(0,a.createElement)("div",null,e))),Hm=(0,u.memo)((()=>{const{activePage:e,setActivePage:t,initialParams:n}=dc(),o=h().get(n,"disabledPages",[]);return(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__pages-switcher"},(0,a.createElement)(Ue.ToggleGroup,{value:e,onChange:t,disabledOptions:o,options:cc}))})),Um=(0,u.memo)((({children:e})=>(0,a.createElement)(a.Fragment,null,e))),Wm=(0,u.memo)((({children:e})=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__title"},e))),jm=(0,u.memo)((({children:e})=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__footer"},e))),Km=(0,u.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list--loading-content"},(0,a.createElement)(E.Icon,{icon:ke.KubioLoader})))),Vm=(0,u.memo)((({items:e,sidebar:t,pageContent:n,pageFooter:o,className:r,isLoading:i=!1,emptyContent:l,EmptyContentComponent:s=km})=>{const{onClose:c}=dc();let u;if(Array.isArray(e)){const t=!(null==e?void 0:e.length);u=i?(0,a.createElement)(Km,null):t?(0,a.createElement)(s,null,l):n}else u=n;return(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__modal-layout",r)},t,(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__container"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__header"},(0,a.createElement)(Hm,null),(0,a.createElement)(E.Button,{className:"kubio-predefined-layouts__modal-layout__close",onClick:c,icon:we,size:12,label:(0,T.__)("Close","kubio")})),(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__modal-layout__list__left-gradient"}),u),o))}));Vm.Page=Gm,Vm.Page.Content=Um,Vm.Page.Footer=jm,Vm.Page.Content.Title=Wm,Vm.Sidebar=Fm;const $m=(0,u.memo)((({onSelectDemo:e})=>{const{activePage:t}=dc(),n=(0,u.useMemo)((()=>{switch(t){case ic:return(0,T.__)("Back to Starter Sites","kubio");case ac:return(0,T.__)("Back to Pages","kubio")}return(0,T.__)("Back","kubio")}),[t]);return(0,a.createElement)(Vm.Sidebar.Header,null,(0,a.createElement)(E.Button,{className:"kubio-predefined-layouts__preview-page__sidebar__back",icon:(0,a.createElement)(E.Dashicon,{icon:"redo"}),onClick:()=>e(null)},n))})),qm=(0,u.createContext)({text:null,isDisabled:!1}),Ym=(0,u.memo)((()=>(0,a.createElement)("div",null,(0,T.__)("You can't import page content","kubio")))),Zm=(0,u.memo)((({children:e})=>{const{selectedDemoPart:t}=Zs(),n=mp(t),{currentPostIsPage:o}=(0,C.useSelect)((e=>{const{getPage:t=h().noop}=e("kubio/edit-site")||{},n=t(),{postType:o}=(null==n?void 0:n.context)||{};return{currentPostIsPage:"page"===o}}),[]),r=h().isEmpty(t),i=(0,u.useMemo)((()=>{const e=n.find((({isCurrentPageTemplate:e})=>e)),i=n.find((({isSelectedDemoPart:e})=>e));return i&&null!=i&&i.isDisabled?{text:i.noticeText,isDisabled:i.isDisabled}:e&&"page"===(null==t?void 0:t.type)||"page"===(null==t?void 0:t.type)&&!o?{text:hp,isDisabled:!0}:{text:Ym,isDisabled:r}}),[n,t,o]);return(0,a.createElement)(qm.Provider,{value:i},e)})),Xm=()=>(0,u.useContext)(qm),Qm=["attachment","kubio_changeset"],Jm=({onComplete:e=p.noop,closeModal:t=p.noop,entityName:n=(0,T.__)("other","kubio"),changeEntityText:o,ModalComponent:r=E.Modal,modalProps:i={},changeReadyState:l=!0,changePage:c=!0})=>{const m=(0,s.useUnloadStoreEntities)(),h=(0,s.useResetUndoStack)(),g=(0,b.useSetGlobalSessionProp)("ready"),[f,v]=(0,u.useState)(!1),{hasDirtyEntities:y,entitiesToSave:k}=(0,C.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((({kind:e,name:t})=>"postType"===e&&!Qm.includes(t))).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:S}=(0,C.useDispatch)("core"),{setIsNavigationPanelOpened:w,setPage:I}=(0,C.useDispatch)(fe),[,x]=(0,_.useAIData)(),P=(0,u.useCallback)((()=>{w(!1),l&&(g(!1),c&&I(null));const{requestIdleCallback:t}=window;t((()=>{m(),h(),(0,s.removeCachedAllMergedAttributes)(),x(null),t(e)})),(0,d.doAction)("kubio.editor.page-changed")}),[w,l,I,g,m,h,x,e]);let R;return(0,u.useEffect)((()=>{y||P()}),[P,y]),R=o||(0,T.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,T.__)("You are being redirected to <strong>%s</strong> page.","kubio"),n),(0,a.createElement)(a.Fragment,null,y&&(0,a.createElement)(r,{title:(0,T.__)("You have unsaved changes","kubio"),onRequestClose:t,...i},(0,a.createElement)("p",null,(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:R}}),(0,a.createElement)("br",null),(0,T.__)("Would you like to save these changes or discard them?","kubio")),(0,a.createElement)(E.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,a.createElement)(E.Button,{isLink:!0,onClick:()=>{P()}},(0,T.__)("Discard changes","kubio")),(0,a.createElement)(E.Button,{isPrimary:!0,onClick:()=>{v(!0),(()=>{const e=k.map((({kind:e,name:t,key:n})=>S(e,t,n)));return Promise.all(e)})().then((()=>{P(),v(!1)}))},isBusy:f,disabled:f},(0,T.__)("Save changes","kubio")))))},ep=(0,u.memo)((({onClose:e=h().noop,children:t})=>{const[n,o]=(0,u.useState)(!1),[,r]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked"),i=(0,u.useMemo)((()=>({onClose:e})),[e]),l=(0,u.useCallback)((()=>{o(!0),r(!0)}),[r]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Jm,{onComplete:l,onClose:e,ModalComponent:Fd,modalProps:i,changeReadyState:!1}),n&&t)})),{memo:tp,useState:np}=n(9307),op=tp((({actionLabel:e,description:t,NoticeActionComponent:n,onClose:o=h().noop,onAction:r=h().noop,onShowAction:i=h().noop,fromPopup:l=!1,...s})=>{const[c,d]=np(!1),m=(0,u.useCallback)((()=>{o(),d(!1)}),[o,d]),p=e=>{e.stopPropagation(),e.preventDefault(),i(),d(!0)};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__description"},t),(0,a.createElement)("div",null,!l&&(0,a.createElement)("a",{className:"kubio-predefined-layouts__disabled-notice__action",onClick:p},e),l&&(0,a.createElement)(E.Button,{isSecondary:!0,onClick:p},e)),c&&(0,a.createElement)(ep,{onClose:m},(0,a.createElement)(n,{onAction:r,...s})))})),rp=(0,u.memo)((({onAction:e,templateSlug:t,thirdPartyUrl:n=null})=>{const o=(0,u.useRef)(!1),{storeData:r}=(0,C.useSelect)((e=>{var t;const{storeData:n={}}=null===(t=e(s.TEMPLATE_STORE_NAME))||void 0===t?void 0:t.getTemplateData();return{storeData:n}}),[]),{createErrorNotice:i}=(0,s.useKubioNotices)(),{setTemplate:l=h().noop}=(0,C.useDispatch)("kubio/edit-site")||{},c=(0,b.useSetGlobalSessionProp)("ready"),{onClose:d}=dc(),m=(0,u.useCallback)((()=>{if(!n)return void i((0,T.__)("Could not redirect to the page you selected","kubio"));const e=document.createElement("a");e.setAttribute("href",n),document.body.append(e),e.click()}),[n,i]),p=(0,u.useMemo)((()=>{const e=(null==r?void 0:r.templates)||[],n=e=>{var t;const n=null==e||null===(t=e.id)||void 0===t?void 0:t.split("//");return h().get(n,"[1]")};if(Array.isArray(t)){let o=null;return h().reverse(t).forEach((t=>{if(o)return;const r=e.find((e=>n(e)===t));r&&(o=r)})),o}return e.find((e=>n(e)===t))}),[null==r?void 0:r.templates]),g=(0,u.useCallback)((()=>{o.current||(o.current=!0,c(!1),e(),d(),p?l(p.id,p.slug,!0):m())}),[p,l,e,o,d,c]);return(0,u.useEffect)((()=>{g()}),[]),(0,a.createElement)(a.Fragment,null)})),ip=()=>{const{siteUrl:e}=(0,C.useSelect)((e=>{const{getSettings:t=h().noop}=e("kubio/edit-site"),{siteUrl:n}=t()||{};return{siteUrl:n}}),[]);return e},ap=e=>{const t=ip();return(0,u.useMemo)((()=>{try{const n=new URL(`${t}wp-admin/admin.php`),o=n.searchParams;return o.append("page","kubio"),o.append("pageURL",e),n.toString()}catch(e){return null}}),[e])},lp=(0,u.memo)((e=>{const{blogLink:t}=(0,C.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getSettings:n=h().noop}=e("kubio/edit-site"),o=t("root","site");let r;if("page"===(null==o?void 0:o.show_on_front)){const e=t("postType","page",parseInt(null==o?void 0:o.page_for_posts));r=h().get(e,"link",null)}else{const{siteUrl:e}=n()||{};r=e}return{blogLink:r}}),[]),n=ap(t);return(0,a.createElement)(op,{description:(0,T.__)("This content can be imported only on the blog template","kubio"),actionLabel:(0,T.__)("Switch to the blog template","kubio"),templateSlug:nc,NoticeActionComponent:rp,thirdPartyUrl:n,...e})})),sp=(0,u.memo)((({onAction:e,firstPost:t})=>{const n=(0,u.useRef)(!1),{createErrorNotice:o}=(0,s.useKubioNotices)(),{setTemplate:r=h().noop}=(0,C.useDispatch)("kubio/edit-site")||{},i=(0,b.useSetGlobalSessionProp)("ready"),{onClose:l}=dc(),{setPage:c}=(0,C.useDispatch)(g.STORE_KEY),d=(0,u.useCallback)((()=>{!n.current&&t&&(n.current=!0,i(!1),e(),l(),c({type:t.type,slug:t.slug,path:(0,Cn.getPathAndQueryString)(t.link),context:{postType:t.type,postId:t.id}}))}),[t,r,e,n,l,i]);return(0,u.useEffect)((()=>{d()}),[]),(0,a.createElement)(a.Fragment,null)})),cp=(0,u.memo)((e=>{const{firstPost:t}=(0,C.useSelect)((e=>{const{getEntityRecords:t}=e("core"),n=t("postType","post",{per_page:1});return{firstPost:h().get(n,"0")}}),[]);return(0,a.createElement)(op,{description:(0,T.__)("This content can be imported only on the singe post template","kubio","kubio"),actionLabel:(0,T.__)("Switch to the singe post template","kubio"),firstPost:t,NoticeActionComponent:sp,...e})})),up=(0,u.memo)((e=>{const t=ip(),n=ap(`${t}?s=search-page`);return(0,a.createElement)(op,{description:(0,T.__)("This content can be imported only on the search template","kubio"),actionLabel:(0,T.__)("Switch to the search template","kubio"),templateSlug:"search",thirdPartyUrl:n,NoticeActionComponent:rp,...e})})),dp=(0,u.memo)((e=>{const t=ip(),n=ap(`${t}page-no-found`);return(0,a.createElement)(op,{description:(0,T.__)("This content can be imported only on the 404 template","kubio"),actionLabel:(0,T.__)("Switch to the 404 template","kubio"),templateSlug:"404",thirdPartyUrl:n,NoticeActionComponent:rp,...e})})),mp=e=>{const{fseTemplateSlug:t,page:n}=(0,C.useSelect)((e=>{const{getPage:t=h().noop,getTemplateId:n=h().noop}=e("kubio/edit-site")||{},o=t(),r=n()||"";return{page:o,fseTemplateSlug:h().get(r.split("//"),"[1]")}}),[]),o=(0,b.useGetGlobalSessionProp)("urlBasedTemplatesMap",{})[null==n?void 0:n.path],r=t||o,i=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:n,slug:o}=t;let r=!1;const i="template"===n&&(null==nc?void 0:nc.includes(o)),a=nc.includes(e);return r=i&&!a,{type:"blog",noticeText:lp,isDisabled:r,isCurrentPageTemplate:a,isSelectedDemoPart:i}})({templateSlug:r,selectedDemoPart:e}),a=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:n,slug:o}=t;let r=!1;const i="template"===n&&(null==tc?void 0:tc.includes(o)),a=tc.includes(e);return r=i&&!a,{type:"single",noticeText:cp,isDisabled:r,isCurrentPageTemplate:a,isSelectedDemoPart:i}})({templateSlug:r,selectedDemoPart:e}),l=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:n,slug:o}=t;let r=!1;const i="search"===e,a="template"===n&&"search"===o;return r=a&&!i,{type:"search",noticeText:up,isDisabled:r,isCurrentPageTemplate:i,isSelectedDemoPart:a}})({templateSlug:r,selectedDemoPart:e}),s=(({templateSlug:e,selectedDemoPart:t={}})=>{const{type:n,slug:o}=t;let r=!1;const i="404"===e,a="template"===n&&"404"===o;return r=a&&!i,{type:"404",noticeText:dp,isDisabled:r,isCurrentPageTemplate:i,isSelectedDemoPart:a}})({templateSlug:r,selectedDemoPart:e});return[a,i,l,s]},pp=(0,u.memo)((({onAction:e})=>{const{saveEntityRecord:t,editEntityRecord:n,saveEditedEntityRecord:o}=(0,C.useDispatch)("core"),{setPage:r}=(0,C.useDispatch)(g.STORE_KEY),i=(0,u.useRef)(!1),{createErrorNotice:l}=(0,s.useKubioNotices)(),c=(0,b.useSetGlobalSessionProp)("ready"),{onClose:d}=dc(),m=(0,u.useCallback)((async()=>{if(i.current)return;i.current=!0,c(!1),e(),d();const a={title:"Kubio page",status:"publish"};try{var s;const e=await t("postType","page",a);if(!e)return;const i=h().capitalize(null==e||null===(s=e.slug)||void 0===s?void 0:s.replaceAll("-"," "));await n("postType","page",e.id,{title:i}),await o("postType","page",e.id),r({type:e.type,slug:e.slug,path:(0,Cn.getPathAndQueryString)(e.link),context:{postType:e.type,postId:e.id}})}catch(e){l((0,T.__)("Could not create new page","kubio"))}}),[r,e,d,t,l,n]);return(0,u.useEffect)((()=>{m()}),[]),(0,a.createElement)(a.Fragment,null)})),hp=(0,u.memo)((e=>(0,a.createElement)(op,{description:(0,T.__)("This content can be imported only on a page","kubio"),actionLabel:(0,T.__)("Create new page","kubio"),NoticeActionComponent:pp,...e}))),gp=(0,u.memo)((({onAction:e=h().noop,...t})=>{const{text:n,isDisabled:o}=Xm();return(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice__outer"},n&&o&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__disabled-notice"},(0,a.createElement)(n,{onAction:e,...t})))})),fp=(0,u.memo)((()=>(0,a.createElement)(Vm.Sidebar.Footer,null,(0,a.createElement)(gp,null)))),bp=(0,u.memo)((()=>(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__sidebar__content--is-loading"},(0,a.createElement)(E.Icon,{icon:ke.KubioLoader}),";"))),_p=(0,u.memo)((({currentDemoSite:e,selectedDemoPart:t})=>{const n=null==e?void 0:e.preview,o=(0,u.useRef)(),r=(0,u.useMemo)((()=>{const{pagePreviewUrl:e}=t||{};return e||n}),[n,t]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("a",{ref:o,href:r,target:"_blank",className:"kubio-predefined-layouts__preview-page__sidebar__preview-button",rel:"noreferrer"},(0,a.createElement)(E.Icon,{icon:ke.PreviewIcon})),(0,a.createElement)(Ue.ModalTooltip,{anchorRef:o},(0,T.__)("Live Preview","kubio")))})),vp=(0,u.memo)((({selectedDemoPart:e,currentDemoSite:t,demoPartsIsLoaded:n,currentDemoParts:o})=>{const[r,i]=(0,u.useState)(!1),{uniqueId:l}=e||{},s=(0,a.createElement)(_p,{currentDemoSite:t,selectedDemoPart:e});return(0,u.useEffect)((()=>{e&&!r&&(i(!0),function(e,t){if(!Array.isArray(e)||!t)return;const n=new Image;n.onload=()=>{e.filter((e=>e.uniqueId!==(null==t?void 0:t.uniqueId))).forEach((e=>{(new Image).src=e.screenshotFull}))},n.src=null==t?void 0:t.screenshotFull}(o,e))}),[e]),(0,a.createElement)(Vm.Sidebar.Content,null,n&&(0,a.createElement)(Rc,{key:l,showFull:!0,showAnimationAtLoad:!0,labelSlot:s,showFavorite:!1,addUniquePreviewAttribute:!1,...e}),!n&&(0,a.createElement)(bp,null))})),yp=(0,u.memo)((()=>{const{selectedDemoPart:e,demoPartsIsLoaded:t,currentDemoParts:n}=Zs(),{currentDemoSite:o,onSelectDemo:r}=dh();return(0,a.createElement)(Vm.Sidebar,{className:"kubio-predefined-layouts__preview-page__sidebar"},(0,a.createElement)($m,{onSelectDemo:r}),(0,a.createElement)(vp,{selectedDemoPart:e,currentDemoSite:o,demoPartsIsLoaded:t,currentDemoParts:n}),(0,a.createElement)(fp,null))})),kp=(0,u.memo)((({colorPalette:e})=>{const t=(0,u.useMemo)((()=>e.map((({color:e})=>`rgb(${e.join(",")}`))),[e]);return(0,a.createElement)("td",{className:"kubio-predefined-layouts__color-palette-previewer__list"},t.map(((e,t)=>(0,a.createElement)(Ue.ColorIndicator,{key:t,value:e}))))})),Ep=(0,u.memo)((({colorPalette:e})=>(0,a.createElement)("tr",{className:"kubio-predefined-layouts__color-palette-previewer"},(0,a.createElement)("td",null,(0,T.__)("Starter site colors","kubio")),e&&(0,a.createElement)(kp,{colorPalette:e})))),Sp=["h1","h2","h3","h4","h5","h6","p"],Cp=[{label:(0,T.__)("Heading 1","kubio"),holder:"h1"},{label:(0,T.__)("Heading 2","kubio"),holder:"h2"},{label:(0,T.__)("Heading 3","kubio"),holder:"h3"},{label:(0,T.__)("Heading 4","kubio"),holder:"h4"},{label:(0,T.__)("Heading 5","kubio"),holder:"h5"},{label:(0,T.__)("Heading 6","kubio"),holder:"h6"},{label:(0,T.__)("Paragraph","kubio"),holder:"p"}],Ip=(0,u.memo)((({typography:e})=>{const t=(0,u.useMemo)((()=>{const t=h().get(e,"holders",{});return h().pick(t,Sp)}),[e]),n=(0,u.useCallback)((e=>{const n=h().get(t,e);if(!n)return{};const o=Fi.typographyConfig.getTypographyCss(n,null,!1);return h().omit(o,"color")}),[t]);return e?(0,a.createElement)("td",{className:"kubio-predefined-layouts__typography-previewer__text-container"},Cp.map((({label:e,holder:o})=>{const r=n(o);return(0,a.createElement)(Tp,{key:o,style:r,holder:o,styleByHolder:t},e)}))):(0,a.createElement)(a.Fragment,null)})),Tp=(0,u.memo)((({children:e,styleByHolder:t,holder:n,style:o})=>{const r=(0,u.useRef)(),i=(0,u.useMemo)((()=>{const e=h().get(t,n),{family:o,weight:r,size:i}=e;return`${o}, ${r}, ${null==i?void 0:i.value}${null==i?void 0:i.unit}`}),[t,n]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text",style:o,ref:r},e),(0,a.createElement)("span",{className:"kubio-predefined-layouts__typography-previewer__text-separator"},", "),(0,a.createElement)(Ue.ModalTooltip,{anchorRef:r},i))})),xp=(0,u.memo)((({typography:e})=>(0,a.createElement)("tr",{className:"kubio-predefined-layouts__typography-previewer"},(0,a.createElement)("td",null,(0,T.__)("Starter site typography","kubio")),(0,a.createElement)(Ip,{typography:e})))),Pp=(0,u.memo)((({isOpen:e})=>{const[t,n]=(0,u.useState)(),{selectedDemoPart:o}=Zs();(0,u.useEffect)((()=>{!async function(){const e=await async function(e){const t=["demoPartsContentById","page"===(null==e?void 0:e.type)?"pages":"templates",null==e?void 0:e.id],n=h().get(Bs,t);return zs(null==n?void 0:n.globalDataId)}(o);e&&n(e)}()}),[o]);const r=(0,u.useMemo)((()=>null==t?void 0:t.colors),[t]),i=(0,u.useMemo)((()=>h().get(t,"globalStyle.style.descendants.body.typography")),[t]),l=(0,u.useRef)(),s=(0,u.useMemo)((()=>{var t;return e?{height:`${null==l||null===(t=l.current)||void 0===t?void 0:t.offsetHeight}px`}:{height:0}}),[e]),c=(0,u.useMemo)((()=>{const e=[];return h().get(t,["fonts","google"],[]).forEach((({family:t})=>{e.includes(t)||e.push(t)})),e}),[t]);return(0,a.createElement)(Rp.Fill,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings__control",style:s},(0,a.createElement)("div",{ref:l,className:"kubio-predefined-layouts__preview-page__advanced-settings__control__inner"},(0,a.createElement)("table",{className:"kubio-predefined-layouts__preview-page__advanced-settings__global-data"},(0,a.createElement)("tbody",null,(0,a.createElement)(Ep,{colorPalette:r}),(0,a.createElement)(xp,{typography:i}))))),(0,a.createElement)(Ic,{fontsToLoad:c}))})),Rp=(0,E.createSlotFill)("PredefinedLayoutsAdvancedSettings"),Ap=(0,u.memo)((()=>{const{shouldConvertGlobalColors:e,setShouldConvertGlobalColors:t}=gc();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__advanced-settings"},(0,a.createElement)(Ue.ToggleControl,{label:(0,T.__)("Replace global styles","kubio"),value:e,onChange:t})),(0,a.createElement)(Pp,{isOpen:e}))})),Op=(0,u.memo)((({value:e={},onSelect:t,selected:n})=>{const{screenshot:o,isPro:r,label:i,uniqueId:l,type:s,id:c}=e,d=l===(null==n?void 0:n.uniqueId),m=(0,u.useMemo)((()=>({favoriteType:`demo-${s}`,favoriteId:c})),[s,c]);return(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__preview-page__item",{"kubio-predefined-layouts__preview-page__item--selected":d}),onClick:()=>{t(e)}},(0,a.createElement)(Rc,{isPro:r,screenshot:o,label:i,uniqueId:l,...m}))})),Np=(0,u.memo)((({list:e,value:t,onSelect:n})=>(0,a.createElement)(Pc,{list:e},(e=>(0,a.createElement)(Op,{key:e.slug,value:e,selected:t,onSelect:n}))))),Mp=e=>{(0,u.useEffect)((()=>{if(!e)return;const t=document.querySelector(`[data-unique-id="${null==e?void 0:e.uniqueId}"]`);t&&(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(t)||t.scrollIntoView({block:"center"}))}),[e])},Dp=(0,u.memo)((()=>{const{currentDemoParts:e,setSelectedDemoPart:t,selectedDemoPart:n}=Zs();return Mp(n),(0,a.createElement)(Np,{list:e,onSelect:t,value:n})})),Bp=(0,u.memo)((()=>{const{currentDemoSite:e,onSelectDemo:t}=dh(),{currentDemoParts:n,relatedDemoParts:o,setSelectedDemoPart:r,selectedDemoPart:i}=Zs(),l=!!o,s=null==e?void 0:e.relatedDemoSite;Mp(i);const c=(0,u.useMemo)((()=>null!=e&&e.isPro?e:s),[e,s]),d=(0,u.useMemo)((()=>e===c?s:e),[e,c]),m=(0,u.useMemo)((()=>e.isPro?n:e.isPro||o?!e.isPro&&null!=e&&e.relatedDemoSite&&o?o:void 0:n),[n,e,o]),p=(0,u.useMemo)((()=>l&&n&&o?m===n?o:n:null),[l,m]),h=(0,u.useMemo)((()=>n===m),[m,n]),g=!h,f=(0,u.useCallback)((e=>{h?r(e):t(null==c?void 0:c.slug,e)}),[r,h,c]),b=(0,u.useCallback)((e=>{g?r(e):t(null==d?void 0:d.slug,e)}),[r,g,d]);return o?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Nc,{label:(0,T.__)("FREE","kubio")}),(0,a.createElement)(Np,{list:p,onSelect:b,value:i}),(0,a.createElement)(Nc,{label:(0,T.__)("PRO","kubio"),className:"kubio-predefined-layouts__free-pro-separator--second"}),(0,a.createElement)(Np,{list:m,onSelect:f,value:i})):(0,a.createElement)(a.Fragment,null)})),Lp=(0,u.memo)((()=>{const{currentDemoSite:e}=dh(),t=null==e?void 0:e.label,n=(0,u.useMemo)((()=>!(null==e||!e.relatedDemoSite)),[e])?Bp:Dp;return(0,a.createElement)(Vm.Page.Content,null,(0,a.createElement)(Vm.Page.Content.Title,null,(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__content__title"},(0,a.createElement)("div",{className:"d-flex justify-content-between align-items-center"},(0,a.createElement)("span",{className:"kubio-predefined-layouts__preview-page__content__title__name"},t),(0,a.createElement)(Ap,null)),(0,a.createElement)(Rp.Slot,null))),(0,a.createElement)(n,null))})),zp="content",Fp="fullPage",Gp="fullStarterSite",Hp=[{label:(0,T.__)("Content","kubio"),value:zp,description:(0,T.__)("The selected starter site content will be added after your existing sections","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/content.png"},{label:(0,T.__)("Full page","kubio"),value:Fp,description:(0,T.__)("Your header, content and footer will be all replaced with the ones from the selected page","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+page.png"},{label:(0,T.__)("Full starter site","kubio"),value:Gp,description:(0,T.__)("All content will be replaced with the selected full starter site","kubio"),image:"https://s3.us-west-2.amazonaws.com/static-assets.kubiobuilder.com/assets/predesigned-layouts/full+site.png"}],Up=(0,u.memo)((({value:e,label:t,description:n,image:o,isActive:r,onClick:i,isDisabled:l=!1,isFreeOnPro:s=!1,urlArgs:c})=>{const d=(0,u.useMemo)((()=>[{label:t,value:e}]),[t,e]),m=(0,u.useMemo)((()=>r?e:null),[r,e]),p=(0,u.useCallback)((()=>{l||i()}),[i,l]),h=(0,u.useMemo)((()=>s?ve.ProItem:Wp),[s]),g=(0,u.useMemo)((()=>s?{tag:Wp,urlArgs:{urlArgs:c}}:{}),[s]);return(0,a.createElement)(h,{className:R()("kubio-predefined-layouts__preview-page__import-popup__card",{"kubio-predefined-layouts__preview-page__import-popup__card--active":r,"kubio-predefined-layouts__preview-page__import-popup__card--disabled":l}),onClick:p,...g},(0,a.createElement)("img",{className:"kubio-predefined-layouts__preview-page__import-popup__card__image",src:o}),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__label"},(0,a.createElement)(E.RadioControl,{options:d,selected:m})),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__description"},n),l&&(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__card__disabled-overlay"}))})),Wp=(0,u.memo)((0,u.forwardRef)((({children:e,...t},n)=>(0,a.createElement)("div",{...t,ref:n},e)))),jp=(0,u.memo)((({onClose:e,onImportContent:t,onImportFullPage:n,onImportStarterSite:o,isFreeBuild:r,currentTemplateIsClassic:i,currentDemoSite:l})=>{const s=(0,u.useMemo)((()=>i?Fp:zp),[i]),[c,d]=(0,u.useState)(s),m=(0,u.useCallback)((e=>{e!==c&&d(e)}),[c,d]),p=(0,u.useMemo)((()=>Hp.map((e=>{const t={};return e.value===Fp&&r&&!i&&(t.isFreeOnPro=!0,t.urlArgs={source:"templates_gallery",content:null==l?void 0:l.label}),e.value===zp&&i&&(t.isDisabled=!0),{...e,...t}}))),[i,r,l]);return(0,a.createElement)(Fd,{title:(0,a.createElement)(Kp,null),onClose:e},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup"},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__list"},p.map((e=>(0,a.createElement)(Up,{key:e.value,...e,isActive:c===e.value,onClick:()=>m(e.value)})))),(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__import-popup__footer d-flex justify-content-end"},(0,a.createElement)(E.Button,{isPrimary:!0,onClick:()=>{switch(c){case zp:return void t();case Fp:return void n();case Gp:e(),o()}}},(0,T.__)("Import selection","kubio")))))})),Kp=(0,u.memo)((()=>(0,a.createElement)("span",{style:{fontWeight:"700"}},(0,T.__)("What to import:","kubio")))),{memo:Vp}=n(9307),$p=Vp((({onClose:e})=>{const[t,n]=(0,u.useState)(!1),o=(0,u.useCallback)((()=>{n(!0)}),[n]),r=(0,u.useMemo)((()=>{if(t)return"invisible"}),[t]);return(0,a.createElement)(Fd,{title:(0,a.createElement)("div",null,(0,T.__)("This content can't be imported here","kubio")),onClose:e,className:r},(0,a.createElement)(gp,{onAction:e,onClose:e,onShowAction:o,fromPopup:!0}))})),qp=(0,u.memo)((()=>{const{selectedDemoPart:e}=Zs(),[t,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)(!1),i=(0,u.useCallback)((()=>{n(!1)}),[n]),{currentDemoSite:l,setShowDemoSiteImportPage:s}=dh(),{importDemoPart:c,isImporting:d,whatToImport:m,setWhatToImport:p}=gc(),{isDisabled:g}=Xm(),{type:f,isPro:b}=e||{},{isClassicTemplate:_}=(0,C.useSelect)((e=>{const{getTemplateId:t=h().noop}=e("kubio/edit-site")||{};return{isClassicTemplate:!t()}})),v="template"===f&&_,y=(0,u.useMemo)((()=>!0),[]),k=y&&b,S=k?ve.ProItem:E.Button,w=y&&(null==l?void 0:l.isPro),I=w?ve.ProItem:E.Button;let x={};k&&(x={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});let P={};w&&(P={urlArgs:{source:"templates_gallery",content:null==l?void 0:l.label}});const A=(0,u.useCallback)((()=>{s(!0)}),[s]),O=(0,u.useCallback)((()=>{p(Xs),setTimeout((()=>{c()}),0)}),[p,c]),N=(0,u.useCallback)((()=>{p(Qs),setTimeout((()=>{c()}),0)}),[p,c]),M=(0,u.useCallback)((()=>{g?r(!0):n(!0)}),[g,n,r]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Vm.Page.Footer,null,(0,a.createElement)("div",{className:R()("kubio-predefined-layouts__preview-page__footer d-flex w-100 align-items-center justify-content-end")},(0,a.createElement)("div",{className:"kubio-predefined-layouts__preview-page__footer__buttons"},(0,a.createElement)(ve.ProModalTextContext.Provider,{value:(0,T.__)("This page is only available in the PRO version of Kubio. Please select a free page to import or upgrade to the PRO version.","kubio")},(0,a.createElement)(S,{tag:E.Button,isPrimary:!0,onClick:M,isBusy:d,...x,propPopoverClass:"kubio-pro-popover-large"},(0,T.__)("Import","kubio"))),(0,a.createElement)(ve.ProModalTextContext.Provider,{value:(0,T.__)("This starter site is only available in the PRO version of Kubio. Please select a free starter site to import or upgrade to the PRO version.","kubio")},(0,a.createElement)(I,{tag:E.Button,isSecondary:!0,onClick:A,...P},(0,T.__)("Import full starter site","kubio")))))),t&&(0,a.createElement)(jp,{currentTemplateIsClassic:v,currentDemoSite:l,selectedDemoPart:e,isFreeBuild:y,onClose:i,onImportContent:O,onImportFullPage:N,onImportStarterSite:A}),o&&(0,a.createElement)($p,{onClose:()=>r(!1)}))})),Yp=(0,u.memo)((e=>{const{currentDemoParts:t,demoPartsIsLoaded:n}=Zs(),{demoPartThatIsImporting:o}=gc();return(0,a.createElement)(a.Fragment,null,o&&(0,a.createElement)(Sc,null),(0,a.createElement)(Vm,{...e,isLoading:!n,className:"kubio-predefined-layouts__preview-page",items:t,sidebar:(0,a.createElement)(yp,null),pageContent:(0,a.createElement)(Lp,null),pageFooter:(0,a.createElement)(qp,null)}))})),Zp=(0,u.memo)((e=>(0,a.createElement)(Ys,null,(0,a.createElement)(hc,null,(0,a.createElement)(Zm,null,(0,a.createElement)(Yp,{...e})))))),Xp=(0,u.createContext)({list:[],categories:null,filterFunction:null}),Qp=(0,u.createContext)({list:[]}),Jp=(0,u.createContext)({searchString:"",setSearchString:null}),eh=(0,u.createContext)({categoriesList:[],selectedCategory:null,setSelectedCategory:null}),th=[],nh=(0,u.memo)((({children:e})=>{const{list:t,categories:n=th,filterFunction:o=null}=oh(),r=(0,C.useSelect)((e=>{const{getExcludedSectionCategories:t}=e("kubio/edit-site");return t()})),{selectedCategory:i,setSelectedCategory:l}=ah(),{searchString:s,setSearchString:c}=ih(),{initialParams:d,activePage:m}=dc(),p="all",g=h().get(d,[m,"category"],p);let f,b,_,v;if(l)f=i,b=l;else{const[e,t]=(0,u.useState)(g);f=e,b=t}if(c)_=s,v=c;else{const[e,t]=(0,u.useState)("");_=e,v=t}const y=(0,u.useMemo)((()=>{if(h().isEmpty(n))return{};const e={};return n.forEach((({label:t,value:n})=>{e[n]=t})),e}),[n]),k=(0,u.useMemo)((()=>o&&"function"==typeof o?o(t,_):lh(t,_)),[_,t,o]),{resultedCategories:E,nrOfItemsPerCategory:S}=(0,u.useMemo)((()=>{let e=[{value:p,label:"All"}];const t={};if(k.forEach((n=>{const o=(null==n?void 0:n.categories)||[];o.forEach((n=>{if(r.includes(n))return;const i=e.map((e=>e.value));if(o.forEach((e=>{t[e]?t[e]++:t[e]=1})),i.includes(n))return;let a;h().get(y,n)?a=h().get(y,n):(a=h().startCase(n.replace("-"," & ")).trim(),a=a.replace(" "," & "));const l={value:n,label:a};e.push(l)}))})),t[p]=Object.keys(t).reduce(((e,n)=>e+t[n]),0),!h().isEmpty(n)){const t=n.map((({value:e})=>e));e=h().orderBy(e,(e=>h().indexOf(t,e.value)))}return{resultedCategories:e,nrOfItemsPerCategory:t}}),[k,n,r,y]),w=(0,u.useMemo)((()=>k.filter((e=>{const t=(null==e?void 0:e.categories)||[];return!t.some((e=>r.includes(e)))&&(f===p||t.includes(f))}))),[f,p,k,r]),I=(0,u.useMemo)((()=>({searchString:_,setSearchString:v})),[_,v]),T=(0,u.useMemo)((()=>({categoriesList:E,selectedCategory:f,setSelectedCategory:b,nrOfItemsPerCategory:S})),[E,f,b,S]),x=(0,u.useMemo)((()=>({list:w})),[w]);return(0,u.useEffect)((()=>{g&&(E.find((e=>e.value===g))||b(p))}),[]),(0,a.createElement)(Qp.Provider,{value:x},(0,a.createElement)(Jp.Provider,{value:I},(0,a.createElement)(eh.Provider,{value:T},e)))})),oh=()=>(0,u.useContext)(Xp),rh=()=>(0,u.useContext)(Qp),ih=()=>(0,u.useContext)(Jp),ah=()=>(0,u.useContext)(eh),lh=(e,t)=>{if(!t)return e;const n=t.toLowerCase();return e.filter((({label:e})=>e.toLowerCase().includes(n)))},sh={selectedDemoSlug:null,onSelectDemo:h().noop,setSelectedDemoSlug:h().noop,currentDemoSite:null,selectedDemoPartId:null,setSelectedDemoPartId:h().noop},ch=(0,u.createContext)(sh),uh=({children:e})=>{const[t,n]=(0,u.useState)(),[o,r]=(0,u.useState)([]),[i,l]=(0,u.useState)({}),[s,c]=(0,u.useState)(!1),[d,m]=(0,u.useState)(),[p,h]=(0,u.useState)(!1);(0,u.useEffect)((()=>{!async function(){const e=await Us();r(e)}()}),[]),(0,u.useEffect)((()=>{!async function(){const e=await Gs();l(e),c(!0)}()}),[]);const g=(0,u.useCallback)(((e,t)=>{m(t),n(e)}),[n,m]),f=(0,u.useMemo)((()=>o.find((e=>e.slug===t))),[t,o]),b=(0,u.useMemo)((()=>({rawDemoList:o,selectedDemoSlug:t,onSelectDemo:g,setSelectedDemoSlug:n,currentDemoSite:f,initialDemoPart:d,setInitialDemoPart:m,demosPartsPerSlug:i,demoPartsIsLoaded:s,showDemoSiteImportPage:p,setShowDemoSiteImportPage:h})),[o,t,g,n,f,d,m,i,s,p,h]);return(0,a.createElement)(ch.Provider,{value:b},e)},dh=()=>(0,u.useContext)(ch),mh=(0,u.createContext)({favoritesDataByType:{},onAddToFavorites:h().noop}),ph="kubio_favorites";let hh=!1;const gh=(0,u.memo)((({children:e})=>{const[t,n]=(0,u.useState)({}),{favoritesEntities:o}=(0,C.useSelect)((e=>{const{getEntityRecords:t,getEditedEntityRecord:n}=e("core");return{favoritesEntities:(t("postType",ph,{per_page:-1})||[]).map((e=>n("postType",ph,e.id)))}}),[]),{saveEntityRecord:r,editEntityRecord:i}=(0,C.useDispatch)("core"),l=(0,u.useRef)(!1),s=(0,u.useMemo)((()=>h().get(o,"0")),[o]),c=(0,u.useMemo)((()=>{try{const e=h().get(s,"content","{}");return JSON.parse(e)}catch(e){return{}}}),[s]);(0,u.useEffect)((()=>{h().isEmpty(t)&&!h().isEqual(c,t)&&n(c)}),[c]);const d=(0,u.useCallback)((async()=>{const e={title:"Favorites data",status:"publish",content:JSON.stringify({})};return await r("postType",ph,e)}),[r]),m=(0,u.useCallback)((async(e,o,r)=>{var a,c;const u=h().cloneDeep(t);if(Array.isArray(o)||(o=[o]),o.forEach((t=>{!1===h().get(u,e,!1)&&h().set(u,e,{}),r?h().set(u,`${e}.${t}`,!0):h().unset(u,`${e}.${t}`)})),n(u),l.current)return;l.current=!0;let m=s;if(h().isEmpty(m)&&!hh&&(hh=!0,m=await d()),null===(a=m)||void 0===a||!a.id)return void(l.current=!1);const p={content:JSON.stringify(u)};i("postType",ph,null===(c=m)||void 0===c?void 0:c.id,p),l.current=!1}),[d,l,s,t]),p=(0,u.useMemo)((()=>({favoritesDataByType:t,onAddToFavorites:m})),[t]);return(0,a.createElement)(mh.Provider,{value:p},e)})),fh=()=>(0,u.useContext)(mh),bh=(0,u.createContext)({favoritesDataByType:null}),_h=(0,u.memo)((({children:e})=>{const{favoritesDataByType:t}=fh(),n=(0,u.useMemo)((()=>({favoritesDataByType:t})),[t]);return(0,a.createElement)(bh.Provider,{value:n},e)})),vh=()=>(0,u.useContext)(bh),yh=(0,u.memo)((({buttonIconOnly:e=!1})=>{const[t,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)({}),i=(0,u.useRef)(),l=(0,u.useCallback)((()=>{r({}),n(!t)}),[t,n]),{createErrorNotice:c}=(0,s.useKubioNotices)(),d=(0,u.useCallback)((e=>{"blur"!==(null==e?void 0:e.type)&&n(!1)}),[n]),m=(0,u.useCallback)((e=>{const t=(null==e?void 0:e.detail)||{};r(t),n(!0)}),[n]);(0,u.useEffect)((()=>(document.body.addEventListener("openTemplateGallery",m),()=>{document.body.removeEventListener("openTemplateGallery",m)})),[m]);const p=(0,u.useCallback)((()=>{c((0,T.__)("Something went wrong","kubio"))}),[c]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{ref:i,onClick:l,isPrimary:!0,icon:ke.PredesignedLayoutsIcon,className:R()("kubio-predefined-layouts__button",{"kubio-predefined-layouts__button--icon-only":e}),label:(0,T.__)("Templates Gallery","kubio"),showTooltip:!0},e?null:(0,T.__)("Templates Gallery","kubio")),(0,a.createElement)(Xa.ErrorBoundary,{FallbackComponent:kh,onReset:()=>{n(!1)},onError:p},(0,a.createElement)(gh,null,t&&(0,a.createElement)(E.Modal,{className:"kubio-predefined-layouts__modal",onRequestClose:d},(0,a.createElement)(uc,{onClose:d,initialParams:o},(0,a.createElement)(Mm,null))))))})),kh=({error:e,resetErrorBoundary:t})=>((0,u.useEffect)((()=>{t()}),[]),(0,a.createElement)(a.Fragment,null)),Eh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),Sh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})),wh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));var Ch=n(1874),Ih=n.n(Ch);let Th=null,xh=Math.random();function Ph(e){let t=Ih().replace("{message}",(0,T.__)("Generating preview…","kubio"));t=t.replace("{svg_image}",(0,u.renderToString)(ke.KubioLoader)),e.write(t),e.title=(0,T.__)("Generating preview…","kubio"),e.close()}function Rh(){Th=window.open("",(0,T.__)("Generating preview…","kubio")+xh++)}const Ah="preview",Oh=[{kind:"kubio",name:"menu"},{kind:"root",name:"site"}];var Nh=n(6255),Mh=n.n(Nh);const Dh=[{title:(0,T.__)("Desktop","kubio"),name:"Desktop",icon:Eh},{title:(0,T.__)("Tablet","kubio"),name:"Tablet",icon:Sh},{title:(0,T.__)("Mobile","kubio"),name:"Mobile",icon:wh}],Bh=({deviceType:e,setDeviceType:t})=>{const{isDirty:n}=(0,C.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{isDirty:t().length>0}})),o=(()=>{const{getDirtyEntityRecords:e,getAutosaves:t,getEntityRecordEdits:n,getEditedEntityRecord:o}=(0,C.useSelect)((e=>({getDirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords,getAutosaves:e("core").getAutosaves,getEntityRecordEdits:e("core").getEntityRecordEdits,getEditedEntityRecord:e("core").getEditedEntityRecord}))),{saveEditedEntityRecord:r}=(0,C.useDispatch)("core");return async(i,a={})=>{var l;const{autosaveType:s,statusForSave:c}=h().merge({autosaveType:Ah,statusForSave:"autosave"},a);let u=[];u=i||e();const m=u.filter((({kind:e,name:t})=>!(0,p.find)(Oh,{kind:e,name:t}))),g=u.filter((({kind:e,name:t,key:n})=>!(0,p.find)(m,{kind:e,name:t,key:n}))),f=m.map((({kind:e,name:t,key:n})=>{const i=o(e,t,n);let a;if(null!=i&&i.blocks)a=(0,Ge.serialize)(i.blocks);else{if("string"!=typeof(null==i?void 0:i.content))return null;a=null==i?void 0:i.content}return-1!==["wp_template","wp_template_part","page","post","product"].indexOf(i.type)?((e,t="publish",{fieldsToOmit:n=["blocks"],type:o=Ah}={})=>Sn()({path:"kubio/v1/save-entity",method:"POST",data:{postData:(0,p.omit)({...e,id:e.id||e.wp_id},["selectionStart","selectionEnd"].concat(n)),type:o,status:t}}))({...i,content:a},c,{type:s}):r(e,t,n,{isAutosave:!0})})),b=g.map((({kind:e,name:t,key:o})=>({kind:e,name:t,key:o,...n(e,t,o)}))),_=null===(l=e())||void 0===l?void 0:l.filter((({name:e})=>"page"===e||"post"===e)).reduce(((e,{key:t,name:n,kind:r})=>{const i=o(r,n,t);return{...e,[t]:null==i?void 0:i.template}}),{});return Promise.all(f).then((e=>{const n=m.map((({name:n,key:o},r)=>e[r]?{id:e[r].ID||e[r].id,parent:e[r].post_parent||e[r].parent,data:e[r]}:(0,p.last)(t(n,o))));return Promise.all(n).then((e=>{const t=e.filter(Boolean).map((({id:e,parent:t})=>({id:e,parent:t})));return{updatesRecords:e.map((e=>null==e?void 0:e.data)),autosaves:t,customEntities:b,pageTemplatesMap:_,customData:(0,d.applyFilters)("kubio/custom-preview-data",{})}}))}))}})(),{saveChangeset:r}=(()=>{const[e,t]=(0,b.useGlobalSessionProp)("previewChangest",{}),n=(0,C.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSettings())||void 0===t?void 0:t.changeset_uuid}));(0,u.useEffect)((()=>{e.id||!n||e.isLoading||(t({...e,isLoading:!0}),Sn()({path:(0,Cn.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}).then((e=>{e&&e.length&&t({...e[0],isLoading:!1})})))}),[e,t,n]);const o=(0,u.useCallback)((()=>{var t,n;e.id&&window.navigator.sendBeacon&&window.navigator.sendBeacon(`${window.ajaxurl}?action=kubio-delete-changeset&uuid=${e.slug}&_wpnonce=${null===(t=top)||void 0===t||null===(n=t.kubioUtilsData)||void 0===n?void 0:n.kubio_ajax_nonce}`)}),[e.id]);return(0,u.useEffect)((()=>(window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o))),[e.id]),{saveChangeset:async o=>{let r=e;return r.id||(r=await Sn()({path:(0,Cn.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}),t(r)),await Sn()({path:`/wp/v2/kubio/preview-changeset/${r.id}`,method:"POST",data:{...(0,p.pick)(e,["title","slug","type"]),content:JSON.stringify((0,p.omit)(o,"updatesRecords"))}}),n}}})(),{currentPageURL:i}=(0,C.useSelect)((e=>{const t=e(g.STORE_KEY).getPage(),n=h().get(t,"link"),o=h().get(t,"path"),r=n||o;return{currentPageURL:(null!=r?r:"").replace(/\/$/,"")}})),l=(0,C.useSelect)((e=>()=>{const{getSelectedBlockClientIds:t}=e(k.store),n=t();return n.length?n[0]:""})),{hideInsertionPoint:s}=(0,C.useDispatch)("core/block-editor"),c=e=>()=>{t(e),s()},m=(0,b.useBlocksOwnerDocument)();return(0,u.useEffect)((()=>{const t=(0,ye.getPreviewElementByModelId)(l(),m);t&&e&&Mh()(t)}),[e]),(0,a.createElement)("div",{className:"kubio-preview-options"},Dh.map((({name:t,title:n,icon:o})=>(0,a.createElement)(E.Button,{key:t,icon:o,isPressed:t===e,label:n,onClick:c(t)}))),""!==i&&(0,a.createElement)(E.Button,{onClick:async({})=>{const e=(()=>{Th&&!Th.closed||Rh();try{Ph(Th.document)}catch(e){Rh(),Ph(Th.document)}return setTimeout((function(){Th.focus()}),100),Th})();let t="saved";const a=`${Ca().generate()}-${Ca().generate()}`;if(n){const e=await o();t=await r(e)}e.location=(0,Cn.addQueryArgs)(i,{"kubio-preview":t,"kubio-random":a})}},(0,T.__)("Preview","kubio")))},Lh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),zh=window.wp.keycodes;function Fh(){const e=(0,C.useSelect)((e=>e("core").hasRedo())),{clearSelectedBlock:t}=(0,C.useDispatch)("core/block-editor"),{redo:n}=(0,C.useDispatch)("core");return(0,a.createElement)(E.Button,{icon:Lh,label:(0,T.__)("Redo","kubio"),shortcut:zh.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?()=>{t(),n()}:void 0})}const Gh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));function Hh(){const e=(0,C.useSelect)((e=>e("core").hasUndo())),{undo:t}=(0,C.useDispatch)("core"),{clearSelectedBlock:n}=(0,C.useDispatch)("core/block-editor");return(0,a.createElement)(E.Button,{icon:Gh,label:(0,T.__)("Undo","kubio"),shortcut:zh.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?()=>{n(),t()}:void 0})}function Uh({openEntitiesSavedStates:e}){const{deviceType:t,isEditorSidebarOpened:n,shortcut:o,getBlockSelectionStart:r,isListViewOpen:i,listViewShortcut:l,isAICapabilityEnabled:c}=(0,C.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:n,getEditedPostType:o,getEditedPostId:r,isInserterOpened:i,getTemplateId:a,getTemplatePartId:l,getEntity:s,getPage:c,getShowOnFront:u,isListViewOpened:d,isAICapabilityEnabled:m}=e(g.STORE_KEY),{getEntityRecord:p}=e("core"),{__experimentalGetTemplateInfo:h}=e("core/editor"),f=a(),b=l(),_=o(),v=p("postType",_,r());let y;var k;y="wp_template"===_?null!=v&&v.title?null==v||null===(k=v.title)||void 0===k?void 0:k.raw:h(v).title:null==v?void 0:v.slug;const{getShortcutRepresentation:E}=e("core/keyboard-shortcuts");return{isListViewOpen:d(),deviceType:t(),entityTitle:y,hasFixedToolbar:n("fixedToolbar"),template:v,templateType:_,isInserterOpen:i(),templateId:f,templatePartId:b,entity:s(),page:c(),showOnFront:u(),isEditorSidebarOpened:e(g.STORE_KEY).isEditorSidebarOpened(),shortcut:E("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:E("kubio/edit-site/toggle-list-view"),isAICapabilityEnabled:m()}}),[]),{__experimentalSetPreviewDeviceType:d,openSidebar:m,closeSidebar:v}=(0,C.useDispatch)(g.STORE_KEY),{hideInsertionPoint:y}=(0,C.useDispatch)("core/block-editor"),k=(0,u.useCallback)((e=>{y(),d(e)}),[]),w=(0,S.useViewportMatch)("medium"),I=n?()=>{v(),O(!1)}:()=>{m(r()?"block-inspector":"document"),O(!1)},x=(0,s.usePageTitle)(),{isNavigationOpened:P}=(0,C.useSelect)(g.STORE_KEY),{setIsNavigationPanelOpened:R,openNavigationPanelToMenu:A,setIsListViewOpened:O}=(0,C.useDispatch)(g.STORE_KEY),{uiVersion:N}=(0,f.useUIVersion)(),M=(0,u.useCallback)((()=>{O(!i)}),[O,i]);let D=!0;2===N&&(D=!1);const B=(0,b.useGetGlobalSessionProp)("ready",!1),L=(0,p.get)(window,["kubioUtilsData","enable_starter_sites"],!0),[z,F]=(0,u.useState)(!1),[,G]=Ta(),{isPage:H,isBlog:U,isWooPage:W}=(0,C.useSelect)((e=>{const{getPage:t=h().noop,getIsBlogPage:n=h().noop}=e("kubio/edit-site")||{},o=t();return{isPage:"page"===h().get(o,"context.postType"),isBlog:n(),isWooPage:e(g.STORE_KEY).getIsWooCommercePage()}}),[]),j=H&&!U&&!W,K=ye.AI_IN_PRO?ve.ProItem:E.Button;return(0,a.createElement)("div",{className:"edit-site-header"},(0,a.createElement)("div",{className:"edit-site-header_start"},(0,a.createElement)("div",{className:"edit-site-header__toolbar"},w&&(0,a.createElement)(a.Fragment,null,1===N&&(0,a.createElement)(Ae,null),(0,a.createElement)(Hh,null),(0,a.createElement)(Fh,null),(0,a.createElement)(E.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:Sa,isPressed:i/* translators: button label text should, if possible, be under 16 characters. */,label:(0,T.__)("List View","kubio"),onClick:M,shortcut:l}),B&&L&&(0,a.createElement)(yh,{buttonIconOnly:c}),j&&c&&(0,a.createElement)(E.Tooltip,{text:(0,T.__)("AI page generation","kubio")},(0,a.createElement)(K,{tag:E.Button,isProItem:ye.AI_IN_PRO,urlArgs:{source:"AI",content:"generate-ai-page"},icon:ke.KubioAI,className:"kubio-ai-button-in-header kubio-ai-button",onClick:()=>F(!0)},(0,T.__)("Generate page","kubio"))),z&&(0,a.createElement)(_.AIWizard,{onFinish:()=>{F(!1),G(!0)},onCancel:()=>F(!1),isRegenerate:!0})),!1)),(0,a.createElement)("div",{className:"edit-site-header_center"},(0,a.createElement)("div",{className:"edit-site-document-actions"},(0,a.createElement)("div",{className:"edit-site-document-actions__title-wrapper"},(0,a.createElement)(E.Button,{className:"edit-site-document-actions__title",onClick:()=>{P()?R(!1):A(2===N?"kubio-content-area-postType-page":Pa)},isPressed:P(),iconPosition:"right",showTooltip:!0,label:P()?(0,T.__)("Close the site content panel","kubio"):(0,T.__)("Change page","kubio")},(0,a.createElement)(E.Flex,{align:"center",justify:"center"},(0,a.createElement)(E.FlexItem,{className:"edit-site-document-entity-title"},(0,a.createElement)("span",{className:"kubio-entity-title-text",dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: Editing current page
// translators: Editing current page
(0,T.__)("Editing: %s","kubio"),(0,T.sprintf)('<span class="kubio-entity-title-name">%s</span>',(0,ye.fromHtmlEntities)(null!=x?x:(0,T.__)("Page","kubio"))))}})),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Icon,{icon:ke.SwitchPages,size:22}))))))),(0,a.createElement)("div",{className:"edit-site-header_end"},(0,a.createElement)("div",{className:"edit-site-header__actions"},(0,a.createElement)(Ua,null),(0,a.createElement)(Bh,{deviceType:t,setDeviceType:k}),(0,a.createElement)(Fa,{openEntitiesSavedStates:e}),D&&(0,a.createElement)(E.Button,{icon:We,label:(0,T.__)("Settings","kubio"),onClick:I,isPressed:n,"aria-expanded":n,className:"kubio-secondary-panel-toggler",shortcut:o}),(0,a.createElement)(ce.Slot,{scope:"kubio/edit-site"}),(0,a.createElement)(Za,null))))}function Wh({openEntitiesSavedStates:e}){const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=(0,C.useSelect)(w.store),{redo:o,undo:r}=(0,C.useDispatch)(w.store);return(0,ge.useShortcut)("kubio/edit-site/save",(o=>{o.preventDefault();const r=t(),i=!!r.length;!r.some((e=>n(e.kind,e.name,e.key)))&&i&&e()})),(0,ge.useShortcut)("kubio/edit-site/undo",(e=>{r(),e.preventDefault()})),(0,ge.useShortcut)("kubio/edit-site/redo",(e=>{o(),e.preventDefault()})),null}Wh.Register=function(){const{registerShortcut:e}=(0,C.useDispatch)(ge.store);return(0,u.useEffect)((()=>{e({name:"kubio/edit-site/save",category:"global",description:(0,T.__)("Save your changes.","kubio"),keyCombination:{modifier:"primary",character:"s"}}),e({name:"kubio/edit-site/undo",category:"global",description:(0,T.__)("Undo your last changes.","kubio"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"kubio/edit-site/redo",category:"global",description:(0,T.__)("Redo your last undo.","kubio"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"kubio/edit-site/toggle-list-view",category:"global",description:(0,T.__)("Open the block list view.","kubio"),keyCombination:{modifier:"access",character:"o"}})}),[e]),null};const jh=Wh,Kh=({children:e,templateId:t,templateType:n,page:o})=>{const[r,i]=(0,u.useState)(!1),[l,s]=(0,u.useState)(!1),c=Tn(),[d,m]=(0,b.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{createSuccessNotice:p}=(0,C.useDispatch)("core/notices");(0,u.useEffect)((()=>{i(c)}),[c,t,n,o]);const h=(0,u.useCallback)((()=>{l||i(!1)}),[l]),g=(0,u.useCallback)((async()=>{s(!0);try{await wn()}catch(e){}m(!0),p((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),i(!1)}),[p,m]);return(0,a.createElement)(a.Fragment,null,r&&!d&&(0,a.createElement)(E.Modal,{title:(0,T.__)("💫 Start with the Kubio blog!","kubio"),onRequestClose:h,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!l},(0,a.createElement)("p",null,(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,a.createElement)("br",null),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")),(0,a.createElement)(E.ButtonGroup,{className:"h-template-part-modal__button-group"},!l&&(0,a.createElement)(E.Button,{isLink:!0,onClick:h},(0,T.__)("Maybe later","kubio")),(0,a.createElement)(E.Button,{isPrimary:!0,isBusy:l,onClick:g},!l&&(0,T.__)("Import Kubio blog","kubio"),l&&(0,T.__)("Importing Kubio blog…","kubio")))),e)},Vh="__experimentalMainDashboardButton",{Fill:$h,Slot:qh}=(0,E.createSlotFill)(Vh),Yh=$h;Yh.Slot=({children:e})=>(0,s.useSlotHasFills)(Vh)?(0,a.createElement)(qh,{bubblesVirtually:!0}):e;const Zh=Yh,Xh=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})),Qh=(0,u.memo)((({message:e,withFooter:t=!0})=>(0,u.createPortal)((0,a.createElement)("div",{className:"kubio-ai-page-generator-overlay"},(0,a.createElement)(E.Flex,{align:"center",justify:"center"},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(Ee,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ke.KubioAI}),(0,a.createElement)("h2",null,e))),t&&(0,a.createElement)("div",{className:"kubio-ai-page-generator-overlay__footer"},(0,a.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is the url to pexels
// translators: %s is the url to pexels
(0,T.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}}))),window.document.body))),Jh=({setIsModalVisible:e})=>{var t;const{saveEntityRecord:n}=(0,C.useDispatch)("core"),o=(0,b.useSetGlobalSessionProp)("ready"),[,r]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked"),[i,l]=(0,u.useState)(!0),{setPage:s,setIsNavigationPanelOpened:c}=(0,C.useDispatch)(fe),[m,p]=(0,u.useState)(null),[h,g]=(0,u.useState)(!1),[f,v]=(0,u.useState)(!1),[,y]=Ta(),k=(0,C.useSelect)((e=>e(fe).getAvailablePageTemplates().map((e=>e.value)).find((e=>(0,ye.getBackendData)("installedViaFreshSite")?e.endsWith("full-width"):"full-width"===e))||"")),E=(0,u.useCallback)((()=>{m&&(s({type:m.type,slug:m.slug,path:(0,Cn.getPathAndQueryString)(m.link),context:{postType:m.type,postId:m.id}}),v(!1),c(!1),r(!1),(0,d.addAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted",(function(){(0,d.removeAction)("kubio.editorIsReady","kubio.editorIsReady.setIsAIGeneratingStarted"),y(!0)})),setTimeout((()=>o(!0)),5e3),e(!1))}),[m,s,c,r,e,y,o]);return(0,a.createElement)(a.Fragment,null,i&&(0,a.createElement)(_.AIWizard,{onFinish:async({pageContext:e})=>{v(!0),l(!1);const{title:t}=e,o=await n("postType","page",{title:t,status:"publish",template:k,meta:{saved_in_kubio:!0},kubio_ai_page_context:e});o&&(v(!1),g(!0),p(o))},onCancel:()=>e(!1),checkPageType:!1,isNewPageWizard:!0}),f&&(0,a.createElement)(Qh,{message:(0,T.__)("Creating new page…","kubio"),withFooter:!1}),h&&(0,a.createElement)(Jm,{onComplete:E,closeModal:()=>g(!1),entityName:null==m||null===(t=m.title)||void 0===t?void 0:t.rendered}))},eg=({onNewAiPage:e,onNewKubioPage:t,showButton:n=!0,initialModalIsVisible:o=!1,title:r=(0,T.__)("How would you like to create your new page?","kubio"),description:i=(0,T.__)("Choose one of the two methods below for creating your new page.","kubio"),onCancel:l=h().noop})=>{const[s,c]=(0,u.useState)(o);return!(0,C.useSelect)((e=>e(pr.Ls).isAICapabilityEnabled()),[])&&n?(0,a.createElement)(E.Button,{className:"kubio-navigation-new-page__button",icon:Ce,variant:"primary",iconSize:24,onClick:()=>t()},(0,T.__)("New Page","kubio")):(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(E.Button,{className:"kubio-navigation-new-page__button",icon:Ce,variant:"primary",iconSize:24,onClick:()=>c(!0)},(0,T.__)("New Page","kubio")),s&&(0,a.createElement)(E.Modal,{title:(0,T.__)("Add page","kubio"),onRequestClose:()=>{c(!1),l()},className:"kubio-navigation-new-page__modal"},(0,a.createElement)("div",{className:"kubio-navigation-new-page__modal__content"},(0,a.createElement)("h2",{className:"kubio-navigation-new-page__modal__title"},r),(0,a.createElement)("span",{className:"kubio-navigation-new-page__modal__description"},i),(0,a.createElement)("div",{className:"kubio-navigation-new-page__modal__cards"},(0,a.createElement)(tg,{icon:ke.KubioLogo,title:(0,T.__)("Create from scratch","kubio"),description:(0,T.__)("Build your page by hand starting from a blank canvas. This option is recommended for advanced users who wish to create their own, custom design.","kubio"),onClick:()=>{c(!1),t()}}),(0,a.createElement)(tg,{icon:ke.KubioAI,isProItem:ye.AI_IN_PRO,iconClassName:"kubio-ai-logo-animated kubio-ai-logo-colored",title:(0,T.__)("Generate with Kubio AI","kubio"),description:(0,T.__)("Get a head start by letting Kubio Al generate a first draft of the page for you. Then you can further customize the page to your liking.","kubio"),onClick:()=>{c(!1),e()}})))))},tg=({icon:e,title:t,description:n,onClick:o,iconClassName:r,isProItem:i=!1})=>(0,a.createElement)(ve.ProItem,{isProItem:i,className:"kubio-navigation-new-page__modal__card",onClick:o,urlArgs:{source:"AI",content:"ai-settings"}},(0,a.createElement)(E.Icon,{className:R()("kubio-navigation-new-page__modal__card__icon",r),icon:e}),(0,a.createElement)("h2",{className:"kubio-navigation-new-page__modal__card__title"},t),(0,a.createElement)("span",{className:"kubio-navigation-new-page__modal__card__description"},n)),ng=(0,a.createElement)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(A.Path,{d:"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z"})),og=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),rg=({post:e,onCloseModal:t,onClickDuplicate:n})=>{const[o,r]=(0,u.useState)(!1),{createErrorNotice:i,createSuccessNotice:l}=(0,s.useKubioNotices)(),[c,d]=(0,u.useState)(""),{saveEntityRecord:m}=(0,C.dispatch)("core"),p=async(t,o,a)=>{r(!0);const s={title:a||c,status:"publish",content:null==e?void 0:e.content,excerpt:null==e?void 0:e.excerpt,meta:{...(null==e?void 0:e.meta)||{},saved_in_kubio:!0},template:null==e?void 0:e.template};let u=!1;try{u=await m(t,o,s),l((0,T.sprintf)(// translators: %s is the name of item that was saved
// translators: %s is the name of item that was saved
(0,T.__)("%s saved successfully!","kubio"),s.title))}catch(e){console.error(e),i((0,T.sprintf)(//translators: %s is the name of item that was not saved
//translators: %s is the name of item that was not saved
(0,T.__)("An error occurred. %s was not saved!","kubio"),s.title))}u&&n(u)};return(0,a.createElement)(E.Modal,{title:(0,T.__)("Duplicate page","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!o,shouldCloseOnClickOutside:!o,isDismissible:!o},(0,a.createElement)("div",{className:"popover__content"},(0,a.createElement)(Ue.InputControl,{value:c,onChange:e=>d(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:t=>{"Enter"===t.key&&p("postType",e.type,t.target.value)}}),(0,a.createElement)(E.__experimentalSpacer,{margin:3}),(0,a.createElement)(E.Button,{isPrimary:!0,isBusy:o,disabled:""===c,onClick:()=>{p("postType",e.type)},className:"add-button"},(0,T.__)("Duplicate page","kubio"))))},ig=({post:e,onCloseModal:t})=>{var n,o;const[r,i]=(0,u.useState)(!1),{createErrorNotice:l,createSuccessNotice:c}=(0,s.useKubioNotices)();return(0,a.createElement)(E.Modal,{title:(0,T.__)("Delete ","kubio")+(null==e||null===(n=e.title)||void 0===n?void 0:n.raw)+(0,T.__)(" page?","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!r,shouldCloseOnClickOutside:!r,isDismissible:!r},(0,a.createElement)("p",null,(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,T.__)("The <strong>%s</strong> page will be moved in the trash.","kubio"),null==e||null===(o=e.title)||void 0===o?void 0:o.raw)}}),(0,a.createElement)("br",null),(0,T.__)("You can recover it later from WP Admin -> Pages -> Trash","kubio")),(0,a.createElement)(E.ButtonGroup,{className:"h-template-part-modal__button-group"},(0,a.createElement)(E.Button,{isLink:!0,onClick:t},(0,T.__)("Cancel","kubio")),(0,a.createElement)(E.Button,{isPrimary:!0,onClick:async()=>{i(!0),await ag(e,l,c),t()}},(0,T.__)("Delete","kubio"))))},ag=(e,t,n)=>{var o;const r=e.id,i=null==e||null===(o=e.title)||void 0===o?void 0:o.raw;try{(0,C.dispatch)("core").deleteEntityRecord("postType",e.type,parseInt(r)),n(i+(0,T.__)(" moved to trash!","kubio"))}catch(e){t((0,T.sprintf)(//translators: %s is the name of item that was not saved
//translators: %s is the name of item that was not saved
(0,T.__)("An error occurred. %s was not saved","kubio"),i))}},lg=e=>{var t;const n=e.taxonomy?e.name:null==e||null===(t=e.title)||void 0===t?void 0:t.rendered,o=document.createElement("div");return o.innerHTML=n,o.textContent||o.innerText||""},sg=(e,t,n,o)=>{var r;let i=!1;var a,l,s;return void 0!==(null==e?void 0:e.taxonomy)?(null==e?void 0:e.id.toString())===(null===(a=n.context)||void 0===a||null===(l=a.postId)||void 0===l?void 0:l.toString())&&void 0===(null==n||null===(s=n.context)||void 0===s?void 0:s.postType)&&(i=!0):(null==n||null===(r=n.context)||void 0===r?void 0:r.postType)===o&&(i=t.includes(e.id.toString())),i};function cg({item:e,entity:t}){const{setPage:n,setIsNavigationPanelOpened:o}=(0,C.useDispatch)(fe),{page_for_posts:r,page_on_front:i,show_on_front:l,wooCommercePagesIds:s,isActive:c}=(0,C.useSelect)((n=>{var o,r,i,a,l;const{page_for_posts:s,page_on_front:c,show_on_front:u}=n("core").getEditedEntityRecord("root","site"),d=null===(o=n("core/block-editor").getSettings())||void 0===o||null===(r=o.kubioBasicWooCommerce)||void 0===r?void 0:r.pagesIds,{getPage:m,getTemplateId:p,getTemplatePartId:h}=n(fe),g=[null===(i=m())||void 0===i||null===(a=i.context)||void 0===a||null===(l=a.postId)||void 0===l?void 0:l.toString(),p(),h()].filter(Boolean),f=sg(e,g,m(),t);return{page_for_posts:s,page_on_front:c,show_on_front:u,wooCommercePagesIds:Object.values(d||{}),isActive:f}}),[t,e]),{duplicateContainerRef:d,delContainerRef:m}=(0,u.useRef)(),[p,h]=(0,u.useState)(!1),[g,f]=(0,u.useState)(!1),[_,v]=(0,u.useState)(!1),[y,k]=(0,u.useState)({}),[,S]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked"),w=(0,u.useCallback)((()=>{const{type:t,slug:r,link:i,id:a}=null!=y&&y.id?y:e;n({type:t,slug:r,path:(0,Cn.getPathAndQueryString)(i),context:{postType:t,postId:a}}),S(!0),o(!1)}),[y,e,n,S,o]),I=(0,u.useCallback)((()=>{c||v(!0)}),[c]),x=(0,u.useCallback)((()=>{h(!0)}),[]),P=(0,u.useCallback)((()=>{f(!0)}),[]);if(!e)return null;const A=lg(e)||(0,T.__)("(no title)","kubio");let O,N;"page"===l&&i===e.id&&"page"===t&&(O=(0,a.createElement)(E.Icon,{title:(0,T.__)("Homepage","kubio"),icon:Xh,size:18})),"page"===l&&r===e.id&&"page"===t&&(O=(0,a.createElement)(E.Icon,{title:(0,T.__)("Posts page","kubio"),icon:ng,size:18})),-1!==s.indexOf(e.id)&&"page"===t&&(O=(0,a.createElement)(E.Icon,{title:(0,T.__)("Shop page","kubio"),icon:ke.WooCommerceSmallLogo,size:18}));const M=i!==e.id&&!c;"page"===l&&"page"===e.type&&r!==e.id&&(N=(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.DropdownMenu,{className:"kubio-more-menu",icon:ja,label:(0,T.__)("More tools & options","kubio"),popoverProps:{className:"edit-site-kubio-more-menu__content edit-site-more-menu__content",position:"bottom left",isAlternate:!0},toggleProps:{tooltipPosition:"bottom"}},(({onClose:e})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.MenuGroup,null,(0,a.createElement)(E.MenuItem,{icon:ke.DuplicateItemIcon,ref:d,onClick:t=>{t.preventDefault(),x(t),e()},role:"menuitemcheckbox"},(0,T.__)("Duplicate","kubio")),M&&(0,a.createElement)(E.MenuItem,{icon:og,ref:m,onClick:t=>{t.preventDefault(),P(t),e()},role:"menuitemcheckbox"},(0,T.__)("Delete","kubio")))))),p&&(0,a.createElement)(rg,{post:e,onCloseModal:()=>{h(!1)},onClickDuplicate:e=>{k(e),h(!1),v(!0)}}),g&&(0,a.createElement)(ig,{post:e,onCloseModal:()=>{f(!1)}})));const D=R()("edit-site-navigation-panel__content-item",{"kubio-navigation-item-active":c});return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.__experimentalNavigationItem,{className:D,item:`${e.taxonomy||e.type}-${e.id}`,title:A},(0,a.createElement)(E.Button,{onClick:I},O&&(0,a.createElement)("span",{className:"components-navigation__item-badge"},O),(0,a.createElement)("span",{className:"components-truncate components-text components-navigation__item-title"},A)),N),_&&(0,a.createElement)(Jm,{onComplete:w,closeModal:()=>v(!1),entityName:A}))}const ug=e=>(0,p.deburr)(e).replace(/^\//,"").toLowerCase(),dg=(e,t)=>-1!==ug(e).indexOf(ug(t));function mg({item:e,icon:t}){const{title:n,description:o,isActive:r}=(0,C.useSelect)((t=>{var n,o,r,i;const{getPage:a,getTemplateId:l,getTemplatePartId:s}=t(fe),c=[null===(n=a())||void 0===n||null===(o=n.context)||void 0===o||null===(r=o.postId)||void 0===r?void 0:r.toString(),l(),s()].filter(Boolean);return{..."wp_template"===e.type?t("core/editor").__experimentalGetTemplateInfo(e):{title:(null==e||null===(i=e.title)||void 0===i?void 0:i.rendered)||(null==e?void 0:e.slug),description:""},isActive:c.includes(e.id.toString())}}),[]),{setTemplate:i,setTemplatePart:l,setIsNavigationPanelOpened:s,setPage:c}=(0,C.useDispatch)(fe),[d,m]=(0,u.useState)(!1),p=(0,u.useCallback)((()=>{r||m(!0)}),[m,r]),[,h]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked");if(!e)return null;const g=R()("edit-site-navigation-panel__template-item",{"kubio-navigation-item-active":r});return(0,a.createElement)(E.__experimentalNavigationItem,{className:g,item:`${e.type}-${e.id}`,title:n,icon:t},(0,a.createElement)(E.Button,{onClick:p},(0,a.createElement)("span",{className:"edit-site-navigation-panel__info-wrapper"},(0,a.createElement)("div",{className:"edit-site-navigation-panel__template-item-title"},"draft"===e.status&&(0,a.createElement)("em",null,(0,T.__)("[Draft]","kubio")),n),o&&(0,a.createElement)("div",{className:"edit-site-navigation-panel__template-item-description"},o))),d&&(0,a.createElement)(Jm,{onComplete:()=>{"wp_template"===e.type?i(e.id,e.slug,!0):l(e.id),h(!1),s(!1)},closeModal:()=>m(!1),entityName:n,changePage:!1}))}function pg({items:e,search:t}){const n=(null==e?void 0:e.length)>0?e[0].type:null,o=(0,C.useSelect)((t=>{if("wp_template"===n){const{__experimentalGetTemplateInfo:n}=t("core/editor");return e.map((e=>({slug:e.slug,...n(e)})))}return(e||[]).map((e=>{var t,n;return{slug:e.slug,title:null===(t=e.title)||void 0===t?void 0:t.rendered,description:null===(n=e.excerpt)||void 0===n?void 0:n.rendered}}))}),[e,n]),r=(0,u.useMemo)((()=>null===e||0===t.length?[]:e.filter((({slug:e})=>{const{title:n,description:r}=o.find((t=>t.slug===e));return dg(e,t)||dg(n,t)||dg(r,t)}))),[e,o,t]),i="wp_template"===n||"wp_template_part"===n?mg:cg;return(0,a.createElement)(E.__experimentalNavigationGroup,{title:(0,T.__)("Search results","kubio")},(0,p.map)(r,(e=>(0,a.createElement)(i,{item:e,key:`${e.type}-${e.id}`}))))}const hg=({kind:e="postType",entity:t,title:n,hasSearch:o=!0,parentMenu:r=Pa})=>{const{search:i,searchQuery:l,onSearch:c,isDebouncing:d}=function(){const[e,t]=(0,u.useState)(""),[n,o]=(0,u.useState)(""),[r,i]=(0,u.useState)(!1);(0,u.useEffect)((()=>{i(!1)}),[n]);const a=(0,u.useCallback)((0,p.debounce)(o,75),[o]);return{search:e,searchQuery:n,isDebouncing:r,onSearch:(0,u.useCallback)((e=>{t(e),a(e),i(!0)}),[t,i,a])}}(),m=(0,C.useRegistry)(),{resetSelection:f}=m.dispatch(k.store),{setPage:_,setIsNavigationPanelOpened:v}=(0,C.useDispatch)(g.STORE_KEY),{saveEntityRecord:y}=(0,C.dispatch)("core"),{items:S,showOnFront:w,pageForPosts:I,pageOnFront:x,isResolved:P,siteURL:A}=(0,C.useSelect)((n=>{const{getEntityRecords:o,getEditedEntityRecord:r,hasFinishedResolution:i,getEntityRecord:a}=n("core"),s=[e,t,{search:l,status:"publish,private",per_page:50}],c=i("getEntityRecords",s),{page_for_posts:u,page_on_front:d}=n("core").getEditedEntityRecord("root","site");let m=o(...s);return"postType"===e&&"page"===t&&(0,p.isArray)(m)&&(m=[a("postType","page",d),a("postType","page",u),...m].filter(Boolean),m=(0,p.uniqBy)(m,(e=>parseInt(null==e?void 0:e.id)))),{items:m,isResolved:c,showOnFront:r("root","site").show_on_front,siteURL:n("core/block-editor").getSettings().siteUrl||"/",pageForPosts:u,pageOnFront:d,getEntityRecord:a}}),[l,t,e]),[O,N]=(0,u.useState)(""),[M,D]=(0,u.useState)(!1),[B,L]=(0,u.useState)(!1),[z,F]=(0,u.useState)(!1),[G,H]=(0,u.useState)({}),[,U]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked"),W=(0,u.useCallback)((()=>{D(!1),L(!0)}),[L]),j=async(e,t)=>{F(!0);const n={title:O,status:"publish",template:Y,meta:{saved_in_kubio:!0}},o=await y(e,t,n);o&&(H(o),W(),F(!1),N(""))},{availableTemplates:K,isKubioTheme:V}=(0,C.useSelect)((e=>{const t=e(g.STORE_KEY),{getSettings:n}=e(k.store);return{availableTemplates:t.getAvailablePageTemplates(),isKubioTheme:n().isKubioTheme}}),[]),{templates:$,defaultTemplate:q}=(0,s.useDeepMemo)((()=>{let e,t=K;return V?(e=h().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width",t=K):(e="",(0,p.find)(t,{value:e})||(e=h().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width")),{defaultTemplate:e,templates:t}}),[K,V]),[Y,Z]=(0,u.useState)(q),X=(0,s.useDeepMemo)((()=>{const e=$.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{}),t=[];return h().forEach(g.templateGroupPriorities,(function(n){var o;null!==(o=e[n])&&void 0!==o&&o.length&&(t.push({value:"template-group-"+n,label:g.templateGroups[n],disabled:!0}),h().forEach(e[n],(function(e){t.push(e)})))})),t}),[$]),[Q,J]=(0,u.useState)(!1),ee=(0,u.useCallback)((()=>{J(!1),_({type:"page",path:A,context:{queryContext:{page:1}}}),U(!1),v(!1)}),[U,v,_,A]),te=(0,b.useSetGlobalSessionProp)("ready"),ne=(0,u.useCallback)((()=>{G&&(_({type:G.type,slug:G.slug,path:(0,Cn.getPathAndQueryString)(G.link),context:{postType:G.type,postId:G.id}}),F(!1),U(!1),v(!1),setTimeout((()=>te(!0)),5e3))}),[G,_,U,v,te]),oe=!P||i&&d,[re,ie]=(0,u.useState)(!1);let ae=(0,a.createElement)(a.Fragment,null);"postType"===e&&"page"===t&&(ae=(0,a.createElement)(a.Fragment,null,M&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Modal,{title:(0,T.__)("Add page","kubio"),onRequestClose:()=>{D(!1)},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!z,shouldCloseOnClickOutside:!z,isDismissible:!z},(0,a.createElement)("div",{className:"popover__content"},(0,a.createElement)(E.__experimentalInputControl,{value:O,onChange:e=>N(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:n=>{"Enter"===n.key&&j(e,t)}}),(0,a.createElement)(E.__experimentalSpacer,{margin:3}),(0,a.createElement)(E.SelectControl,{value:Y,onChange:e=>Z(e),label:(0,T.__)("Template","kubio"),options:X}),(0,a.createElement)(E.__experimentalSpacer,{margin:6}),(0,a.createElement)(E.Button,{isPrimary:!0,isBusy:z,disabled:z||""===O.trim(),onClick:()=>{f(0,0,null),j(e,t)},className:"add-button"},(0,T.__)("Add page","kubio"))))),B&&(0,a.createElement)(Jm,{onComplete:ne,closeModal:()=>L(!1),entityName:O})));const le=h().sortBy(S,(e=>"page"!==w||I!==e.id&&x!==e.id?1:0));return(0,a.createElement)(E.__experimentalNavigationMenu,{menu:`kubio-content-area-${e}-${t}`,title:n,parentMenu:r,hasSearch:o,onSearch:c,search:i,isSearchDebouncing:d||!P,titleAction:(0,a.createElement)(a.Fragment,null,"page"===t&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(eg,{onNewKubioPage:()=>D(!0),onNewAiPage:()=>ie(!0)}),re&&(0,a.createElement)(Jh,{setIsModalVisible:ie})),ae),className:R()("kubio-nav-menu-heading",{"kubio-nav-menu-heading--page":"page"===t})},i&&!d&&(0,a.createElement)(pg,{items:le,search:i,disableFilter:!0}),!i&&(0,a.createElement)(a.Fragment,null,"posts"===w&&(0,a.createElement)(E.__experimentalNavigationItem,{item:"post-/",title:(0,T.__)("All Posts","kubio"),onClick:()=>J(!0)},(0,a.createElement)(E.Button,{className:"components-button css-1g713f0 ejwewyf3"},(0,a.createElement)(E.Flex,{align:"center"},(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Icon,{icon:Xh,size:18})),(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)("span",null,(0,T.__)("All Posts","kubio"))),Q&&(0,a.createElement)(Jm,{onComplete:ee,closeModal:()=>L(!1),entityName:O})))),null==le?void 0:le.map((e=>(0,a.createElement)(cg,{item:e,key:`${e.type||e.taxonomy}-${e.id}`,entity:t})))),oe&&(0,a.createElement)(E.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0}))};function gg({onActivateMenu:e,activeMenu:t}){const{page:n}=(0,C.useSelect)((e=>({page:e(g.STORE_KEY).getPage()})),[]),o=(0,u.useMemo)((()=>{var e,t;return[{kind:"postType",entity:"page",title:(0,T.__)("Pages","kubio")},{kind:"postType",entity:"post",title:(0,T.__)("Posts","kubio")},{kind:"taxonomy",entity:"category",title:(0,T.__)("Categories","kubio")},...(null===(e=window)||void 0===e||null===(t=e.kubioEditSiteSettings)||void 0===t?void 0:t.postTypes.filter((e=>"kubio_section"!==e.entity)))||[]]}),[]);return(0,a.createElement)(E.__experimentalNavigation,{activeItem:n&&`content-${n.path}`,activeMenu:t,onActivateMenu:t=>{e(t)}},t===Pa&&(0,a.createElement)(Zh.Slot,null,(0,a.createElement)(E.__experimentalNavigationBackButton,{backButtonLabel:(0,T.__)("Dashboard","kubio"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})),(0,a.createElement)(E.__experimentalNavigationMenu,{title:(0,T.__)("Site Content","kubio")},null==o?void 0:o.map((({kind:e,entity:t,title:n})=>(0,a.createElement)(E.__experimentalNavigationItem,{title:n,navigateToMenu:`kubio-content-area-${e}-${t}`,key:`${e}-${t}`})))),null==o?void 0:o.map((e=>(0,a.createElement)(hg,{...e,key:`${e.kind}-${e.entity}`}))))}function fg({menu:e,title:t,templateParts:n}){return(0,a.createElement)(E.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:Ra,isEmpty:!n||0===n.length},(0,p.map)(n,(e=>(0,a.createElement)(mg,{item:e,key:`wp_template_part-${e.id}`}))))}function bg(){const[e,t]=(0,u.useState)(""),n=(0,u.useCallback)((e=>{t(e)})),{isLoading:o,templateParts:r,templatePartsByArea:i}=(0,C.useSelect)((e=>{const t=e(w.store).getEntityRecords("postType","wp_template_part"),n=t||[],o=(0,p.groupBy)(n.map((e=>({...e,area:e.area||"uncategorized"}))),"area");return{isLoading:null===t,templateParts:n,templatePartsByArea:o}}),[]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.__experimentalNavigationMenu,{menu:Ra,title:(0,T.__)("Template Parts","kubio"),parentMenu:Pa,hasSearch:!0,onSearch:n,search:e},e&&(0,a.createElement)(pg,{items:r,search:e}),!e&&za.map((({title:e,menu:t})=>(0,a.createElement)(E.__experimentalNavigationItem,{key:`template-parts-navigate-to-${t}`,navigateToMenu:t,title:e,hideIfTargetMenuEmpty:!0}))),!e&&o&&(0,a.createElement)(E.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})),za.map((({area:e,menu:t,title:n})=>(0,a.createElement)(fg,{key:`template-parts-menu-${t}`,menu:t,title:n,templateParts:i[e]}))))}function _g(){const{defaultTemplateTypes:e,templates:t,classicThemePrimaryTemplates:n}=(0,C.useSelect)((e=>{const{getSettings:t}=e(fe),n=e("core").getEntityRecords("postType","wp_template");return{defaultTemplateTypes:t().defaultTemplateTypes,classicThemePrimaryTemplates:t().classicThemePrimaryTemplates,templates:n}}),[]),{addTemplate:o}=(0,C.useDispatch)(fe),r=(0,p.map)(t,"slug"),i=(0,p.filter)(e,(e=>(0,p.includes)((0,p.uniq)([...xa,...n]),e.slug)&&!(0,p.includes)(r,e.slug)));return i.length?(0,a.createElement)(E.DropdownMenu,{className:"edit-site-navigation-panel__new-template-dropdown",icon:null,label:(0,T.__)("Add Template","kubio"),popoverProps:{noArrow:!1},toggleProps:{children:(0,a.createElement)(E.Button,{isPrimary:!0,icon:Ce,iconPosition:"right",className:"kubio-new-page-btn",label:(0,T.__)("New","kubio")},(0,T.__)("New","kubio"))}},(({onClose:t})=>(0,a.createElement)(E.NavigableMenu,{className:"edit-site-navigation-panel__new-template-popover"},(0,a.createElement)(E.MenuGroup,{label:(0,T.__)("Add Template","kubio")},(0,p.map)(i,(({title:n,description:r,slug:i})=>(0,a.createElement)(E.MenuItem,{info:r,key:i,onClick:()=>{(t=>{const{title:n,description:r}=(0,p.find)(e,{slug:t});o({content:"__KUBIO_REPLACE_WITH_APPROPRIATE_CONTENT__",excerpt:r,slug:t.toString(),status:"publish",title:n,kubio_template_source:"kubio-custom"})})(i),t()}},n))))))):null}function vg({menu:e,title:t,templates:n,parentMenu:o}){const r=!n||0===n.length;return!r&&(0,a.createElement)(E.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:o,isEmpty:r},(0,p.map)(n,(e=>(0,a.createElement)(mg,{item:e,key:`wp_template-${e.id}`}))))}const yg=(e,t="custom")=>!!e&&(null==e?void 0:e.filter((({kubio_template_source:e="custom"})=>e===t)));function kg({title:e,templates:t,menu:n,hasAdd:o=!0,parentMenu:r=Aa}){const i=(0,u.useMemo)((()=>{const e={},n=yg(t,"kubio"),o=yg(t,"theme"),r=!!t&&(0,p.difference)(t,[...n,...o]);return n&&n.length&&(e.kubio=n),o&&o.length&&(e.theme=o),r&&r.length&&(e.custom=o),e}),[t]),l=Object.keys(i).length<=1;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.__experimentalNavigationMenu,{menu:n,title:e,titleAction:o&&(0,a.createElement)(_g,null),parentMenu:r},l&&(0,a.createElement)(a.Fragment,null,(0,p.map)(t,(e=>(0,a.createElement)(mg,{item:e,key:`wp_template-${e.id}`,icon:ke.KubioLogo})))),!l&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:`${n}--${La}`,title:(0,T.__)("Kubio templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:`${n}--${Ba}`,title:(0,T.__)("Theme templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:`${n}--${Da}`,title:(0,T.__)("Custom templates","kubio"),hideIfTargetMenuEmpty:!0}))),(0,a.createElement)(vg,{menu:`${n}--${La}`,title:(0,T.__)("Kubio templates","kubio"),templates:i.kubio,parentMenu:n}),(0,a.createElement)(vg,{menu:`${n}--${Ba}`,title:(0,T.__)("Theme templates","kubio"),templates:i.theme,parentMenu:n}),(0,a.createElement)(vg,{menu:`${n}--${Da}`,title:(0,T.__)("Custom templates","kubio"),templates:i.custom,parentMenu:n}))}function Eg(){var e,t,n,o,r,i;const[l,c]=(0,u.useState)(""),d=(0,u.useCallback)((e=>{c(e)})),{templates:m}=(0,C.useSelect)((e=>{const{getEntityRecords:t}=e(w.store);return{templates:t("postType","wp_template",{per_page:-1})}}),[]),p=(0,u.useMemo)((()=>(m||[]).reduce(((e,t)=>{let n="general";const o=t.slug;return(0,s.currentTemplateIsPage)(o)&&(n="page"),(0,s.currentTemplateIsPost)(o)&&(n="post"),{...e,[n]:[...e[n]||[],t]}}),{})),[m]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.__experimentalNavigationMenu,{menu:Aa,title:(0,T.__)("Templates","kubio"),titleAction:(0,a.createElement)(_g,null),parentMenu:Pa,hasSearch:!0,onSearch:d,search:l},l&&(0,a.createElement)(pg,{items:m,search:l}),!l&&(0,a.createElement)(a.Fragment,null,!(null===(e=p.page)||void 0===e||!e.length)&&(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:Na,title:(0,T.__)("Page templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(t=p.post)||void 0===t||!t.length)&&(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:Ma,title:(0,T.__)("Post templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(n=p.general)||void 0===n||!n.length)&&(0,a.createElement)(E.__experimentalNavigationItem,{navigateToMenu:Oa,title:(0,T.__)("General templates","kubio"),hideIfTargetMenuEmpty:!0})),!l&&null===m&&(0,a.createElement)(E.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})),!(null===(o=p.page)||void 0===o||!o.length)&&(0,a.createElement)(kg,{menu:Na,title:(0,T.__)("Page templates","kubio"),templates:p.page,hasAdd:!1,category:"page"}),!(null===(r=p.post)||void 0===r||!r.length)&&(0,a.createElement)(kg,{menu:Ma,title:(0,T.__)("Post templates","kubio"),templates:p.post,category:"post",hasAdd:!1}),!(null===(i=p.general)||void 0===i||!i.length)&&(0,a.createElement)(kg,{menu:Oa,title:(0,T.__)("General templates","kubio"),templates:p.general,hasAdd:!1,category:"general"}))}function Sg({activeMenu:e,onActivateMenu:t}){const{postId:n,postType:o}=(0,C.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(fe);return{postId:n(),postType:t()}}),[]);return(0,a.createElement)(E.__experimentalNavigation,{activeItem:`${o}-${n}`,activeMenu:e,onActivateMenu:e=>{t(e)}},(0,a.createElement)(E.__experimentalNavigationMenu,{title:(0,T.__)("Advanced","kubio")},(0,a.createElement)(E.__experimentalNavigationItem,{title:(0,T.__)("Templates","kubio"),navigateToMenu:Aa}),(0,a.createElement)(E.__experimentalNavigationItem,{title:(0,T.__)("Template Parts","kubio"),navigateToMenu:Ra}),(0,a.createElement)(Eg,{activeMenu:e}),(0,a.createElement)(bg,null)))}const wg=({isOpen:e})=>{const[t,n]=(0,u.useState)(Pa),[o,r]=(0,u.useState)(Pa),{siteTitle:i,openedMenu:l}=(0,C.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name,openedMenu:e(fe).getNavigationMenu()}}),[]),s=(0,u.useRef)();(0,u.useEffect)((()=>{e&&s.current.focus()}),[o]);const c=(0,S.usePrevious)(e);(0,u.useEffect)((()=>{l&&e&&!c&&n(l)}),[t,e,l]);const{setIsNavigationPanelOpened:d}=(0,C.useDispatch)(fe);return(0,a.createElement)("div",{className:R()("edit-site-navigation-panel",{"is-open":e}),ref:s,tabIndex:"-1",onKeyDown:e=>{e.keyCode===zh.ESCAPE&&(e.stopPropagation(),d(!1))}},(0,a.createElement)("div",{className:"edit-site-navigation-panel__inner"},(0,a.createElement)("div",{className:"edit-site-navigation-panel__site-title-container"},(0,a.createElement)(E.Flex,null,(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)("div",{className:"edit-site-navigation-panel__site-title"},i)),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Tooltip,{text:(0,T.__)("Close panel","kubio")},(0,a.createElement)(E.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:we,onClick:()=>d(!1)}))))),(0,a.createElement)("div",{className:"edit-site-navigation-panel__scroll-container"},o===Pa&&(0,a.createElement)(gg,{onActivateMenu:n,activeMenu:t}),t===Pa&&(0,a.createElement)(Sg,{activeMenu:o,onActivateMenu:r}))))},Cg=function({isOpen:e}){const{isActive:t}=(0,C.useSelect)((e=>{const{isFeatureActive:t}=e(g.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:n}=(0,C.useDispatch)(g.STORE_KEY);if(!t)return null;const o=(0,a.createElement)(E.Icon,{size:"36px",icon:ke.HamburgerMenu});return(0,a.createElement)("div",{className:"edit-site-navigation-toggle"+(e?" is-open":"")},(0,a.createElement)(E.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,T.__)("Toggle navigation","kubio"),onClick:()=>n(!e),showTooltip:!0},o))},{Fill:Ig,Slot:Tg}=(0,E.createSlotFill)("EditSiteNavigationPanelPreview");function xg(){const e=(0,C.useSelect)((e=>e(fe).isNavigationOpened()));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Cg,{isOpen:e}),e&&(0,a.createElement)(wg,{isOpen:e}),(0,a.createElement)(Tg,null))}const Pg=()=>{const e=(0,C.useSelect)((e=>e(m.store).getNotices().filter((e=>"snackbar"===e.type)).map((e=>({...e,className:`is-${e.status}`})))),[]),{removeNotice:t}=(0,C.useDispatch)(m.store);return(0,u.createPortal)((0,a.createElement)(E.SnackbarList,{className:"components-editor-notices__snackbar edit-site-notices",notices:e,onRemove:t}),document.body)};function Rg(){const{setIsListViewOpened:e}=(0,C.useDispatch)(g.STORE_KEY),{clearSelectedBlock:t,selectBlock:n}=(0,C.useDispatch)(k.store),o=(0,S.useFocusOnMount)("firstElement"),r=(0,S.useFocusReturn)(),i=`edit-site-editor__list-view-panel-label-${(0,S.useInstanceId)(Rg)}`;return(0,a.createElement)("div",{"aria-labelledby":i,className:"edit-site-editor__list-view-panel",onKeyDown:function(t){t.keyCode!==zh.ESCAPE||t.defaultPrevented||e(!1)}},(0,a.createElement)("div",{className:"edit-site-editor__list-view-panel-header"},(0,a.createElement)("strong",{id:i},(0,T.__)("List view","kubio")),(0,a.createElement)(E.Button,{icon:B,label:(0,T.__)("Close list view sidebar","kubio"),onClick:()=>e(!1)})),(0,a.createElement)("div",{className:"edit-site-editor__list-view-panel-content",ref:(0,S.useMergeRefs)([r,o])},(0,a.createElement)(k.__experimentalListView,{onSelect:async function(e){await t(),n(e,-1)},showNestedBlocks:!0,__experimentalFeatures:!0,__experimentalPersistentListViewFeatures:!0})))}function Ag(){const{setTemplate:e,setTemplatePart:t,showHomepage:n,setPage:o}=(0,C.useDispatch)(g.STORE_KEY),{siteUrl:r,state:i}=window.kubioEditSiteSettings;(0,u.useEffect)((()=>{var a,l,s,c;const u=window.location.href;let m=(0,Cn.getQueryArg)(u,"postId")||(null==i||null===(a=i.entity)||void 0===a||null===(l=a.context)||void 0===l?void 0:l.postId);m=isNaN(parseInt(m))?m:parseInt(m);const p=(0,Cn.getQueryArg)(u,"pageURL");if(!m&&!p)return void n();const h=(0,Cn.getQueryArg)(u,"postType")||(null==i||null===(s=i.entity)||void 0===s||null===(c=s.context)||void 0===c?void 0:c.postType);if(p)o({path:p});else if("wp_template"===h)e(m);else if("wp_template_part"===h)t(m);else if(h){var g,f,b;const e=(null==i||null===(g=i.entity)||void 0===g||null===(f=g.context)||void 0===f?void 0:f.postId)===m?null==i||null===(b=i.entity)||void 0===b?void 0:b.path:`${r}?p=${m}`;o({context:{postType:h,postId:m},path:e})}else n();(0,d.doAction)("kubio.afterEntitySet")}),[]);const a=function(){const e=(0,u.useRef)(),t=(0,C.useSelect)((e=>{var t,n;const{getEditedPostType:o,getEditedPostId:r,getPage:i}=e(g.STORE_KEY),a=i();let l=r(),s=o();return null!=a&&null!==(t=a.context)&&void 0!==t&&t.postId&&null!=a&&null!==(n=a.context)&&void 0!==n&&n.postType&&(l=a.context.postId,s=a.context.postType),l&&s?{postId:l,postType:s,page:a}:{page:a}}));return Mn()(e.current,t)||(e.current=t),e.current}();return(0,u.useEffect)((()=>{const e=(0,Cn.removeQueryArgs)(window.location.href,"postType","postId","pageURL"),{page:t,...n}=a,o=a?(0,Cn.addQueryArgs)(e,n):e;window.history.replaceState({},"",o)}),[a]),null}const Og=(0,u.createContext)({}),Ng=[(0,Se.getNamesOfBlocks)().HEADER,(0,Se.getNamesOfBlocks)().FOOTER,(0,Se.getNamesOfBlocks)().SIDEBAR,"core/template-part","core/post-content"],Mg=()=>(0,u.useContext)(Og),Dg=({children:e,blockContext:t,templateId:n,templateType:o,page:r})=>{const i=(0,u.useRef)([]),[l,s]=(0,u.useState)(!1),c=(0,b.useSetGlobalSessionProp)("ready"),m=(0,b.useGetGlobalSessionProp)("ready",!1),h=(0,u.useRef)(m),{entitiesFinished:g,postLoaded:f,isEmptyPost:_,isPost:v,postEntity:y,isChangingPage:k}=(0,C.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:r}=e("core"),{getCurrentPostType:a,getCurrentPostId:l,isChangingPage:s}=e(pr.Ls),c=!(!m&&n&&o)||i.current.reduce(((e,{theme:n,slug:o,content:r})=>{let i=!0;var a;return r||(i=!n||!o||!(0,p.isUndefined)(null===(a=t("postType","wp_template_part",`${n}//${o}`))||void 0===a?void 0:a.content)),e&&i}),!0);let u=!0;const d=a(),h=l();let g,f=!1,b=!1;var _;return d&&h&&(["wp_template","wp_template_part"].includes(d)||(f=!0,b=t("postType",d,h),g=null===(_=b)||void 0===_?void 0:_.content,u=!(0,p.isUndefined)(g)&&r("getEditedEntityRecord",["postType",d,h]))),{entitiesFinished:c||u,postLoaded:u,postEntity:b,isEmptyPost:d&&h&&!(0,p.isUndefined)(g)&&(0,p.isString)(g)&&!(g.includes("\x3c!-- wp:")||g.includes("\x3c!--wp:")),isPost:f,isChangingPage:s()}}),[i.current.length,m,t,n,n]),E=(0,S.useDebounce)((0,u.useCallback)((()=>{s(!0)}),[]),200),w=(0,u.useCallback)((e=>{if(c(e),e){if(c(e),top.kubioStartTime){const e=Math.floor(performance.now()-top.kubioStartTime)/1e3;console.log("Kubio ready in: "+e+" seconds"),top.kubioStartTime=null}(0,d.doAction)("kubio.editorIsReady")}}),[c]),I=(0,u.useCallback)((e=>{h.current!==e&&e&&(0,Fi.updateAllStyleManagers)((()=>{w(e)}))}),[w]),T=(0,S.useDebounce)(I,500),x=(0,S.useDebounce)((0,u.useCallback)((()=>{I(!0),s(!0)}),[]),2e3),P=(0,S.useDebounce)((0,u.useCallback)((()=>{I(!0),s(!0)}),[]),1e4);(0,u.useEffect)((()=>{(0,p.debounce)(I,15e3)}),[]);const{editEntityRecord:R}=(0,C.useDispatch)("core");(0,u.useEffect)((()=>{const e=y.content;v&&e&&"function"!=typeof e&&!y.blocks&&R("postType",y.type,y.id,{blocks:(0,Ge.parse)(e)},{undoIgnore:!0})}),[v,y,_,R]);const A=(0,S.usePrevious)(m);(0,u.useEffect)((()=>{h.current=m,A&&!m&&(s(!1),i.current=[])}),[m,A]),(0,u.useLayoutEffect)((()=>{if(!k&&!m)if(g){if(P.cancel(),x.cancel(),T.cancel(),v&&f&&_)return void x(!0);if(v)return void T(l);T(!0)}else x.cancel(),P(!0)}),[f,v,_,g,l,m,r,n,o,P,x,T,k]);const O=(0,u.useCallback)(((e,{theme:t,slug:n})=>{Ng.includes(e)&&(t&&n?(0,p.find)(i.current,{theme:t,slug:n})||i.current.push({theme:t,slug:n}):"core/post-content"===e&&i.current.push({content:!0})),E()}),[E]),N=(0,u.useMemo)((()=>({isReady:m,markAsLoaded:O})),[m,O]);return(0,a.createElement)(Og.Provider,{value:N},e)},Bg=(0,S.createHigherOrderComponent)((e=>t=>{const{markAsLoaded:n,isReady:o}=Mg();return(0,u.useLayoutEffect)((()=>{o||n(t.name,t.attributes)}),[o,n,t.attributes,t.name]),(0,a.createElement)(e,{...t})}),"BlockListEditorStateReady");function Lg(){return function(){const[e,t]=(0,y.useGlobalStylesOutput)(),{getSettings:n}=(0,C.useSelect)(fe),{updateSettings:o}=(0,C.useDispatch)(fe);(0,u.useEffect)((()=>{var r;if(h().isEmpty(e)||h().isEmpty(t))return;const i=n(),a=(null==i||null===(r=i.styles)||void 0===r?void 0:r.filter((e=>!e.isGlobalStyles||"base-layout"===e.__unstableType)))||[],l=(0,ye.mergeNoArrays)({},i,{styles:[...a,...e],__experimentalFeatures:t});o(l)}),[e,t])}(),null}(0,d.addFilter)("editor.BlockListBlock","kubio/style/BlockListEditorStateReady",(0,S.compose)([Bg]),1);const zg=({className:e,children:t,...n})=>{const o=(0,u.useRef)();return(({ref:e})=>{(0,u.useEffect)((()=>{if(!e.current)return;const t=new ResizeObserver((t=>{for(const l of t){var n,o,r,i;null===(n=e.current)||void 0===n||null===(o=n.classList)||void 0===o||null===(r=(i=o).toggle)||void 0===r||r.call(i,"kubio-has-scrollbar",!!(a=e.current)&&a.scrollHeight>a.clientHeight)}var a}));return t.observe(e.current),()=>{t.disconnect()}}),[e.current])})({ref:o}),(0,a.createElement)("div",{ref:o,className:R()("kubio-editor-ai-post-generate-interface__wizard__list",e),...n},t)},Fg={BG_IMAGE:"bgImage",BG_SLIDESHOW:"bgSlideshow",COLUMN_BG_IMG:"columnBgImage",IMAGE_BLOCK:"imageBlock"},Gg=e=>()=>{const{activeImage:t,onChangeImage:n,initialImg:o,restOfImages:r,isMultiChoice:i}=Hg({type:e}),l=e===Fg.BG_SLIDESHOW,{onWizardDataChange:s}=qg();return(0,u.useEffect)((()=>{s({currentSelectedImage:t})}),[]),(0,u.useEffect)((()=>{s(i?{currentSelectedImage:h().sortBy(t,(e=>h().indexOf(r,e)))}:{currentSelectedImage:t})}),[t]),(0,a.createElement)(zg,{className:"kubio-editor-ai-post-generate-interface__wizard__image-step"},(0,a.createElement)("h2",null,!l&&(0,T.__)("Hero Image","kubio"),l&&(0,T.__)("Hero Slideshow","kubio")),(0,a.createElement)("p",null,!l&&(0,T.__)("Are you happy with the hero image selected by Kubio AI?","kubio"),l&&(0,T.__)("Are you happy with the hero slideshow images selected by Kubio AI?","kubio")),o&&(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(hi,{scrollIntoView:!1},(0,a.createElement)(Wg,{src:o,activeImage:t,setActiveImage:n}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__image-step__image-list"},(0,a.createElement)(hi,{scrollIntoView:!1},r.map(((e,o)=>(0,a.createElement)(Wg,{src:e,key:o,activeImage:t,setActiveImage:n}))))))},Hg=({type:e}={})=>{const t=h().get((0,b.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",{}),e,{}),{currentValue:n,variants:o,clientId:r}=t,i=Array.isArray(n);let a,l;i?(l=n.concat(o),a=null):(a=n,l=o);const{wizardContextData:s,onWizardDataChange:c}=qg(),d=`currentHeroImage${e}`,m=h().get(s,d,n),[p,g]=(0,u.useState)(m),{getBlockWithImageDataHelper:f}=Ug(),v=(0,u.useRef)();(0,u.useEffect)((()=>{v.current=void 0}),[e]);const y=(t,n={})=>{const{updateToLocalSlideshowImage:o,slideshowIndex:a}=h().merge({updateToLocalSlideshowImage:!1,slideshowIndex:0},n);let s=[];o||(s=(e=>{var t;if(!i)return g(e),null==c||c({[d]:e}),e;let n;if(null==p||null===(t=p.includes)||void 0===t?void 0:t.call(p,e)){var o;n=null==p||null===(o=p.filter)||void 0===o?void 0:o.call(p,(t=>t!==e)),h().isEmpty(n)&&(n=p),n=h().sortBy(n,(e=>h().indexOf(l,e)))}else{var r;n=null==p||null===(r=p.concat)||void 0===r?void 0:r.call(p,[e]),n=h().sortBy(n,(e=>h().indexOf(l,e)));const t=h().indexOf(n,e);if(t>0&&t<n.length-1){const o=n.slice(0,t),r=n.slice(t+1);n=[e].concat(r,o)}else if(0===t){const o=n.slice(t+1);n=[e].concat(o)}else if(t===n.length-1){const o=n.slice(0,t);n=[e].concat(o)}}Array.isArray(n)||(n=[]),n=h().uniq(n);const a=h().sortBy(n,(e=>h().indexOf(l,e)));return null==c||c({[d]:a}),g(n),n})(t)),v.current||(v.current=f(r));const u=v.current;if(u)switch(e){case Fg.BG_IMAGE:case Fg.COLUMN_BG_IMG:u.setStyle("background.image.0.source.url",t,{descendants:"outer",media:"desktop"});break;case Fg.BG_SLIDESHOW:if(o)u.setStyle(`background.slideshow.slides.${a}.url`,t,{descendants:"outer",media:"desktop",mergeData:!1});else if(Array.isArray(s)){const e=s.map(((e,t)=>({id:t+1,url:e,icon:!1})));u.setStyle("background.slideshow.slides",e,{descendants:"outer",media:"desktop",mergeData:!1})}break;case Fg.IMAGE_BLOCK:u.setAttribute("url",t)}};return{activeImage:p,onChangeImage:y,initialImg:a,restOfImages:l,saveImageOnNext:async(e,t="",n)=>{if(""===t)return!1;try{if(e.has(t))y(e.get(t),n);else{const o=await(0,_.aiSearchedImageSave)({selectedImage:t});""!==o&&(y(o.url,n),e.set(t,o.url))}}catch(e){console.log(e)}},isMultiChoice:i}},Ug=()=>{const e=(0,s.useColibriDataHooks)();return{getBlockWithImageDataHelper:t=>(0,s.getColibriData)({clientId:t,autoSave:!0,loadColibriData:!0},e)}},Wg=({src:e,activeImage:t,setActiveImage:n})=>{const o=Array.isArray(t)?t.includes(e):e===t;return(0,a.createElement)(hi.Item,{isActive:o,onClick:()=>n(e)},(0,a.createElement)("img",{src:e,alt:""}),o&&(0,a.createElement)("div",{className:"kubio-style-preset-list__check"},(0,a.createElement)(E.Icon,{icon:O})))},jg=[{value:Fg.BG_IMAGE,Component:Gg(Fg.BG_IMAGE),nextButtonLabel:(0,T.__)("Continue","kubio")},{value:Fg.BG_SLIDESHOW,Component:Gg(Fg.BG_SLIDESHOW),nextButtonLabel:(0,T.__)("Continue","kubio")},{value:Fg.COLUMN_BG_IMG,Component:Gg(Fg.COLUMN_BG_IMG),nextButtonLabel:(0,T.__)("Continue","kubio")},{value:Fg.IMAGE_BLOCK,Component:Gg(Fg.IMAGE_BLOCK),nextButtonLabel:(0,T.__)("Continue","kubio")},{value:"colorScheme",Component:()=>{const{activePaletteWithData:e,restOfPalettes:t,onHandleClick:n,activePaletteValue:o}=(()=>{const{mergedPalettes:e,onHandleClick:t,activePaletteValue:n}=Ei(),{wizardContextData:o,onWizardDataChange:r}=qg(),[i]=(0,_.useAIData)(),a=i.siteContext.siteMood||"neutral",{activePaletteWithData:l,restOfPalettes:s}=(0,u.useMemo)((()=>{let{activePaletteWithData:t=null,restOfPalettes:i=[]}=o;if(t)return{activePaletteWithData:t,restOfPalettes:i};e.forEach((e=>{(0,ye.getColorPalettesAreEqual)(e.colors,n)?t={...e,mood:a,label:(0,T.__)("Set 1","kubio")}:i.push(e)})),i=i.filter((e=>e.mood===a)).map(((e,t)=>({...e,label:(0,T.sprintf)(// translators: %s: number of the preset, Set refers to the color scheme preset
// translators: %s: number of the preset, Set refers to the color scheme preset
(0,T.__)("Set %s","kubio"),t+2)})));const l={activePaletteWithData:t,restOfPalettes:i};return r(l),l}),[n,e,a,r,o]);return{activePaletteWithData:l,restOfPalettes:s,onHandleClick:t,activePaletteValue:n}})();return(0,a.createElement)(zg,null,(0,a.createElement)("h2",null,(0,T.__)("Color Scheme","kubio")),(0,a.createElement)("p",null,(0,T.__)("Are you happy with the color scheme selected by Kubio AI?","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(hi,{scrollIntoView:!1},(0,a.createElement)(Si,{palette:e,index:0,onHandleClick:n,activePaletteValue:o}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)(hi,{scrollIntoView:!1},t.map(((e,t)=>(0,a.createElement)(Si,{key:t,palette:e,index:t+1,onHandleClick:n,activePaletteValue:o})))))},nextButtonLabel:(0,T.__)("Continue","kubio")},{value:"typography",Component:()=>{const{activePresetWithData:e,restOfPresets:t,onSelectPreset:n,bodyTypographyHolders:o}=(()=>{const{mergedPresets:e,bodyTypographyHolders:t,onSelectPreset:n}=bi(),{wizardContextData:o,onWizardDataChange:r}=qg(),{activePresetWithData:i,restOfPresets:a}=(0,u.useMemo)((()=>{let{activePresetWithData:n=null,restOfPresets:i=[]}=o;if(n)return{activePresetWithData:n,restOfPresets:i};const a=h().get(t,"h1.family"),l=h().get(t,"p.family");e.forEach((e=>{const t=e.h1.family,o=e.p.family;a===t&&l===o?n=e:i.push(e)}));const s={activePresetWithData:n,restOfPresets:i};return r(s),s}),[]);return{activePresetWithData:i,restOfPresets:a,onSelectPreset:n,bodyTypographyHolders:t}})();return(0,a.createElement)(zg,null,(0,a.createElement)("h2",null,(0,T.__)("Typography","kubio")),(0,a.createElement)("p",null,(0,T.__)("Are you happy with the family fonts selected by Kubio AI?","kubio")),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__preset-list__first-item"},(0,a.createElement)(hi,{scrollIntoView:!1},(0,a.createElement)(_i,{preset:e,index:0,bodyTypographyHolders:o,onSelect:n}))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__list__after-first"},(0,T.__)("Below are a few alternatives. You can also change this later.","kubio")),(0,a.createElement)(hi,{scrollIntoView:!1},t.map(((e,t)=>(0,a.createElement)(_i,{key:t,preset:e,index:t+1,bodyTypographyHolders:o,onSelect:n})))))},nextButtonLabel:(0,T.__)("Finish","kubio")}],Kg=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})),Vg=(0,u.createContext)({}),$g=({onFinish:e,overlayClicked:t,setOverlayClicked:n})=>{const[o,r]=(0,u.useState)(0),[i,l]=(0,u.useState)({}),[s,c]=(0,u.useState)(new Map),d=(0,b.useGetGlobalSessionProp)("aiFrontPageHeroImageVariantsData",null),{clearSelectedBlock:m}=(0,C.useDispatch)("core/block-editor"),{openSidebar:p,setIsNavigationPanelOpened:g}=(0,C.useDispatch)("kubio/edit-site")||{};(0,u.useEffect)((()=>{m().then((()=>{null==p||p("document")})),null==g||g(!1)}),[m,p,g]);const f=(0,u.useRef)(),_=(0,u.useCallback)((e=>{const t=(0,ye.mergeNoArrays)({},i,e);l(t)}),[i]),v=Object.values(Fg),y=(0,u.useMemo)((()=>jg.filter((e=>!v.includes(e.value)||!h().isEmpty(h().get(d,e.value))))),[d]),k=y[o],{nextButtonLabel:S,Component:w}=k,{saveImageOnNext:I}=Hg({type:k.value});(0,u.useEffect)((()=>{o===y.length-1&&document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!1)}),[o,y]);const x=(0,T.sprintf)(// translators: %1$s is the current step index, %2$s is the total number of steps
// translators: %1$s is the current step index, %2$s is the total number of steps
(0,T.__)("Step %1$s of %2$s","kubio"),o+1,y.length),P=(0,u.useMemo)((()=>({wizardContextData:i,onWizardDataChange:_})),[i,_]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard"},(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header"},(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__header__container"},(0,a.createElement)(Ee,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ke.KubioAI}),(0,a.createElement)("span",null,(0,T.__)("Finishing Touches","kubio"))),(0,a.createElement)("p",{className:"kubio-editor-ai-post-generate-interface__wizard__header__current-step-header"},x)),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__wizard__content"},(0,a.createElement)(Vg.Provider,{value:P},(0,a.createElement)(w,null))),(0,a.createElement)("div",{ref:f,className:"kubio-editor-ai-post-generate-interface__wizard__footer"},(0,a.createElement)(E.Button,{icon:Kg,onClick:()=>{0!==o&&r(o-1)},disabled:0===o}),(0,a.createElement)(E.Button,{onClick:()=>{if(!h().isEmpty(d)&&v.includes(k.value)){let e=null==i?void 0:i.currentSelectedImage;Array.isArray(e)||(e=[e]),e.forEach(((e,t)=>{let n;k.value===Fg.BG_SLIDESHOW&&(n={updateToLocalSlideshowImage:!0,slideshowIndex:t}),I(s,e,n)}))}o===y.length-1?(r(0),null==e||e()):r(o+1)},className:"kubio-ai-button"},S),t&&(0,a.createElement)(E.Popover,{anchorRef:f,className:"kubio-options-popover kubio-editor-ai-post-generate-interface__wizard__overlay-popup",position:"top",offset:10,animate:!0,noArrow:!0,onClose:()=>{t&&n(!1)}},(0,a.createElement)(E.Button,{icon:we,onClick:()=>n(!1)}),(0,a.createElement)("img",{src:(0,ye.staticAssetURL)("ai-assets/info-icon.svg")}),(0,a.createElement)("h4",null,(0,T.__)("You can edit the content of the website after you finish the style customization setup.","kubio"))))))},qg=()=>(0,u.useContext)(Vg),Yg=({children:e})=>{const t=(0,b.useGetGlobalSessionProp)("showAiPostGenerateInterface",!1),n=(0,b.useSetGlobalSessionProp)("showAiPostGenerateInterface"),[o,r]=(0,u.useState)(!1),i=(0,u.useMemo)((()=>{var e,t,n,o;return null===(e=document.querySelector(".kubio-iframe"))||void 0===e||null===(t=e.contentDocument)||void 0===t||null===(n=t.body)||void 0===n||null===(o=n.querySelector)||void 0===o?void 0:o.call(n,".block-editor-writing-flow > .edit-site-block-editor__block-list")}),[t]);return(0,a.createElement)("div",{className:R()("kubio-editor-ai-post-generate-interface",{"kubio-editor-ai-post-generate-interface--show-wizard":t})},(0,a.createElement)(Zg,{showAiPostGenerateInterface:t,onHideSidebar:()=>{n(!1)},overlayClicked:o,setOverlayClicked:r}),(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content position-relative"},(0,a.createElement)(E.Button,{className:"toggle-ai-wizard-button",onClick:()=>{n(!t)}},"Toggle AI panel"),e,t&&i&&(0,u.createPortal)((0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__content__overlay",onClick:()=>r(!0)}),i)))},Zg=({showAiPostGenerateInterface:e,onHideSidebar:t,...n})=>(0,a.createElement)("div",{className:"kubio-editor-ai-post-generate-interface__sidebar"},e&&(0,a.createElement)($g,{onFinish:t,...n})),Xg=e=>(0,s.convertTemplateFormatToBlock)([e]).map((e=>(0,ye.refreshBlockStyleRefs)(e))),{getClientIdsWithDescendants:Qg,getBlock:Jg}=(0,C.select)("core/block-editor"),ef=(e,t=[])=>{const n=(0,_.getFromGenerationSession)("sectionsGeneratedAnchors",new Set),o=Qg().filter((e=>!t.includes(e))).map((e=>{var t,n;return null===(t=Jg(e))||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.anchor})).filter(Boolean).concat([...n]),r=(0,ye.slugify)(e);let i=0,a=r;for(;-1!==o.indexOf(a);)i++,a=`${r}-${i}`;n.add(a),(0,_.setInGenerationSession)("sectionsGeneratedAnchors",n);let l=i?`${e} ${i}`:e;return l=l.split(" ").map(p.upperFirst).join(" "),{name:l,anchor:a}},tf=async({section:e,pageTitle:t,siteContext:n,pageContext:o,generateAnchorAndName:r=!0})=>{const i=(0,l.sectionCategoryToLabel)(e.category);let a,s,c;const{name:u,anchor:d}=r?ef(i):{};try{[c,s]=await(0,_.fillSectionTemplate)({...e,pageTitle:t,siteContext:n,pageContext:o,label:u,anchor:d}),a=Xg(c),a=nf(a,n,o)}catch(e){throw e}return[a,s]},nf=(e,t,n)=>(e=(0,ye.cleanFontFamilyFromBlocks)(e),(0,ye.walkBlocks)(e,(o=>(0,d.applyFilters)("kubio.ai.generateSectionBlocks.afterBlockGenerated",o,t,n,e))),e),{NAVIGATION:of,NAVIGATION_TOP_BAR:rf,NAVIGATION_ITEMS:af,NAVIGATION_STICKY_ITEMS:lf}=(0,Se.getNamesOfBlocks)(),sf=async(e,{pageContext:t,siteContext:n,pageTitle:o}={})=>{e=e.map((e=>(0,Ge.cloneBlock)(e)));const r=[];return(0,s.walkBlockTree)(e,(async e=>{[rf,af,lf].includes(e.name)&&r.push((async()=>{try{const[r]=await tf({section:{category:rf===e.name?"navigation-top-bar":"navigation",template:(0,ye.transformBlockToTemplate)(e)},pageTitle:o,siteContext:n,pageContext:t}),{attributes:i,innerBlocks:a}=r[0];h().set(e,"attributes",i),h().set(e,"innerBlocks",a)}catch(t){On.Log.error(`Kubio AI section generation error - navigation section: ${e.name}`,t,e)}}))})),await Promise.allSettled(r.map((e=>e()))),e},cf=async({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,block:i})=>{try{const a=(0,ye.transformBlockToTemplate)(i);if(i.name===of){const[e]=await sf([i],{pageTitle:o,siteContext:n,pageContext:t});return void r(i.clientId,e,0)}const[l]=await tf({section:{category:e,template:a},pageContext:t,siteContext:n,pageTitle:o,includeContent:!1});r(i.clientId,l,0)}catch(e){On.Log.error("headerInnerBlocksReplaceContent",e)}},uf=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Icon,{className:"kubio-ai-logo-animated kubio-ai-logo-colored",icon:ke.KubioAI})),df=(e,t,n,o=!1)=>{const r=null==e?void 0:e.querySelector(`[data-block="${t}"]`);if(r)if(n)if(o){const t=e.createElement("div");t.classList.add("kubio-ai-generating-section-overlay"),r.append(t),(0,s.reactRender)((0,a.createElement)(uf,null),t)}else{const e=r.querySelector(".kubio-ai-generating-section-overlay");e&&((0,s.reactUnmount)(e),e.remove())}else r.classList[o?"add":"remove"]("kubio-ai-is-generating")},{HEADER:mf,FOOTER:pf,SECTION:hf,COLUMN:gf,IMAGE:ff}=(0,Se.getNamesOfBlocks)(),bf=[mf,pf,hf,gf,ff],_f=e=>{const{ownerDocument:t}=(0,s.useOwnerDocumentContext)(),[n,o]=(0,u.useState)(!1),r=(0,C.useSelect)((()=>{const t=(0,C.select)("core/block-editor").getBlock(e);return!!t&&bf.includes(t.name)}),[e]);return[n,(0,u.useCallback)((n=>{o(n),df(t,e,r,n)}),[e,r,t])]},{NAVIGATION:vf,HERO:yf}=(0,Se.getNamesOfBlocks)(),kf=async(e,t,n,o)=>{let r=[];const i=(()=>{const{getEntityRecords:e}=(0,C.select)("core");return(e("postType","wp_template_part",{per_page:-1})||[]).find((({kubio_template_source:e,slug:t})=>"kubio"===e&&["header","","kubio-header"].includes(t)))||null})();if(!i)return;const a=h().get(e,"2",[]),l=(0,p.cloneDeep)(a.find((e=>e[0]===vf)));let s=(0,p.cloneDeep)(a.find((e=>e[0]===yf)));if(l&&(r=nf(r.concat((0,p.castArray)(Xg(l))),n,o)),s){s=(0,d.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",s);const[e]=await tf({section:{category:"hero",template:s},pageTitle:t,siteContext:n,pageContext:o});r=r.concat((0,p.castArray)(e))}if((0,p.isEmpty)(r))return;const c={blocks:r,content:({blocks:e=[]})=>(0,Ge.__unstableSerializeAndClean)(e)},{editEntityRecord:u}=(0,C.dispatch)("core");u("postType","wp_template_part",i.id,c)},Ef=async({clientId:e,sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,clearSelectedBlock:a=p.noop,setAIData:l=p.noop,summary:s="",currentSectionCloudId:c=null,usedSections:u=null},d)=>{let m=[];u&&u.items.has(e)&&(m=[...u.items.get(e)]);try{if(!d){On.Log.info(`Used sections: ${m.join()||"N/A"} | Section id: ${c}`);const e=(0,_.getPageContentSectionTemplate)({category:t,siteContext:o,returnAll:!0,skipIds:(0,p.isNumber)(c)?[c]:[]});let n=null;const r=e.filter((e=>!m.includes(e.cloudPresetId)));if(r.length)n=r[0],m.push(n.cloudPresetId);else{const t=m.shift();n=e.find((e=>e.cloudPresetId===t))||e[0]}(0,p.isNumber)(c)&&!m.includes(c)&&m.push(c),d=n.template}const[h]=await tf({section:{category:t,template:d,summary:s},pageContext:n,siteContext:o,pageTitle:r});i(e,h);const g=h[0].clientId;if(u){const t=new Map(u.items);t.delete(e),t.set(g,(0,p.uniq)(m)),u.setItems(t)}if(n.isFrontPage&&"cta"===t){const e=(0,p.cloneDeep)(o);(0,p.set)(e,["cta","pattern"],{category:t,template:h.map(ye.transformBlockToTemplate),summary:s}),l(e,"siteContext"),(0,_.saveAiGeneralSettings)(e)}window.requestIdleCallback((()=>{a(g)}))}catch(e){On.Log.error("contentSectionReplaceDesign",e)}},Sf=async({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,block:i,includeContent:a=!0,shouldReplaceBlock:l=!0})=>{try{const s=(0,ye.transformBlockToTemplate)(i),[c]=await tf({section:{category:e,template:s},pageContext:t,siteContext:n,pageTitle:o,includeContent:a});return l&&r(i.clientId,c,0),c[0]}catch(e){On.Log.error("footerInnerBlocksReplaceContent",e)}},{HEADER:wf,FOOTER:Cf}=(0,Se.getNamesOfBlocks)(),{HEADER:If,FOOTER:Tf}=(0,Se.getNamesOfBlocks)(),xf=e=>{const{getClientIdsWithDescendants:t,getBlock:n,getBlockIndex:o}=(0,C.select)("core/block-editor"),{updateBlockAttributes:r,__unstableMarkLastChangeAsPersistent:i}=(0,C.dispatch)("core/block-editor"),a=t().map(n).find((e=>"hero-accent"===(0,p.get)(e,["attributes","kubioAI","meta","category"])));if(a&&0===o(a.clientId)){const t=(0,p.cloneDeep)(a.attributes.kubio);(0,p.set)(t,"style.descendants.inner.margin.top.value",e?-170:0),(0,p.set)(t,"props.overlapSection",e),(0,p.set)(t,"hash",Ca().generate()),i(),r(a.clientId,{kubio:t})}},Pf=()=>{const{dataHelper:e,...t}=(()=>{const{dataHelper:e}=(0,s.useKubioBlockContext)(),t=e.clientId,[{pageContext:n,siteContext:o,pageTitle:r},i]=(0,_.useAIData)(),{replaceBlocks:a,replaceInnerBlocks:c,selectBlock:d,clearSelectedBlock:m}=(0,C.useDispatch)("core/block-editor"),{block:g,innerBlocks:f,isFrontPage:b}=(0,C.useSelect)((e=>{const{getBlockParentsByBlockName:n,getBlock:o}=e("core/block-editor"),{getIsFrontPage:r=h().noop}=e("kubio/edit-site")||{},i=o((0,p.first)(n(t,[wf,Cf])||[])||t);return{block:i,innerBlocks:e("core/block-editor").getBlocks(i.clientId),isFrontPage:r()}}),[t]),v=(0,u.useMemo)((()=>{let t=(e.getAttribute("anchor","section")||"section").replace(/\-\d+/,"");return t=(0,l.normalizeCategorySlug)(t),e.getAttribute("kubioAI.meta.category",t)}),[e]);return(0,u.useMemo)((()=>({clientId:g.clientId,sectionCategory:v,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:a,replaceInnerBlocks:c,block:g,innerBlocks:f,name:g.name,selectBlock:d,clearSelectedBlock:m,isFrontPage:b,dataHelper:e,setAIData:i})),[g,v,n,o,r,a,c,f,d,m,b,e,i])})(),[n,o]=(0,b.useGlobalSessionProp)("kubioAISurpriseMeUsedItems",new Map),r=(0,u.useMemo)((()=>({...t,usedSections:{items:n,setItems:o}})),[o,t,n]),[i,a]=_f(r.clientId),{clearSelectedBlock:c}=(0,C.useDispatch)("core/block-editor"),d=(0,u.useCallback)((async(e,t={})=>{if(i)return;const n=h().merge({},r,t);c(),a(!0);const o=(0,_.initGenerationSession)();try{switch(n.name){case If:const{pair:t,overlappable:o}=await(async({clientId:e,pageContext:t,siteContext:n,pageTitle:o,replaceInnerBlocks:r,clearSelectedBlock:i=p.noop,isFrontPage:a=!0,pairPattern:l,usedSections:s=null},c=null)=>{let u=null;const d=s&&s.items.get(e)||[];try{const{navigation:m,hero:h,pairCloudPresetId:g,name:f,overlappable:b}=(0,_.getPageHederTemplate)(c,a,{skipSlugs:d});On.Log.info(`Skipping headers: ${d.join()||"N/A"}`),d.includes(f)||d.push(f);const v=g?(0,_.findPattern)("*",{findBy:{cloudPresetId:g},skipSlugs:d}):null;u=l||v;let y=[];if(m){const e=(0,p.cloneDeep)(m);y=await sf(Xg(e),{pageTitle:o,siteContext:n,pageContext:t})}const[k]=await tf({section:{category:"hero",template:h},pageTitle:o,siteContext:n,pageContext:t});return y=nf(y,n,t),await r(e,[...y,...k].filter(Boolean)),s&&(s.items.set(e,d),s.setItems(new Map(s.items))),i(),{pair:u,overlappable:b}}catch(e){On.Log.error("headerReplaceDesign",e)}return{pair:u}})(n,e);n.isFrontPage&&t&&(await kf((0,p.get)(t,["content","2"],[]),n.pageTitle,n.siteContext,n.pageContext),xf(o||n.overlappable));break;case Tf:await(async({clientId:e,pageContext:t,siteContext:n,pageTitle:o,replaceInnerBlocks:r,replaceBlocks:i,selectBlock:a=noop},l=null)=>{try{const s="footer",c=l||(0,_.getPageFooterTemplate)(n),u=Xg(c)[0].innerBlocks,d=[];for(let e=0;e<u.length;e++){const r=u[e],a=await Sf({sectionCategory:s,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:i,block:r,includeContent:!0,shouldReplaceBlock:!0});d.push(a)}await r(e,d),a(e)}catch(e){On.Log.error("footerReplaceDesign",e)}})(n,e);break;default:await Ef(n,e)}}catch(e){On.Log.error("replaceDesign",e)}finally{o()}a(!1)}),[c,i,r,a]),m=(0,u.useCallback)((async(e={})=>{if(i)return;c(),a(!0);const t=(0,_.initGenerationSession)(),n=h().merge({},r,e);try{switch(n.name){case If:await(async({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,innerBlocks:i,clearSelectedBlock:a=p.noop})=>{const l=i.filter((e=>e.name!==of)),s=i.filter((e=>[of].includes(e.name)));for(let i=0;i<l.length;i++){const a=l[i];await cf({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,block:a})}for(let i=0;i<s.length;i++){const a=s[i];await cf({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,block:a})}a()})(n);break;case Tf:await(async({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,innerBlocks:i})=>{for(let a=0;a<i.length;a++){const l=i[a];await Sf({sectionCategory:e,pageContext:t,siteContext:n,pageTitle:o,replaceBlocks:r,block:l,includeContent:!1})}})(n);break;default:await(async({clientId:e,sectionCategory:t,pageContext:n,siteContext:o,pageTitle:r,replaceBlocks:i,block:a,setAIData:l=p.noop,summary:s=""})=>{try{const c=(0,ye.transformBlockToTemplate)(a),u=await(async({section:e,pageTitle:t,siteContext:n,pageContext:o,includeContent:r=!0,clientId:i})=>{const a=e.category.replaceAll(".",""),{name:l,anchor:s}=ef(a,[i]),[c]=await(0,_.rephraseSectionTemplate)({...e,pageTitle:t,siteContext:n,pageContext:o,label:l,anchor:s,includeContent:r});let u=Xg(c);return u=nf(u,n,o),u})({section:{category:t,template:c,summary:s},pageContext:n,siteContext:o,pageTitle:r,includeContent:!0,clientId:e});if(i(e,u),n.isFrontPage&&"cta"===t){const e=(0,p.cloneDeep)(o);(0,p.set)(e,["cta","pattern"],{category:t,template:u.map(ye.transformBlockToTemplate),summary:s}),l(e,"siteContext"),(0,_.saveAiGeneralSettings)(e)}}catch(e){On.Log.error("contentSectionReplaceContent",e)}})(n)}}catch(e){On.Log.error("replaceDesign",e)}finally{t()}a(!1)}),[c,i,r,a]),f=(0,u.useCallback)(((e=null)=>{if(i)return;const t=(()=>{switch(r.name){case If:return"kubio-header";case Tf:return"kubio-footer";default:return"kubio-content"}})(),n=(0,p.get)(r,"sectionCategory","section"),o="kubio-header"!==t||r.isFrontPage?"section"===n||"kubio-content"!==t?void 0:`${t}/${n}`:g.INNER_HEADERS_CATEGORY;let a=async(e,t="")=>{const n=(0,ye.kubioCloneDeep)(e.content),o=e.categories[0].split("/")[1],r=e.pairCloudPresetId?(0,_.findPattern)("*",{findBy:{cloudPresetId:e.pairCloudPresetId}}):null;try{await d(n,{sectionCategory:o,pairPattern:r,summary:t,overlappable:[...e.publicTags||[],...e.internalTags||[]].includes("overlappable")})}catch(e){On.Log.error("replaceDesign",e)}};if(e){const t=a;a=n=>e(n,t)}const l={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:t,category:o,internalTag:g.AI_READY_TAG,onActionFunc:a}};(0,ye.onOpenTemplateGalleryWithParams)(l)}),[i,r,d]);return{replaceDesign:d,replaceContent:m,replaceDesignFromGallery:f,dataHelper:e}},Rf=e=>new Promise((t=>{setTimeout(t,e)})),Af="generating",Of="generated",Nf=["cta","website-main-cta-section"];class Mf{constructor(e,t,n,o,r){Ye(this,"insertBlocks",void 0),Ye(this,"queue",[]),Ye(this,"insertedSections",[]),Ye(this,"queuedSections",new Map),Ye(this,"preCreatedSections",{}),Ye(this,"pageTitle",void 0),Ye(this,"siteContext",void 0),Ye(this,"pageContext",void 0),this.pageTitle=t,this.siteContext=n,this.pageContext=o,this.notify=r,this.insertBlocks=e}initialize(e){for(const t of e){let e=t.slug;const n=Ca().generate();Nf.includes(t.category)||(e=`${t.slug}::${n}`),this.queuedSections.set(e,{id:n,itemSlug:t.slug,category:t.category,section:t,inserted:!1,blocks:null,status:null}),this.queue.push(e)}}async generateSection(e){const t=this.queuedSections.get(e),n=this.preCreatedSections[t.category];if(n)return t.status=Af,this.logInfo((0,T.sprintf)("Section was pre-created - %1$s ( %2$s )",t.itemSlug,t.id)),t.blocks=n.map(ye.transformTemplateToBlock),void(t.status=Of);if(null===t.status)try{this.logInfo((0,T.sprintf)("Start generating - %1$s ( %2$s )",t.itemSlug,t.id)),this.queuedSections.set(e,{...t,status:Af});const[n]=await tf({section:t.section,pageTitle:this.pageTitle,siteContext:this.siteContext,pageContext:this.pageContext,generateAnchorAndName:!1});this.queuedSections.set(e,{...t,blocks:n,status:Of})}catch(n){this.queue.map(((t,n)=>t===e?n:-1)).filter((e=>e>=0)).forEach((e=>this.queue.splice(e,1))),this.logError("Kubio AI section generation error",n,t.section)}}async generate(e,t={}){e&&this.notify((0,T.__)("Preparing page content","kubio")),this.preCreatedSections=t;const n=(0,ye.getBackendData)("kubioAIParallelCalls",3),o=(0,p.chunk)(this.queue,n);for(const t of o)await this.executeChunk(t,e)}async executeChunk(e,t){await Rf(t?1e3:0),await Promise.allSettled(e.map(((e,t)=>this.generateSection(e,t))))}getInsertedSections(){return this.insertedSections}async insert(){const e=this.queue[0],t=this.queuedSections.get(e);if(this.notify(((e="")=>(0,T.sprintf)(// translators: %s section name
// translators: %s section name
(0,T.__)('Generating "%s" section',"kubio"),(0,l.sectionCategoryToLabel)(e)))(t.category)),t.status!==Of)return await Rf(200),await this.insert();const n={...t,blocks:t.blocks.map((e=>{const t=(0,Ge.cloneBlock)((0,p.cloneDeep)(e)),n=(0,p.get)(e,"attributes.kubioAI.meta.category","section"),o=(0,l.sectionCategoryToLabel)(n),{name:r,anchor:i}=ef(o);return(0,p.set)(t,"attributes.anchor",i),(0,p.set)(t,"attributes.attrs.name",r),t}))};return this.insertedSections.push(n),this.queue.shift(),this.logInfo((0,T.sprintf)("Inserted - %1$s ( %2$s )",t.itemSlug,t.id)),await this.insertBlocks(n.blocks),this.queue.length?(await Rf(500),await this.insert()):void 0}logInfo(e,...t){On.Log.info(`[SectionsQueue] ${e}`,...t)}logError(e,...t){On.Log.error(`[SectionsQueue] ${e}`,...t)}}const Df=(e,t)=>{const n=(0,p.get)(e,["attributes"]),o=(0,p.get)(n,["kubio","style","descendants",t,"background"]);return{blockAttributes:n,blockBg:o,blockBgType:(0,p.get)(o,"type")}},Bf=async({imageData:e,block:t,imageDataPath:n="bgImage",styledComponent:o})=>{const{blockAttributes:r,blockBg:i,blockBgType:a}=Df(t,o);if("image"!==a)return;const l=(0,p.get)(i,["image","0","source","url"]),s=(0,p.get)(r,["kubioAI","imageTerms"]);try{const o=await(0,_.searchImages)({...zf,search:s,initialImage:l}),r=Lf(o.items,l);h().set(e,n,{currentValue:l,variants:r,clientId:t.clientId,blockName:t.name}),Ff(r)}catch(e){console.error(e)}},Lf=(e,t)=>e.filter((e=>e.split("?")[0]!==t.split("?")[0])),zf={perPage:11},Ff=e=>{e.forEach((e=>{(new window.Image).src=e}))},Gf=(0,p.debounce)(ye.scrollIntoView,300),{NAVIGATION:Hf,HERO:Uf}=(0,Se.getNamesOfBlocks)(),Wf=["home","about","features","portfolio","pricing","team","contact"],jf=(e,t,n=null)=>{e=zn(e).toHsl();const o=n||t,r=t;return zn({...e,l:Math.floor(Math.random()*(o-r+1)+r)}).toHexString()},Kf=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,u.useState)((0,T.__)("Generating…","kubio")),r=(0,b.useBlocksOwnerDocument)(),{setItems:i}=(0,Vt.usePrimaryMenuBlockEditor)(),{createErrorNotice:l}=(0,s.useKubioNotices)(),{postContentClientId:c,getHeaderClientId:m,getBlocks:y,isFSETemplate:k,themeSlug:E,nonFSEContentBlocksClientIds:S}=(0,C.useSelect)((e=>{var t;const{getClientIdsWithDescendants:n,getBlock:o,getBlocks:r}=e("core/block-editor"),{currentPageHasFSETemplate:i}=e(g.STORE_KEY),a=i(),l=e=>{const t=(0,p.castArray)(e),r=n().map((e=>o(e))).find((e=>t.includes(e.name)));return null==r?void 0:r.clientId},s=a?l("core/post-content"):null;return{isFSETemplate:a,getBlocks:r,postContentClientId:s,getHeaderClientId:()=>l("kubio/header"),getCurrentHeaderStructure:()=>{const e={};return r(l("kubio/header")).forEach((t=>{t.name===Uf&&(e.hero=(0,ye.transformBlockToTemplate)(t)),t.name===Hf&&(e.navigation=(0,ye.transformBlockToTemplate)(t))})),e},themeSlug:null===(t=e("core").getCurrentTheme())||void 0===t?void 0:t.template,nonFSEContentBlocksClientIds:r().map((({clientId:e})=>e))}}),[]),{insertBlocks:I,replaceInnerBlocks:x,clearSelectedBlock:P,removeBlocks:R}=(0,C.useDispatch)("core/block-editor"),{editEntityRecord:A,saveEntityRecord:O}=(0,C.useDispatch)("core"),{setLogoImage:N}=(0,v.useSiteLogoImages)(),[M,D]=Ta(),[B,L]=(0,_.useAIData)(),{globalStyle:z}=(0,v.useGlobalDataStyle)(),{setPalette:F}=(0,v.useGlobalDataColors)(),[,G]=(0,w.useEntityProp)("root","site","title"),H=(0,C.useSelect)((e=>{var t,n;const{getPage:o,getEntity:r}=e(g.STORE_KEY),i=(null===(t=o())||void 0===t?void 0:t.link)||null,a=(null===(n=r())||void 0===n?void 0:n.path)||null;return(i||a||"").replace(/\/$/,"")}),[]),U=(0,u.useCallback)((async e=>{await I(e,y(c).length,null===c?"":c,!1),await new Promise((t=>{setTimeout((()=>{Gf(null==r?void 0:r.querySelector(`[data-block="${e[0].clientId}"]`),{block:"center",onScrollEnd:()=>(0,p.delay)(t,200)})}),300)}))}),[r,y,c,I]),W=(0,u.useRef)(null),j=(0,u.useCallback)((e=>{const t=W.current;t&&top.requestIdleCallback((()=>{setTimeout((()=>{Gf(null==r?void 0:r.querySelector(`[data-block="${t}"]`),{block:"start",smooth:!0,onScrollEnd:e})}),500)}))}),[r]),K=(0,u.useCallback)((async()=>(P(),c?await x(c,[]):await R(S))),[P,S,c,R,x]),V=(0,u.useCallback)((e=>{const t=m();x(t,e)}),[m,x]),{frontPageEntity:$}=B,q=(0,u.useCallback)((async e=>{var t;const{pageContext:n,siteContext:o,pageTitle:r,record:i,isFrontPage:a}=e;await A("postType",i.type,i.id,{meta:{saved_in_kubio:!0},title:r,kubio_ai_page_context:n}),null!==(t=o.website_logo)&&void 0!==t&&t.id&&N(o.website_logo.id),a&&o.business_name&&G(o.business_name)}),[A,N,G]),Y=(0,C.useSelect)((e=>e(fe).getAvailablePageTemplates().map((e=>e.value)).find((e=>"full-width"===e||"kubio-full-width"===e))||"")),Z=(0,u.useCallback)((async e=>{const t=[],{siteContext:n,isFrontPage:r=!1,isRegenerate:a=!1,isMultiPage:l=!1}=e;if(r&&!a&&l){o((0,T.__)("Generating site structure ","kubio"));const e=await(0,_.generateSiteStructure)({siteContext:(0,p.omit)(n,"otherPages")});if(e.length)for(const n of e)t.push(await O("postType","page",{title:n,status:"publish",template:Y}));const r=[$,...t].filter(Boolean);if(r.length){const e=(0,Vt.generateItemInitialData)(),t=r.map(((t,n)=>({...e,id:e.id-n,type:"post_type",object:"page",objectId:t.id,label:t.title.rendered,order:n+1})));i(t)}}return(0,p.uniq)([...n.otherPages||[],...t],"id").map((e=>({id:e.id,title:(0,p.isString)(e.title)?e.title:e.title.rendered})))}),[$,Y,O,i]),X=(0,u.useCallback)((e=>{const t=(0,Vt.generateItemInitialData)();if(e.length){const n=e.filter((e=>Wf.includes(e.category))).map(((e,n)=>{const o=(0,p.get)(e.blocks,[0,"attributes","anchor"]),r=(0,p.get)(e.blocks,[0,"attributes","attrs","name"]);return{...t,id:t.id-1-n,objectId:t.id-1-n,url:`${H}/#${o}`,label:r,order:n+2}})),o=[$?{...t,id:t.id,type:"post_type",object:"page",objectId:$.id,label:$.title.rendered,order:1}:null,...n];i(o.filter(Boolean))}}),[H,$,i]),Q=(0,u.useCallback)((async e=>{var t,n;const{siteContext:r,isFrontPage:i=!1}=e;let a=(null==r?void 0:r.siteMood)||g.SITE_MOOD_VALUES.NEUTRAL,l="organization",s="both",c="",u="";const d={pattern:i?null:null===(t=e.siteContext)||void 0===t||null===(n=t.cta)||void 0===n?void 0:n.pattern,text:""};if(i){o((0,T.__)("Determine the website particularities","kubio"));try{const{mood:e,websiteSubject:t,ownerType:n,clientType:o,cta:i,coreBusiness:m}=await(0,_.determineSiteMood)({siteContext:(0,p.omit)(r,"otherPages")});a=e,l=n,s=o,u=m,d.text=i,c=t}catch(e){On.Log.error("Unable to determine site mood with AI",e)}}return On.Log.info(`Site mood is: ${a}`),{siteMood:a,cta:d,ownerType:l,clientType:s,websiteSubject:c,coreBusiness:u}}),[]),J=(0,u.useCallback)((async(e,t=3)=>{const{pageContext:n,siteContext:r,pageTitle:i}=e;o((0,T.__)("Generating page structure","kubio"));let a=await(0,_.getPageSectionsTemplates)({pageTitle:i,siteContext:r,pageContext:{...n,sortSections:!0}});if((0,p.isEmpty)(a)&&t)a=await J(e,t-1);else if((0,p.isEmpty)(a)){const e=(0,T.__)("There was an error with the KubioAI services. If the error persists, please contact support","kubio");throw new _.AIApiError(e,{cause:"empty_page_structure"})}return a}),[]),ee=(0,u.useCallback)((async(e,t)=>{const{pageContext:n,pageTitle:r,siteContext:i,isFrontPage:a=!1}=e;if(!a)return;let l=(0,p.sample)(g.colorPalettes.filter((e=>e.mood===t)));try{o((0,T.__)("Blending colors for an exceptional color palette","kubio"));const e=await(0,_.generateColorScheme)({pageContext:n,siteContext:i,pageTitle:r,mood:t});l={colors:[...e,jf(e[1],98,100),jf(e[0],5,10)]}}catch(e){On.Log.error("Error determining site colors",e)}l&&F(l.colors)}),[F]),te=(0,b.useSetGlobalSessionProp)("aiFrontPageHeroImageVariantsData"),ne=(0,u.useCallback)((async(e,t)=>{if(!k)return;const{pageContext:n,pageTitle:r,siteContext:i,isFrontPage:a=!1,isRegenerate:l}=e;if(!a)return;o((0,T.__)("Crafting an engaging website header","kubio"));let s,c=null,u=null,m=null,g=null,f=!0;l||(s=(0,_.getPageHederTemplate)(null,!0,{tag:[`theme-${E}`]})),s||(s=(0,_.getPageHederTemplate)(null,!0,{tag:[t]})),c=s.navigation,u=s.hero,m=s.bodyStyle,g=s.pairTemplate,f=s.overlappable,(0,_.setInGenerationSession)("currentHeaderIsOverlappable",f),u=(0,d.applyFilters)("kubio.ai.generateSectionBlocks.beforeBlockGenerated",u);const[b,v]=await Promise.allSettled([c?sf(Xg(c),{pageContext:n,siteContext:i,pageTitle:r}):new Promise((e=>e([]))),tf({section:{category:"hero",template:u},pageTitle:r,siteContext:i,pageContext:n})]),y=await b.value,[S]=await v.value;if(g)try{kf(g,r,i,{...n,isFrontPage:!1})}catch(e){On.Log.error("Generating inner header error",e)}return m&&top.requestIdleCallback((()=>{setTimeout((()=>{z.setStyle("",m,{styledComponent:"body",media:"desktop",mergeData:!1})}),10)})),a&&(async({heroBlock:e,setAiFrontPageHeroImageVariantsData:t})=>{const n={};await Bf({imageData:n,block:e,imageDataPath:"bgImage",styledComponent:"outer"}),await(async({imageData:e,block:t,styledComponent:n})=>{const{blockAttributes:o,blockBg:r,blockBgType:i}=Df(t,n);if("slideshow"!==i)return;const a=(0,p.get)(r,["slideshow","slides"],[]).map((e=>null==e?void 0:e.url)),l=h().get(a,0),s=(0,p.get)(o,["kubioAI","slideshowTerms",0]);try{const n=await(0,_.searchImages)({...zf,search:s,initialImage:l}),o=Lf(n.items,l);h().set(e,"bgSlideshow",{currentValue:a,variants:o,clientId:t.clientId,blockName:t.name}),Ff(o)}catch(e){console.error(e)}})({imageData:n,block:e,styledComponent:"outer"}),await(async({imageData:e,heroBlock:t})=>{const n=(0,ye.findBlockByName)(t,"kubio/image");if(!n)return;const o=(0,p.get)(n,["attributes","url"]),r=(0,p.get)(n,["attributes","kubioAI","imageTerms"]);try{const t=await(0,_.searchImages)({...zf,search:r,initialImage:o}),i=Lf(t.items,o);h().set(e,"imageBlock",{currentValue:o,variants:i,clientId:n.clientId,blockName:n.name}),Ff(i)}catch(e){console.error(e)}})({imageData:n,heroBlock:e}),await(async({imageData:e,heroBlock:t})=>{const n=(0,ye.findAllBlocksByName)(t,"kubio/column",[]);for(let t=0;t<n.length;t++){const o=n[t];await Bf({imageData:e,block:o,imageDataPath:"columnBgImage",styledComponent:"inner"})}})({imageData:n,heroBlock:e}),h().isEmpty(n)?t(null):t(n)})({heroBlock:S[0],setAiFrontPageHeroImageVariantsData:te}),V([...y,...S]),S[0].clientId}),[k,V,E,z,te]),oe=(0,b.useSetGlobalSessionProp)("showAiPostGenerateInterface"),re=(0,u.useCallback)((async()=>{const{pageContext:e,siteContext:n,pageTitle:r,isFrontPage:i=!1,isMultiPage:a}=B;t(!0),W.current=null,await q(B);const l=await Z(B),{siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:m,coreBusiness:h}=await Q(B),g={...B,siteContext:{...n,otherPages:l,isMultiPage:a,siteMood:s,clientType:c,cta:u,ownerType:d,websiteSubject:m,coreBusiness:h},pageContext:{...e,isFrontPage:i}},f=new Mf(U,r,g.siteContext,g.pageContext,o);let b=await J(g);if(i){const e=b.find((e=>"cta"===e.category));g.siteContext.cta.pattern=(0,p.cloneDeep)(e)}if(b=((e,t)=>{const{isFrontPage:n,siteContext:o}=t,r=o.cta.pattern||null;if(e=[...e],!r)return e;if(n){const t=(0,p.findIndex)(e,(e=>"features"===e.category));t>=0&&e.splice(t+1,0,r)}return e.map((e=>"cta"===e.category?{...r,slug:"website-main-cta-section"}:e))})(b,g),await K(),f.initialize(b),f.generate(i,{cta:i?null:(0,p.get)(g,"siteContext.cta.pattern.template",null)}),W.current=await ne(g,s),await ee(g,s),await f.insert(),k){const e=(0,_.getFromGenerationSession)("currentHeaderIsOverlappable",null);null!==e&&xf(e)}t(!1),D(!1);const v=f.getInsertedSections();if(i&&k&&(document.body.classList.toggle("kubio-ai-will-show-front-page-wizard",!0),a||X(v)),i){const e=v.find((e=>"cta"===e.category));e&&(g.siteContext.cta.pattern.template=e.blocks.map(ye.transformBlockToTemplate))}W.current||(W.current=(0,p.get)(v,["0","blocks","0","clientId"])),i&&((0,_.saveAiGeneralSettings)(g.siteContext),L(g)),j((()=>{i&&k&&top.requestIdleCallback((()=>{setTimeout((()=>{oe(!0)}),300)}))}))}),[B,q,Z,Q,U,J,K,ne,ee,k,D,j,oe,X,L]),[ie]=(0,_.useAIServiceInfo)(),ae=(0,u.useRef)(!1);return(0,f.useEffectAsync)((async()=>{if(!B.record||!M||!0===ae.current)return;if(null===c&&k)return;if(ie.remainingCredits<ie.perPageCredits)return(0,d.doAction)("kubio.ai.zero_credits",{type:"page_generation"}),t(!1),void D(!1);const e=performance.now(),n=(0,_.initGenerationSession)();try{(0,d.addFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration",(()=>!0)),document.body.classList.add("kubio-ai-is-page-generating"),ae.current=!0,await re()}catch(e){e instanceof _.AIApiError?On.Log.error("Page generation: AI API Error",e):(On.Log.error("Page generation: JS Error",e),l((0,T.__)("KUBIO AI: There was an unknown error. If it persists, please contact support","kubio"),{duration:3e3}))}finally{t(!1),D(!1),ae.current=!1,n(),document.body.classList.remove("kubio-ai-is-page-generating"),On.Log.success("Generation time: "+Math.ceil((performance.now()-e)/100)/10),(0,d.removeFilter)("kubio.dismissZeroCreditsModal","kubio.dismissZeroCreditsModal.pageGeneration")}}),[ie,B,D,l,re,k,c]),(0,a.createElement)(a.Fragment,null,e&&(0,a.createElement)(Qh,{message:n}))},Vf=()=>{const[e]=Ta(),t=(0,b.useGetGlobalSessionProp)("ready"),[n,o]=(0,u.useState)(),r=(0,s.useDebounce)((0,u.useCallback)((e=>o(e)),[]),300);return(0,u.useLayoutEffect)((()=>{t&&e&&r(!0)}),[t,e,r]),(0,a.createElement)(a.Fragment,null,n&&(0,a.createElement)(Kf,null))},$f=()=>{const[e,t]=(0,u.useState)(!0),[,n]=Ta(),o=(0,b.useGetGlobalSessionProp)("ready");return(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[])&&o&&e&&(0,a.createElement)(_.AIWizard,{onFinish:()=>{t(!1),n(!0)},onCancel:()=>t(!1),isFrontPage:!0,startWithAIFrontPage:!0})},qf=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})),Yf=7500,Zf=(0,u.memo)((()=>(0,a.createElement)(E.Icon,{icon:ke.DashiconCheckedIcon,className:"kubio-comparison-check-icon"}))),Xf=()=>(0,ve.upgradeToPro)({source:"ai_upgrade_modal",content:"ai_upgrade_modal"}),Qf=(0,u.memo)((()=>(0,a.createElement)(E.Icon,{icon:ke.DashiconUncheckedIcon,className:"kubio-comparison-close-icon"}))),Jf=({children:e})=>(0,a.createElement)("div",{className:"kubio-comparison-tooltip"},e),eb=["attachment","kubio_changeset"],tb=()=>{const[e]=(0,_.useAIServiceInfo)(),{aiImageCost:t=150,aiSectionCost:n=30}=e;return(0,a.createElement)(Jf,null,(0,a.createElement)("p",null,(0,T.sprintf)(// translators: %s is the number of credits
// translators: %s is the number of credits
(0,T.__)("With %s credits you'll benefit of:","kubio"),Intl.NumberFormat().format(Yf))),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,T.__)("%d full page generations","kubio"),Math.ceil(Yf/(10*n)))),(0,a.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,T.__)("%d page sections generations","kubio"),Math.ceil(Yf/n))),(0,a.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,T.__)("%d text generations","kubio"),Math.ceil(750))),(0,a.createElement)("li",null,(0,T.sprintf)(// translators: %d is the number
// translators: %d is the number
(0,T.__)("%d image generations","kubio"),Math.ceil(Yf/t)))),(0,a.createElement)("p",null,(0,T.__)("The numbers provided are approximations and may vary based on the size and complexity of the generated content","kubio")))},nb=[{label:(0,T.__)("Generate pages with AI","kubio"),free:(0,T.__)("Homepage only","kubio"),pro:(0,T.__)("Multiple pages","kubio")},{label:(0,T.__)("Regenerate page section","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Search images on Pexels","kubio"),free:(0,a.createElement)(Zf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Generate images with AI","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Kubio AI credits","kubio"),tooltip:()=>(0,a.createElement)(tb,null),free:500,pro:(0,T.sprintf)(// translators: %s is the amount of credits, e.g 7500
// translators: %s is the amount of credits, e.g 7500
(0,T.__)("Starting from %s","kubio"),Intl.NumberFormat().format(Yf))},{label:(0,T.__)("Design variety on AI generated pages","kubio"),free:(0,T.__)("Limited","kubio"),pro:(0,T.__)("Full","kubio")},{label:(0,T.__)("Customize footer text","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Sticky navigation","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("High converting navigation layouts","kubio"),tooltip:()=>(0,a.createElement)(Jf,null,(0,T.__)("Navigation layouts containing “call to action” buttons that will lead to better conversion rates.","kubio")),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Beautiful hero sections","kubio"),free:"9",pro:"35+"},{label:(0,T.__)("Different hero image for each page","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Newsletter subscription forms","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Pricing tables","kubio"),free:(0,a.createElement)(Qf,null),pro:(0,a.createElement)(Zf,null)},{label:(0,T.__)("Technical support","kubio"),free:(0,T.__)("Best effort","kubio"),pro:(0,T.__)("Priority support","kubio")}];let ob=(0,a.createElement)(a.Fragment,null);ob=({onCancel:e})=>{const[t,n]=(0,u.useState)(!1),[o,r]=(0,u.useState)(!1),i=(0,u.useRef)(),{hasDirtyEntities:l,entitiesToSave:c}=(0,C.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((({kind:e,name:t})=>"postType"===e&&!eb.includes(t))).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:d}=(0,C.useDispatch)("core"),m=(0,s.useUnloadStoreEntities)(),h=(0,u.useCallback)((()=>{m(),window.location=(0,ye.getBackendData)("wpAdminUpgradePage")}),[m]),g=(0,u.useCallback)((async()=>{n(!0);const e=c.map((({kind:e,name:t,key:n})=>d(e,t,n)));await Promise.all(e),window.location=(0,ye.getBackendData)("wpAdminUpgradePage")}),[c,d]),f=(0,u.useCallback)((()=>{l?r(!0):window.location=(0,ye.getBackendData)("wpAdminUpgradePage")}),[l]);return(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__close-modal"},(0,a.createElement)(E.Button,{icon:we,onClick:e})),(0,a.createElement)(E.Flex,null,(0,a.createElement)(E.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__content-column"},(0,a.createElement)("div",{className:"kubio-ai-zero-credits-upgrade__content-column__content"},(0,a.createElement)(E.Icon,{icon:ke.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,a.createElement)("h1",null,(0,T.__)("Looks like you have used all your free Kubio AI credits.","kubio")),(0,a.createElement)("p",null,(0,T.__)("To continue generating website content with Kubio AI you will need to upgrade to Kubio PRO.","kubio")),(0,a.createElement)("p",null,(0,T.__)("You can also continue using the Kubio builder for free and you can keep the generated content, but you won't be able to enjoy the AI features anymore.","kubio")),(0,a.createElement)("p",null,(0,T.__)("On the right, you can see a few advantages offered by the PRO version.","kubio")),(0,a.createElement)(E.Flex,{className:"buttons-wrapper",justify:"flex-start"},(0,a.createElement)(E.Button,{variant:"primary",onClick:Xf,className:"kubio-ai-button"},(0,T.__)("Upgrade to PRO","kubio")),(0,a.createElement)(E.Button,{onClick:e,className:"kubio-ai-button-tertiary"},(0,T.__)("Maybe later","kubio"))),(0,a.createElement)(E.Flex,{align:"center",className:"kubio-zero-credits-already-purchased-wrapper"},(0,a.createElement)("span",null,(0,T.__)("Already purchased?","kubio")),(0,a.createElement)(E.Button,{ref:i,onClick:f,variant:"link",className:"kubio-ai-button-link is-small kubio-ai-activate-pro"},(0,T.__)("Activate PRO now","kubio")),o&&(0,a.createElement)(E.Popover,{inline:!0,anchor:i.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0,onClose:()=>!t&&r(!1)},(0,a.createElement)(E.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start",direction:"column"},(0,a.createElement)("h3",null,(0,T.__)("The current page has unsaved changes","kubio")),(0,a.createElement)("p",null,(0,T.__)("The Kubio PRO license activation process will take you to the WordPress admin area and the page you are currently editing has unsaved changes.","kubio")),(0,a.createElement)("p",null,(0,T.__)("Would you like to save these changes or discard them?","kubio"))),(0,a.createElement)(E.Flex,{justify:"flex-start",gap:5},(0,a.createElement)(E.Button,{className:"kubio-ai-button-tertiary has-text",onClick:h},(0,T.__)("Discard & activate","kubio")),(0,a.createElement)(E.Button,{className:"kubio-ai-button has-text",isBusy:t,onClick:g},(0,T.__)("Save & activate","kubio"))))))),(0,a.createElement)(E.FlexBlock,{className:"kubio-ai-zero-credits-upgrade__bg-column"},(0,a.createElement)("table",null,(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",{className:"clear-border"}),(0,a.createElement)("th",{className:"kubio-comparison-header-free"},(0,T.__)("FREE","kubio")),(0,a.createElement)("th",{className:"kubio-comparison-header-pro"},(0,T.__)("PRO","kubio")))),(0,a.createElement)("tbody",null,nb.map((e=>(0,a.createElement)("tr",{key:e.label},(0,a.createElement)("th",{className:"label-column"},(0,a.createElement)("span",null,!e.tooltip&&(0,a.createElement)("span",null,e.label),!!e.tooltip&&(0,a.createElement)(E.Tooltip,{delay:100,className:"kubio-comparison-tooltip-title",placement:"right",text:(0,p.isFunction)(e.tooltip)?e.tooltip():e.tooltip},(0,a.createElement)("span",{className:"item-has-tooltip"},e.label,(0,a.createElement)(E.Icon,{className:"tooltip-icon",icon:qf}))))),(0,a.createElement)("td",{className:"content-column"},e.free),(0,a.createElement)("td",{className:"content-column content-column--pro"},e.pro))))))))))};const rb=()=>{const e=(0,u.useRef)({}),[t,n]=(0,u.useState)(!1),o=(0,u.useCallback)(((t={})=>{if(!(0,d.applyFilters)("kubio.dismissZeroCreditsModal",!1)){switch(t.type||"general"){case"page_generation":e.current={title:(0,T.__)("Credit status","kubio"),message:(0,T.__)("You currently do not have enough credits to generate a new page. To continue using this feature, please consider purchasing more credits.","kubio")};break;case"general":e.current={title:(0,T.__)("Credit status","kubio"),message:(0,T.__)("You currently do not have enough credits. To continue using this feature, please consider purchasing more credits","kubio")}}n(!0)}}),[]);(0,s.useAddWPAction)("kubio.ai.zero_credits",o);const[r,i]=(0,_.useAIServiceInfo)(),{createSuccessNotice:l}=(0,s.useKubioNotices)(),c=(0,u.useCallback)((async()=>{n(!1);try{const{remaining_credits:e=0,per_page_credits:t=30}=await(0,_.getAIInfo)();i({...r,state:"ready",remainingCredits:e,perPageCredits:t}),l((0,T.__)("Credit status updated!","kubio"),{type:"snackbar",duration:3e3})}catch(e){On.Log.error("Zero credits modal",e)}}),[r,l,i]),m=(0,u.useCallback)((()=>{n(!1)}),[]);return t&&(0,a.createElement)(E.Modal,{className:R()("kubio-ai-wizard-modal auto kubio-ai-zero-credits-upgrade-modal"),overlayClassName:"kubio-ai-zero-credits-upgrade__close-modal",__experimentalHideHeader:!0,title:null,isDismissible:!1},(0,a.createElement)(ob,{message:e.current.message,refresh:c,onCancel:m}))},ib=-1,ab=()=>{const{isReady:e}=Mg(),[t,n]=(0,u.useState)(0),[o,r]=(0,u.useState)(!1),[i,l]=Ta(),[s,c]=(0,b.useGlobalSessionProp)("displayingEmptyPageChecked",!0),{isAIEnabled:d,isWooPage:m}=(0,C.useSelect)((e=>({isAIEnabled:e(g.STORE_KEY).isAICapabilityEnabled(),isWooPage:e(g.STORE_KEY).getIsWooCommercePage()})),[]),{contentLength:p,isFrontPage:f,isPage:v,isBlogPage:y}=(0,C.useSelect)((e=>{var t;const{getBlocks:n,getBlockOrder:o}=e("core/block-editor"),r=n()||[],{getIsFrontPage:i=h().noop,getPage:a=h().noop,getIsBlogPage:l=h().noop}=e("kubio/edit-site")||{},s=a()||{},c=(0,ye.findBlockByName)(r,"core/post-content"),u=null==c?void 0:c.clientId;return{isFrontPage:i(),isBlogPage:l(),contentLength:null===(t=o(u))||void 0===t?void 0:t.length,isPage:"page"===h().get(s,"context.postType")}}));return(0,u.useEffect)((()=>{e&&n(0)}),[e]),(0,u.useLayoutEffect)((()=>{if(t!==ib&&e&&d)if(i)n(ib);else if(v&&!f&&!m&&!y)return p?void n(ib):s?n(1):(n(ib),void c(!1))}),[e,p,f,v,i,d,o,t,s,c,m,y]),(0,a.createElement)(a.Fragment,null,1===t&&(0,a.createElement)(eg,{showButton:!1,initialModalIsVisible:!0,onNewAiPage:()=>{n(ib),r(!0)},onNewKubioPage:()=>{n(ib)},onCancel:()=>{n(ib)},title:(0,T.__)("Generate page content","kubio"),description:(0,T.__)("Choose a method to generate content for the current page","kubio")}),o&&(0,a.createElement)(_.AIWizard,{onFinish:()=>{n(ib),r(!1),l(!0)},onCancel:()=>{n(ib),r(!1)},isRegenerate:!0,forceGenerateTitle:!0}))},lb=({enabled:e})=>{const t=(0,b.useGetGlobalSessionProp)("ready",!1),[n,o]=(0,b.useGlobalSessionProp)("AIFromGetStartedTriggered",!1),[r]=(0,_.useAIData)(),[i,l]=(0,_.useAIServiceInfo)(),[,s]=Ta();return(0,u.useEffect)((()=>{}),[l]),(0,u.useEffect)((()=>{if(e&&!n&&"ready"===i.state&&t&&r.isAIConnected){async function a(){l(await(0,_.getAIInfo)()),o(!0),s(!0)}a()}}),[r.isAIConnected,i.state,e,t,s,o,n,l]),(0,a.createElement)(a.Fragment,null)},sb=()=>{const[e,t]=(0,b.useGlobalSessionProp)("commercialFlowDisabled",!0),n=(0,C.useSelect)((e=>e("core").getCurrentTheme().template));(0,u.useEffect)((()=>{ye.AI_IN_PRO&&(async()=>{const e=await Sn()({path:"kubio/v1/commercial-flow",method:"GET"}).then((e=>e));t(!(null==e||!e.disabled))})()}),[ye.AI_IN_PRO]);const o=async()=>{t(!0),await Sn()({path:"kubio/v1/commercial-flow",method:"POST",data:{disabled:!0}})};if(ye.AI_IN_PRO&&!e)return(0,a.createElement)(E.Modal,{onRequestClose:()=>{},className:"kubio-ai-commercial-flow-modal",overlayClassName:"kubio-ai-commercial-flow-modal__overlay",isDismissible:!1,title:"",onKeyDown:e=>{"Escape"===e.key&&o()},__experimentalHideHeader:!0},(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__close-modal"},(0,a.createElement)(E.Button,{icon:we,onClick:o})),(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__content"},(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__content__video"},(0,a.createElement)("iframe",{src:"https://player.vimeo.com/video/901485891?h=28cd98f111&title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&muted=1",width:"100%",height:"auto",frameBorder:"0",allow:"autoplay; fullscreen;",allowFullScreen:!0,title:(0,T.__)("Get started with Kubio AI","kubio")})),(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__content__text"},(0,a.createElement)(E.Icon,{icon:ke.KubioAI,className:"kubio-ai-logo-colored"}),(0,a.createElement)("h3",null,(0,T.__)("Let's get your homepage done in 30 seconds, using AI","kubio")),(0,a.createElement)("p",null,(0,T.__)("We'll bet you didn't think you could get your website done this fast. Upgrade to Kubio PRO to be able to generate your pages for you in seconds! It's incredibly simple:","kubio")),(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,a.createElement)("span",null," ",(0,T.__)("Step 1","kubio")," "),(0,T.__)("Insert a quick description of your site","kubio")),(0,a.createElement)("li",null,(0,a.createElement)("span",null," ",(0,T.__)("Step 2","kubio")," "),(0,T.__)("Get a customized homepage, including text, images, colour schemes, typography, forms and social media integration.","kubio"))),(0,a.createElement)("p",null,(0,T.__)("It really is that simple! To get started, simply upgrade to PRO below:","kubio")),(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__content__text__buttons-container"},(0,a.createElement)(E.Button,{className:"kubio-ai-button",onClick:()=>{window.open((0,Cn.addQueryArgs)(window.kubioUtilsData.upgrade_url,{utm_source:"ai-demo-modal",utm_medium:"editor"}),"_blank")}},(0,T.__)("Upgrade to PRO","kubio"))),(0,a.createElement)("div",{className:"kubio-ai-commercial-flow-modal__content__text__footer"},(0,a.createElement)("p",null,(0,T.__)("Curious to see it in action?","kubio")),(0,a.createElement)("a",{target:"_blank",href:window.kubioUtilsData.try_starter_site.split("?").join(`/${n}?`),rel:"noreferrer"},(0,T.__)("Try it free on a separate test site.","kubio"))))))},cb={secondarySidebar:(0,T.__)("Block Library","kubio"),drawer:(0,T.__)("Navigation Sidebar","kubio")},ub=["label",'[class*="-label"]',".components-base-control__label",".component-box-control__label"].join(","),db=(0,S.createHigherOrderComponent)((e=>({initialSettings:t})=>{var n,o,r,i;const{isFullscreenActive:l,sidebarIsOpened:c,settings:d,templateId:m,templateType:f,page:b,isNavigationOpen:_,isInserterOpen:v,isListViewOpen:y,isFSETemplate:k,currentSidebar:E}=(0,C.useSelect)((e=>{const{isFeatureActive:t,getSettings:n,getEditedPostType:o,getEditedPostId:r,getPage:i,isNavigationOpened:a,isListViewOpened:l,getEditorOpenedSidebar:s}=e(g.STORE_KEY),c=o(),u=r();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(g.STORE_KEY).isEditorSidebarOpened(),settings:n(),templateType:c,page:i(),templateId:u,isNavigationOpen:a(),isInserterOpen:e(g.STORE_KEY).getOpenedInserter(),isFSETemplate:!!u&&!!c,isListViewOpen:l(),currentSidebar:s()}}),[]),{postId:S,post:w,currentTemplateId:x,isKubioTheme:P}=(0,C.useSelect)((e=>{const t=h().get(b,["context","postId"]),n=h().get(b,["context","postType"]),{getEntityRecords:o,getEntityRecord:r}=e("core"),{getTemplateId:i=h().noop}=e("kubio/edit-site");if(!t||!n)return{postId:null,currentTemplateId:null,isKubioTheme:null,post:{}};let a;if(["wp_template","wp_template_part"].includes(n)){const e=o("postType",n,{wp_id:t});a=null==e?void 0:e[0]}else a=r("postType",n,parseInt(t));const l=i(),{getEditorSettings:s}=e(I.store);return{postId:t,currentTemplateId:l,isKubioTheme:s().supportsTemplateMode,post:a}}),[null==b||null===(n=b.context)||void 0===n?void 0:n.postId,null==b||null===(o=b.context)||void 0===o?void 0:o.postType]),{openSidebar:R}=(0,C.useDispatch)(g.STORE_KEY),{createInfoNotice:A}=(0,C.useDispatch)("core/notices");(0,u.useEffect)((()=>{R("document")}),[]);const{editEntityRecord:O}=(0,C.useDispatch)("core"),{updateEditorSettings:N,setupEditorState:M}=(0,C.useDispatch)("core/editor"),{defaultTemplateTypes:D}=d;(0,u.useEffect)((()=>{N({...t,defaultTemplateTypes:D})}),[D,t,N]),(0,u.useLayoutEffect)((()=>{const e=h().get(b,["context","postId"]),t=h().get(b,["context","postType"]);e&&t&&M({id:e,type:t})}),[null==b||null===(r=b.context)||void 0===r?void 0:r.postId,null==b||null===(i=b.context)||void 0===i?void 0:i.postType]),(0,u.useLayoutEffect)((()=>{var e;if(w&&"page"===w.type&&(null===(e=w.meta)||void 0===e||!e.saved_in_kubio)&&(0,p.isString)(x)){const e=P?"full-width":"kubio-full-width",t=x.includes(e),n=h().get(w,["content","raw"]),o=h().get(w,"template"),r=h().get(w,"id"),i=h().get(w,"type");!n&&t&&""===o&&((0,s.markLastChangeAsPersistent)(),O("postType",i,r,{template:e}),A((0,T.__)('New empty page detected. Page template was set to "Full Width"',"kubio"),{type:"snackbar"}))}}),[x,O,P,w,S]);const B={startGeneratingAIFrontPage:t.startGeneratingAIFrontPage,isListViewOpen:y,isFullscreenActive:l,sidebarIsOpened:c,templateId:m,templateType:f,page:b,isNavigationOpen:_,isInserterOpen:v,isFSETemplate:k,currentSidebar:E,startWithAIFrontPage:d.startWithAIFrontPage||!1,__experimentalGlobalStylesBaseStyles:d.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:d.__experimentalGlobalStylesUserEntityId};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(e,{...B}),(0,a.createElement)(Ag,null))}),"WithEditorCurrentEntity"),mb=(0,S.compose)(db,S.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:n,templateId:o,templateType:r,page:i,isNavigationOpen:c,isInserterOpen:d,isListViewOpen:m,isFSETemplate:p,startWithAIFrontPage:h,currentSidebar:S,startGeneratingAIFrontPage:x}=e,{setPage:P}=(0,C.useDispatch)("core/editor"),A=(0,s.useActiveMedia)(),[O,N]=(0,u.useState)(!1),M=(0,u.useCallback)((()=>N(!0)),[]),D=(0,u.useCallback)((()=>{N(!1)}),[]);!function(){const{hasBlockSelection:e,isEditorSidebarOpened:t,isGlobalStyleEditing:n}=(0,C.useSelect)((e=>({hasBlockSelection:!!e("core/block-editor").getBlockSelectionStart(),isEditorSidebarOpened:e(g.STORE_KEY).isEditorSidebarOpened(),isGlobalStyleEditing:e(g.STORE_KEY).isGlobalStyleEditing()})),[]),{openSidebar:o}=(0,C.useDispatch)(g.STORE_KEY);(0,u.useEffect)((function(){t&&o(e?"block-inspector":n?"document/general-settings":"document")}),[e,t,n])}(),(()=>{const[e,t]=(0,u.useState)({}),[,n]=(0,_e.useCurrentInspectorTab)(),o=(0,C.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{clientId:null==t?void 0:t.clientId,name:null==t?void 0:t.name}}));(0,u.useEffect)((()=>{(null==e?void 0:e.clientId)!==(null==o?void 0:o.clientId)&&(null==e?void 0:e.name)!==(null==o?void 0:o.name)&&(n("content"),t(o))}),[o,e,t,n])})();const B=(0,b.useGetGlobalSessionProp)("ready",!1),L=(0,u.useMemo)((()=>({...null==i?void 0:i.context,queryContext:[(null==i?void 0:i.context.queryContext)||{page:1},e=>P({...i,context:{...null==i?void 0:i.context,queryContext:{...null==i?void 0:i.context.queryContext,...e}}})]})),[i,P]);(0,u.useEffect)((()=>{c?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[c]),(0,u.useEffect)((()=>(0,l.initializeGutentagPatterns)()),[]);const{uiVersion:z}=(0,f.useUIVersion)(),F=R()("kubio-sidebar",{"kubio-sidebar-hidden":(!n||d||m)&&1===z}),G=R()("kubio-secondary-sidebar",{"kubio-secondary-sidebar--closed":!(d||m),"kubio-secondary-sidebar-hidden":!(d||m)&&1===z}),{createErrorNotice:H}=(0,C.useDispatch)("core/notices");let U=(0,a.createElement)(a.Fragment,null),W=(0,a.createElement)(a.Fragment,null);const j=(0,u.useCallback)((e=>{const t=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(!e.querySelectorAll)return;const t=[...e.querySelectorAll(ub)||[]];e.matches(ub)&&t.push(e),t.length&&t.forEach((t=>{if(e.getAttribute("label"))return;const n=t.textContent.trim();n&&t.setAttribute("title",n)}))}))}))}));return e&&t.observe(e,{childList:!0,subtree:!0}),()=>{t.disconnect()}}),[]);B&&(2===z?W=(0,a.createElement)("div",{className:"kubio-sidebar-v2-wrapper"},m&&(0,a.createElement)("div",{className:"kubio-sidebar-list-view"},(0,a.createElement)(Rg,null)),(0,a.createElement)("div",{id:"kubio-main-sidebar",className:F,"data-sidebar-name":S,ref:j},(0,a.createElement)(me.Slot,{scope:`${g.STORE_KEY}/sidebars`}),(0,a.createElement)(Ri,null)),(0,a.createElement)("div",{className:G},d&&(0,a.createElement)(xe,null))):(U=(0,a.createElement)("div",{id:"kubio-main-sidebar",className:F,"data-sidebar-name":S,ref:j},(0,a.createElement)(me.Slot,{scope:`${g.STORE_KEY}/sidebars`}),(0,a.createElement)(Ri,null)),W=(0,a.createElement)("div",{className:G},d&&(0,a.createElement)(xe,null),m&&(0,a.createElement)(Rg,null))));const K=(0,a.createElement)(Dg,{blockContext:L,templateId:o,templateType:r,page:i},(0,a.createElement)(_.AIDataProvider,null,(0,a.createElement)(v.KubioGlobalDataContextProvider,null,(0,a.createElement)(Wt,null,(0,a.createElement)(y.GlobalStylesProvider,null,(0,a.createElement)(k.BlockContextProvider,{value:L},(0,a.createElement)(Lg,null),(0,a.createElement)(jh.Register,null),(0,a.createElement)(Ai,null),(0,a.createElement)(Yg,null,(0,a.createElement)(he,{labels:cb,drawer:(0,a.createElement)(xg,null),sidebar:U,secondarySidebar:W,header:(0,a.createElement)(Uh,{openEntitiesSavedStates:M}),notices:(0,a.createElement)(Pg,null),content:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(I.EditorNotices,null),p&&(0,a.createElement)(ha,null),!p&&(0,a.createElement)(ga,null),(0,a.createElement)(jh,{openEntitiesSavedStates:M}),(0,a.createElement)("div",{id:"kubio-toolbar-boundary"})),actions:(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ea,{isOpen:O,close:D})),footer:(0,a.createElement)(k.BlockBreadcrumb,null)})),(0,u.createPortal)((0,a.createElement)("div",{className:"kubio-popover-slot-container"},(0,a.createElement)(E.Popover.Slot,null),(0,a.createElement)(E.Popover.Slot,{name:"kubio-popover-slot"})),document.body),(0,a.createElement)(J.PluginArea,{onError:function(e){H((0,T.sprintf)(/* translators: %s: plugin name */ /* translators: %s: plugin name */(0,T.__)('The "%s" plugin has encountered an error and cannot be rendered.',"kubio"),e))}}),(0,a.createElement)(Vf,null))))),(0,a.createElement)(ab,null),(0,a.createElement)(lb,{enabled:x})));return(0,a.createElement)("div",{className:R()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${A}`)},(0,a.createElement)(E.SlotFillProvider,null,(0,a.createElement)(pe,{isActive:!0}),(0,a.createElement)(I.UnsavedChangesWarning,null),(0,a.createElement)(ge.ShortcutProvider,{style:{height:"100%"}},(0,a.createElement)(w.EntityProvider,{kind:"root",type:"site"},p&&(0,a.createElement)(w.EntityProvider,{kind:"postType",type:r,id:o},(0,a.createElement)(w.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t},K)),!p&&K)),B&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(fa,null),(0,a.createElement)(Kh,{blockContext:L,templateId:o,templateType:r,page:i}),ye.AI_IN_PRO&&(0,a.createElement)(sb,null)),h&&(0,a.createElement)($f,null),(0,a.createElement)(rb,null)))})),pb=window.wp.mediaUtils;(0,d.addFilter)("editor.MediaUpload","kubio/edit-site/components/media-upload",(()=>pb.MediaUpload)),(0,d.addFilter)("editor.BlockEdit","kubio/advancedPanel",Io.withInspectorControlsAdvancedPanel);const hb=window.wp.dataControls,gb={fullscreenMode:!0},fb=(0,C.combineReducers)({features:(e=gb,t)=>"TOGGLE_FEATURE"===t.type?{...e,[t.feature]:!e[t.feature]}:e}),bb=(0,C.combineReducers)({preferences:fb,deviceType:function(e="Desktop",t){return"SET_PREVIEW_DEVICE_TYPE"===t.type?t.deviceType:e},settings:function(e={},t){switch(t.type){case"UPDATE_SETTINGS":return{...e,...t.settings};case"UPDATE_UI_VERSION":return Sn()({path:(0,Cn.addQueryArgs)("/kubio/v1/update-ui-version",{version:t.version})}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorUIVersion:t.version}};case"TOGGLE_AI_CAPABILITIES":return Sn()({path:"/kubio/v1/update-enable-ai-capabilities",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},enableAICapabilities:t.value}};case"UPDATE_EDITOR_MODE":return Sn()({path:"/kubio/v1/update-editor-mode",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorMode:t.value}};case"UPDATE_EXCLUDED_SECTION_CATEGORIES":return Sn()({path:"/kubio/v1/update-excluded-section-categories",method:"POST",data:{value:t.value}}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},excludedSectionCategories:t.value}}}return e},editedPost:function(e={},t){switch(t.type){case"SET_TEMPLATE":case"SET_PAGE":return{type:"wp_template",id:t.templateId,page:t.page};case"SET_PAGE_CONTENT":return{page:t.page};case"SET_TEMPLATE_PART":return{type:"wp_template_part",id:t.templatePartId,page:{context:{}}}}return e},homeTemplateId:function(e,t){return"SET_HOME_TEMPLATE"===t.type?t.homeTemplateId:e},navigationPanel:function(e={menu:Pa,isOpen:!1},t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return{...e,isOpen:!0,menu:t.menu};case"SET_IS_NAVIGATION_PANEL_OPENED":return{...e,menu:t.isOpen?e.menu:Pa,isOpen:t.isOpen};case"SET_IS_INSERTER_OPENED":return{...e,menu:e.isOpen&&t.isOpen?Pa:e.menu,isOpen:!t.isOpen&&e.isOpen}}return e},blockInserterPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.isOpen}return e},currentAncestor:function(e="",t){return"SET_CURRENT_ANCESTOR"===t.type?t.currentAncestor:e},templateId:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return t.templateId;case"SET_TEMPLATE_PART":return}return e},templatePartId:function(e,t){return"SET_TEMPLATE_PART"===t.type?t.templatePartId:e},templateType:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return"wp_template";case"SET_TEMPLATE_PART":return"wp_template_part"}return e},templateIds:function(e=[],t){switch(t.type){case"ADD_TEMPLATE":return[...e,t.templateId];case"REMOVE_TEMPLATE":return e.filter((e=>e!==t.templateId))}return e},templatePartIds:function(e=[]){return e},page:function(e={},t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":case"SET_TEMPLATE":return t.page;case"SET_TEMPLATE_PART":return{context:{}}}return e},entity:function(e={},t){return"SET_ENTITY"===t.type?t.entity:e},showOnFront:function(e){return e},subSidebars:function(e={},t){switch(t.type){case"ADD_SUBSIDEBAR":return e[t.areaIdentifier]?e:{...e,[t.areaIdentifier]:t.sidebar};case"REMOVE_SUBSIDEBAR":return{...e,[t.areaIdentifier]:!1}}return e},globalStyleEditing:function(e={value:void 0,previousEntity:null},t){return"TOGGLE_GLOBAL_STYLE_EDITING"===t.type?{...e,value:t.value,previousEntity:t.previousEntity}:e},openedInserter:function(e=!1,t){return"TOGGLE_IS_INSERTER_OPEN"===t.type?(t.options=t.options||{},Mn()(e,t)?e:{value:null==t?void 0:t.value,clientId:null==t?void 0:t.rootClientId,options:(null==t?void 0:t.options)||{}}):e},isGutentagDebug:function(e=!1,t){return"TOGGLE_GUTENTAG_DEBUG"===t.type?null==t?void 0:t.value:e},classicTemplate:function(e,t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":return{...e,id:null==t?void 0:t.classicTemplateId}}return e},listViewPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e},aiInfo:function(e={remainingCredits:0},t){return"UPDATE_AI_INFO"===t.type?(0,p.merge)(e,(0,p.cloneDeep)(t.value||{})):e},isChangingPage:function(e=!1,t){return"SET_PAGE"===t.type&&(e=!!t.changingPage),e}}),{select:_b,dispatch:vb}=C.controls;function yb(e){return{type:"TOGGLE_FEATURE",feature:e}}function kb(e){return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}}function*Eb(e,t,n=!1){const o={templateSlug:t};if(!t){const t=yield C.controls.resolveSelect("core","getEntityRecord","postType","wp_template",e);o.templateSlug=null==t?void 0:t.slug}return{type:"SET_TEMPLATE",templateId:e,page:{context:n?{}:o}}}function*Sb(e){const t=yield C.controls.dispatch("core","saveEntityRecord","postType","wp_template",e);return{type:"SET_TEMPLATE",templateId:t.id,page:{context:{templateSlug:t.slug}}}}function*wb(e){yield(0,hb.apiFetch)({path:`/wp/v2/templates/${e}`,method:"DELETE"});const t=yield C.controls.select(g.STORE_KEY,"getPage");yield C.controls.dispatch(g.STORE_KEY,"setPage",t)}function Cb(e){return{type:"SET_TEMPLATE_PART",templatePartId:e}}function Ib(e){return{type:"SET_HOME_TEMPLATE",homeTemplateId:e}}function*Tb(e,t,n=!0){var o;if(null===e)return{type:"SET_PAGE",page:null,templateId:null,changingPage:!0};if(!e.path&&null!==(o=e.context)&&void 0!==o&&o.postId){const t=yield C.controls.resolveSelect("core","getEntityRecord","postType",e.context.postType||"post",e.context.postId);e.path=(0,Cn.getPathAndQueryString)(t.link)}if(!n)return void(yield{type:"SET_PAGE_CONTENT",page:e,classicTemplateId:""!==t?t:"page.php"});let r;if(!t&&n&&(r=yield C.controls.resolveSelect("core","__experimentalGetTemplateForLink",(0,Cn.addQueryArgs)(e.path,{_:Date.now()})),!r))return void(yield{type:"SET_PAGE",page:e,templateId:null});const i=t||r,{id:a,slug:l}=i;return yield{type:"SET_PAGE",page:l?{...e,context:{...e.context,templateSlug:l}}:e,templateId:a},a}function*xb(){const{show_on_front:e,page_on_front:t}=yield C.controls.resolveSelect("core","getEntityRecord","root","site"),{siteUrl:n}=yield C.controls.select(g.STORE_KEY,"getSettings"),o={path:n,context:"page"===e?{postType:"page",postId:t}:{}},r=yield*Tb(o);if(!r)return{type:"GUTENTAG_NO_ACTION"};yield Ib(r)}function Pb(e){return{type:"OPEN_NAVIGATION_PANEL_TO_MENU",menu:e}}function Rb(e){return{type:"SET_IS_NAVIGATION_PANEL_OPENED",isOpen:e}}function Ab(e){return{type:"UPDATE_SETTINGS",settings:e}}function*Ob(e){return yield vb("core/interface","enableComplementaryArea",`${g.STORE_KEY}/sidebars`,`${g.STORE_KEY}/sidebar/${e}`)}function*Nb(){return yield vb("core/interface","enableComplementaryArea",`${g.STORE_KEY}/sidebars`,`${g.STORE_KEY}/sidebar/block-inserter`)}function*Mb({areaIdentifier:e,sidebar:t}){return{type:"ADD_SUBSIDEBAR",sidebar:t,areaIdentifier:e}}function*Db({areaIdentifier:e}){return{type:"REMOVE_SUBSIDEBAR",areaIdentifier:e}}function*Bb(){yield vb("core/interface","disableComplementaryArea",`${g.STORE_KEY}/sidebars`)}function*Lb(e,t=null){return{type:"TOGGLE_GLOBAL_STYLE_EDITING",value:e,previousEntity:t}}function*zb(e){return{type:"TOGGLE_GUTENTAG_DEBUG",value:e}}function*Fb(e,t=!1,n={}){return{type:"TOGGLE_IS_INSERTER_OPEN",value:e,rootClientId:t||!1,options:{closeOnSelect:!1,replace:!1,...n}}}function Gb(e){return{type:"SET_CURRENT_ANCESTOR",currentAncestor:e}}function Hb(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}function Ub(e){return{type:"UPDATE_UI_VERSION",version:e}}function Wb(e){return{type:"UPDATE_EDITOR_MODE",value:e}}function jb(e){return{type:"TOGGLE_AI_CAPABILITIES",value:e}}function Kb(e){return{type:"UPDATE_AI_INFO",value:e}}function Vb(e){return{type:"UPDATE_EXCLUDED_SECTION_CATEGORIES",value:e}}var $b,qb;function Yb(e){return[e]}function Zb(e){return!!e&&"object"==typeof e}function Xb(){var e={clear:function(){e.head=null}};return e}function Qb(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function Jb(e,t){var n,o;function r(){n=qb?new WeakMap:Xb()}function i(){var n,r,i,a,l,s=arguments.length;for(a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];for(l=t.apply(null,a),(n=o(l)).isUniqueByDependants||(n.lastDependants&&!Qb(l,n.lastDependants,0)&&n.clear(),n.lastDependants=l),r=n.head;r;){if(Qb(r.args,a,1))return r!==n.head&&(r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.next=n.head,r.prev=null,n.head.prev=r,n.head=r),r.val;r=r.next}return r={val:e.apply(null,a)},a[0]=null,r.args=a,n.head&&(n.head.prev=r,r.next=n.head),n.head=r,r.val}return t||(t=Yb),o=qb?function(e){var t,o,r,i,a=n,l=!0;for(t=0;t<e.length;t++){if(!Zb(o=e[t])){l=!1;break}a.has(o)?a=a.get(o):(r=new WeakMap,a.set(o,r),a=r)}return a.has($b)||((i=Xb()).isUniqueByDependants=l,a.set($b,i)),a.get($b)}:function(){return n},i.getDependants=t,i.clear=r,r(),i}$b={},qb="undefined"!=typeof WeakMap;const e_=Object.values(s.defaultTemplatesByPostType).map((e=>`${e}.php`));function t_(e,t){return"fullscreenMode"===t||"fixedToolbar"!==t&&(0,p.get)(e.preferences.features,[t],!1)}function n_(e){return e.deviceType}const o_=(0,C.createRegistrySelector)((e=>()=>e("core").canUser("create","media"))),r_=Jb(((e,t)=>{const n={...e.settings,outlineMode:!0,focusMode:t_(e,"focusMode"),hasFixedToolbar:t_(e,"fixedToolbar"),__experimentalSetIsInserterOpened:t};return o_(e)?(n.mediaUpload=({onError:t,...n})=>{(0,pb.uploadMedia)({wpAllowedMimeTypes:e.settings.allowedMimeTypes,onError:({message:e})=>t(e),...n})},n):n}),(e=>[o_(e),e.settings,t_(e,"focusMode"),t_(e,"fixedToolbar")]));function i_(e){return e.homeTemplateId}function a_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.type}function l_(e){var t;return null===(t=e.editedPost)||void 0===t?void 0:t.id}function s_(e){return e.editedPost.page}function c_(e){return e.navigationPanel.isOpen}function u_(e){var t;return null===(t=e.navigationPanel)||void 0===t?void 0:t.menu}function d_(e){return e.blockInserterPanel}function m_(e){return e.templateId}function p_(e){return e.templatePartId}function h_(e){return e.templateType}function g_(e){return e.templateIds}function f_(e){return e.templatePartIds}function b_(e){return e.entity}function v_(e){return e.showOnFront}const y_=(0,C.createRegistrySelector)((e=>(t,n=null)=>{const o=e("core/interface").getActiveComplementaryArea(`${g.STORE_KEY}/sidebars`);return n?o===`${g.STORE_KEY}/sidebar/${n}`:!(0,p.isEmpty)(o)}));function k_(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.value}function E_(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.clientId}function S_(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.replace)}function w_(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.closeOnSelect)}function C_(e){return e.currentAncestor}function I_(){return(0,C.select)("core/interface").getActiveComplementaryArea(`${g.STORE_KEY}/sidebars`)}function T_(e){return e.subSidebars}function x_(e){return e.globalStyleEditing.value}function P_(e){return e.globalStyleEditing.previousEntity}function R_(e){return e.isGutentagDebug}function A_(e){const{rootClientId:t,insertionIndex:n}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:n}}function O_(e){return e.listViewPanel}const N_=e=>{var t;const{templateId:n,templateType:o}=e;return n&&o&&(null===(t=(0,C.select)("core").getEditedEntityRecord("postType",o,n))||void 0===t?void 0:t.kubio_template_source)||null},M_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;let o=null;var r,i,a;o=null!=n&&n.postType&&null!=n&&n.postId?n.templateSlug?n.templateSlug:null!==(r=(0,C.select)("core").getEditedEntityRecord("postType",null==n?void 0:n.postType,null==n?void 0:n.postId).template)&&void 0!==r?r:null:null!==(i=null===(a=e.templateId)||void 0===a?void 0:a.split("//").pop())&&void 0!==i?i:null;const l=(0,C.select)("core").getEditedEntityRecord("root","site");if("page"===l.show_on_front&&l.page_on_front===parseInt(null==n?void 0:n.postId)){const e=((0,C.select)("core").getEntityRecords("postType","wp_template",{per_page:-1})||[]).map((({id:e})=>e.split("//").pop())).includes("front-page"),{classicHasFrontPageTemplate:t}=(0,C.select)("core/block-editor").getSettings();if(e||t)return"front-page"}return""===o&&(o="page"===(null==n?void 0:n.postType)?"page":"single"),o},D_=e=>{const t=M_(e),n=(0,C.select)("core").getEntityRecords("postType","wp_template",{per_page:-1});return!!t&&(n||[]).map((({id:e})=>e.split("//").pop())).includes(t)},B_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postType)||null},L_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postId)||null},z_=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context,o=(0,C.select)("core").getEditedEntityRecord("root","site"),r=null==o?void 0:o.page_for_posts;return parseInt(r)===parseInt(null==n?void 0:n.postId)},F_=e=>{var t,n;const o=s_(e),r="front-page"===(null==o||null===(t=o.context)||void 0===t?void 0:t.templateSlug),i=(0,C.select)("core").getEditedEntityRecord("root","site"),a=null==i?void 0:i.page_on_front,l=null==o||null===(n=o.context)||void 0===n?void 0:n.postId,s="page"===i.show_on_front&&parseInt(a)===parseInt(l);return r||s},G_=e=>{const t=(0,C.select)("core").getEditedEntityRecord("root","site"),n=s_(e),o=h().get(n,"context",{}),{postType:r,postId:i}=o,a="page"===(null==t?void 0:t.show_on_front),l=null==t?void 0:t.page_on_front,s=a&&parseInt(l)===parseInt(i),c=a&&parseInt(null==t?void 0:t.page_for_posts)===parseInt(i);return"page"===r&&!c&&!s},H_=()=>{var e,t;const n=(null===(e=(0,C.select)("core").getEntityRecords("postType","wp_template",{per_page:-1}))||void 0===e?void 0:e.filter((({slug:e})=>(0,s.currentTemplateIsPage)(e))))||[],o=(null===(t=(0,C.select)("core/block-editor").getSettings())||void 0===t?void 0:t.classicThemeTemplates)||[],r=n.map((({title:e,slug:t,kubio_template_source:n="custom"})=>({value:t,label:"kubio"===n?e.rendered.replace("Kubio","").trim():e.rendered,source:n})));return Object.keys(o).forEach((e=>{const t=o[e];(0,p.find)(n,{slug:e.replace(".php","")})||r.push({value:e_.includes(e)?e.replace(".php",""):e,label:t,isClassicTemplate:!0,source:"theme"})})),r.forEach((e=>{"page"===e.value&&(e.value="")})),h().sortBy(r,["source","label"])};function U_(e){var t;return null==e||null===(t=e.classicTemplate)||void 0===t?void 0:t.id}function W_(e){var t,n;const o=s_(e),r=h().get(o,"context",{}),{postType:i,postId:a}=r,l=null===(t=(0,C.select)("core/block-editor").getSettings())||void 0===t||null===(n=t.kubioBasicWooCommerce)||void 0===n?void 0:n.pagesIds;return"product"===i||Object.values(l||{}).includes(parseInt(a))}const j_=Jb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorUIVersion)||1}),(e=>[e.settings])),K_=Jb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.enableAICapabilities)||!1}),(e=>[e.settings])),V_=Jb((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorMode)||"full"}),(e=>[e.settings])),$_=e=>"simple"===V_(e),q_=e=>e.aiInfo||{remainingCredits:0,isStub:!0},Y_=e=>!0===e.isChangingPage;function Z_(e){return e.canvasMode}const X_=e=>{var t,n;return(null===(t=e.settings)||void 0===t||null===(n=t.kubioGlobalSettings)||void 0===n?void 0:n.excludedSectionCategories)||[]},Q_={reducer:bb,actions:r,selectors:i,controls:hb.controls,persist:["preferences"]};async function J_(e){return(0,C.registerStore)(fe,{...Q_,initialState:e})}const ev=(0,u.forwardRef)((({menuItems:e,toggleButton:t,onClose:n,onOpen:o,popoverProps:r,className:i},l)=>{const[s,c]=(0,u.useState)(!1),d=(0,u.useCallback)((e=>{c(e),e?null==o||o():null==n||n()}),[c,o,n]),m=(0,u.useRef)();return(0,u.useImperativeHandle)(l,(()=>({getPopupIsVisible:()=>s}))),(0,a.createElement)(Ue.DropdownWithHover,{className:R()("kubio-dropdown-with-hover__section-options",i),ref:m,onToggle:d,toggleElement:t,popoverProps:{className:"kubio-ai-design-section-button__dropdown__popup",...r}},(0,a.createElement)(tv,{dropdownRef:m,menuItems:e}))})),tv=({dropdownRef:e,menuItems:t})=>{const n=h().get(e,["current","onClose"],h().noop);return(0,a.createElement)(E.MenuGroup,null,t.map((({label:e,description:t,icon:o,onClick:r,className:i,isPro:l,urlArgs:s,...c},u)=>{const d=l?ve.ProItem:E.MenuItem;return(0,a.createElement)(d,{...s,tag:E.MenuItem,key:u,onClick:async()=>{await r(),n()},...c},(0,a.createElement)("div",{className:R()("kubio-ai-design-section-button__dropdown",i)},(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__icon"},(0,a.createElement)(E.Icon,{icon:o})),(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content"},(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__label"},e),(0,a.createElement)("div",{className:"kubio-ai-design-section-button__dropdown__content__description"},t))))})))},nv=({setVisible:e,sectionRef:t,onChangeSection:n,askForSummary:o=!0,isNewSection:r=!1})=>{var i,l,s,c;const{replaceDesign:d,replaceContent:m,dataHelper:p}=Pf(),[h,g]=(0,u.useState)((()=>r?"":p.getAttribute("kubioAI.meta.summary",""))),f=(0,u.useRef)(!1),b=(0,u.useCallback)((async n=>{if(e(!1),!f.current)try{var o;switch(f.current=!0,null===(o=t.current)||void 0===o?void 0:o.type){case"surprise":await d(null,{summary:n,currentSectionCloudId:p.getAttribute("kubioAI.meta.cloudPresetId","")});break;case"regenerate":await m({summary:n});break;case"hand-pick":await t.current.insert(t.current.pattern,n)}}catch(e){On.Log.error("Generate section modal error",e)}finally{f.current=!1}}),[t,e,d,m]),_=(0,u.useCallback)((()=>b(h)),[b,h]);return(0,u.useEffect)((()=>{if(!o){const e=p.getAttribute("kubioAI.meta.summary","");b(e)}}),[b,p,o]),o?(0,a.createElement)(E.Modal,{className:"kubio-ai-wizard-modal kubio-generate-ai-section auto",title:(0,a.createElement)(E.Flex,null,(0,a.createElement)(E.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,a.createElement)(E.Icon,{icon:ke.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),"hand-pick"===(null===(i=t.current)||void 0===i?void 0:i.type)?(0,T.__)("Generate new section AI","kubio"):(0,T.__)("Regenerate content","kubio")),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Button,{onClick:()=>e(!1),icon:we,label:(0,T.__)("Close","kubio")}))),isDismissible:!1,onRequestClose:()=>{},shouldCloseOnClickOutside:!1},(0,a.createElement)(E.Flex,{className:"kubio-generate-ai-section__content",align:"normal"},(0,a.createElement)(E.Flex,{className:"kubio-generate-ai-section__content__section-preview",justify:"center"},(0,a.createElement)("div",{className:R()("section-preview-image-wrapper",(null===(l=t.current)||void 0===l?void 0:l.pattern)&&"ai-hand-picked-section")},(0,a.createElement)("img",{src:null!==(s=t.current)&&void 0!==s&&s.pattern?t.current.pattern.screenshot:(0,ye.staticAssetURL)("ai-assets/placeholder.png"),alt:"placeholder"}))),(0,a.createElement)(E.Flex,{className:"kubio-generate-ai-section__content__summary-wrapper",direction:"column",gap:3.75},(0,a.createElement)(Ue.TextareaControl,{label:(0,T.__)("Write a brief description to Kubio AI about the new section's content.","kubio"),className:R()("kubio-ai-summary-field"),value:h,onChange:g,rows:6}),(0,a.createElement)(E.Flex,{justify:"flex-end",gap:2.5},"hand-pick"===(null===(c=t.current)||void 0===c?void 0:c.type)&&(0,a.createElement)(E.Button,{className:"kubio-ai-change-section",onClick:n},(0,T.__)("Change section","kubio")),(0,a.createElement)(E.Button,{className:"kubio-ai-button",onClick:_},(0,T.__)("Generate","kubio")))))):(0,a.createElement)(a.Fragment,null)},ov=({sectionClientId:e,insertBefore:t=!0,shouldUseSectionClientId:n=!1,aiIntermediateCallback:o=null})=>{const{newSectionIndex:r,parentClientId:i}=(0,C.useSelect)((o=>{const{getBlockIndex:r,getBlockRootClientId:i,getBlockOrder:a}=o("core/block-editor"),l=i(e);let s=r(e);return t||s++,n&&(s=a(e).length),{newSectionIndex:s,parentClientId:n?e:l}}),[e]),{insertBlock:a,replaceBlocks:l,selectBlock:c}=(0,C.useDispatch)("core/block-editor"),{ownerDocument:d}=(0,s.useOwnerDocumentContext)(),[{pageContext:m,siteContext:p,pageTitle:f}]=(0,_.useAIData)();return{onGenerateAiSection:(0,u.useCallback)((({onCallback:e}={})=>{let t=async(t,n="")=>{const o=(0,ye.kubioCloneDeep)(t.content),s=(0,ye.transformTemplateToBlock)(o);await a(s,r,i,!0),d.defaultView.requestIdleCallback((async()=>{const r=(0,_.initGenerationSession)();df(d,s.clientId,!0,!0);try{await Ef({pageContext:m,siteContext:p,pageTitle:f,clientId:s.clientId,sectionCategory:t.categories.at(0).replace("kubio-content/",""),replaceBlocks:l,selectBlock:c,summary:n},o)}catch(e){throw e}finally{df(d,s.clientId,!0,!1),null==e||e()}r()}))};if(o){const e=t;t=t=>o(t,e)}const n={page:"sections",disabledPages:["starterSite","pages"],sections:{internalTag:g.AI_READY_TAG,categoryType:"kubio-content",onActionFunc:t}};(0,ye.onOpenTemplateGalleryWithParams)(n)}),[o,a,r,d,m,f,i,l,c,p]),onInsertNormalSection:(0,u.useCallback)((()=>{const e={page:"sections",disabledPages:["starterSite","pages"],sections:{categoryType:"kubio-content",onActionFunc:async e=>{const t=(0,ye.kubioCloneDeep)(e.content);let n=(0,ye.transformTemplateToBlock)(t);const{anchor:o,name:l}=(0,ye.getNextSectionNameAndIdForPattern)(e);n=h().merge({},n,{attributes:{anchor:o,attrs:{name:l}}}),await a(n,r,i,!0)}}};(0,ye.onOpenTemplateGalleryWithParams)(e)}),[a,r,i])}},rv=(0,u.forwardRef)(((e,t)=>{const{sectionClientId:n,disabled:o,insertBefore:r=!0,blockTitle:i,hasSingleBlockType:l,dropdownRef:s,onDropdownClose:c,onDropdownOpen:d,onActionStarted:m,onActionEnded:p,...h}=e,f=l?(0,T.sprintf)(// translators: %s: the name of the block when there is only one
// translators: %s: the name of the block when there is only one
(0,T.__)("Add %s","kubio"),i):(0,T.__)("Add block","kubio"),b=(0,u.useRef)(),[_,v]=(0,u.useState)(!1),y=(0,u.useCallback)(((e,t)=>{b.current={type:"hand-pick",pattern:e,insert:t},v(!0)}),[]),{onGenerateAiSection:k,onInsertNormalSection:S}=ov({sectionClientId:n,insertBefore:r,aiIntermediateCallback:y}),[w,I]=yn(),x=(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[]),P=(0,u.useCallback)(((...e)=>{null==m||m(),I((()=>k({onCallback:()=>{null==p||p()}})))}),[I,k,m,p]),R=(0,u.useCallback)((()=>{v(!1),P()}),[P]),A=(0,u.useMemo)((()=>[x?{label:(0,T.__)("Generate a new AI section","kubio"),description:(0,T.__)("Choose a section and let Kubio AI generate your content.","kubio"),icon:ke.KubioAI,isPro:!0,urlArgs:{source:"AI",content:"generate-new-ai-section"},isProItem:ye.AI_IN_PRO,onClick:P}:null,{label:(0,T.__)("Select from templates gallery","kubio"),description:(0,T.__)("Choose a section and write your content.","kubio"),icon:ke.PredesignedLayoutsIcon,onClick:S,className:"kubio-select-from-template-gallery-button"}].filter(Boolean)),[x,P,S]),O=(0,a.createElement)("div",{className:"kubio-between-sections-inserter__container"},(0,a.createElement)(E.Button,{ref:t,icon:Ce,label:f,isPrimary:!0,tooltipPosition:"bottom",className:"kubio-between-sections-inserter","aria-haspopup":!1,"aria-expanded":!1,disabled:o,...h},(0,T.__)("Add section","kubio")));return(0,a.createElement)(a.Fragment,null,w,_&&(0,a.createElement)(nv,{setVisible:v,sectionRef:b,onChangeSection:R,askForSummary:!0,isNewSection:!0}),(0,a.createElement)(ev,{menuItems:A,toggleButton:O,ref:s,onClose:c,onOpen:d,popoverProps:{position:"bottom"}}))}));(0,d.addFilter)("kubio.BetweenSectionsInserter","BetweenSectionsInserter",(()=>rv));const iv=(0,u.createContext)({}),av=()=>(0,u.useContext)(iv),lv={imageSearch:{slug:"AI-IMAGE-SEARCH",label:(0,T.__)("AI Image","kubio")},imageGenerate:{slug:"AI-IMAGE-GENERATE",label:(0,T.__)("AI Image","kubio")}},sv={generate:"GENERATE"},cv=e=>{const t=Object.keys(lv).filter((t=>lv[t].slug===e));return t.length>0?lv[t[0]].label:(0,T.__)("AI Image Editor","kubio")},uv=({classNames:e,children:t})=>(0,a.createElement)("div",{className:R()("kubio-ai-image-editor-sidebar",e)},t),dv=({children:e,classes:t=""})=>(0,a.createElement)("div",{className:`kubio-ai-image-editor-content ${t}`},e),mv=({image:e,grid:t=4})=>{const{onSelectImageAction:n,editImageAction:o}=av();return(0,a.createElement)("div",{className:R()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${t}`)},(0,a.createElement)("img",{src:e.filename,alt:""}),(0,a.createElement)("div",{className:"kubio-ai-image-overlay"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{n(e.filename)}},(0,T.__)("Use this image","kubio")),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{o(e)}},(0,T.__)("Edit","kubio"))))},pv=({generatedImages:e,totalImages:t})=>(0,a.createElement)(a.Fragment,null,e&&e.map(((e,n)=>(0,a.createElement)(mv,{image:e,key:n,grid:t})))),hv=({label:e,onClick:t,isBusy:n,disabled:o,loadingMessage:r,infoMessage:i,variant:l="primary"})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:t,isBusy:n,disabled:o,variant:l,__experimentalIsFocusable:!0},e),r&&n&&(0,a.createElement)("p",{className:"kubio-ai-info kubio-ai-info-loading"},r),i&&!n&&(0,a.createElement)("p",{className:"kubio-ai-info"},i)),gv=((0,T.__)("3D Model","kubio"),(0,T.__)("Analog Film","kubio"),(0,T.__)("Anime","kubio"),(0,T.__)("Cinematic","kubio"),(0,T.__)("Comic Book","kubio"),(0,T.__)("Digital Art","kubio"),(0,T.__)("Enhance","kubio"),(0,T.__)("Fantasy Art","kubio"),(0,T.__)("Isometric","kubio"),(0,T.__)("Line Art","kubio"),(0,T.__)("Low Poly","kubio"),(0,T.__)("Modeling Compound","kubio"),(0,T.__)("Neon Punk","kubio"),(0,T.__)("Origami","kubio"),(0,T.__)("Photographic","kubio"),(0,T.__)("Pixel Art","kubio"),(0,T.__)("Tile Texture","kubio"),()=>(0,ye.getBackendData)("aiSDImageTypes",{})),fv=()=>(0,ye.getBackendData)("aiSDImageStyles",{}),bv=[{label:(0,T.__)("Square (1024x1024)","kubio"),value:"1024x1024"},{label:(0,T.__)("Landscape (1152x896)","kubio"),value:"1152x896"},{label:(0,T.__)("Wide Landscape (1216x832)","kubio"),value:"1216x832"},{label:(0,T.__)("Panoramic (1344x768)","kubio"),value:"1344x768"},{label:(0,T.__)("Tall portrait (768x1344)","kubio"),value:"768x1344"},{label:(0,T.__)("Portrait (832x1216)","kubio"),value:"832x1216"},{label:(0,T.__)("Compact portrait (896x1152)","kubio"),value:"896x1152"}],_v=()=>{const[e,t]=(0,u.useState)(!1),{imagePrompt:n,setImagePrompt:o,isGenerating:r,setIsGenerating:i,initialImage:l,saveGeneratedImages:s,setEditorSection:c,aspectRatio:d,setAspectRatio:m,imageStyle:h,setImageStyle:g,imageType:f,setImageType:b,imageSize:_,numberOfImages:v,setNumberOfImages:y,setImageSizeFromOptions:k,aiCreditsPerImageCost:S}=av(),w=(0,u.useMemo)((()=>(0,p.map)(gv(),((e,t)=>({label:e,value:t})))),[]),C=(0,u.useMemo)((()=>{const e=fv(),t={},n={value:"",label:(0,T.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,p.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,u.useEffect)((()=>{var e;t(null!==(e=C[f])&&void 0!==e?e:"")}),[C,w,f]);const I=(0,u.useCallback)((async()=>!1),[d,f,n,_,h,l,r,v,c,s,i]);return(0,a.createElement)("div",{className:"kubio-ai-sidebar-controls"},(0,a.createElement)("p",{className:"kubio-ai-info"},(0,T.__)("Experiment with the latest generative AI and let your imagination define your images.","kubio")),(0,a.createElement)(E.TextareaControl,{onChange:o,value:n,label:(0,T.__)("Image Description","kubio"),useDebounce:!1}),(0,a.createElement)(E.RangeControl,{label:(0,T.__)("Samples","kubio"),value:v,min:1,max:4,initialPosition:1,withInputField:!0,onChange:y,className:"kubio-ai-range-with-help",help:(0,T.sprintf)(/* translators: %s is replaced with the number of credits */ /* translators: %s is replaced with the number of credits */(0,T.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),S*v)}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Size","kubio"),inlineLabel:!1,value:d,options:bv,onChange:e=>{m(e),k(e)},size:"__unstable-large"}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Image type","kubio"),inlineLabel:!1,value:f,options:w,onChange:e=>{var n;b(e),g(""),t(null!==(n=C[e])&&void 0!==n&&n)},size:"__unstable-large"}),!1!==e&&(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Image style","kubio"),inlineLabel:!1,value:h,options:e,onChange:g,size:"__unstable-large",disabled:!1===e}),(0,a.createElement)(hv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:I,isBusy:r,disabled:r||0===n.length,variant:"primary",label:(0,T.__)("Generate image","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},vv=(0,ve.isFreeVersion)()?ve.proBadgeClasses.proItem:"",yv=(0,ve.isFreeVersion)()?`${ve.proBadgeClasses.proItem}-wrapper`:"",kv=()=>(0,ve.isFreeVersion)()?(0,a.createElement)("span",{className:ve.proBadgeClasses.badgeClass},(0,T.__)("PRO","kubio")):null,Ev=()=>{const{editorTab:e,setEditorTab:t,backToSection:n}=av();return(0,a.createElement)("div",{className:"kubio-ai-image-editor-menu"},(0,a.createElement)(E.Button,{onClick:()=>{t(lv.imageSearch.slug),n(sv.imageSearch)},className:e===lv.imageSearch.slug?"kubio-ai-button-tab":""},(0,T.__)("Search","kubio")),(0,a.createElement)(E.Button,{onClick:()=>{t(lv.imageGenerate.slug),n(sv.generate)},className:e===lv.imageGenerate.slug?"kubio-ai-button-tab":""},(0,T.__)("Generate","kubio"),(0,a.createElement)(kv,null)))},Sv=()=>(0,a.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,a.createElement)(E.Icon,{icon:ke.GenerateImageIcon}),(0,a.createElement)("p",null,(0,T.__)("Your results will appear here.","kubio"))),wv=({grid:e=4,placeholderImage:t=!1})=>(0,a.createElement)("div",{className:R()("kubio-ai-image-generator-single-image",`kubio-ai-single-image-grid-${e}`)},t&&(0,a.createElement)("img",{src:t,alt:"",className:"kubio-ai-placeholder-image"})),Cv=({urlArgs:e})=>{const t=(0,u.useCallback)((t=>{t.preventDefault(),(0,ve.upgradeToPro)(e)}),[e]);return(0,a.createElement)("div",{className:"kubio-ai-pro-popup-background "},(0,a.createElement)("div",{className:"kubio-ai-generated-images"},(0,a.createElement)(wv,null),(0,a.createElement)(wv,null),(0,a.createElement)(wv,null),(0,a.createElement)(wv,null)),(0,a.createElement)("div",{className:"kubio-ai-pro-popup"},(0,a.createElement)("div",{className:"kubio-ai-pro-content"},(0,a.createElement)("h1",null,(0,T.__)("Generate awesome images with Kubio AI","kubio"))),(0,a.createElement)("img",{src:(0,ye.staticAssetURL)("ai-assets/pro-img.png"),alt:"final-message"}),(0,a.createElement)("div",{className:"kubio-ai-pro-content upgrade-to-pro__content"},(0,a.createElement)("p",{className:"kubio-ai-pro-content-lead"},(0,T.__)("Hello there! 🌈 Did you know you can unlock a whole new world of creativity with Kubio PRO?","kubio")),(0,a.createElement)("ul",{className:"kubio-ai-pro-content-features"},(0,a.createElement)("li",null,(0,a.createElement)(E.Icon,{icon:O,size:16}),(0,T.__)("Generate new images by just writing a few words.","kubio")),(0,a.createElement)("li",null,(0,a.createElement)(E.Icon,{icon:O,size:16}),(0,T.__)("Create different kinds of images like paintings, 3D models, photographic, etc.","kubio")),(0,a.createElement)("li",null,(0,a.createElement)(E.Icon,{icon:O,size:16}),(0,T.__)("Easily adjust images using the generative fill feature.","kubio"))),(0,a.createElement)(E.Button,{className:"btn-upgrade",onClick:t},(0,ve.getStringValueWithId)("pro.upgrade.label")))))},Iv=512,Tv=async e=>{const t=new Image;return t.src=e,await t.decode(),t},xv=e=>64*Math.ceil(e/64),Pv=(e,t,n)=>{let o=0,r=0;return xv(e)<=xv(t)?(r=512,o=xv(r*n)):(o=Iv,r=xv(o*n)),[o,r]},Rv=(e,t,n)=>{const o=Pv(e,t,n);if(o[0]<Iv){const e=Iv-o[0];o[0]=Iv,o[1]=xv(Iv+e)}return o},Av=({totalImages:e})=>{const{numberOfImages:t,imageSize:n}=av(),o=[],r=((e,t,n=0)=>{const o=document.createElement("canvas");o.width=e,o.height=t;const r=o.getContext("2d");r.fillStyle="rgba(244, 244, 247, "+n+")",r.fillRect(0,0,e,t);const i=new window.Image(e,t);return i.src=o.toDataURL(),i.src})(n[0],n[1],1);for(let n=0;n<t;n++)o.push((0,a.createElement)(wv,{key:n,grid:e,placeholderImage:r}));return(0,a.createElement)(a.Fragment,null,o)},Ov=({generatedImages:e,isGenerating:t,totalImages:n})=>(0,a.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${n}`},e.length>0&&(0,a.createElement)(pv,{generatedImages:e,totalImages:n}),t&&(0,a.createElement)(Av,{totalImages:n})),Nv=({generatedImages:e,isGenerating:t,totalImages:n})=>(0,a.createElement)(a.Fragment,null,(e.length>0||!0===t)&&(0,a.createElement)(Ov,{generatedImages:e,isGenerating:t,totalImages:n}),0===e.length&&!1===t&&(0,a.createElement)(Sv,null)),Mv={source:"ai-image-generator",content:"ai-image-generator"},Dv=()=>{const{generatedImages:e,isGenerating:t,numberOfImages:n}=av(),o=t?n+e.length:e.length;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(uv,{classNames:`${yv}`},(0,a.createElement)(Ev,null),(0,a.createElement)(_v,null)),(0,a.createElement)(dv,{classes:e.length>0||t?"":"kubio-ai-image-results-empty-wrapper"},(0,ve.isFreeVersion)()?(0,a.createElement)(Cv,{urlArgs:Mv}):(0,a.createElement)(Nv,{generatedImages:e,isGenerating:t,totalImages:o})))},Bv=()=>{const{onSelectImageAction:e,currentSelectedImage:t}=av();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,a.createElement)("div",{className:"kubio-ai-image-editor-si-wrapper"},(0,a.createElement)("span",null,(0,a.createElement)("img",{src:t.filename,alt:""})),(0,a.createElement)("div",{className:"kubio-ai-image-editor-action-overlay"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(t.filename)}},(0,T.__)("Use this image","kubio"))))))},Lv=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})),zv=()=>{const{backToSection:e}=av();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{e(sv.generate)},icon:Lv},(0,T.__)("Generate an image","kubio")),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action kubio-ai-button-edit-action-first",onClick:()=>{e(sv.generativeFill)},icon:(0,a.createElement)(E.Dashicon,{icon:"admin-appearance"})},(0,a.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,a.createElement)("h3",null,(0,T.__)("Generative Fill","kubio")),(0,a.createElement)("p",null,(0,T.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-edit-action",onClick:()=>{e(sv.variations)},icon:(0,a.createElement)(E.Dashicon,{icon:"format-gallery"})},(0,a.createElement)("div",{className:"kubio-ai-button-edit-action-content"},(0,a.createElement)("h3",null,(0,T.__)("Variations","kubio")),(0,a.createElement)("p",null,(0,T.__)("Describe the changes you would like to make for the current image.","kubio")))))},Fv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(uv,null,(0,a.createElement)(zv,null)),(0,a.createElement)(dv,null,(0,a.createElement)(Bv,null))),Gv=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z"})),Hv=()=>{const{onSelectImageAction:e,backToSection:t,currentSelectedImage:n,prevImageAction:o,nextImageAction:r}=av();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-image-editor-action-top-bar"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{t(sv.generate)},icon:Lv},(0,T.__)("Back","kubio")),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{e(n.filename)}},(0,T.__)("Use this image","kubio"))),(0,a.createElement)("div",{className:"kubio-ai-image-editor-img-holder"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-prev",onClick:()=>{o(n.filename)},icon:Lv},(0,T.__)("prev","kubio")),(0,a.createElement)("img",{src:n.filename,alt:""}),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button kubio-ai-nav kubio-ai-next",onClick:()=>{r(n.filename)},icon:Gv},(0,T.__)("next","kubio"))))},Uv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(uv,null,(0,a.createElement)(_v,null)),(0,a.createElement)(dv,null,(0,a.createElement)(Hv,null))),Wv=({sectionTitle:e=(0,T.__)("Variations","kubio")})=>{const[t,n]=(0,u.useState)(!1),{imagePrompt:o,setImagePrompt:r,isGenerating:i,setIsGenerating:l,initialImage:s,aspectRatio:c,imageStyle:d,setImageStyle:m,imageSize:h,setImageSize:g,numberOfImages:f,setNumberOfImages:b,addImageVariations:v,currentSelectedImage:y,backToSection:k,imageType:S,setImageType:w,aiCreditsPerImageCost:C}=av();(0,u.useEffect)((()=>{(async()=>{if(s){const e=await Tv(s);g(((e,t,n)=>{switch(n){case"auto":return((e,t)=>[xv(e),xv(t)])(e,t);case"4/3":return Pv(e,t,4/3);case"3/4":return Rv(e,t,3/4);case"3/2":return Pv(e,t,1.5);case"16/9":return Pv(e,t,16/9);case"9/16":return Rv(e,t,9/16);default:return[Iv,Iv]}})(e.naturalWidth,e.naturalHeight,c))}})()}),[s,c,g]);const I=(0,u.useMemo)((()=>(0,p.map)(gv(),((e,t)=>({label:e,value:t})))),[]),x=(0,u.useMemo)((()=>{const e=fv(),t={},n={value:"",label:(0,T.__)("None","kubio")};return Object.keys(e).forEach((o=>{t[o]=(0,p.map)(e[o],((e,t)=>({label:e,value:t}))),t[o].unshift(n)})),t}),[]);(0,u.useEffect)((()=>{var e;n(null!==(e=x[S])&&void 0!==e?e:"")}),[x,I,S]);const P=(0,u.useCallback)((async()=>{if(!i){l(!0);try{const e=await(0,_.aiImageVariations)({imagePrompt:o,currentSelectedImage:y.filename,imageSize:h,imageStyle:d,imageType:S,numberOfImages:f});e.length>0&&v(y.filename,e)}catch(e){console.log(e)}l(!1)}}),[i,l,o,y.filename,h,d,S,f,v]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{k(sv.edit)},icon:Lv},(0,T.__)("Back","kubio")),(0,a.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,a.createElement)("div",{className:"kubio-ai-icon-holder"},(0,a.createElement)(E.Dashicon,{icon:"format-gallery"})),(0,a.createElement)("div",{className:"kubio-ai-text-holder"},(0,a.createElement)("h3",null,e),(0,a.createElement)("p",{className:"kubio-ai-heading-info"},(0,T.__)("Describe the changes you would like to make for the current image.","kubio")))),(0,a.createElement)(E.TextareaControl,{onChange:r,value:o,label:(0,T.__)("Description of changes","kubio"),useDebounce:!1}),(0,a.createElement)(E.RangeControl,{label:(0,T.__)("Samples","kubio"),value:f,min:1,max:4,initialPosition:1,withInputField:!0,onChange:b,className:"kubio-ai-range-with-help",help:(0,T.sprintf)(/* translators: %s is replaced with the number of credits */ /* translators: %s is replaced with the number of credits */(0,T.__)("More samples will multiply the cost. Estimated cost: %s credits.","kubio"),C*f)}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Image type","kubio"),inlineLabel:!1,value:S,options:I,onChange:e=>{var t;w(e),m(""),n(null!==(t=x[e])&&void 0!==t&&t)},size:"__unstable-large"}),!1!==t&&(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Image style","kubio"),inlineLabel:!1,value:d,options:t,onChange:m,size:"__unstable-large",disabled:!1===t}),(0,a.createElement)(hv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:P,isBusy:i,disabled:i,variant:"primary",label:(0,T.__)("Create variations","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},jv=({grid:e=1})=>{const{currentSelectedImage:t}=av();return(0,a.createElement)("div",{className:R()("kubio-ai-image-generator-single-image","kubio-ai-original",`kubio-ai-single-image-grid-${e}`),"data-label":(0,T.__)("Original","kubio")},(0,a.createElement)("img",{src:t.filename,alt:""}))},Kv=()=>{const{getImageVariations:e}=av(),t=e();return(0,a.createElement)("div",{className:`kubio-ai-generated-images kubio-ai-generated-images-${t.length+1}`},(0,a.createElement)(jv,{grid:t.length+1}),t.length>0&&t.map(((e,n)=>(0,a.createElement)(mv,{image:e,key:n,grid:t.length+1}))))},Vv=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(uv,null,(0,a.createElement)(Wv,null)),(0,a.createElement)(dv,null,(0,a.createElement)(Kv,null)));function $v(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function qv(){return qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qv.apply(this,arguments)}var Yv={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=t&&t.prototype instanceof f?t:f,i=Object.create(r.prototype),a=new x(o||[]);return i._invoke=function(e,t,n){var o=d;return function(r,i){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===r)throw i;return R()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var l=C(a,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=u(e,t,n);if("normal"===s.type){if(o=n.done?h:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",g={};function f(){}function b(){}function _(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,k=y&&y(y(P([])));k&&k!==n&&o.call(k,i)&&(v=k);var E=_.prototype=f.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(r,i,a,l){var s=u(e[r],e,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var r;this._invoke=function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}}function C(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return b.prototype=_,s(E,"constructor",_),s(_,"constructor",b),b.displayName=s(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,s(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},S(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new w(c(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),s(E,l,"Generator"),s(E,i,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return l.type="throw",l.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:P(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Yv);var Zv=Yv.exports,Xv=function(e){var t=e.paths,n=e.id,o=e.strokeWidth,r=e.strokeColor,i=e.command,l=void 0===i?Jv:i;if(1===t.length){var s=t[0],c=s.x,u=s.y,d=o/2;return a.createElement("circle",{key:n,id:n,cx:c,cy:u,r:d,stroke:r,fill:r})}var m=t.reduce((function(e,t,n,o){return 0===n?"M "+t.x+","+t.y:e+" "+l(t,n,o)}),"");return a.createElement("path",{key:n,id:n,d:m,fill:"none",strokeLinecap:"round",stroke:r,strokeWidth:o})},Qv=function(e){var t,n,o,r,i=e.current,a=e.next,l=e.previous,s=e.reverse,c=(t=l||i,o=(n=a||i).x-t.x,r=n.y-t.y,{length:Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),angle:Math.atan2(r,o)}),u=c.angle+(s?Math.PI:0),d=.2*c.length;return[i.x+Math.cos(u)*d,i.y+Math.sin(u)*d]},Jv=function(e,t,n){var o=null,r=null;switch(t){case 0:var i=Qv({current:e});o=i[0],r=i[1];break;case 1:var a=Qv({current:n[t-1],next:e});o=a[0],r=a[1];break;default:var l=Qv({current:n[t-1],previous:n[t-2],next:e});o=l[0],r=l[1]}var s=Qv({current:e,previous:n[t-1],next:n[t+1],reverse:!0});return"C "+o+","+r+" "+s[0]+","+s[1]+" "+e.x+", "+e.y},ey=function(e){var t=e.id,n=e.paths;return a.createElement(a.Fragment,null,n.map((function(e,n){return a.createElement(Xv,{key:t+"__"+n,paths:e.paths,id:t+"__"+n,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,command:Jv})})))},ty=function(e){return new Promise((function(t,n){var o=new Image;o.addEventListener("load",(function(){o.width>0&&t(o),n("Image not found")})),o.addEventListener("error",(function(e){return n(e)})),o.src=e,o.setAttribute("crossorigin","anonymous")}))};function ny(e){var t,n=null==(t=e.firstChild)?void 0:t.cloneNode(!0),o=e.offsetWidth,r=e.offsetHeight;return n.setAttribute("viewBox","0 0 "+o+" "+r),n.setAttribute("width",o.toString()),n.setAttribute("height",r.toString()),{svgCanvas:n,width:o,height:r}}var oy=a.forwardRef((function(e,t){var n=e.paths,o=e.isDrawing,r=e.onPointerDown,i=e.onPointerMove,l=e.onPointerUp,s=e.id,c=void 0===s?"react-sketch-canvas":s,u=e.width,d=void 0===u?"100%":u,m=e.height,p=void 0===m?"100%":m,h=e.className,g=void 0===h?"react-sketch-canvas":h,f=e.canvasColor,b=void 0===f?"red":f,_=e.backgroundImage,v=void 0===_?"":_,y=e.exportWithBackgroundImage,k=void 0!==y&&y,E=e.preserveBackgroundImageAspectRatio,S=void 0===E?"none":E,w=e.allowOnlyPointerType,C=void 0===w?"all":w,I=e.style,T=void 0===I?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:I,x=e.svgStyle,P=void 0===x?{}:x,R=a.useRef(null),A=function(e){var t,n,o,r=null==(t=R.current)?void 0:t.getBoundingClientRect(),i=null!=(n=window.scrollX)?n:0,a=null!=(o=window.scrollY)?o:0;return r?{x:e.pageX-r.left-i,y:e.pageY-r.top-a}:{x:0,y:0}},O=function(e){"mouse"===e.pointerType&&0!==e.button||"all"!==C&&e.pointerType!==C||l()};a.useImperativeHandle(t,(function(){return{exportImage:function(e){return new Promise(function(){var t,n=(t=Zv.mark((function t(n,o){var r,i,a,l,s,c,u,d;return Zv.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=R.current){t.next=4;break}throw Error("Canvas not rendered yet");case 4:return i=ny(r),a=i.svgCanvas,l=i.width,s=i.height,c="data:image/svg+xml;base64,"+btoa(a.outerHTML),t.next=8,ty(c);case 8:if(t.t0=t.sent,u=[t.t0],!k){t.next=21;break}return t.prev=11,t.next=14,ty(v);case 14:d=t.sent,u.push(d),t.next=21;break;case 18:t.prev=18,t.t1=t.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(u).then((function(t){var o=document.createElement("canvas");o.setAttribute("width",l.toString()),o.setAttribute("height",s.toString());var r=o.getContext("2d");if(!r)throw Error("Canvas not rendered yet");t.reverse().forEach((function(e){r.drawImage(e,0,0)})),n(o.toDataURL("image/"+e))})).catch((function(e){throw e})),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(0),o(t.t2);case 27:case"end":return t.stop()}}),t,null,[[0,24],[11,18]])})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(e){$v(i,o,r,a,l,"next",e)}function l(e){$v(i,o,r,a,l,"throw",e)}a(void 0)}))});return function(_x,e){return n.apply(this,arguments)}}())},exportSvg:function(){return new Promise((function(e,t){try{var n,o=null!=(n=R.current)?n:null;if(null!==o){var r,i,a=ny(o).svgCanvas;if(k)return void e(a.outerHTML);null==(r=a.querySelector("#"+c+"__background"))||r.remove(),null==(i=a.querySelector("#"+c+"__canvas-background"))||i.setAttribute("fill",b),e(a.outerHTML)}t(new Error("Canvas not loaded"))}catch(e){t(e)}}))}}})),a.useEffect((function(){return document.addEventListener("pointerup",O),function(){document.removeEventListener("pointerup",O)}}),[O]);var N=n.filter((function(e){return!e.drawMode})),M=0,D=n.reduce((function(e,t){return t.drawMode?(void 0===e[M]&&(e[M]=[]),e[M].push(t),e):(M+=1,e)}),[[]]);return a.createElement("div",{role:"presentation",ref:R,className:g,style:qv({touchAction:"none",width:d,height:p},T),"touch-action":"none",onPointerDown:function(e){if(!("all"!==C&&e.pointerType!==C||"mouse"===e.pointerType&&0!==e.button)){var t=A(e);r(t)}},onPointerMove:function(e){if(o&&("all"===C||e.pointerType===C)){var t=A(e);i(t)}},onPointerUp:O},a.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:qv({width:"100%",height:"100%"},P),id:c},a.createElement("g",{id:c+"__eraser-stroke-group",display:"none"},a.createElement("rect",{id:c+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),N.map((function(e,t){return a.createElement(Xv,{key:c+"__eraser-"+t,id:c+"__eraser-"+t,paths:e.paths,strokeColor:"#000000",strokeWidth:e.strokeWidth})}))),a.createElement("defs",null,v&&a.createElement("pattern",{id:c+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},a.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:v,preserveAspectRatio:S})),N.map((function(e,t){return a.createElement("mask",{id:c+"__eraser-mask-"+t,key:c+"__eraser-mask-"+t,maskUnits:"userSpaceOnUse"},a.createElement("use",{href:"#"+c+"__mask-background"}),Array.from({length:N.length-t},(function(e,n){return n+t})).map((function(e){return a.createElement("use",{key:e.toString(),href:"#"+c+"__eraser-"+e.toString()})})))}))),a.createElement("g",{id:c+"__canvas-background-group"},a.createElement("rect",{id:c+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:v?"url(#"+c+"__background)":b})),D.map((function(e,t){return a.createElement("g",{id:c+"__stroke-group-"+t,key:c+"__stroke-group-"+t,mask:"url(#"+c+"__eraser-mask-"+t+")"},a.createElement(ey,{id:c,paths:e}))}))))})),ry=a.forwardRef((function(e,t){var n=e.id,o=void 0===n?"react-sketch-canvas":n,r=e.width,i=void 0===r?"100%":r,l=e.height,s=void 0===l?"100%":l,c=e.className,u=void 0===c?"":c,d=e.canvasColor,m=void 0===d?"white":d,p=e.strokeColor,h=void 0===p?"red":p,g=e.backgroundImage,f=void 0===g?"":g,b=e.exportWithBackgroundImage,_=void 0!==b&&b,v=e.preserveBackgroundImageAspectRatio,y=void 0===v?"none":v,k=e.strokeWidth,E=void 0===k?4:k,S=e.eraserWidth,w=void 0===S?8:S,C=e.allowOnlyPointerType,I=void 0===C?"all":C,T=e.style,x=void 0===T?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:T,P=e.svgStyle,R=void 0===P?{}:P,A=e.onChange,O=void 0===A?function(e){}:A,N=e.onStroke,M=void 0===N?function(e,t){}:N,D=e.withTimestamp,B=void 0!==D&&D,L=a.createRef(),z=a.useState(!0),F=z[0],G=z[1],H=a.useState(!1),U=H[0],W=H[1],j=a.useState([]),K=j[0],V=j[1],$=a.useState([]),q=$[0],Y=$[1],Z=a.useState([]),X=Z[0],Q=Z[1],J=a.useCallback((function(){var e,t,n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;null!==n?M(n,!n.drawMode):console.warn("No stroke found!")}),[U]);return a.useEffect((function(){J()}),[U]),a.useEffect((function(){O(X)}),[X]),a.useImperativeHandle(t,(function(){return{eraseMode:function(e){G(!e)},clearCanvas:function(){V([].concat(X)),Q([])},undo:function(){if(0!==K.length)return Q([].concat(K)),void V([]);Y((function(e){return[].concat(e,X.slice(-1))})),Q((function(e){return e.slice(0,-1)}))},redo:function(){0!==q.length&&(Q((function(e){return[].concat(e,q.slice(-1))})),Y((function(e){return e.slice(0,-1)})))},exportImage:function(e){var t,n=null==(t=L.current)?void 0:t.exportImage;if(n)return n(e);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise((function(e,t){var n,o=null==(n=L.current)?void 0:n.exportSvg;o?o().then((function(t){e(t)})).catch((function(e){t(e)})):t(Error("Export function called before canvas loaded"))}))},exportPaths:function(){return new Promise((function(e,t){try{e(X)}catch(e){t(e)}}))},loadPaths:function(e){Q((function(t){return[].concat(t,e)}))},getSketchingTime:function(){return new Promise((function(e,t){B||t(new Error("Set 'withTimestamp' prop to get sketching time"));try{e(X.reduce((function(e,t){var n,o,r=null!=(n=t.startTimestamp)?n:0;return e+((null!=(o=t.endTimestamp)?o:0)-r)}),0))}catch(e){t(e)}}))},resetCanvas:function(){V([]),Y([]),Q([])}}})),a.createElement(oy,{ref:L,id:o,width:i,height:s,className:u,canvasColor:m,backgroundImage:f,exportWithBackgroundImage:_,preserveBackgroundImageAspectRatio:y,allowOnlyPointerType:I,style:x,svgStyle:R,paths:X,isDrawing:U,onPointerDown:function(e){W(!0),Y([]);var t={drawMode:F,strokeColor:F?h:"#000000",strokeWidth:F?E:w,paths:[e]};B&&(t=qv({},t,{startTimestamp:Date.now(),endTimestamp:0})),Q((function(e){return[].concat(e,[t])}))},onPointerMove:function(e){if(U){var t=X.slice(-1)[0],n=qv({},t,{paths:[].concat(t.paths,[e])});Q((function(e){return[].concat(e.slice(0,-1),[n])}))}},onPointerUp:function(){var e,t;if(U&&(W(!1),B)){var n=null!=(e=null==(t=X.slice(-1))?void 0:t[0])?e:null;if(null!==n){var o=qv({},n,{endTimestamp:Date.now()});Q((function(e){return[].concat(e.slice(0,-1),[o])}))}}}})}));const iy=(0,u.createContext)({}),ay=()=>(0,u.useContext)(iy),ly={canRedo:!1,canUndo:!1,cursor:0,queue:[],images:[]},sy={REDO:"redo",UNDO:"undo",INSERT:"insert"},cy=(e,t)=>{let n=0;const o=e.images.length-1,r=(e,t=!1)=>({canUndo:e>0,canRedo:!1===t&&e<o});switch(t.type){case sy.UNDO:return n=e.cursor>0?e.cursor-1:0,t.setCurrentSelectedImage(e.images[n]),{...e,...r(n),cursor:n};case sy.REDO:return n=e.cursor<o?e.cursor+1:o,t.setCurrentSelectedImage(e.images[n]),{...e,...r(n),cursor:n};case sy.INSERT:const i=e.images,a=i.length>1&&e.cursor>0?i.slice(0,e.cursor):i;return a.push(t.image),n=a.length-1,t.setCurrentSelectedImage(t.image),{...e,images:a,...r(n,a.length),cursor:n}}return e},uy=[{key:20,name:"20",className:"kubio-ai-stroke-option kubio-ai-stroke-20"},{key:30,name:"30",className:"kubio-ai-stroke-option kubio-ai-stroke-30"},{key:40,name:"40",className:"kubio-ai-stroke-option kubio-ai-stroke-40"},{key:50,name:"50",className:"kubio-ai-stroke-option kubio-ai-stroke-50"}],dy=()=>{const{undoImageAction:e,redoImageAction:t,setStrokeSize:n,strokeSize:o,paintActions:r,resetCanvasAction:i,imageActions:l}=ay(),{onSelectImageAction:s,currentSelectedImage:c}=av();return(0,a.createElement)("div",{className:"kubio-image-editor-mask-editor-toolbar"},(0,a.createElement)("div",{className:"kubio-image-editor-toolbar-buttons"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:e,icon:Gh,disabled:!l.canUndo,showTooltip:!0,title:(0,T.__)("Undo","kubio"),iconSize:24}),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:t,icon:Lh,disabled:!l.canRedo,showTooltip:!0,title:(0,T.__)("Redo","kubio"),iconSize:24}),(0,a.createElement)("div",{className:"kubio-ai-h-divider"}),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-revert",onClick:i,icon:ke.EraserIcon,disabled:!r.isDirty,showTooltip:!0,title:(0,T.__)("Clear drawing","kubio"),iconSize:16}),(0,a.createElement)(E.CustomSelectControl,{__nextUnconstrainedWidth:!0,hideLabelFromVision:!0,label:"Stroke Size",options:uy,onChange:({selectedItem:e})=>{n(e.key)},value:uy.find((e=>e.key===o))}),(0,a.createElement)("div",{className:"kubio-ai-h-divider"}),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",onClick:()=>{s(c.filename)}},(0,T.__)("Use this image","kubio"))))},my=(e={})=>{const{radius:t=30}=e,n=btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="${t}" height="${t}">\n        <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z" fill-opacity="0.7" />\n    </svg>`),o=Math.floor(t/2)+1;return{cursor:`url("data:image/svg+xml;base64,${n}") ${o} ${o}, auto`,borderRadius:"100%"}},py=()=>{const{currentSelectedImage:e}=av(),{setImageSize:t,imageSize:n,strokeSize:o,canvasRef:r,onStrokeAction:i}=ay(),[l,s]=(0,u.useState)(my({radius:o})),[c,d]=(0,u.useState)([n[0],Math.min(512,n[1])]);(0,u.useEffect)((()=>{(async()=>{if(e){const n=await Tv(e.filename);t([n.naturalWidth,n.naturalHeight])}})()}),[e.filename]),(0,u.useEffect)((()=>{const e=Math.min(550,n[1]),t=Math.round(n[0]*(e/n[1]));d([t,e])}),[n]),(0,u.useEffect)((()=>{s(my({radius:o}))}),[o]);const m=(0,u.useRef)();return(0,u.useEffect)((()=>{if(!m.current)return;const e=new window.MutationObserver((function(){const e=m.current.querySelector("#react-sketch-canvas__stroke-group-0");null==e||e.removeAttribute("mask")}));return e.observe(m.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}}),[m.current]),(0,a.createElement)("div",{className:"kubio-ai-image-generative-editor",ref:m},n[0]>0&&c[0]>0&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ry,{ref:r,width:c[0],height:c[1],strokeWidth:o,className:"kubio-ai-generative-editor",strokeColor:"black",backgroundImage:e.filename,canvasColor:"white",exportWithBackgroundImage:!1,style:l,onStroke:i}),(0,a.createElement)(dy,null)))},hy=()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(py,null)),gy=()=>{const[e,t]=(0,u.useState)(""),n=(0,u.useRef)(!1),{backToSection:o,isGenerating:r,setIsGenerating:i,currentSelectedImage:l,addImageVersion:s,setCurrentSelectedImage:c}=av(),{exportSketchImage:d,resetCanvasAction:m,addGeneratedImageToQueue:p}=ay();(0,u.useEffect)((()=>{p(l)}),[]);const h=(0,u.useCallback)((async()=>{if(!r){i(!0);try{const t=await(0,_.aiImageMask)({imagePrompt:e,currentSelectedImage:l.filename,maskImage:await d()});if(""!==t){const e=s(t[0]);!1===n.current&&(n.current=e.currentImage),p(e.newImage),m()}}catch(e){console.log(e)}i(!1)}}),[r,i,e,l,d,s,m,p]);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action kubio-ai-button-action-back",onClick:()=>{!1!==n.current&&c(n.current),o("EDIT")},icon:Lv},(0,T.__)("Back","kubio")),(0,a.createElement)("div",{className:"kubio-ai-sidebar-heading"},(0,a.createElement)("div",{className:"kubio-ai-icon-holder"},(0,a.createElement)(E.Dashicon,{icon:"admin-appearance"})),(0,a.createElement)("div",{className:"kubio-ai-text-holder"},(0,a.createElement)("h3",null,(0,T.__)("Generative Fill","kubio")),(0,a.createElement)("p",{className:"kubio-ai-heading-info"},(0,T.__)("Use the brush to highlight an area of the image and specify the changes you want for that area.","kubio")))),(0,a.createElement)(E.TextareaControl,{onChange:t,value:e,label:(0,T.__)("Description of changes","kubio"),useDebounce:!1}),(0,a.createElement)(hv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:h,isBusy:r,disabled:r,variant:"primary",label:(0,T.__)("Generate fill","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio"),infoMessage:(0,T.__)("All generated images will be saved in the Media Library.","kubio")}))},fy=()=>{const e=(()=>{const{setCurrentSelectedImage:e}=av(),t={undo:!1,redo:!1,isDirty:!1,images:[]},n=(0,u.useRef)(!1),[o,r]=(0,u.useState)(30),[i,a]=(0,u.useState)([0,0]),[l,s]=(0,u.useState)(!1),[c,d]=(0,u.useState)(ly),[m,p]=(0,u.useState)(!1),[h,g]=(0,u.useState)(t),[f,b]=(0,u.useReducer)(cy,ly),_=()=>{g({undo:c.cursor>-1,redo:c.cursor<c.queue.length-1,isDirty:!0})},v=e=>{const t=c;t.cursor=t.cursor+e,d((()=>t)),_()},y=()=>{d(ly),g(t)};return{canvasRef:n,resetCanvasAction:()=>{y(),n.current.resetCanvas()},redoAction:()=>{v(1),n.current.redo()},undoAction:()=>{v(-1),n.current.undo()},strokeSize:o,setStrokeSize:r,exportSketchImage:async()=>{const e=await n.current.exportImage("png"),t=document.createElement("canvas");t.width=i[0],t.height=i[1];const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="white",o.fillRect(0,0,t.width,t.height);const r=new window.Image;return r.src=e,await r.decode(),o.drawImage(r,0,0,i[0],i[1]),t.toDataURL()},imageSize:i,setImageSize:a,onStrokeAction:()=>{if(!1===m)return void p(!0);const e=c;let t=e.queue;e.cursor=e.cursor>=-1?e.cursor+1:-1,e.cursor>-1&&(t=e.queue.slice(0,e.cursor)),t.push(1),e.queue=t,d(e),_(),p(!1)},paintActions:h,newImageGenerated:l,setNewImageGenerated:s,resetPaintQueue:y,clearCanvasAction:()=>{v(-1),n.current.clearCanvas()},undoImageAction:()=>{b({type:sy.UNDO,setCurrentSelectedImage:e})},redoImageAction:()=>{b({type:sy.REDO,setCurrentSelectedImage:e})},imageActions:f,addGeneratedImageToQueue:t=>{b({type:sy.INSERT,setCurrentSelectedImage:e,image:t})},imageActionsDispatch:b,IMAGE_ACTIONS:sy}})();return(0,a.createElement)(iy.Provider,{value:e},(0,a.createElement)(uv,null,(0,a.createElement)(gy,null)),(0,a.createElement)(dv,null,(0,a.createElement)(hy,null)))},by=(0,u.createContext)({}),_y=()=>(0,u.useContext)(by),vy={imagePrompt:"",imageSize:"medium",imageOrientation:"original",aiPrompt:"",initialSearch:!1},yy=()=>(0,a.createElement)("div",{className:"kubio-ai-image-results-empty"},(0,a.createElement)(E.Icon,{icon:ke.SearchImageIcon}),(0,a.createElement)("p",null,(0,T.__)("Your search results will appear here.","kubio"))),ky=({image:e,saveImage:t,canSave:n})=>{const{isGenerating:o}=av();return(0,a.createElement)("div",{className:"kubio-ai-image-generator-single-image"},(0,a.createElement)("img",{src:e["src.medium"],alt:""}),(0,a.createElement)("div",{className:"kubio-ai-image-overlay"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-button",variant:"primary",isBusy:o,disabled:o,onClick:()=>{t(e.url,!0)}},(0,T.__)("Use this image","kubio")),(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button-action",onClick:()=>{t(e.url)},disabled:!n,isBusy:o},n?(0,T.__)("Save for later","kubio"):(0,T.__)("Saved","kubio"))))},Ey=()=>{const e=(0,u.useRef)(),{foundImages:t,foundImagePages:n,galleryPage:o,searchForImages:r,isSearching:i,savedImages:l,saveImage:s,imageSearchOptions:c}=_y(),{isGenerating:d,setIsGenerating:m,onSelectImageAction:p}=av(),[h,g]=(0,u.useState)(!1);(0,u.useEffect)((()=>{g(o<n)}),[n,o]);const f=(0,u.useCallback)((async(e,t=!1)=>{if(d||l.has(e)){const n=l.get(e);t&&p(n.url,c.aiPrompt,n.id)}m(!0);try{const n=await(0,_.aiSearchedImageSave)({selectedImage:e});""!==n&&(s(e,n.url,n.id),t&&p(n.url,c.aiPrompt,n.id))}catch(e){console.log(e)}m(!1)}),[c.aiPrompt,d,p,s,l,m]);return(0,a.createElement)("div",{className:"kubio-ai-generated-images--infinite-list",ref:e},(0,a.createElement)("div",{className:"kubio-ai-search-images "},t.map(((e,t)=>(0,a.createElement)(ky,{image:e,key:t,saveImage:f,canSave:!l.has(e.url)})))),h&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"kubio-ai-more"},(0,a.createElement)(E.Button,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-load-more-button",variant:"primary",onClick:r,isBusy:i,disabled:i},(0,T.__)("Get more images","kubio"))),(0,a.createElement)("p",{className:"kubio-by-pexels",dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s is the url to pexels
// translators: %s is the url to pexels
(0,T.__)("The media items like photos and videos are provided by %s","kubio"),"<a href='https://www.pexels.com/' target='_blank'>Pexels</a>")}})))},Sy=[{value:"large",label:(0,T.__)("Large","kubio")},{value:"medium",label:(0,T.__)("Medium","kubio")},{value:"small",label:(0,T.__)("Small","kubio")},{value:"tiny",label:(0,T.__)("Tiny","kubio")}],wy=[{value:"landscape",label:(0,T.__)("Landscape","kubio")},{value:"portrait",label:(0,T.__)("Portrait","kubio")},{value:"square",label:(0,T.__)("Square","kubio")},{value:"original",label:(0,T.__)("Same as current image","kubio")}],Cy=()=>{const{imageSearchOptions:e,setSearchOption:t,isSearching:n,setIsSearching:o,searchForImages:r}=_y(),{isInitialSearch:i,setIsInitialSearch:l,initialPromptText:s,initialImage:c}=av();return(0,u.useEffect)((()=>{(async()=>{const n=await(async e=>{if(!e)return"landscape";const t=await Tv(e),n=t.width/t.height;switch(!0){case 1===n:return"square";case n>1:return"landscape";case n<1:return"portrait"}return"original"})(c);t("imageOrientation",n),!1===i&&""!==e.aiPrompt&&(o(!0),r(!1),l(!0),s.current="")})()}),[c]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("p",{className:"kubio-ai-info"},(0,T.__)("Easily search for free images from Pexels. Just type an image description and Kubio AI will extract search terms to find relevant images.","kubio")),(0,a.createElement)(E.TextareaControl,{onChange:e=>{t("imagePrompt",e)},value:e.imagePrompt,label:(0,T.__)("Image Description","kubio"),useDebounce:!1}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Image Orientation","kubio"),inlineLabel:!1,value:e.imageOrientation,options:wy,onChange:e=>{t("imageOrientation",e)},size:"__unstable-large"}),(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,T.__)("Saved image size","kubio"),inlineLabel:!1,value:e.imageSize,options:Sy,onChange:e=>{t("imageSize",e)},size:"__unstable-large"}),(0,a.createElement)(hv,{className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-img-sidebar-button",onClick:()=>{o(!0),r(!0)},isBusy:n,disabled:n||0===e.imagePrompt.length,variant:"primary",label:(0,T.__)("Search image","kubio"),loadingMessage:(0,T.__)("Please wait, this may take a few minutes.","kubio")}))},Iy=()=>{const{foundImagePages:e}=_y();return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(uv,null,(0,a.createElement)(Ev,null),(0,a.createElement)(Cy,null)),(0,a.createElement)(dv,{classes:"kubio-ai-image-editor-content-search"},e>0?(0,a.createElement)(Ey,null):(0,a.createElement)(yy,null)))},Ty=()=>{const e=av(),{editorSection:t,editorTab:n,closeModal:o}=e,r=(()=>{const{initialImage:e,initialPromptText:t}=av(),[n,o]=(0,u.useState)(!1),[r,i]=(0,u.useState)([]),[a,l]=(0,u.useState)(1),[s,c]=(0,u.useState)(0),[d,m]=(0,u.useState)(new Map),[p,h]=(0,u.useState)({...vy,imagePrompt:t.current,aiPrompt:t.current}),g=(e,t)=>{h((n=>(n[e]=t,{...n})))},f=(e,t=!1)=>{l(e.page+1),c(e.total_pages),i(!0===t?null==e?void 0:e.items:t=>t.concat(null==e?void 0:e.items))},b=(0,u.useCallback)((async(t=!1)=>{if(!n){o(!0);try{const n=await(0,_.aiSearchImages)({initialImage:e,page:a,search:p.imagePrompt,imageSize:p.imageSize,imageOrientation:p.imageOrientation,aiPrompt:t?"":p.aiPrompt});n&&(f(n,t),n.ai_query&&g("aiPrompt",n.ai_query))}catch(e){console.log(e)}o(!1)}}),[n,e,a,p.imagePrompt,p.imageSize,p.imageOrientation,p.aiPrompt]);return{imageSearchOptions:p,setSearchOption:g,isSearching:n,setIsSearching:o,setImageGallery:f,foundImages:r,galleryPage:a,foundImagePages:s,searchForImages:b,savedImages:d,setSavedImages:m,saveImage:(e,t,n=0)=>{m(d.set(e,{url:t,id:n}))}}})();return(0,a.createElement)(by.Provider,{value:r},(0,a.createElement)(E.Modal,{className:"kubio-ai-image-editor kubio-ai-wizard-modal",overlayClassName:"kubio-ai-close-modal",title:(0,a.createElement)(E.Flex,null,(0,a.createElement)(E.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,a.createElement)(E.Icon,{icon:ke.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),cv(n)),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Button,{onClick:o,icon:we,label:(0,T.__)("Close","kubio")}))),isDismissible:!1},(0,a.createElement)("div",{className:R()("kubio-ai-image-editor-wrapper",vv)},n===lv.imageGenerate.slug&&(0,a.createElement)(a.Fragment,null,t===sv.generate&&(0,a.createElement)(Dv,null),t===sv.edit&&(0,a.createElement)(Fv,null),t===sv.view&&(0,a.createElement)(Uv,null),t===sv.generativeFill&&(0,a.createElement)(fy,null),t===sv.variations&&(0,a.createElement)(Vv,null)),n===lv.imageSearch.slug&&(0,a.createElement)(a.Fragment,null,t===sv.imageSearch&&(0,a.createElement)(Iy,null)))))},xy=({onClose:e,onSelectImage:t,initialImage:n,initialPrompt:o})=>{const r=((e="",t="",n,o)=>{const[r,i]=(0,u.useState)(sv.imageSearch),[a,l]=(0,u.useState)(lv.imageSearch.slug),[s,c]=(0,u.useState)(""),[d,m]=(0,u.useState)(!1),[p,h]=(0,u.useState)(e),[g,f]=(0,u.useState)(),[b,v]=(0,u.useState)([]),[y,k]=(0,u.useState)(1),[E,S]=(0,u.useState)("1024x1024"),[w,C]=(0,u.useState)(""),[I,T]=(0,u.useState)("photographic"),[x,P]=(0,u.useState)([1024,1024]),R=(0,u.useRef)(t),[A,O]=(0,u.useState)(!1),N=o,[M]=(0,_.useAIServiceInfo)(),{aiImageCost:D=150}=M,B=(e,t="filename")=>b.findIndex((n=>n[t]===e)),L=(e,t={isVariation:!1,isVersion:!1})=>({filename:e,...t});return{editorSection:r,setEditorSection:i,imagePrompt:s,setImagePrompt:c,isGenerating:d,setIsGenerating:m,initialImage:p,setInitialImage:h,generatedImages:b,setGeneratedImages:v,onSelectImageAction:(e,t="",r=0)=>{n(e,t,r),o()},editImageAction:e=>{f(e),i(sv.edit)},viewImageAction:e=>{f(e),i(sv.view)},currentSelectedImage:g,setCurrentSelectedImage:f,backToSection:e=>{i(e)},prevImageAction:e=>{const t=B(e);-1!==t&&f(0===t?b[b.length-1]:b[t-1])},nextImageAction:e=>{const t=B(e);-1!==t&&(t===b.length-1?f(b[0]):f(b[t+1]))},aspectRatio:E,setAspectRatio:S,imageStyle:w,setImageStyle:C,imageSize:x,setImageSize:P,numberOfImages:y,setNumberOfImages:k,replaceWithEditedImage:e=>{const t=B(g.filename);if(t>-1){const n=b[t];n.filename=e,f(n),v((e=>(e[t]=n,[...e])))}},saveGeneratedImages:e=>{const t=b;e.forEach((e=>{t.push(L(e))})),v(t)},addImageVariations:(e,t)=>{const n=b;return t.forEach((t=>{n.push(L(t,{isVariation:e}))})),n},getImageVariations:()=>b.filter((e=>e.isVariation===g.filename)),saveNewImage:e=>{const t=L(e);return v((e=>[...e,t])),t},imageType:I,setImageType:T,editorTab:a,setEditorTab:l,setImageSizeFromOptions:e=>{const t=e.split("x");P([t[0],t[1]])},addImageVersion:e=>{const t=b,n=L(e,{isVersion:g.filename});t.push(n);const o={newImage:n,currentImage:g};return v(t),f(n),o},getPreviousImageVersion:()=>{const e=b.find((e=>e.filename===g.filename));if(e){const t=b.find((t=>t.filename===e.isVersion));t&&f(t)}},closeModal:N,initialPromptText:R,isInitialSearch:A,setIsInitialSearch:O,aiCreditsPerImageCost:D}})(n,o,t,e),{getAIInfo:i=p.noop}=(0,C.select)(g.STORE_KEY)||{},{remainingCredits:l=0}=i()||{},s=l>0;return s||(0,d.doAction)("kubio.ai.zero_credits"),(0,a.createElement)(iv.Provider,{value:r},s&&(0,a.createElement)(Ty,null))},Py=({initialImage:e,onChange:t,isSmallButton:n=!1,initialPrompt:o})=>{const r=(0,u.useRef)(),[i,l]=(0,u.useState)(""),[s,c]=yn(),d=(0,u.useCallback)((()=>{c((()=>{l((e=>!e))}))}),[c]);return(0,a.createElement)(a.Fragment,null,s,(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,tag:E.Button,ref:r,isSmall:n,className:"kubio-popover-options-button__options-item kubio-popover-options-icon kubio-ai-button",onClick:d,icon:ke.KubioAI,urlArgs:{source:"AI",content:"ai-image"}}),i&&(0,a.createElement)(xy,{className:"kubio-options-popover",anchor:r.current,onClose:()=>l(!1),onSelectImage:t,initialImage:e,initialPrompt:o}))},{MULTIPLE_IMAGES:Ry,IMAGE:Ay}=(0,Se.getNamesOfBlocks)(),Oy=[Ry,Ay],Ny=({value:e,onChange:t,onlyImages:n=!0,onClose:o})=>{const r=(0,u.useRef)(),[i,l]=(0,u.useState)(!1),[c,d]=yn(),{dataHelper:m}=(0,s.useKubioBlockContext)(),p=m.options.clientId,h=(0,u.useCallback)((()=>{d((()=>{l((e=>!e))}))}),[d]),{insertBlock:f}=(0,C.useDispatch)("core/block-editor"),b=(0,u.useCallback)(((n,r,i=0)=>{const a={url:n,id:i,caption:r,alt:""};if(e)return o(),void t(a);const l=m.withChildren(),s=l[l.length-1],c=(0,Ge.createBlock)(s.block.name);c.attributes={url:n,id:i,caption:r},f(c,l.length,p,!0),_()}),[e,m,f,p,o,t]),_=()=>{l((e=>!e))},v=(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[]);if(!n)return(0,a.createElement)(a.Fragment,null);const y=e?(0,T.__)("Replace with AI","kubio"):(0,T.__)("Add with AI","kubio");return(0,a.createElement)(a.Fragment,null,c,v&&(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,tag:E.MenuItem,ref:r,onClick:h,icon:ke.KubioAI,urlArgs:{source:"AI",content:"ai-image"}},y),i&&(0,a.createElement)(xy,{className:"kubio-options-popover",anchor:r.current,onClose:_,onSelectImage:b,initialImage:e}))},My=(0,S.createHigherOrderComponent)((e=>t=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(Ny,{...t}),(0,a.createElement)(e,{...t}))),"withImageToolbar");(0,d.addFilter)("kubio.blockEditor.mediaReplaceFlow.afterUploadComponent","kubio.control.ImageToolbar",My,4);const Dy=({value:e,BlockEdit:t,...n})=>{const[o,r]=yn(),i=(0,u.useRef)(),l=(0,u.useRef)(""),[c,d]=(0,u.useState)(!1),{dataHelper:m}=(0,s.useKubioBlockContext)(),h=m.getContextProp("activeImageId"),g=m.withChildren(),f=(0,p.get)(m,["localData","kubioAI","imageTerms"])||"",b=(0,u.useCallback)((()=>{r((()=>{d((e=>!e))}))}),[r]);return(0,u.useEffect)((()=>{m.blockName===Ay&&(l.current=m.getAttribute("url"))}),[m]),(0,a.createElement)(a.Fragment,null,o,(0,a.createElement)(k.BlockControls,null,(0,a.createElement)(E.ToolbarGroup,{className:"kubio-toolbar-text-ai"},(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,tag:E.ToolbarButton,name:"kubio-ai",icon:ke.KubioAI,title:(0,T.__)("Kubio AI","kubio"),className:"kubio-toolbar-text-ai",onClick:b}))),c&&(0,a.createElement)(xy,{className:"kubio-options-popover",anchor:i.current,onClose:()=>d(!1),onSelectImage:async e=>{if(m.blockName===Ay)return m.setAttribute("url",e),void m.setAttribute("id",0);const t=g.find((e=>e.clientId===h)),n=await(async e=>{const t=await Tv(e);return t.width/t.height})(e);t&&(t.setAttribute("url",e),t.setAttribute("id",0),t.setAttribute("aspectRatio",n))},initialImage:l.current,initialPrompt:f}),(0,a.createElement)(t,{...n}))},By=(0,S.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[])&&Oy.includes(n)?(0,a.createElement)(Dy,{BlockEdit:e,...t}):(0,a.createElement)(e,{...t})}),"withKubioAIToolbarControls");(0,d.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",By,4);const Ly=(0,S.createHigherOrderComponent)((e=>t=>{const{dataHelper:n}=(0,s.useKubioBlockContext)();if(!n)return(0,a.createElement)(e,{...t});const o=(0,p.get)(n,["localData","kubioAI","imageTerms"])||"",[r,i]=_f(n.clientId),l=(0,u.useCallback)((({url:e,type:t,onChange:l})=>"image"!==t?(0,a.createElement)(a.Fragment,null):(0,a.createElement)(Py,{isGenerating:r,setIsGenerating:i,initialImage:e,onChange:(e,t="")=>{l({url:e,id:"",caption:t}),(0,p.set)(n,["localData","kubioAI","imageTerms"],t)},initialPrompt:o})),[r,i,o,n]),c=(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[]),d=t.hideAIImageButton||!1;return(0,a.createElement)(e,{...t,secondaryButton:c&&!d?l:void 0})}),"withAIImageControls");(0,d.addFilter)("kubio.control.media-picker","kubio/control/ai-media-picker",Ly,4);const{HERO:zy,HEADER:Fy,NAVIGATION:Gy}=(0,Se.getNamesOfBlocks)(),Hy=(0,S.createHigherOrderComponent)((e=>t=>{var n,o,r,i,l;const{replaceDesignFromGallery:s}=Pf(),[c,m,h]=yn(),[f,b]=(0,u.useState)(!1),_=(0,u.useRef)(null),v=(0,u.useCallback)((()=>{_.current={type:"surprise"},b(!0)}),[]),y=(0,u.useCallback)((()=>{_.current={type:"regenerate"},b(!0)}),[_]),k=(0,u.useCallback)((()=>{s(((e,t)=>{_.current={type:"hand-pick",pattern:e,insert:t},b(!0)}))}),[s,_]),S=(0,u.useMemo)((()=>[{label:(0,T.__)("Surprise me","kubio"),description:(0,T.__)("Kubio AI chooses a section and writes the content for you.","kubio"),icon:ke.KubioAI,onClick:v},{label:(0,T.__)("Hand pick a design","kubio"),description:(0,T.__)("You choose a section, Kubio AI writes your content.","kubio"),icon:ke.PredesignedLayoutsIcon,onClick:k},{label:(0,T.__)("Regenerate content","kubio"),description:(0,T.__)("Kubio AI will keep the same design but regenerate the text and images.","kubio"),icon:ke.RegenerateContentIcon,onClick:y}]),[v,k,y]),w=null==t||null===(n=t.dataHelper)||void 0===n?void 0:n.blockName,I=null==t||null===(o=t.dataHelper)||void 0===o?void 0:o.clientId,{isUnlocked:x,templatePartWithSidebar:P}=Uy({clientId:I});let R=!1;const A=null==t||null===(r=t.dataHelper)||void 0===r||null===(i=r.getAttribute)||void 0===i?void 0:i.call(r,"kubioAI.meta.summary","");"regenerate"===(null===(l=_.current)||void 0===l?void 0:l.type)?R=!0:[zy,Fy,Gy].includes(w)||(R=!A);const O=(0,u.useCallback)((({buttonBaseClass:e})=>{if(!(0,d.applyFilters)("kubio.section-ai-options.showRegenerateButton",!0,w))return(0,a.createElement)(a.Fragment,null);const t=!h||!x||ye.AI_IN_PRO||P,n=(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,urlArgs:{source:"AI",content:"regenerate-design"},tag:E.Button,className:`${e} kubio-ai-design-section-button kubio-ai-button`,icon:ke.KubioAI,label:(0,T.__)("Regenerate design","kubio"),onClick:x?m:p.noop},(0,T.__)("Regenerate","kubio"));return(0,a.createElement)(a.Fragment,null,t&&n,!t&&(0,a.createElement)(ev,{menuItems:S,toggleButton:n,className:"kubio-dropdown-with-hover__section-options--ai"}))}),[w,h,x,P,m,S]),N=(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[]);return(0,a.createElement)(a.Fragment,null,c,f&&(0,a.createElement)(nv,{setVisible:b,sectionRef:_,onChangeSection:()=>{b(!1),k()},askForSummary:R}),(0,a.createElement)(e,{...t,beforeSettingsButton:N?O:void 0}))}),"withSectionHoverControls"),Uy=({clientId:e})=>{const{templatePartArea:t,templatePartWithSidebar:n}=(0,C.useSelect)((t=>{const{getBlockRootClientId:n,getBlock:o}=t("core/block-editor"),r=o(n(e)),i=o(e),a=(0,ye.findBlockByName)(i,"core/post-content"),l=(0,ye.findBlockByName)(i,"kubio/sidebar"),s=void 0!==a&&void 0!==l;return{templatePartArea:h().get({"kubio/header":"header","kubio/footer":"footer","kubio/sidebar":"sidebar"},null==r?void 0:r.name,!1),templatePartWithSidebar:s}}),[]);let{isUnlocked:o}=(0,s.useTemplatePartLock)(t);return t||(o=!0),{isUnlocked:o,templatePartWithSidebar:n}};(0,d.addFilter)("kubio.components.section-hover-options","kubio/control/section-hover-controls",Hy,4);const Wy=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M5 11.25h14v1.5H5z"})),jy=(0,a.createElement)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(A.Path,{d:"M7 16.5h10V15H7v1.5zm0-9V9h10V7.5H7z"})),Ky=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M6.13 5.5l1.926 1.927A4.975 4.975 0 007.025 10H5v1.5h2V13H5v1.5h2.1a5.002 5.002 0 009.8 0H19V13h-2v-1.5h2V10h-2.025a4.979 4.979 0 00-1.167-2.74l1.76-1.76-1.061-1.06-1.834 1.834A4.977 4.977 0 0012 5.5c-1.062 0-2.046.33-2.855.895L7.19 4.44 6.13 5.5zm2.37 5v3a3.5 3.5 0 107 0v-3a3.5 3.5 0 10-7 0z",fillRule:"evenodd",clipRule:"evenodd"})),Vy=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})),$y=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(A.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})),{HEADING:qy}=(0,Se.getNamesOfBlocks)(),Yy=({title:e,subtitle:t,icon:n})=>(0,a.createElement)(E.Flex,{className:"text-ai-custom-label",direction:"column",gap:1.5,expanded:!0},(0,a.createElement)(E.Flex,{justify:"flex-start"},(0,a.createElement)(Ee,{icon:n,className:"text-ai-custom-label__icon"}),(0,a.createElement)("span",{className:"text-ai-custom-label__title"},e)),(0,a.createElement)("span",{className:"text-ai-custom-label__subtitle"},t)),Zy=({dataHelper:e,onClose:t,anchor:n,isGenerating:o,setIsGenerating:r})=>{const[i,l]=(0,u.useState)(""),[{pageTitle:s,siteContext:c,pageContext:d}]=(0,_.useAIData)(),m=(0,u.useCallback)((async()=>{r(!0),t();try{const t=await(0,_.prompt)({pageTitle:s,siteContext:c,pageContext:d,prompt:i,originalContent:e.getAttribute("content",""),short:e.block.name===qy});e.setAttribute("content",t)}catch(e){}r(!1)}),[e,i,t,d,s,r,c]);return(0,a.createElement)(E.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:n,onClose:t,offset:15},(0,a.createElement)(E.Flex,{direction:"column",align:"end",gap:3.75},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(Ue.TextareaControl,{className:"kubio-ai-block-prompt-textarea",value:i,onChange:l,label:(0,a.createElement)(Yy,{icon:ke.TextAiRegenerate,title:(0,T.__)("Regenerate","kubio"),subtitle:(0,T.__)("Write a new prompt and let the AI generate the content for you","kubio")}),cols:60,rows:4})),(0,a.createElement)(E.FlexItem,null,(0,a.createElement)(E.Button,{className:"kubio-ai-button",onClick:m,isBusy:o},(0,T.__)("Regenerate","kubio")))))},Xy=({dataHelper:e,onClose:t,anchor:n,isGenerating:o,setIsGenerating:r})=>{const[i,l]=(0,u.useState)("natural"),[{pageTitle:s,siteContext:c,pageContext:d}]=(0,_.useAIData)(),m=(0,u.useMemo)((()=>(0,p.map)((0,_.getContentLanguageStyles)(),(({label:e,description:t},n)=>({label:e,description:t,value:n})))),[]),h=(0,u.useCallback)((async()=>{r(!0),t();try{const t=await(0,_.changeTextPrompt)({pageTitle:s,siteContext:c,pageContext:d,promptData:i,text:e.getAttribute("content",""),type:"tone"});e.setAttribute("content",t)}catch(e){}r(!1)}),[e,i,t,d,s,r,c]);return(0,a.createElement)(E.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:n,onClose:t,offset:15},(0,a.createElement)(E.Flex,{direction:"column",gap:3.75},(0,a.createElement)(E.FlexBlock,null,(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,a.createElement)(Yy,{icon:$y,title:(0,T.__)("Change tone","kubio"),subtitle:(0,T.__)("Select the tone you want to rewrite this text.","kubio")}),inlineLabel:!1,options:m,value:i,onChange:l,itemRenderer:e=>(0,a.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,a.createElement)("span",null,e.label),(0,a.createElement)("span",null,e.description))})),(0,a.createElement)(E.Button,{className:"kubio-ai-button",onClick:h,isBusy:o},(0,T.__)("Rewrite","kubio"))))},Qy=["en_US","es_ES","de_DE","fr_FR","en_GB","ja_JP"],Jy=({dataHelper:e,onClose:t,anchor:n,isGenerating:o,setIsGenerating:r})=>{const[i,l]=(0,u.useState)("en_US"),[{pageTitle:s,siteContext:c,pageContext:d}]=(0,_.useAIData)(),m=(0,u.useMemo)((()=>{const e=(0,p.map)((0,_.getContentLanguages)(),((e,t)=>({label:e,value:t})));return[{items:e.filter((e=>Qy.includes(e.value))).sort(((e,t)=>Qy.indexOf(e.value)-Qy.indexOf(t.value)))},{items:e.filter((e=>!Qy.includes(e.value)))}]}),[]),h=(0,u.useCallback)((async()=>{r(!0),t();try{const t=await(0,_.changeTextPrompt)({pageTitle:s,siteContext:c,pageContext:d,promptData:i,text:e.getAttribute("content",""),type:"translate"});e.setAttribute("content",t)}catch(e){}r(!1)}),[e,i,t,d,s,r,c]);return(0,a.createElement)(E.Popover,{className:"kubio-options-popover kubio-text-ai-popover",anchor:n,onClose:t,offset:15},(0,a.createElement)(E.Flex,{direction:"column",gap:3.75},(0,a.createElement)(E.FlexBlock,{expanded:!0},(0,a.createElement)(Ue.GutentagSelectControl,{label:(0,a.createElement)(Yy,{icon:Vy,title:(0,T.__)("Translate","kubio"),subtitle:(0,T.__)("In which language would you like to translate this text?","kubio")}),value:i,onChange:l,inlineLabel:!1,options:m})),(0,a.createElement)(E.Button,{className:"kubio-ai-button",onClick:h,isBusy:o},(0,T.__)("Translate","kubio"))))},{HEADING:ek,TEXT:tk}=(0,Se.getNamesOfBlocks)(),nk=[ek,tk],ok=[{icon:Wy,title:(0,T.__)("Make shorter","kubio"),action:"shorten"},{icon:jy,title:(0,T.__)("Make longer","kubio"),action:"lengthen"},{icon:Ky,title:(0,T.__)("Fix spelling & grammar","kubio"),action:"fix"},{icon:ke.TextAiRegenerate,title:(0,T.__)("Regenerate","kubio"),action:"prompt"},{icon:Vy,title:(0,T.__)("Translate","kubio"),action:"translate"},{icon:$y,title:(0,T.__)("Change tone","kubio"),action:"change-tone"}],rk=({BlockEdit:e,...t})=>{const{dataHelper:n}=(0,s.useKubioBlockContext)(),{name:o,clientId:r,isSelected:i}=t,[l,c]=_f(r),[{pageContext:d,siteContext:m,pageTitle:p}]=(0,_.useAIData)(),h=(0,u.useRef)(),g=o===tk?"p":`h${n.getProp("level",2)}`,[f,b]=(0,u.useState)(!1),[v,y]=(0,u.useState)(!1),[S,w]=(0,u.useState)(!1),[C,I,x]=yn(),P=(0,u.useCallback)((async e=>{const{action:t}=e;if(!l){switch(c(!0),t){case"shorten":case"lengthen":case"fix":try{const e=await(0,_.processContent)({pageContext:d,siteContext:m,pageTitle:p,content:n.getAttribute("content",""),action:t,extras:{tag:g}});n.setAttribute("content",e)}catch(e){On.Log.error(`process-text: ${t}`,e)}break;case"prompt":b(!0);break;case"translate":y(!0);break;case"change-tone":w(!0)}c(!1)}}),[n,l,d,p,c,m,g]),A=(0,u.useRef)(),[O,N]=(0,ve.useProModal)();return(0,a.createElement)(a.Fragment,null,C,(0,a.createElement)(k.BlockControls,{group:"block"},x&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(E.ToolbarDropdownMenu,{ref:h,icon:ke.KubioAI,className:"kubio-toolbar-text-ai",label:(0,T.__)("Kubio AI","kubio"),controls:ok.map((e=>({...e,onClick:()=>P(e)}))),popoverProps:{className:R()("kubio-toolbar-text-ai__popover",{"kubio-toolbar-text-ai__popover--hidden":ye.AI_IN_PRO})},toggleProps:{ref:A,onClick:e=>{N(!0)}}}),ye.AI_IN_PRO&&i&&(0,a.createElement)(O,{anchorRef:A.current,urlArgs:{source:"AI",content:"text-ai-toolbar"}})),!x&&(0,a.createElement)(ve.ProItem,{isProItem:ye.AI_IN_PRO,tag:E.ToolbarButton,ref:h,icon:ke.KubioAI,className:"kubio-toolbar-text-ai kubio-ai-button",label:(0,T.__)("Kubio AI","kubio"),onClick:I})),f&&(0,a.createElement)(Zy,{anchor:h.current,onClose:()=>b(!1),dataHelper:n,isGenerating:l,setIsGenerating:c}),v&&(0,a.createElement)(Jy,{anchor:h.current,onClose:()=>y(!1),dataHelper:n,isGenerating:l,setIsGenerating:c}),S&&(0,a.createElement)(Xy,{anchor:h.current,onClose:()=>w(!1),dataHelper:n,isGenerating:l,setIsGenerating:c}),(0,a.createElement)(e,{...t}))},ik=(0,S.createHigherOrderComponent)((e=>t=>{const{name:n}=t;return(0,C.useSelect)((e=>e(g.STORE_KEY).isAICapabilityEnabled()),[])&&nk.includes(n)?(0,a.createElement)(rk,{BlockEdit:e,...t}):(0,a.createElement)(e,{...t})}),"withKubioAIToolbarControls");(0,d.addFilter)("editor.BlockEdit","kubio/ai/with-toolbar-controls",ik,4),(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/contact"!==e.name||h().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e))),(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","contact-form",(e=>("kubio/subscribe-form"!==e.name||h().set(e,"attributes.kubio.props.autoSelectFormAtMount",!0),e)));const ak={facebook:"font-awesome/facebook-square",twitter:"font-awesome/square-x-twitter",youtube:"font-awesome/youtube-square",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest-square",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin-square"},lk={"font-awesome":[{type:"square",items:ak},{type:"noneSquare",items:{facebook:"font-awesome/facebook",twitter:"font-awesome/twitter-x",youtube:"font-awesome/youtube-play",instagram:"font-awesome/instagram",tiktok:"font-awesome/tiktok",pinterest:"font-awesome/pinterest",whatsapp:"font-awesome/whatsapp",linkedin:"font-awesome/linkedin"}}],ionicons:[{type:"filled",items:{facebook:"ionicons/social-facebook",twitter:"ionicons/social-twitter",youtube:"ionicons/social-youtube",instagram:"ionicons/social-instagram",pinterest:"ionicons/social-pinterest",whatsapp:"ionicons/social-whatsapp",linkedin:"ionicons/social-linkedin"}},{type:"outlined",items:{facebook:"ionicons/social-facebook-outline",twitter:"ionicons/social-twitter-outline",youtube:"ionicons/social-youtube-outline",instagram:"ionicons/social-instagram-outline",pinterest:"ionicons/social-pinterest-outline",whatsapp:"ionicons/social-whatsapp-outline",linkedin:"ionicons/social-linkedin-outline"}}],"icons8-line-awesome":[{type:"normal",items:{facebook:"icons8-line-awesome/facebook",twitter:"icons8-line-awesome/twitter",youtube:"icons8-line-awesome/youtube-play",instagram:"icons8-line-awesome/instagram",pinterest:"icons8-line-awesome/pinterest",whatsapp:"icons8-line-awesome/whatsapp",linkedin:"icons8-line-awesome/linkedin"}}],socicon:[{type:"normal",items:{facebook:"socicon/facebook",twitter:"socicon/twitter",youtube:"socicon/youtube",instagram:"socicon/instagram",pinterest:"socicon/pinterest",whatsapp:"socicon/whatsapp",linkedin:"socicon/linkedin"}}],"foundation-icons":[{type:"normal",items:{facebook:"foundation-icons/social-facebook",twitter:"foundation-icons/social-twitter",youtube:"foundation-icons/social-youtube",instagram:"foundation-icons/social-instagram",pinterest:"foundation-icons/social-pinterest",linkedin:"foundation-icons/social-linkedin"}}],"simple-line-icons":[{type:"normal",items:{facebook:"simple-line-icons/social-facebook",twitter:"simple-line-icons/social-twitter",youtube:"simple-line-icons/social-youtube"}}],typicons:[{type:"normal",items:{facebook:"typicons/social-facebook",twitter:"typicons/social-twitter",youtube:"typicons/social-youtube",instagram:"typicons/social-instagram",pinterest:"typicons/social-pinterest",linkedin:"typicons/social-linkedin"}}]},sk=(()=>{const e={};return h().each(lk,((t,n)=>{t.forEach((({items:t})=>{h().each(t,((n,o)=>{h().set(e,n,t)}))}))})),e})(),ck=ak,{SECTION:uk,SOCIAL_ICONS:dk}=(0,Se.getNamesOfBlocks)(),mk=({block:e,siteContext:t})=>{const n=h().get(t,"contact.socials",[]),o=(0,p.filter)(n,(({url:e})=>!!e));if(!n||h().isEmpty(n)||!o.length)return e;const r="attributes.icon.name",i=n.filter((({url:e})=>e)),a=e.innerBlocks,l=a.filter((e=>{const t=h().get(e,r);return i.find((({type:e})=>t.includes(e)))})),s=[];let c=null;return i.forEach((({type:e,url:t})=>{const n=l.find((t=>h().get(t,r).includes(e)));n?(h().set(n,"attributes.link.value",t),c=h().get(n,"attributes.icon.name")):s.push({type:e,url:t})})),s.forEach((({type:e,url:t})=>{const n=a[a.length-1],o=h().cloneDeep((0,Ge.cloneBlock)(n));h().unset(o,"attributes.kubio.styleRef"),h().set(o,"attributes.link.value",t);const r=((e,t)=>{const n=h().get(sk,t),o=ck[e];return n?h().get(n,e,o):o})(e,c);h().set(o,"attributes.icon.name",r),l.push(o)})),e.innerBlocks=l,e};(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","social-icons",((e,t,n,o)=>{if(e.name!==dk)return e;const r=o[0];if(r.name===uk){const t=["contact","footer-section","footer"],n=h().get(r,"attributes.kubioAI.meta.category");if(!t.includes(n))return e}return mk({block:e,siteContext:t})})),(0,d.addFilter)("kubio.navigation.topBarBlockBeforeInsert","social-icons",((e,t)=>e.name!==dk?e:mk({block:e,siteContext:t})));const{ICON_LIST:pk}=(0,Se.getNamesOfBlocks)(),hk={phone:{desc:"phone",icons:["phone","call"]},email:{desc:"mail",icons:["mail","envelope"]},address:{desc:"address",icons:["map","pin","home","house"]}},gk=(e,t)=>e.innerBlocks.find((e=>{if(h().get(e,"attributes.kubioAI.desc","").toLowerCase().includes(hk[t].desc))return!0;const n=h().get(e,"attributes.icon","").toLowerCase();for(const e of hk[t].icons)if(n.includes(e))return!0;return!1})),fk=({block:e,siteContext:t})=>{const n=h().get(t,"contact"),o=h().get(n,"address","123, Main Street, City, Country");if(o){const t=gk(e,"address");t&&h().set(t,"attributes.text",o)}const r=h().get(n,"phone","+1 234 567 890");if(r){const t=gk(e,"phone");t&&h().set(t,"attributes.text",r)}const i=h().get(n,"email","email@example.com");if(i){const t=gk(e,"email");t&&h().set(t,"attributes.text",i)}return e};(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","iconsList",((e,t,n,o)=>e.name!==pk?e:fk({block:e,siteContext:t}))),(0,d.addFilter)("kubio.navigation.topBarBlockBeforeInsert","iconsList",((e,t)=>e.name!==pk?e:fk({block:e,siteContext:t}))),(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","kubio-map",((e,t)=>{if("kubio/map"!==e.name)return e;const n=(0,p.get)(t,["contact","address"]);return n&&(0,p.set)(e,"attributes.address",n),(0,p.set)(e,"attributes.zoom.value",15),e})),(0,d.addFilter)("kubio.ai.generateSectionBlocks.afterBlockGenerated","logo",((e,t)=>{if("kubio/logo"!==e.name)return e;const n=(0,C.select)("core").getEditedEntityRecord("root","site");return((null==n?void 0:n.site_logo)||(null==n?void 0:n.sitelogo)||h().get(t,["website_logo","id"]))&&h().set(e,"attributes.kubio.props.layoutType","image"),e})),(0,d.addFilter)("kubio.ai-filters","kubio-ai-filters",(()=>({useHandleInsert:ov,useIsAISetupComplete:yn,GenerateSectionModal:nv})));const bk=(0,a.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,a.createElement)(A.Path,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})),_k=function({icon:e}){if(!(0,C.useSelect)((e=>e(g.STORE_KEY).isFeatureActive("fullscreenMode")),[]))return null;const t=e||bk;return(0,a.createElement)(E.Button,{className:"edit-site-fullscreen-mode-close",icon:t,iconSize:36,href:"index.php",label:(0,T.__)("Back","kubio")})};function vk(e,t){(0,s.registerTemplateStore)(),t.__experimentalFetchLinkSuggestions=s.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"];const n=new URLSearchParams(window.location.search);t.isGutentagDebug=!!n.get("kubio-debug");const o=t.state;delete t.state,o.settings=t,(0,c.registerCoreBlocks)(),(0,l.initFirebaseData)(),(0,p.isFunction)(c.__experimentalRegisterExperimentalCoreBlocks)&&(0,c.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0});const r=mb;t.wpVersion&&document.body.classList.add("kubio-wp-"+t.wpVersion.replace(".","-")),J_(o),(0,s.reactRender)((0,a.createElement)(u.StrictMode,null,(0,a.createElement)(r,{initialSettings:o.settings})),document.getElementById(e)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)},top.kubioStartTime=performance.now(),(0,d.addAction)("kubio.editor.page-changed","kubio/editor/page-changed/restart-performance-timer",(()=>{top.kubioStartTime=performance.now()}))}})(),(window.kubio=window.kubio||{}).editor=o})();
