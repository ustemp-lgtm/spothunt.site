(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{AdvancedInspectorPanel:()=>T,StatesControl:()=>_,withInspectorControlsAdvancedPanel:()=>R});const o=window.React,l=(window.kubio.adminPanel,window.kubio.constants),n=window.kubio.controls,a=window.kubio.core,r=window.kubio.inspectors,s=window.kubio.styleManager,i=window.wp.components,u=window.wp.compose,d=window.wp.data,c=window.wp.element,p=window.wp.i18n,m=window.lodash;var E=e.n(m);const S=window.kubio.log,y={[s.StylesEnum.TYPOGRAPHY]:{control:n.TypographyForTextAdvanced,mapsToStyle:!1,title:(0,p.__)("Typography","kubio")},[s.StylesEnum.TYPOGRAPHY_FOR_HEADING]:{control:n.TypographyForHeading,mapsToStyle:!1,title:(0,p.__)("Typography","kubio")},[s.StylesEnum.TYPOGRAPHY_FOR_CONTAINER]:{control:n.TypographyForContainer,mapsToStyle:!1,title:(0,p.__)("Typography","kubio")},[s.StylesEnum.TYPOGRAPHY_FOR_CONTAINER_ADVANCED]:{control:n.TypographyForContainerAdvanced,mapsToStyle:!1,title:(0,p.__)("Typography","kubio")},[s.StylesEnum.SPACING]:{control:n.SpacingControl,mapsToStyle:!1,title:(0,p.__)("Spacing","kubio")},[s.StylesEnum.BORDER]:{control:n.BorderAndShadowControl,mapsToStyle:!1,title:({filters:e})=>{const{supportsBorder:t=!0,supportsBoxShadow:o=!0}=e;return t&&o?(0,p.__)("Border and Shadows","kubio"):t&&!o?(0,p.__)("Border","kubio"):!t&&o?(0,p.__)("Box shadow","kubio"):void 0}},[s.StylesEnum.BACKGROUND]:{control:n.BackgroundControl,title:(0,p.__)("Background","kubio"),options:{mergeArrays:!0}},[s.StylesEnum.TEXT_SHADOW]:{control:n.TextShadowControl,title:(0,p.__)("Text shadow","kubio")},[s.StylesEnum.RESPONSIVE]:{shouldRender:({filters:e})=>!(null!=e&&e.isDisabled),control:n.ResponsiveControl,mapsToStyle:!1,title:(0,p.__)("Responsive","kubio")},[s.StylesEnum.SEPARATORS]:{control:n.SeparatorsControl,title:(0,p.__)("Dividers","kubio")},[s.StylesEnum.TRANSFORM]:{control:n.TransformControl,title:(0,p.__)("Transform","kubio"),options:{mergeData:!0}},[s.StylesEnum.APPEARANCE]:{shouldRender:({filters:e})=>!(null!=e&&e.isDisabled),control:n.AppearanceControl,title:(0,p.__)("Entrance animation","kubio")},[s.StylesEnum.TRANSITION]:{control:n.TransitionControlOnHover,shouldRender:e=>"hover"===e.state,title:(0,p.__)("Transition","kubio")},[s.StylesEnum.MISC]:{shouldRender:({filters:e})=>!(null!=e&&e.isDisabled),control:n.MiscControl,title:(0,p.__)("Miscellaneous","kubio")}},b=[s.StylesEnum.TRANSITION,s.StylesEnum.BACKGROUND,s.StylesEnum.SEPARATORS,s.StylesEnum.SPACING,s.StylesEnum.BORDER,s.StylesEnum.BOX_SHADOW,s.StylesEnum.TYPOGRAPHY,s.StylesEnum.TYPOGRAPHY_FOR_CONTAINER,s.StylesEnum.TYPOGRAPHY_FOR_CONTAINER_ADVANCED,s.StylesEnum.TYPOGRAPHY_FOR_HEADING,s.StylesEnum.TEXT_SHADOW,s.StylesEnum.TRANSFORM,s.StylesEnum.APPEARANCE,s.StylesEnum.RESPONSIVE,s.StylesEnum.MISC],k=({selectedElement:e})=>{let t=[];return e&&(t=(0,m.get)(e,"supports.states",["normal","hover"])),t},_=({activeState:e,setActiveState:t,availableStates:l=[],selectedElement:n=null,label:a=null})=>{var r;const u=(0,m.isEmpty)(l)?k({selectedElement:n}):l,d=null===(r=(0,m.find)(s.statesById,{value:e}))||void 0===r?void 0:r.id;return!(u.length<=1)&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"kubio-states-control-label",title:a},a),(0,o.createElement)(i.__experimentalRadioGroup,{id:"kubio-states-control",className:"kubio-states-control-radio-group",defaultChecked:e,checked:d,onChange:e=>{var o;return t(null===(o=s.statesById[e])||void 0===o?void 0:o.value)}},u.map((e=>{var t,l;return(0,o.createElement)(i.__experimentalRadio,{key:e,value:null===(t=s.statesById[e])||void 0===t?void 0:t.id},null===(l=s.statesById[e])||void 0===l?void 0:l.label)}))))},v=window.wp.blocks,A=e=>{const{styles:t,selectedStyledElement:l,dataHelper:n}=e;return b.filter((e=>t.includes(e))).filter(Boolean).map((e=>(0,o.createElement)(g,{key:e,style:e,selectedStyledElement:l,dataHelper:n})))},g=({style:e,selectedStyledElement:t,dataHelper:l})=>{const{defaultOptions:n}=(0,a.useDataHelperDefaultOptionsContext)(),r=y[e];if(!r)return S.Log.error(`Advanced panel: "${e}" does not exists`),(0,o.createElement)(o.Fragment,null);const{control:s,mapsToStyle:u=!0,shouldRender:d=(()=>!0),options:c={}}=r,p=u?l.useStylePath(e,{...n,...c},{}):{dataHelper:l},m=E().get(t,["supports","filters",e],{});let b="";b="function"==typeof y[e].title?y[e].title({filters:m}):y[e].title;const k={dataHelper:l,property:e,state:E().get(n,"state"),...p,filters:m,styledElement:t.name};return d(k)&&(0,o.createElement)(i.PanelBody,{key:`panel-${e}`,classname:"kubio-advanced-panel-panelbody",title:b,initialOpen:!1},(0,o.createElement)(s,{...k}))},O=e=>{const{name:t,clientId:l}=e,{blockDefinition:r,getBlock:i}=(0,d.useSelect)((e=>({blockDefinition:e("core/blocks").getBlockType(t),getBlock:e("core/block-editor").getBlock}))),{displayAdvancedPanelFor:u}=r,m=u?u(l,d.select):null,S=m?i(m).name:t,y=(0,a.getBlockElements)(S,!1,!0),b=(0,a.getBlockDefaultElement)(S)||y[0],[g,O]=(0,c.useState)(""),[T,R]=(0,c.useState)(b),w=E().get(T,"supports.styles",[]),C=(0,c.useMemo)((()=>y.reduce(((e,t)=>{const{items:o}=t;return o?[...e,...o]:[...e,t]}),[])),[y]),h=null==T?void 0:T.name,P=(0,d.useSelect)((e=>e("core/block-editor").getBlock(m||l)),[m,l]),{dataHelper:f}=(0,a.useKubioDataHelper)(P),N={state:g,styledComponent:h},D=(0,a.useDataHelperDefaultOptionsContext)({defaultOptions:N});if(!w.length)return(0,o.createElement)("div",{className:"kubio-editing-header"},(0,o.createElement)(n.ControlNotice,{content:(0,p.__)("Current block does not support advanced styling","kubio")}));const B=C.filter((e=>!e.internal)).length;f.kubioSupports("advanced.responsive",!0)&&(T.wrapper||B<=1)&&w.push(s.StylesEnum.RESPONSIVE),f.kubioSupports("advanced.misc",!0)&&(T.wrapper||B<=1)&&w.push(s.StylesEnum.MISC),(0,v.hasBlockSupport)(null==f?void 0:f.blockName,"kubio.appearanceEffect",!1)&&w.push(s.StylesEnum.APPEARANCE);const H=k({selectedElement:T});return(0,o.createElement)(a.DataHelperDefaultOptionsContext.Provider,{value:D},(0,o.createElement)(a.KubioBlockContext.Provider,{value:{dataHelper:f}},(y.length>1||H.length>1)&&(0,o.createElement)("div",{className:"kubio-editing-header"},y.length>1&&(0,o.createElement)(n.GutentagSelectControl,{className:"kubio-editing-select",label:(0,p.__)("Editing","kubio"),value:null==T?void 0:T.name,onChange:e=>{R(C.find((t=>t.name===e))),O("")},options:y}),(0,o.createElement)(_,{label:(0,p.__)("State","kubio"),activeState:g,setActiveState:e=>{O("normal"===e?"":e)},selectedElement:T,availableStates:H})),(0,o.createElement)(A,{...e,styles:w,selectedStyledElement:T,dataHelper:f})))},T=e=>((0,d.useSelect)((e=>!!e(l.STORE_KEY)&&e(l.STORE_KEY).isGutentagDebug()),[]),(0,o.createElement)(r.AdvancedInspectorControls,{clientId:e.clientId},(0,o.createElement)(O,{...e}))),R=(0,u.createHigherOrderComponent)((e=>t=>{const l=(0,a.getBlockAncestor)(null==t?void 0:t.name),{ancestor:s}=(0,a.useAncestorContext)();let i={};l&&s===l&&(i={ancestor:s}),l&&(i.inheritedAncestor=l);const u={defaultOptions:i},d=(0,a.useDataHelperDefaultOptionsContext)(u);return(0,o.createElement)(a.DataHelperDefaultOptionsContext.Provider,{value:d},(0,o.createElement)(e,{...t}),t.isSelected&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(T,{...t}),(0,o.createElement)(r.BlockInspectorTopControls,null,(0,o.createElement)(n.LinkedNotice,{...t}),(0,o.createElement)(n.AncestorNotice,null))))}),"withInspectorControlsAdvancedPanel");(window.kubio=window.kubio||{}).advancedPanel=t})();
