(()=>{var e={3967:(e,t)=>{var o;!function(){"use strict";var n={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,r(o)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)n.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(o=function(){return l}.apply(t,[]))||(e.exports=o)}()}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n),o.d(n,{CustomFormatsToolbar:()=>z});const e=window.wp.richText,t=window.React,l=window.kubio.globalData,r=window.wp.blockEditor,a=window.wp.element,i=window.wp.i18n,c=(0,a.forwardRef)((function({icon:e,size:t=24,...o},n){return(0,a.cloneElement)(e,{width:t,height:t,...o,ref:n})})),s=window.wp.primitives,u=(0,t.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(s.Path,{d:"M12.9 6h-2l-4 11h1.9l1.1-3h4.2l1.1 3h1.9L12.9 6zm-2.5 6.5l1.5-4.9 1.7 4.9h-3.2z"}));function m(t,o,n){const l=(0,e.getActiveFormat)(n,o);if(!l)return;const r=l.attributes.style;if(r){var a,i;const e=new RegExp(`${t}:(.*?)(;|$)`);return null===(a=r.match(e))||void 0===a||null===(i=a[1])||void 0===i?void 0:i.trim()}}const f=e=>{var t,o,n;return(null===(t=e.current)||void 0===t||null===(o=t.closest("[data-type]"))||void 0===o||null===(n=o.getAttribute("data-type"))||void 0===n?void 0:n.startsWith("kubio/"))||!1},b=window.kubio.controls,v=window.kubio.utils,p=window.wp.components,d=(0,v.wpVersionCompare)("6.4","<"),h=({contentRef:t,settings:o,value:n})=>{const l={};if(d){const r=(0,e.useAnchorRef)({ref:t,value:n,settings:o});l.anchorRef=((e,t)=>{const o=!!((null==e?void 0:e.endOffset)-(null==e?void 0:e.startOffset)),n=e&&void 0===(null==e?void 0:e.endOffset);let l=t.current;return(n||o)&&(l=e),l})(r,t)}else{const r=(0,e.useAnchor)({editableContentElement:t.current,value:n,settings:o});l.anchor=r}return{popoverOptions:l}};function g({name:o,value:n,onChange:l,onClose:r,contentRef:i,onReset:c,currentColor:s,formatValue:u}){const m=(0,a.useRef)(),f=(0,a.useCallback)((e=>{const t=null==e?void 0:e.target,o=m.current;t&&null!=o&&o.contains(t)||r()}),[m.current,r]);(0,v.useOnClickOutside)(m,f);const{popoverOptions:d}=h({contentRef:i,settings:E,value:n});return(0,t.createElement)(p.__experimentalStyleProvider,{document},(0,t.createElement)(p.Popover,{value:n,className:"kubio-components-inline-color-popover kubio-color-popover",position:"bottom center",placement:"bottom",...d},(0,t.createElement)("div",{ref:m},(0,t.createElement)(b.GutentagColorPickerWithPalette,{defaultValue:s,onChange:t=>l((0,e.applyFormat)(n,{type:o,attributes:{style:`color:${t}`}}),t),hasButton:!0,onButtonClick:c}))))}const y=window.lodash;var k=o.n(y);const _="kubio/text-color",w=(0,i.__)("Text color","kubio"),E={name:_,title:w,tagName:"span",className:"kubio-has-inline-color",attributes:{style:"style"},edit:function({value:o,onChange:n,isActive:i,activeAttributes:s,contentRef:m}){const[b,v]=(0,a.useState)(!1),{parseVariableColor:p}=(0,l.useGlobalDataColors)(),d=(0,a.useCallback)((()=>{v(!0)}),[]),h=(0,a.useCallback)((()=>{v(!1)}),[]),[y,k]=(0,a.useState)(null);(0,a.useEffect)((()=>{k(function(t,o){const n=(0,e.getActiveFormat)(o,t);if(!n)return;const l=n.attributes.style;var r,a;return l?null===(r=l.match(/color:(.*?)(;|$)/))||void 0===r||null===(a=r[1])||void 0===a?void 0:a.trim():void 0}(_,o))}),[]);const E=(0,a.useMemo)((()=>{if(y)return{backgroundColor:p(y)}}),[y,p]),F=((null==o?void 0:o.activeFormats)||[]).length,C=(0,a.useMemo)((()=>F>0?Math.random():0),[F]);return f(m)?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.RichTextToolbarButton,{key:i?"text-color":"text-color-not-active",className:"kubio-format-library-text-color-button",name:i?"italic":void 0,icon:(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c,{icon:u}),i&&(0,t.createElement)("span",{className:"kubio-format-library-text-color-button__indicator",style:E})),title:w,onClick:d}),b&&(0,t.createElement)(g,{key:C,name:_,onClose:h,activeAttributes:s,value:o,currentColor:y,onChange:(e,t)=>{k(t),n(e)},onReset:()=>{n((0,e.removeFormat)(o,_)),h()},contentRef:m})):(0,t.createElement)(t.Fragment,null)}},F=({name:e,children:o,...n})=>{let l="RichText.ToolbarControls";return e&&(l+=`.${e}`),(0,t.createElement)(p.Fill,{name:l},o)},C=window.kubio.core,x=window.kubio.icons,R=(0,t.createElement)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(s.Path,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"}));var S=o(3967),P=o.n(S);const O=[{label:(0,i.__)("100 (thin)","kubio"),value:100},{label:(0,i.__)("200 (extra light)","kubio"),value:200},{label:(0,i.__)("300 (light)","kubio"),value:300},{label:(0,i.__)("400 (normal)","kubio"),value:400},{label:(0,i.__)("500 (medium)","kubio"),value:500},{label:(0,i.__)("600 (semi bold)","kubio"),value:600},{label:(0,i.__)("700 (bold)","kubio"),value:700},{label:(0,i.__)("800 (extra bold)","kubio"),value:800},{label:(0,i.__)("900 (heavy)","kubio"),value:900}],N=({isActive:e,value:o,onChange:n,onReset:r,contentRef:i,formatValue:c})=>{var s;const{getFontWeights:u}=(0,l.useGlobalDataFonts)(),[m,f]=(0,a.useState)(!1),b=(0,a.useRef)(),p=k().get(o,"fontFamily"),d=k().get(o,"fontWeight"),h=u(p),g=(0,C.useDeepMemo)((()=>O.filter((({value:e})=>-1!==h.indexOf(e)))),[h]),y={value:p,onChange:e=>{const t=u(e).some((e=>e===d));t?n("fontFamily",e):n("",{fontFamily:e,fontWeight:400})}},_={value:d,onChange:e=>{n("fontWeight",e)},options:g,onReset:r},[w,E]=(0,a.useState)(Math.random()),F=(0,a.useCallback)((e=>{const t=null==e?void 0:e.target,o=t&&t.closest(".block-editor-rich-text__inline-font-family, .h-select-control__popover, .kubio-fontpicker-content"),n=b.current;null!=n&&n.contains(t)||o||f(!1)}),[]);(0,v.useOnClickOutside)(b,F);const x=null==i||null===(s=i.current)||void 0===s?void 0:s.tagName;return(0,a.useEffect)((()=>{x&&E(Math.random())}),[x]),(0,t.createElement)(T,{key:w,contentRef:i,fontFamilyWeight:W,value:o,isActive:e,onTogglePopover:()=>{f((e=>!e))},isPopoverVisible:m,setPopoverVisibility:f,fontFamily:y,fontWeight:_,onReset:r,popperRef:b})},T=({contentRef:e,fontFamilyWeight:o,value:n,isActive:l,onTogglePopover:r,isPopoverVisible:a,setPopoverVisibility:c,fontFamily:s,fontWeight:u,onReset:m,popperRef:f})=>{const{popoverOptions:v}=h({contentRef:e,settings:o,value:n});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(p.ToolbarButton,{className:P()({"is-pressed":l}),icon:R,onClick:r,label:(0,i.__)("Typography","kubio")}),a&&(0,t.createElement)(p.__experimentalStyleProvider,{document},(0,t.createElement)(p.Popover,{className:"block-editor-rich-text__inline-font-family",onFocusOutside:()=>c(!1),position:"bottom center",placement:"bottom",...v},(0,t.createElement)("div",{ref:f,className:"block-editor-rich-text__inline-format-toolbar block-editor-rich-text__inline-font-family kubio-options-popover "},(0,t.createElement)("div",{className:"block-editor-rich-text__typography-toolbar__container"},(0,t.createElement)(p.BaseControl,null,(0,t.createElement)(p.Flex,{className:"kubio-font-family-container"},(0,t.createElement)(p.FlexBlock,null,(0,t.createElement)("span",{className:"kubio-font-family-label"},(0,i.__)("Font family","kubio"))),(0,t.createElement)(p.FlexItem,null,(0,t.createElement)(b.FontPicker,{label:(0,i.__)("Font family","kubio"),placeholder:(0,i.__)("Inherited","kubio"),allowReset:!1,...s})),(0,t.createElement)(p.FlexItem,{className:"kubio-font-family__reset"},(0,t.createElement)(p.Button,{isSmall:!0,icon:x.ResetIcon,label:(0,i.__)("Reset","kubio"),className:"kubio-popover-options-icon",onClick:m})))),(0,t.createElement)(p.BaseControl,null,(0,t.createElement)(b.GutentagSelectControl,{label:(0,i.__)("Font weight","kubio"),placeholder:(0,i.__)("Inherited","kubio"),allowReset:!0,...u})))))))},A="font-family-weight",M=(0,i.__)("Font","kubio"),V=`kubio/${A}`,W={name:V,title:M,slotId:A,tagName:"span",className:`kubio-has-inline-${A}`,attributes:{style:"style"},edit:o=>{const{value:n,onChange:l,contentRef:r}=o,{isActive:i}=o,[c,s]=(0,a.useState)(""),u=m("font-family",V,n),b=function(e,t){let o=m("font-weight",e,t);return isNaN(o)||(o=parseFloat(o)),o}(V,n);(0,a.useEffect)((()=>{s(Math.random())}),[n]);const v={fontFamily:u,fontWeight:b};return f(r)?(0,t.createElement)(F,{name:A},(0,t.createElement)(N,{key:c,formatValue:n,onChange:(t,o)=>{let r=window.structuredClone(v);t?k().set(r,t,o):r=o,(({fontFamily:t,fontWeight:o})=>{const r=[];t&&r.push(`font-family: ${t}`),o&&r.push(`font-weight: ${o}`);const a=r.join(";");l((0,e.applyFormat)(n,{type:V,attributes:{style:a}}))})(r)},value:v,isActive:i,onReset:()=>{l((0,e.removeFormat)(n,V))},contentRef:r})):(0,t.createElement)(t.Fragment,null)}},B=[W],$=B.map((e=>e.slotId)).filter(Boolean),j=()=>(0,t.createElement)(t.Fragment,null,$.map((e=>(0,t.createElement)(p.Slot,{name:`RichText.ToolbarControls.${e}`,key:e})))),z=e=>{const{addWrapper:o=!0}=e;return!0===o?(0,t.createElement)(r.BlockControls,null,(0,t.createElement)(j,null)):(0,t.createElement)(j,null)};let I=[E];I=I.concat(B),I.forEach((({name:t,...o})=>{(0,e.registerFormatType)(t,o)}))})(),(window.kubio=window.kubio||{}).formatLibrary=n})();
