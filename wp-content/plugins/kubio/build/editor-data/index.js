(()=>{var e={9590:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,u){if(e===u)return!0;if(e&&u&&"object"==typeof e&&"object"==typeof u){if(e.constructor!==u.constructor)return!1;var i,a,c,l;if(Array.isArray(e)){if((i=e.length)!=u.length)return!1;for(a=i;0!=a--;)if(!s(e[a],u[a]))return!1;return!0}if(r&&e instanceof Map&&u instanceof Map){if(e.size!==u.size)return!1;for(l=e.entries();!(a=l.next()).done;)if(!u.has(a.value[0]))return!1;for(l=e.entries();!(a=l.next()).done;)if(!s(a.value[1],u.get(a.value[0])))return!1;return!0}if(n&&e instanceof Set&&u instanceof Set){if(e.size!==u.size)return!1;for(l=e.entries();!(a=l.next()).done;)if(!u.has(a.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(u)){if((i=e.length)!=u.length)return!1;for(a=i;0!=a--;)if(e[a]!==u[a])return!1;return!0}if(e.constructor===RegExp)return e.source===u.source&&e.flags===u.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===u.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===u.toString();if((i=(c=Object.keys(e)).length)!==Object.keys(u).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(u,c[a]))return!1;if(t&&e instanceof Element)return!1;for(a=i;0!=a--;)if(("_owner"!==c[a]&&"__v"!==c[a]&&"__o"!==c[a]||!e.$$typeof)&&!s(e[c[a]],u[c[a]]))return!1;return!0}return e!=e&&u!=u}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},4670:(e,t,r)=>{"use strict";e.exports=r(5607)},9829:(e,t,r)=>{"use strict";var n,o,s,u=r(8946),i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function a(){s=!1}function c(e){if(e){if(e!==n){if(e.length!==i.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+i.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,a()}}else n!==i&&(n=i,a())}function l(){return s||(s=function(){n||c(i);for(var e,t=n.split(""),r=[],o=u.nextValue();t.length>0;)o=u.nextValue(),e=Math.floor(o*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}e.exports={get:function(){return n||i},characters:function(e){return c(e),n},seed:function(e){u.seed(e),o!==e&&(a(),o=e)},lookup:function(e){return l()[e]},shuffled:l}},480:(e,t,r)=>{"use strict";var n,o,s=r(8416);r(9829),e.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1567752802062));return r===o?n++:(n=0,o=r),t+=s(7),t+=s(e),n>0&&(t+=s(n)),t+s(r)}},8416:(e,t,r)=>{"use strict";var n=r(9829),o=r(3766),s=r(296);e.exports=function(e){for(var t,r=0,u="";!t;)u+=s(o,n.get(),1),t=e<Math.pow(16,r+1),r++;return u}},5607:(e,t,r)=>{"use strict";var n=r(9829),o=r(480),s=r(1082),u=r(5636)||0;function i(){return o(u)}e.exports=i,e.exports.generate=i,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return u=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=s},1082:(e,t,r)=>{"use strict";var n=r(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,r="object"==typeof window&&(window.crypto||window.msCrypto);t=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,r){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*n*r/t.length),s="";;)for(var u=e(o),i=o;i--;)if((s+=t[u[i]&n]||"").length===+r)return s}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{GLOBAL_SESSION_ID:()=>t.GLOBAL_SESSION_ID,SESSION_STORE_KEY:()=>t.SESSION_STORE_KEY,useBlocksOwnerDocument:()=>O,useCurrentPageBodyClasses:()=>b,useCurrentPageTitle:()=>P,useEditorIsLoadedChanged:()=>y,useGetGlobalSessionProp:()=>w,useGlobalSessionProp:()=>v,useOwnerDocumentChanged:()=>E,useSessionProp:()=>g,useSetGlobalSessionProp:()=>h,useSetPageTitle:()=>x,withBlocksOwnerDocument:()=>m,withSessionProps:()=>_});const e=window.React,t=window.kubio.constants,o=window.kubio.coreHooks,s=window.wp.compose,u=window.wp.data,i=window.wp.element,a=window.wp.i18n,c=window.wp.url,l=window.lodash;var f=r(9590),p=r.n(f),d=r(4670);const S={};(0,u.registerStore)(t.SESSION_STORE_KEY,{reducer:(e=S,{type:t,clientId:r,prop:n,value:o})=>{if("SET_PROP"===t){const t="kubio-dummy-value"+(0,d.generate)(),s=(0,l.get)(e,`${r}.${n}`,t);if(s===t||!p()(s,o)){const t=(0,l.set)(e,`${r}.${n}`,o);return{...(0,l.merge)({},e,t)}}return e}},actions:{setProp:(e,t,r)=>({type:"SET_PROP",clientId:e,prop:t,value:r})},selectors:{getProp:(e,t,r,n)=>t?(0,l.get)(e,`${t}.${r}`,n):n}});const g=(e,r,n=null)=>{const o=(0,u.useSelect)((o=>o(t.SESSION_STORE_KEY).getProp(e,r,n)),[]),{setProp:s}=(0,u.useDispatch)(t.SESSION_STORE_KEY);return(0,i.useMemo)((()=>[o,o=>{const i=(0,u.select)(t.SESSION_STORE_KEY).getProp(e,r,n);(0,l.isFunction)(o)&&(o=o(i)),p()(i,o)||s(e,r,o)}]),[e,n,r,s,o])},h=e=>{const[,r]=g(t.GLOBAL_SESSION_ID,e);return r},w=(e,r=null)=>{const[n]=g(t.GLOBAL_SESSION_ID,e,r);return n},v=(e,r=null)=>g(t.GLOBAL_SESSION_ID,e,r),O=()=>w("blocksOwnerDocument",window.document),y=(e=l.noop)=>{const t=w("ready",!1),[r,n]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(null===r||t!==r)return n(r),e(t)}),[t])},E=(e=l.noop)=>{const t=O(),r=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(!r.current||!t.isSameNode(r.current))return r.current=t,e(t)}),[t])},_=()=>(0,s.createHigherOrderComponent)((r=>n=>{const{clientId:o}=n,{getProp:s}=(0,u.useSelect)((e=>e(t.SESSION_STORE_KEY)),[o]),{setProp:i}=(0,u.useDispatch)(t.SESSION_STORE_KEY),a={getValue:(e,t)=>s(o,e,t),setValue:(e,t)=>i(o,e,t)};return(0,e.createElement)(r,{...n,sessionProps:a})}),"withSessionProps"),m=()=>(0,s.createHigherOrderComponent)((t=>r=>{const n=O();return(0,e.createElement)(t,{...r,ownerDocument:n})}),"withBlocksOwnerDocument"),b=()=>{const e=(0,u.useSelect)((e=>{var r;return null===(r=e(t.STORE_KEY).getPage())||void 0===r?void 0:r.path}),[]),[r,n]=v("pagesClasses",{}),o=w("ready",!1);return(0,i.useEffect)((()=>{!o||!e||null!=r&&r[e]||(n({...r,[e]:[]}),window.fetch((0,c.addQueryArgs)(e,{"__kubio-body-class":1})).then((e=>e.json())).then((t=>{var o,s;(0,l.isArray)(null==t||null===(o=t.data)||void 0===o?void 0:o.bodyClass)&&n({...r,[e]:null==t||null===(s=t.data)||void 0===s?void 0:s.bodyClass})})))}),[o,e,n,r]),(0,i.useMemo)((()=>(null==r?void 0:r[e])||[]),[r,e])},x=()=>{const[e,t]=v("pagesTitles",{});return(r,n)=>t({...e,[r]:{title:n,isLoading:!1}})},P=(e={type:"placeholder",title:(0,a.__)("Page title placeholder","kubio")})=>{const r=(0,u.useSelect)((e=>{var r,n;return null===(r=e(t.STORE_KEY))||void 0===r||null===(n=r.getPage())||void 0===n?void 0:n.path}),[]),[n,s]=v("pagesTitles",{}),l=w("ready",!1);(0,o.useEffectAsync)((async()=>{var e;!l||!r||null!=n&&n[r]||null!==(e=n[r])&&void 0!==e&&e.isLoading||(s({...n,[r]:{isLoading:!0}}),window.fetch((0,c.addQueryArgs)(r,{"__kubio-page-title":1})).then((e=>e.json())).then((e=>{e.data&&s({...n,[r]:{...e.data,isLoading:!1}})})))}),[l,r,n,s]);const f=(0,i.useMemo)((()=>{const t=null==n?void 0:n[r];return!t||t.isLoading?e:t}),[n,r,e]);return null!=f?f:(0,a.__)("Page","kubio")}})(),(window.kubio=window.kubio||{}).editorData=n})();
