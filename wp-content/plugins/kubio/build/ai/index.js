(()=>{var e={7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var i,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))n.call(i,c)&&(s[c]=i[c]);if(t){o=t(i);for(var u=0;u<o.length;u++)a.call(i,o[u])&&(s[o[u]]=i[o[u]])}}return s}},2703:(e,t,n)=>{"use strict";var a=n(414);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,o){if(o!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var a,r,i,o=n(8946),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){i=!1}function c(e){if(e){if(e!==a){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));a=e,l()}}else a!==s&&(a=s,l())}function u(){return i||(i=function(){a||c(s);for(var e,t=a.split(""),n=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return a||s},characters:function(e){return c(e),a},seed:function(e){o.seed(e),r!==e&&(l(),r=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,n)=>{"use strict";var a,r,i=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?a++:(a=0,r=n),t+=i(7),t+=i(e),a>0&&(t+=i(a)),t+i(n)}},8416:(e,t,n)=>{"use strict";var a=n(9829),r=n(3766),i=n(296);e.exports=function(e){for(var t,n=0,o="";!t;)o+=i(r,a.get(),1),t=e<Math.pow(16,n+1),n++;return o}},5607:(e,t,n)=>{"use strict";var a=n(9829),r=n(480),i=n(1082),o=n(5636)||0;function s(){return r(o)}e.exports=s,e.exports.generate=s,e.exports.seed=function(t){return a.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&a.characters(e),a.shuffled()},e.exports.isValid=i},1082:(e,t,n)=>{"use strict";var a=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+a.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var a=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*a*n/t.length),i="";;)for(var o=e(r),s=r;s--;)if((i+=t[o[s]&a]||"").length===+n)return i}},3967:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";n.r(a),n.d(a,{AIApiError:()=>H,AIDataProvider:()=>x,AIWizard:()=>wr,aiImageGenerateFromText:()=>pe,aiImageMask:()=>fe,aiImageVariations:()=>me,aiSearchImages:()=>ge,aiSearchedImageSave:()=>he,categoriesToSectionsList:()=>Rt,changeTextPrompt:()=>ce,determineSiteMood:()=>te,fillSectionTemplate:()=>Vt,findPattern:()=>L,generateColorScheme:()=>ne,generatePageStructure:()=>At,generatePageStructureApi:()=>Z,generateSectionContent:()=>ae,generateSiteStructure:()=>ee,getAIInfo:()=>X,getAIUsage:()=>Q,getBusinessTypes:()=>r,getContentLanguageStyles:()=>C,getContentLanguages:()=>E,getFromGenerationSession:()=>ft,getPageContentSectionTemplate:()=>Lt,getPageFooterTemplate:()=>Nt,getPageHederTemplate:()=>Tt,getPageSectionsTemplates:()=>Ft,initGenerationSession:()=>pt,normalizeCategorySlug:()=>S.normalizeCategorySlug,normalizeSection:()=>Ct,openConnectPopup:()=>l,optimizePrompt:()=>ue,processContent:()=>se,prompt:()=>le,rephraseSectionContent:()=>re,rephraseSectionTemplate:()=>$t,saveAiGeneralSettings:()=>J,searchImages:()=>ie,searchVideo:()=>oe,sectionTemplateBlockGetParents:()=>T,sectionTemplateBlockHasParent:()=>N,setAIKey:()=>q,setInGenerationSession:()=>mt,textToImage:()=>de,useAIData:()=>_,useAIServiceInfo:()=>k,useIsAIConnected:()=>y});const e=window.kubio.utils,t=window.wp.i18n,r=()=>(0,e.getBackendData)("aiBusinessTypes",{natural:{label:(0,t.__)("Business","kubio"),value:"Business",description:(0,t.__)("Resources and insights for starting, managing, and growing businesses.","kubio")}}),i=window.wp.url,o=window.lodash;var s=n.n(o);const l=async()=>new Promise(((t,n)=>{const{screen:a}=window,r=(0,o.first)((0,e.getBackendData)("kubioCloudUrl").split("?")).replace(/\/+$/,""),s=["popup","innerWidth=500","innerHeight=600","left="+(a.width-500)/2,"top="+(a.height-600)/2*.8],l=(0,i.addQueryArgs)(`${r}/ui-route/connect-ai`,{key:""}),c=window.open(l,"kubioAIConnect",s.join(",")),u=e=>{const{action:a=null,value:r=null,error:i=null}=e.data||{};if("ai_subscription_key"===a){if(c.close(),window.removeEventListener("message",u),i)return n(n);t(r)}};window.addEventListener("message",u)})),c=window.React;var u=n.n(c);const d=window.kubio.constants,p=window.kubio.core,m=window.kubio.editorData,f=window.kubio.globalData,g=window.wp.coreData,h=window.wp.data,b=window.wp.element,y=()=>{const[t,n]=(0,m.useGlobalSessionProp)("isAIConnected",(0,e.getBackendData)("aiIsConnected",!1));return[t,n]},k=()=>{const e=(0,h.useSelect)((e=>e(d.STORE_KEY).getAIInfo())),{updateAIInfo:t}=(0,h.useDispatch)(d.STORE_KEY);return[e,t]},w=Object.freeze({}),v=(0,b.createContext)([w,o.noop]),_=()=>(0,b.useContext)(v),x=({children:t})=>{const[n,a]=(0,m.useGlobalSessionProp)("aiGeneratorData",w),r=(0,m.useGetGlobalSessionProp)("ready",!1),{title:i}=(0,f.useSiteLogoImages)(),s=(0,p.usePageTitle)(),[l]=y();k();const{recordFallback:u,isFrontPage:_,pageContextFallback:x,frontPageEntity:E,blogPageEntity:C,otherPages:S}=(0,h.useSelect)((e=>{const{getCurrentPostType:t,getCurrentPostId:n,getIsFrontPage:a}=e(d.STORE_KEY),{getEntityRecord:r,getEntityRecords:i}=e(g.store),{page_for_posts:s,page_on_front:l}=r("root","site")||{},c=r("postType",t(),n()),u=l?r("postType","page",l):null,p=s?r("postType","page",s):null,m=(i("postType","page",{per_page:-1,exclude:[s,l,n()].filter(Boolean)})||[]).map((e=>({id:e.id,title:e.title.rendered})));return{recordFallback:c,pageContextFallback:(0,o.get)(c,["kubio_ai_page_context"],w),isFrontPage:a(),frontPageEntity:u,blogPageEntity:p,otherPages:m}}),[]),I=(0,e.getBackendData)("aiSettings"),P=(0,p.useDeepMemo)((()=>{var e,t;let{siteContext:a=null,pageContext:o=null,pageTitle:c=null,isRegenerate:d=!1,record:p=null}=n||{};a=a||I,o=o||x,c=c||s,p=p||u;const m=!a.structure_type||"multi-page"===a.structure_type;return{siteContext:{...a,business_name:null!==(e=null===(t=a)||void 0===t?void 0:t.business_name)&&void 0!==e?e:i,otherPages:S,isMultiPage:m},pageContext:r?{...o,title:c,isFrontPage:_}:{},isFrontPage:_,isRegenerate:d,record:p,pageTitle:c,isMultiPage:m,isAIConnected:l,frontPageEntity:E,blogPageEntity:C}}),[I,x,s,null==u?void 0:u.id,n,i,_,S,l,E,C]),O=(0,b.useCallback)(((e,t=null)=>{a((n=>{const a=(0,o.cloneDeep)(e);return t?(0,o.set)((0,o.cloneDeep)(n),t,a):a}))}),[a]);return(0,c.createElement)(v.Provider,{value:[P,O]},t)},E=()=>(0,e.getBackendData)("aiLanguages",{en_EN:"English (US)"}),C=()=>(0,e.getBackendData)("aiLanguageStyles",{natural:{label:(0,t.__)("Natural","kubio"),description:(0,t.__)("Is the default language style. It can adapt to some extent depending on the cues from the user's input.","kubio")}}),S=window.kubio.blockPatterns,I=window.wp.blockEditor,P=window.kubio.log,O=(t,n)=>{const a=(0,o.get)(t,["kubioAI","meta","initialValues","words"],null);if(a)return a;const r=(0,o.get)(t,n,"");return(0,o.words)((0,e.stripTags)(r)).length},M=(t,n)=>{const a=(0,o.get)(t,["kubioAI","meta","initialValues","chars"],null);if(a)return a;const r=(0,o.get)(t,n,"");return(0,o.words)((0,e.stripTags)(r)).reduce(((e,t)=>e+t.length),0)},A=(e,t=!1)=>{if(e=e.replace(/kubio(.*?)\//,""),t)switch(e){case"contact-info":case"contact-map":case"contact-form":e="contact"}return e},T=(e,t)=>{let n=[...t].slice(0,-2);const a=[];for(;n.length;){const t=(0,o.get)(e,n);a.push(t[0]),n=n.slice(0,-2)}return a},N=(e,t,n)=>T(e,t).includes(n),z=["blank-section"],L=(t="*",n={})=>{const{tag:a,exclude:r,excludeWithTags:i=[],excludeSectionWithBackground:l,findBy:c=null,skippableTags:u=[],skipSlug:d=[],skipIds:p=[],returnAll:m=!1}=s().merge({exclude:[],excludeSectionWithBackground:!1,tag:null},n);t=(0,S.normalizeCategorySlug)(t);const f=(0,o.castArray)(a).filter(Boolean);let g=d;const b=[...u],y=A(t);switch(y){case"contact":i.push("contact-info","contact-map");break;case"contact-info":case"contact-map":case"contact-form":f.includes(y)||(f.push(y),u.push(y)),t="kubio-content/contact"}const k=(0,h.select)(I.store).getSettings().__experimentalBlockPatterns.filter((e=>e.isGutentagPattern));if(c){const e=(0,o.find)(k.filter((e=>!e.isProOnFree)),c);return e||P.Log.warn("Unable to find by",c),e}const w=(n,a=[])=>{let s="*"===t;if(p.includes(n.cloudPresetId))return!1;if(g.includes(n.name))return!1;if(s||(s=n.categories.find((e=>t===(0,S.normalizeCategorySlug)(e)))),!s)return!1;if(((e,t=[],n=!1)=>{const a=(0,S.getSectionSlugFromPattern)(e),r=(i=a,z.includes(i)||t.includes(a));var i;return!0===n?r||j(e.content[1]):r})(n,r,l))return!1;if(!(e=>((null==e?void 0:e.internalTags)||[]).includes("ai-ready"))(n))return!1;const c=[...n.publicTags||[],...n.internalTags||[]];return!i.some((e=>c.includes(e)))&&(!!(0,o.difference)(f,a).every((e=>c.includes(e)))&&(!!(0,e.isPatternAvailableInCurrentTheme)(n)&&!n.isProOnFree))};let v=k.filter((e=>w(e)));if((0,o.isEmpty)(v)&&(g=[],v=k.filter((t=>w(t,b.concat((0,e.getBackendData)("sectionStylesTags")))))),m)return v;const _=(0,o.sample)(v);return _?(P.Log.info(`Pattern found: ${_.slug}`),s().cloneDeep(_)):null};function j(e,t="outer"){if(!e)return!1;const n=["kubio","style","descendants",t,"background"],a=(0,o.get)(e,[...n,"type"]);return!!["image","slideshow"].includes(a)}function R(e,t,n=null){return!n||n.isFrontPage||("team"===n.purpose&&"team"===t&&e.push("dedicated-page"),"gallery"===n.purpose&&"photo-gallery"===t&&e.push("dedicated-page"),"portfolio"===n.purpose&&"portfolio"===t&&e.push("dedicated-page")),e}const F=(e,t)=>{let n=!1;if(t.isFrontPage)n=!0;else switch(e){case"team":n="team"!==t.purpose;break;case"portfolio":n="portfolio"!==t.purpose;break;case"photo-gallery":n="gallery"!==t.purpose}return[n?"dedicated-page":null].filter(Boolean)},D=window.wp.apiFetch;var B=n.n(D);const W=window.wp.hooks,V=window.wp.notices,$=e=>e.map((e=>{const t=(e.elements||[]).map((e=>(0,o.omit)(e,["path","attributePath"])));return{...e,elements:t}}));var U=n(4670),G=n.n(U);class H extends Error{}const K=(e,t={})=>{var n,a;return null!==(n=e=(0,o.cloneDeep)(e))&&void 0!==n&&null!==(a=n.siteContext)&&void 0!==a&&a.cta&&(0,o.unset)(e,["siteContext","cta"]),{...e,remainingRetries:t.retries||null}},Y=async(e,n={},{method:a="POST",skipCreditsCheck:r=!1,retries:s=2,__kubio_call_id:l=null}={})=>{const{updateAIInfo:c=o.noop}=(0,h.dispatch)(d.STORE_KEY)||{},{getAIInfo:u=o.noop}=(0,h.select)(d.STORE_KEY)||{},p=l||G().generate();let m,f=r;if(!f){const{remainingCredits:e=0}=u()||{};f=e>0}if(!f)throw(0,W.doAction)("kubio.ai.zero_credits"),new H((0,t.__)("Your account has insufficient credits","kubio"),{cause:"zero_credits"});let g="";try{const t=await B()({path:(0,i.addQueryArgs)(`/kubio/v1/ai/${e}`,{__kubio_call_id:p}),method:a,data:K(n,{retries:s})});g=t.upgrade_key||"",m=t.content;const r=(0,o.get)(t,"service_info.remaining_credits",null);(0,o.isNull)(r)||c({...u(),remainingCredits:r})}catch(i){const l=504===parseInt(i.code)||(i.code+"").startsWith("ai_service:");if("ai_service:pexels_request"===i.code&&!s)return P.Log.error("Kubio AI: API error",i,m),null;if("ai_service:invalid_element"===i.code&&!s)return P.Log.warn("Kubio AI: No retry managed to fixed generate elements problem. Return last result as is",i,m),(0,o.get)(i,"data.content",null);if(l&&s)return P.Log.warn(`AI service failed. ${s} retries left`,i),await Y(e,n,{method:a,skipCreditsCheck:r,retries:s-1,__kubio_call_id:p});if("zero_credits"===i.code)throw(0,W.doAction)("kubio.ai.zero_credits"),new H((0,t.__)("Your account has insufficient credits","kubio"),{cause:"zero_credits"});const c=(0,t.__)("There was an error with the KubioAI services. If the error persists, please contact support","kubio");throw(0,h.dispatch)(V.store).createErrorNotice((0,t.sprintf)(// translators: %s is the error text
// translators: %s is the error text
(0,t.__)("Kubio AI: %s","kubio"),c),{id:"kubio-ai-api-fetch-error",type:"snackbar"}),P.Log.error("Kubio AI: API error",i,m),new H(c,{cause:i.code})}return g&&(top.kubioAIUpgradeKey=g),m},q=async({aiKey:e})=>await Y("set-ai-key",{key:e},{skipCreditsCheck:!0}),X=async()=>await Y("info",{},{skipCreditsCheck:!0}),Q=async(e=1,t=20)=>await Y("usage",{page:e,perPage:t},{skipCreditsCheck:!0}),J=async(e={})=>(s().set(window.kubioUtilsData,"aiSettings",(0,o.cloneDeep)(e)),await Y("settings",{settings:e},{skipCreditsCheck:!0})),Z=async({pageTitle:e,allowedSections:t,siteContext:n,pageContext:a}={})=>await Y("generate-page-structure",{pageTitle:e,siteContext:n,pageContext:a,allowedSections:t}),ee=async({siteContext:e}={})=>await Y("generate-site-structure",{siteContext:e}),te=async({siteContext:e}={})=>{const{mood:t=d.SITE_MOOD_VALUES.NEUTRAL,subject:n="",owner_type:a="organization",client_type:r="both",call_to_action:i,core_business:o=""}=await Y("determine-site-mood",{siteContext:e});let s=t.toLowerCase();switch(s){case"serious":case d.SITE_MOOD_VALUES.PROFESSIONAL:s=d.SITE_MOOD_VALUES.PROFESSIONAL;break;case"joyful":case d.SITE_MOOD_VALUES.PLAYFUL:s=d.SITE_MOOD_VALUES.PLAYFUL;break;default:s=d.SITE_MOOD_VALUES.NEUTRAL}return{mood:s,websiteSubject:n,ownerType:a,clientType:r,cta:i,coreBusiness:o.replace(/\W+/g," ").replace(/\s+/g," ")}},ne=async({pageTitle:e,siteContext:t,pageContext:n,mood:a="neutral",primaryColors:r={}}={})=>await Y("generate-color-scheme",{pageTitle:e,siteContext:t,pageContext:n,mood:a,primaryColors:r},{retries:5}),ae=async({category:e,structure:t,pageTitle:n,siteContext:a,pageContext:r,summary:i,rules:o=[]}={})=>await Y("generate-section-content",{category:e,structure:$(t),pageTitle:n,siteContext:a,pageContext:r,summary:i,rules:o}),re=async({category:e,structure:t,pageTitle:n,siteContext:a,pageContext:r,summary:i}={})=>await Y("rephrase-section-content",{category:e,structure:$(t),pageTitle:n,siteContext:a,pageContext:r,summary:i}),ie=async({search:e,initialImage:t="",perPage:n=10,page:a=1,mediaAttrs:r=null,width:i=null,height:s=null,orientation:l=null,color:c=null,skipOrientation:u=!1,crop:d=!1}={})=>!(0,o.isString)(e)||(0,o.isEmpty)(e)?(P.Log.error("Image search stopped early, the search param should be a non-empty string",new TypeError,e),{items:[]}):await Y("search-image",{search:e,initialImage:t,perPage:n,page:a,mediaAttrs:r,width:i,height:s,orientation:l,color:c,skipOrientation:u,crop:d}),oe=async({search:e,perPage:t=10,page:n=1,mediaAttrs:a=null}={})=>await Y("search-video",{search:e,perPage:t,page:n,mediaAttrs:a}),se=async({pageTitle:e,siteContext:t,pageContext:n,content:a,action:r,extras:i={}})=>await Y("process-text",{pageTitle:e,siteContext:t,pageContext:n,content:a,action:r,extras:i}),le=async({pageTitle:e,siteContext:t,pageContext:n,prompt:a,originalContent:r,short:i,type:o="text"})=>await Y("prompt",{pageTitle:e,siteContext:t,pageContext:n,prompt:a,originalContent:r,short:i,type:o}),ce=async({pageTitle:e,siteContext:t,pageContext:n,promptData:a,text:r,type:i="text"})=>await Y("change-text",{pageTitle:e,siteContext:t,pageContext:n,promptData:a,text:r,type:i}),ue=async({prompt:e})=>await Y("summarize-prompt",{prompt:e}),de=async({pageTitle:e,siteContext:t,pageContext:n,prompt:a,initialImage:r,imageSize:i})=>await Y("prompt-to-image",{pageTitle:e,siteContext:t,pageContext:n,prompt:a,initialImage:r,imageSize:i}),pe=async({imagePrompt:e,initialImage:t,imageSize:n,imageStyle:a,imageType:r,numberOfImages:i,aspectRatio:o})=>await Y("generate-text-to-image",{imagePrompt:e,initialImage:t,imageSize:n,imageStyle:a,imageType:r,numberOfImages:i,aspectRatio:o}),me=async({imagePrompt:e,currentSelectedImage:t,imageSize:n,imageStyle:a,imageType:r,numberOfImages:i})=>await Y("generate-image-variations",{imagePrompt:e,currentSelectedImage:t,imageSize:n,imageStyle:a,imageType:r,numberOfImages:i}),fe=async({imagePrompt:e,currentSelectedImage:t,maskImage:n})=>await Y("image-mask",{imagePrompt:e,currentSelectedImage:t,maskImage:n}),ge=async({search:e,perPage:t=10,page:n=1,initialImage:a="",imageSize:r="medium",imageOrientation:i="portrait",aiPrompt:o=""}={})=>await Y("ai-search-images",{search:e,perPage:t,page:n,imageSize:r,imageOrientation:i,initialImage:a,aiPrompt:o}),he=async({selectedImage:e})=>await Y("save-image",{selectedImage:e},{skipCreditsCheck:!0}),be={blocks:["kubio/image-gallery"],elements:["gallery"],transform:({path:e,addColumnElement:t})=>{t({name:"gallery",path:e})},setter:async(e,n,a)=>{const r=(0,o.get)(e,[...a.path,2],[]);if(r.length)try{const{query:i=null,caption:s="",color:l=null}=n||{},c=(0,o.get)(e,[...a.path,1,"kubio","props","showMasonry"]),u=await ie({search:i,skipOrientation:c,crop:!c,initialImage:c?void 0:(0,o.get)(r[0],[1,"url"]),perPage:r.length,mediaAttrs:["alt"],color:l});if(u.items){const n=[];for(let e=0;e<r.length;e++){const a=u.items[e%u.items.length];n.push({alt:"",caption:(0,t.sprintf)(s,e+1),id:0,url:a.url})}(0,o.set)([...a.path,1,"imagesData"],n);for(let t=0;t<r.length;t++){const r=[...a.path,2,t,1],i=(0,o.get)(e,r);(0,o.set)(e,r,{...i,...n[t]})}}}catch(e){P.Log.error(e)}}},ye={blocks:["kubio/pricing"],elements:["price"],transform:({block:[,e],path:t,addColumnElement:n})=>{n({name:"price",path:t,on_sale:e.sale})},setter:async(e,t,n)=>{const{currentPrice:a=100,originalPrice:r=null}=t||{},i=parseInt(a)||100,s=r||i;(0,o.set)(e,[...n.path,1,"currentPrice"],i),(0,o.set)(e,[...n.path,1,"originalPrice"],s)}};function ke(e){return Array.isArray?Array.isArray(e):"[object Array]"===Ce(e)}function we(e){return"string"==typeof e}function ve(e){return"number"==typeof e}function _e(e){return"object"==typeof e}function xe(e){return null!=e}function Ee(e){return!e.trim().length}function Ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Se=e=>`Missing ${e} property in key`,Ie=e=>`Property 'weight' in key '${e}' must be a positive integer`,Pe=Object.prototype.hasOwnProperty;class Oe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Me(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Me(e){let t=null,n=null,a=null,r=1,i=null;if(we(e)||ke(e))a=e,t=Ae(e),n=Te(e);else{if(!Pe.call(e,"name"))throw new Error(Se("name"));const o=e.name;if(a=o,Pe.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(Ie(o));t=Ae(o),n=Te(o),i=e.getFn}return{path:t,id:n,weight:r,src:a,getFn:i}}function Ae(e){return ke(e)?e:e.split(".")}function Te(e){return ke(e)?e.join("."):e}var Ne={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){let n=[],a=!1;const r=(e,t,i)=>{if(xe(e))if(t[i]){const o=e[t[i]];if(!xe(o))return;if(i===t.length-1&&(we(o)||ve(o)||function(e){return!0===e||!1===e||function(e){return _e(e)&&null!==e}(e)&&"[object Boolean]"==Ce(e)}(o)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(o));else if(ke(o)){a=!0;for(let e=0,n=o.length;e<n;e+=1)r(o[e],t,i+1)}else t.length&&r(o,t,i+1)}else n.push(e)};return r(e,we(t)?t.split("."):t,0),a?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const ze=/[^ ]+/g;class Le{constructor({getFn:e=Ne.getFn,fieldNormWeight:t=Ne.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,a=Math.pow(10,t);return{get(t){const r=t.match(ze).length;if(n.has(r))return n.get(r);const i=1/Math.pow(r,.5*e),o=parseFloat(Math.round(i*a)/a);return n.set(r,o),o},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,we(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();we(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!xe(e)||Ee(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,a)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(xe(r))if(ke(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:n,value:a}=t.pop();if(xe(a))if(we(a)&&!Ee(a)){let t={v:a,i:n,n:this.norm.get(a)};e.push(t)}else ke(a)&&a.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[a]=e}else if(we(r)&&!Ee(r)){let e={v:r,n:this.norm.get(r)};n.$[a]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function je(e,t,{getFn:n=Ne.getFn,fieldNormWeight:a=Ne.fieldNormWeight}={}){const r=new Le({getFn:n,fieldNormWeight:a});return r.setKeys(e.map(Me)),r.setSources(t),r.create(),r}function Re(e,{errors:t=0,currentLocation:n=0,expectedLocation:a=0,distance:r=Ne.distance,ignoreLocation:i=Ne.ignoreLocation}={}){const o=t/e.length;if(i)return o;const s=Math.abs(a-n);return r?o+s/r:s?1:o}const Fe=32;function De(e){let t={};for(let n=0,a=e.length;n<a;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<a-n-1}return t}class Be{constructor(e,{location:t=Ne.location,threshold:n=Ne.threshold,distance:a=Ne.distance,includeMatches:r=Ne.includeMatches,findAllMatches:i=Ne.findAllMatches,minMatchCharLength:o=Ne.minMatchCharLength,isCaseSensitive:s=Ne.isCaseSensitive,ignoreLocation:l=Ne.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:a,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:s,ignoreLocation:l},this.pattern=s?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:De(e),startIndex:t})},u=this.pattern.length;if(u>Fe){let e=0;const t=u%Fe,n=u-t;for(;e<n;)c(this.pattern.substr(e,Fe),e),e+=Fe;if(t){const e=u-Fe;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:a,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:s,ignoreLocation:l}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:p,startIndex:m})=>{const{isMatch:f,score:g,indices:h}=function(e,t,n,{location:a=Ne.location,distance:r=Ne.distance,threshold:i=Ne.threshold,findAllMatches:o=Ne.findAllMatches,minMatchCharLength:s=Ne.minMatchCharLength,includeMatches:l=Ne.includeMatches,ignoreLocation:c=Ne.ignoreLocation}={}){if(t.length>Fe)throw new Error("Pattern length exceeds max of 32.");const u=t.length,d=e.length,p=Math.max(0,Math.min(a,d));let m=i,f=p;const g=s>1||l,h=g?Array(d):[];let b;for(;(b=e.indexOf(t,f))>-1;){let e=Re(t,{currentLocation:b,expectedLocation:p,distance:r,ignoreLocation:c});if(m=Math.min(e,m),f=b+u,g){let e=0;for(;e<u;)h[b+e]=1,e+=1}}f=-1;let y=[],k=1,w=u+d;const v=1<<u-1;for(let a=0;a<u;a+=1){let i=0,s=w;for(;i<s;)Re(t,{errors:a,currentLocation:p+s,expectedLocation:p,distance:r,ignoreLocation:c})<=m?i=s:w=s,s=Math.floor((w-i)/2+i);w=s;let l=Math.max(1,p-s+1),b=o?d:Math.min(p+s,d)+u,_=Array(b+2);_[b+1]=(1<<a)-1;for(let i=b;i>=l;i-=1){let o=i-1,s=n[e.charAt(o)];if(g&&(h[o]=+!!s),_[i]=(_[i+1]<<1|1)&s,a&&(_[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),_[i]&v&&(k=Re(t,{errors:a,currentLocation:o,expectedLocation:p,distance:r,ignoreLocation:c}),k<=m)){if(m=k,f=o,f<=p)break;l=Math.max(1,2*p-f)}}if(Re(t,{errors:a+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:c})>m)break;y=_}const _={isMatch:f>=0,score:Math.max(.001,k)};if(g){const e=function(e=[],t=Ne.minMatchCharLength){let n=[],a=-1,r=-1,i=0;for(let o=e.length;i<o;i+=1){let o=e[i];o&&-1===a?a=i:o||-1===a||(r=i-1,r-a+1>=t&&n.push([a,r]),a=-1)}return e[i-1]&&i-a>=t&&n.push([a,i-1]),n}(h,s);e.length?l&&(_.indices=e):_.isMatch=!1}return _}(e,t,p,{location:a+m,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:s,includeMatches:n,ignoreLocation:l});f&&(d=!0),u+=g,f&&h&&(c=[...c,...h])}));let p={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(p.indices=c),p}}class We{constructor(e){this.pattern=e}static isMultiMatch(e){return Ve(e,this.multiRegex)}static isSingleMatch(e){return Ve(e,this.singleRegex)}search(){}}function Ve(e,t){const n=e.match(t);return n?n[1]:null}class $e extends We{constructor(e,{location:t=Ne.location,threshold:n=Ne.threshold,distance:a=Ne.distance,includeMatches:r=Ne.includeMatches,findAllMatches:i=Ne.findAllMatches,minMatchCharLength:o=Ne.minMatchCharLength,isCaseSensitive:s=Ne.isCaseSensitive,ignoreLocation:l=Ne.ignoreLocation}={}){super(e),this._bitapSearch=new Be(e,{location:t,threshold:n,distance:a,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:s,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ue extends We{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const a=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,a.push([t,n-1]);const i=!!a.length;return{isMatch:i,score:i?0:1,indices:a}}}const Ge=[class extends We{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ue,class extends We{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends We{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends We{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends We{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends We{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},$e],He=Ge.length,Ke=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ye=new Set([$e.type,Ue.type]);const qe=[];function Xe(e,t){for(let n=0,a=qe.length;n<a;n+=1){let a=qe[n];if(a.condition(e,t))return new a(e,t)}return new Be(e,t)}const Qe="$and",Je="$path",Ze=e=>!(!e[Qe]&&!e.$or),et=e=>({[Qe]:Object.keys(e).map((t=>({[t]:e[t]})))});function tt(e,t,{auto:n=!0}={}){const a=e=>{let r=Object.keys(e);const i=(e=>!!e[Je])(e);if(!i&&r.length>1&&!Ze(e))return a(et(e));if((e=>!ke(e)&&_e(e)&&!Ze(e))(e)){const a=i?e[Je]:r[0],o=i?e.$val:e[a];if(!we(o))throw new Error((e=>`Invalid value for key ${e}`)(a));const s={keyId:Te(a),pattern:o};return n&&(s.searcher=Xe(o,t)),s}let o={children:[],operator:r[0]};return r.forEach((t=>{const n=e[t];ke(n)&&n.forEach((e=>{o.children.push(a(e))}))})),o};return Ze(e)||(e=et(e)),a(e)}function nt(e,t){const n=e.matches;t.matches=[],xe(n)&&n.forEach((e=>{if(!xe(e.indices)||!e.indices.length)return;const{indices:n,value:a}=e;let r={indices:n,value:a};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}))}function at(e,t){t.score=e.score}class rt{constructor(e,t={},n){this.options={...Ne,...t},this.options.useExtendedSearch,this._keyStore=new Oe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Le))throw new Error("Incorrect 'index' type");this._myIndex=t||je(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){xe(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,a=this._docs.length;n<a;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,a-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:a,shouldSort:r,sortFn:i,ignoreFieldNorm:o}=this.options;let s=we(e)?we(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=Ne.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:a,score:r})=>{const i=e?e.weight:null;n*=Math.pow(0===r&&i?Number.EPSILON:r,(i||1)*(t?1:a))})),e.score=n}))}(s,{ignoreFieldNorm:o}),r&&s.sort(i),ve(t)&&t>-1&&(s=s.slice(0,t)),function(e,t,{includeMatches:n=Ne.includeMatches,includeScore:a=Ne.includeScore}={}){const r=[];return n&&r.push(nt),a&&r.push(at),e.map((e=>{const{idx:n}=e,a={item:t[n],refIndex:n};return r.length&&r.forEach((t=>{t(e,a)})),a}))}(s,this._docs,{includeMatches:n,includeScore:a})}_searchStringList(e){const t=Xe(e,this.options),{records:n}=this._myIndex,a=[];return n.forEach((({v:e,i:n,n:r})=>{if(!xe(e))return;const{isMatch:i,score:o,indices:s}=t.searchIn(e);i&&a.push({item:e,idx:n,matches:[{score:o,value:e,norm:r,indices:s}]})})),a}_searchLogical(e){const t=tt(e,this.options),n=(e,t,a)=>{if(!e.children){const{keyId:n,searcher:r}=e,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return i&&i.length?[{idx:a,item:t,matches:i}]:[]}const r=[];for(let i=0,o=e.children.length;i<o;i+=1){const o=e.children[i],s=n(o,t,a);if(s.length)r.push(...s);else if(e.operator===Qe)return[]}return r},a=this._myIndex.records,r={},i=[];return a.forEach((({$:e,i:a})=>{if(xe(e)){let o=n(t,e,a);o.length&&(r[a]||(r[a]={idx:a,item:e,matches:[]},i.push(r[a])),o.forEach((({matches:e})=>{r[a].matches.push(...e)})))}})),i}_searchObjectList(e){const t=Xe(e,this.options),{keys:n,records:a}=this._myIndex,r=[];return a.forEach((({$:e,i:a})=>{if(!xe(e))return;let i=[];n.forEach(((n,a)=>{i.push(...this._findMatches({key:n,value:e[a],searcher:t}))})),i.length&&r.push({idx:a,item:e,matches:i})})),r}_findMatches({key:e,value:t,searcher:n}){if(!xe(t))return[];let a=[];if(ke(t))t.forEach((({v:t,i:r,n:i})=>{if(!xe(t))return;const{isMatch:o,score:s,indices:l}=n.searchIn(t);o&&a.push({score:s,key:e,value:t,idx:r,norm:i,indices:l})}));else{const{v:r,n:i}=t,{isMatch:o,score:s,indices:l}=n.searchIn(r);o&&a.push({score:s,key:e,value:r,norm:i,indices:l})}return a}}rt.version="6.6.2",rt.createIndex=je,rt.parseIndex=function(e,{getFn:t=Ne.getFn,fieldNormWeight:n=Ne.fieldNormWeight}={}){const{keys:a,records:r}=e,i=new Le({getFn:t,fieldNormWeight:n});return i.setKeys(a),i.setIndexRecords(r),i},rt.config=Ne,rt.parseQuery=tt,function(...e){qe.push(...e)}(class{constructor(e,{isCaseSensitive:t=Ne.isCaseSensitive,includeMatches:n=Ne.includeMatches,minMatchCharLength:a=Ne.minMatchCharLength,ignoreLocation:r=Ne.ignoreLocation,findAllMatches:i=Ne.findAllMatches,location:o=Ne.location,threshold:s=Ne.threshold,distance:l=Ne.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:a,findAllMatches:i,ignoreLocation:r,location:o,threshold:s,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(Ke).filter((e=>e&&!!e.trim())),a=[];for(let e=0,r=n.length;e<r;e+=1){const r=n[e];let i=!1,o=-1;for(;!i&&++o<He;){const e=Ge[o];let n=e.isMultiMatch(r);n&&(a.push(new e(n,t)),i=!0)}if(!i)for(o=-1;++o<He;){const e=Ge[o];let n=e.isSingleMatch(r);if(n){a.push(new e(n,t));break}}}return a}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:a}=this.options;e=a?e:e.toLowerCase();let r=0,i=[],o=0;for(let a=0,s=t.length;a<s;a+=1){const s=t[a];i.length=0,r=0;for(let t=0,a=s.length;t<a;t+=1){const a=s[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){o=0,r=0,i.length=0;break}if(r+=1,o+=u,n){const e=a.constructor.type;Ye.has(e)?i=[...i,...c]:i.push(c)}}if(r){let e={isMatch:!0,score:o/r};return n&&(e.indices=i),e}}return{isMatch:!1,score:1}}});const it=e=>{const t="/",n=`font-awesome${t}`;return e&&e.includes(t)?e.split(t)[0]+t:n},ot=(e,t)=>{e=e.replace("/","");const n={"font-awesome":["check","star","compass","bell","cog"],ionicons:["checkmark","star","compass","ios-bell","ios-cog"],"icons8-line-awesome":["check","star","compass","bell","cog"],"foundation-icons":["check","star","compass"],"material-icons":["check","star"],"simple-line-icons":["check","star","compass","bell"],typicons:["input-checked-outline","star","compass","bell","cog"],linea:["arrows_check","basic_star","basic_compass","music_bell"]};if(n.hasOwnProperty(e)){const a=n[e].filter((n=>!t.includes(`${e}/${n}`)));let r=(0,o.sample)(a);return r||(r=(0,o.sample)(n[e])),r}return n.fa[0]},st=(e,t)=>`${e}${t}`,lt=new Map;let ct={};const ut=new Set;let dt=!0;const pt=()=>{dt&&(dt=!1,ct={});const e="session-"+ut.size;return ut.add(e),()=>{ut.delete(e),0===ut.size&&(dt=!0,ct={})}},mt=(e,t)=>{dt?P.Log.error("Generation session is not started"):(0,o.set)(ct,e,t)},ft=(e,t)=>dt?(P.Log.error("Generation session is not started"),t):(0,o.get)(ct,e,t),gt=window.kubio.blockLibrary,{VIDEO:ht,DOWN_ARROW:bt}=(0,gt.getNamesOfBlocks)(),yt={blocks:["kubio/icon"],elements:["icon"],transform:({block:[,e],path:t,addColumnElement:n})=>{n({name:"icon",currentIcon:e.name,path:t})},setter:async(e,t,n,a)=>{const r=T(e,n.path);if(r.includes(ht)||r.includes(bt))return;const i=t||"",{sectionHash:l}=a,c=ft("previousIcons",new Map),u=c.get(l)||[],{columnContext:{is_slider:p=!1},currentIcon:m=""}=n||{};if(!p&&!["hero","pricing","testimonials"].includes(s().get(e,"[1].kubioAI.meta.category"))){let t=!1;const a=i.split(",").map((e=>e.replace("fa-","").trim())).map((e=>e.includes("-")?e.split("-").shift():e));t=a.length?((e,t,n=[])=>{const a=it(t);let r=lt.has(a)?lt.get(a):null;if(!r){const e=(e=>Object.keys(d.svgIcons).filter((t=>t.includes(e))).map((t=>t.replace(e,""))).filter((e=>e.length>2)))(a);r=new rt(e,{threshold:.5,location:0,distance:1,includeScore:!0}),lt.set(a,r)}const i=[];for(let t=0;t<e.length;t++){const o=r.search(e[t]);o.length>0&&!n.includes(`${a}${o[0].item}`)&&i.push(o[0])}if(i.length>0){const e=i.reduce((function(e,t){return e&&e.score<t.score?e:t}));return st(a,e.item)}return st(a,ot(a,n))})(a,m,u):((e,t=[])=>{const n=it(e),a=ot(n,t);return st(n,a)})(m,u),(0,o.set)(e,[...n.path,1,"name"],t),u.push(t),c.set(l,u),mt("previousIcons",c)}}},kt=[be,ye,yt].filter(Boolean),wt=({attributes:e,path:t,addColumnElement:n,descendant:a,newColumn:r=o.noop}={})=>{const i=["kubio","style","descendants",a,"background"],s=(0,o.get)(e,[...i,"type"]);if(["image","slideshow","video"].includes(s)&&r(),"image"===s&&n({name:"backgroundImage",path:t,attributePath:[...i,"image","0","source","url"]}),"slideshow"===s){const a=(0,o.get)(e,[...i,"slideshow","slides"],Array.from({length:3})).length;for(let e=0;e<a;e++)n({name:"backgroundSlideshow",path:t,attributePath:[...i,"slideshow","slides",e,"url"]})}"video"===s&&n({name:"backgroundVideo",path:t,attributePath:[...i,"video"]})},vt=[{blocks:["kubio/section","kubio/hero","kubio/navigation","kubio/navigation-section","kubio/navigation-top-bar"],transform:({block:[,e],path:t,newColumn:n,addColumnElement:a})=>{wt({attributes:e,path:t,addColumnElement:a,newColumn:n,descendant:"outer"})}},{blocks:["kubio/row"],transform:({block:[,e,t],context:n,path:a,addColumnElement:r,newColumn:i})=>{n.section_header=(0,o.get)(e,"kubio.props.meta.isHeader",!1),2===a.length&&(n.list_items=(0,o.get)(e,"kubio.props.layout.equalWidth")&&t.length>1),wt({attributes:e,path:a,addColumnElement:r,newColumn:i,descendant:"container"}),n.section_header&&i()}},{blocks:["kubio/column","kubio/pricing-table-item","kubio/slider-item","kubio/carousel-item","kubio/navigation-top-bar","kubio/navigation-items","kubio/navigation-sticky-items","kubio/flipbox","kubio/flipboxcontent","kubio/flipboxhover"],transform:({block:[e,t],path:n,newColumn:a,addColumnElement:r,context:i})=>{let s="inner";switch(e){case"kubio/column":const l=i.isTemplatePart?5:4;n.length!==l||i.section_header||a({short_desc:(0,o.get)(t,["kubioAI","desc"],null)});break;case"kubio/pricing-table-item":case"kubio/slider-item":case"kubio/carousel-item":a({is_pricing:"kubio/pricing-table-item"===e,is_slider:"kubio/slider-item"===e||"kubio/carousel-item"===e,list_items:!0});break;case"kubio/flipbox":return a({flipbox:!0}),wt({attributes:t,path:n,addColumnElement:r,descendant:"container"}),wt({attributes:t,path:n,addColumnElement:r,descendant:"normal"}),void wt({attributes:t,path:n,addColumnElement:r,descendant:"hover"});case"kubio/flipboxcontent":case"kubio/flipboxhover":s="container";break;default:a()}wt({attributes:t,path:n,addColumnElement:r,descendant:s})}},{blocks:["kubio/heading","kubio/text"],transform:({block:[e,t],path:n,addColumnElement:a,includeContent:r})=>{const i={name:"kubio/heading"===e?"heading":"paragraph",path:n,attributePath:["content"],words:O(t,"content"),chars:M(t,"content")};"kubio/heading"===e&&(i.level=(0,o.get)(t,"kubio.props.level",2)),!0===r&&(i.text=t.content||""),a(i)}},{blocks:["kubio/button","kubio/link"],transform:({block:[,e],path:t,addColumnElement:n,includeContent:a})=>{const r={name:"button",path:t,attributePath:["text"]};!0===a&&(r.text=e.content||""),n(r)}},{blocks:["kubio/multipleimagespicture","kubio/image"],transform:({path:e,addColumnElement:t})=>{t({name:"image",path:e,attributePath:["url"]})}},{blocks:["kubio/tabitem","kubio/accordionitem"],walkChildren:!1,transform:({block:[,e,t],path:n,addColumnElement:a,context:r,includeContent:i})=>{a({name:"question",path:n,attributePath:["title"],words:O(e,"title"),chars:M(e,"title")});let s=t[0];if(s){var l;const e=[],t=t=>e.push(t);null===(l=xt(s[0]))||void 0===l||l.transform({block:s,path:[...n,2,0],context:r,addColumnElement:t,includeContent:i}),s=e[0],(0,o.isEmpty)(s)||a({...e[0],name:"answer"})}}},{blocks:["kubio/counter"],transform:({block:[,e],path:t,addColumnElement:n})=>{n({name:"counter",path:t,attributePath:[],words:O(e,"title"),chars:M(e,"title")})}},{blocks:["kubio/iconlistitem"],transform:({block:[,e],path:t,addColumnElement:n})=>{const a=O(e,"text");a&&n({name:"list-item",path:t,attributePath:["text"],words:a})}},{blocks:["kubio/video"],transform:({path:e,addColumnElement:t})=>{t({name:"video",path:e,attributePath:["internalUrl"]})}}],_t=[{elements:["image","backgroundImage","backgroundSlideshow"],setter:async(e,t,n,{siteContext:a,pageContext:r,sectionCategory:i}={})=>{const s=[...n.path,1,...n.attributePath];if(!(t=(0,o.isString)(t)?t.toLowerCase().replace(/\W+/g," ").replace(/\s+/g," "):null))return;t=(0,o.first)(t.split(",").map((e=>e.trim().toLowerCase())));const l=(0,o.get)(e,s,""),c=[...n.path,1,"kubioAI"];if("backgroundSlideshow"===n.name){const n=(0,o.get)(e,[...c,"slideshowTerms"],[]);(0,o.set)(e,[...c,"slideshowTerms"],[...n,t])}else(0,o.set)(e,[...c,"imageTerms"],t);try{const a=ft("previousQueries",new Map);let r=null;var u;a.has(t)?(r=a.get(t),P.Log.info(`Using cached image searches for "${t}"`)):(r=await ie({search:t,initialImage:l,mediaAttrs:["id"],perPage:30,crop:null==n||null===(u=n.columnContext)||void 0===u?void 0:u.list_items}),a.set(t,r),mt("previousQueries",a));const i=ft("images",[]);let c=(r.items||[]).filter((e=>!i.includes(e.id)));c.length||(c=r.items||[]);const d=(0,o.first)(c);d&&(mt("images",[...i,d.id]),(0,o.set)(e,s,d.url))}catch(e){P.Log.error("Template element image setter",e)}}},{elements:["counter"],setter:async(e,t,n)=>{const{title:a=null,maxValue:r=null}=t||{};a&&(0,o.set)(e,[...n.path,1,"title"],a),r&&((0,o.set)(e,[...n.path,1,"amount"],r),(0,o.set)(e,[...n.path,1,"final"],r))}},{elements:["video","backgroundVideo"],setter:async(e,t,n)=>{try{var a;const r=await oe({search:t,perPage:1}),{video:s=null,poster:l=null}=(null==r||null===(a=r.items)||void 0===a?void 0:a[0])||{};if(s){let t=null;"video"===n.name&&(t=["internalUrl"],(0,o.set)(e,[...n.path,1,"videoCategory"],"internal"),(0,o.set)(e,[...n.path,1,...t],(0,i.addQueryArgs)(s,{_k_ext_fields:".mp4"}))),"backgroundVideo"===n.name&&(t=[...n.attributePath,"internal"],(0,o.set)(e,[...n.path,1,,...n.attributePath,"type"],"internal"),(0,o.set)(e,[...n.path,1,...t],{url:(0,i.addQueryArgs)(s,{_k_ext_fields:".mp4"})}))}if(l){let t=null;"video"===n.name&&(t=["posterImage"],(0,o.set)(e,[...n.path,1,...t],{url:l})),"backgroundVideo"===n.name&&(t=[...n.attributePath,"poster"],(0,o.set)(e,[...n.path,1,...t],{url:l}))}}catch(e){P.Log.error("Template element video setter",e)}}}],xt=e=>{for(let t=0;t<vt.length;t++)if(vt[t].blocks.includes(e))return vt[t];for(let t=0;t<kt.length;t++)if(kt[t].blocks.includes(e))return kt[t]};function Et(e,t,n=[]){const[a,,r=[]]=e;t(e,n),(0,o.get)(xt(a),"walkChildren",!0)&&r.forEach(((e,a)=>{Et(e,t,[...n,2,a])}))}const Ct=(e,t,{includeContent:n=!1}={})=>{const a=["kubio/header","kubio/sidebar","kubio/footer"].includes(e[0]),r=[],i={sectionCategory:t,includeContent:n,isTemplatePart:a},s=(e={})=>r.push({context:(0,o.merge)((0,o.cloneDeep)(i),e),elements:[],type:"column"});return Et(e,(function(t,a){var l;const[c,u]=t;null===(l=xt(c))||void 0===l||l.transform({block:t,path:a,context:i,newColumn:s,addColumnElement:t=>(t=>{try{r[r.length-1].elements.push({id:(n=t,(n.name||"el")+"-"+G()()+"-"+G()()),...t})}catch(n){P.Log.error("Kubio AI: Error element to column",n,[e,t])}var n})({...t,short_desc:(0,o.get)(u,["kubioAI","desc"],null)}),includeContent:n})})),r.filter((e=>e.elements.length))},St=["hero-accent","about","content","features","counters","photo-gallery","portfolio","pricing","testimonials","clients","team","cta","f.a.q.","blog","contact"],It={homepage:["hero-accent","about","content","features","counters","photo-gallery","portfolio","pricing","testimonials","clients","team","cta","f.a.q.","blog","contact"],general:["about","content","features","counters","photo-gallery","testimonials","clients","cta"],about:["about","content","features","counters","photo-gallery","clients","testimonials","team","cta"],services:["about","content","features","counters","photo-gallery","testimonials","clients","cta","f.a.q.","contact"],features:["about","content","features","counters","photo-gallery","testimonials","clients","cta","f.a.q."],portfolio:["portfolio","clients","cta"],team:["team","cta"],gallery:["photo-gallery","cta"],faq:["f.a.q.","cta"],pricing:["about","pricing","testimonials"],contact:["contact-info","contact-map","contact-form"]},Pt=["homepage","portfolio","team","gallery","faq","pricing","contact"],Ot={general:[],services:['Each service offered by the business will be placed in a separate "content" section.']},Mt=(0,gt.getNamesOfBlocks)(),At=async({pageTitle:e,siteContext:t,pageContext:n,rules:a=[]})=>{let r=(null==n?void 0:n.purpose)||"general";null!=n&&n.isFrontPage&&(r="homepage");let i=[];i=(It[r]||St).filter((e=>!!L(`kubio-content/${e}`))),i=i.filter((e=>{switch(e){case"clients":if("people"===t.clientType||"individual"===t.clientType)return!1;break;case"team":if("individual"===t.ownerType)return!1;break;default:return!0}return!0})),a.length||(a=Ot[r]||[]);const s=await Z({pageTitle:e,siteContext:t,pageContext:{...n,sortSections:n.hasOwnProperty("sortSections")?n.sortSections:Pt.includes(r)},allowedSections:i,rules:a});if(i.includes("cta")&&!(0,o.find)(s,{category:"cta"})){let e=null;if(i.forEach(((t,n)=>{n+1<i.length&&"cta"===i[n+1]&&(e=t)})),e){const n=(0,o.findLastIndex)(s,{category:e});n>-1&&s.splice(n+1,0,{category:"cta",summaries:[(0,o.get)(t,"cta.text","")]})}}return s},Tt=(e=null,n=!0,{tag:a=[],skipSlugs:r=[]}={})=>{let i=e,l=[],c=null,u=null,p=null,m=!1;const f=n?d.FRONT_HEADERS_CATEGORY:d.INNER_HEADERS_CATEGORY;if(!i){const e=L(f,{tag:a,skipSlugs:r});if(!e)return null;p=e.name,m=[...e.publicTags||[],...e.internalTags||[]].includes("overlappable"),u=e.pairCloudPresetId,i=(0,o.get)(e,["content"]);const t=(0,o.get)(e,["context","theme","colors"],null);c=(0,o.cloneDeep)((0,o.get)(e,["context","theme","globalStyle","style","descendants","body"],null)),s().unset(c,["typography","holders","input"]),l=t?(0,o.map)(t,(e=>e)):t}const g=i[2],h=(0,o.cloneDeep)(g.find((e=>e[0]===Mt.NAVIGATION))),b=(0,o.cloneDeep)(g.find((e=>e[0]===Mt.HERO)));h&&((0,o.set)(h,[1,"attrs","name"],(0,t.__)("Navigation","kubio")),(0,o.set)(h,[1,"anchor"],"navigation")),b&&((0,o.set)(b,[1,"attrs","name"],(0,t.__)("Hero","kubio")),(0,o.set)(b,[1,"anchor"],"hero"));let y=null;var k;return u&&(y=L(n?d.INNER_HEADERS_CATEGORY:d.FRONT_HEADERS_CATEGORY,{findBy:{cloudPresetId:u}}),y=(null===(k=y)||void 0===k?void 0:k.content)||null),{category:f,navigation:h,hero:b,colors:l,bodyStyle:c,pairTemplate:y,pairCloudPresetId:u,name:p,overlappable:m}},Nt=({tags:e=[]}={})=>{const t=L(d.FOOTER_CATEGORY,{tags:e});return t?t.content:null},zt=(e,t)=>({cloudPresetId:e.cloudPresetId,category:t,template:e.content,title:e.title,slug:(0,S.getSectionSlugFromPattern)(e),pairCloudPresetId:e.pairCloudPresetId,name:e.name,internalTags:e.internalTags,publicTags:e.publicTags}),Lt=({category:e="section",siteContext:t=null,findBy:n=null,tags:a=[],skippableTags:r=[],excludeWithTags:i=[],skipIds:o=[],returnAll:l=!1})=>{const c=[...a,s().get(t,"sections_tag")],u=L("section"===e?"*":`kubio-content/${e}`,{tag:c,findBy:n,skippableTags:r,excludeWithTags:i,skipIds:o,returnAll:l});return l?u.map((t=>zt(t,e))):u?zt(u,e):null},jt=e=>"content"===e.category||!![...e.internalTags,...e.publicTags].includes("dedicated-page"),Rt=(e,t,n=null)=>{const a={},r=[];for(let i=0;i<e.length;i++){const{category:s,summaries:l}=e[i],c=(0,o.get)(a,[s],{count:0,pair:null});let u=null;if(null!==c.pair){const e=c.count%c.pair.length;u={cloudPresetId:c.pair[e]}}const d=Lt({category:s,siteContext:t,findBy:u,tags:R([],s,n),skippableTags:R([],s,n),excludeWithTags:F(s,n)});if(!d)continue;const p=e.reduce(((e,t,n)=>(t.category===s&&e.push(n),e)),[]),m=l[p.indexOf(i)%l.length]||"";d.pairCloudPresetId&&jt(d)&&1===p.length&&e.splice(i+1,0,{category:s,summaries:l.filter((e=>e!==m))}),r.push({...d,summaries:[m]});let f=c.pair;!f&&d.pairCloudPresetId&&(f=[d.cloudPresetId,d.pairCloudPresetId]),(0,o.set)(a,[s],{count:f?c.count+1:0,pair:f})}return r},Ft=async({pageTitle:e,siteContext:t,pageContext:n})=>{const a=await At({pageTitle:e,siteContext:t,pageContext:n}),r=function(e,t=null,n=null){const a=[],r=s().get(t,"sections_tag");return n.isFrontPage,e.filter((e=>e.template)).forEach((e=>{var t,i,o,s,l,c;a.push({...e,summary:(null===(t=e.summaries||[])||void 0===t||null===(i=t.pop)||void 0===i?void 0:i.call(t))||""});const u=1===a.length&&j(a[0].template[1]),d=a.length>=2&&j(null===(o=a.at(-1))||void 0===o||null===(s=o.template)||void 0===s?void 0:s[1])&&j(null===(l=a.at(-2))||void 0===l||null===(c=l.template)||void 0===c?void 0:c[1]);if(u||d){a.pop();const t=L("kubio-content/"+e.category,{exclude:[e.slug],excludeSectionWithBackground:!0,tag:R(r,e.category,n),excludeWithTags:F(e.category,n),skippableTags:R([],e.category,n)});var p,m;t&&a.push({...e,category:e.category,template:t.content,title:t.title,name:t.name,summary:(null===(p=e.summaries||[])||void 0===p||null===(m=p.pop)||void 0===m?void 0:m.call(p))||""})}})),a.map((({summaries:e,...t})=>t))}(Rt(a,t,n),t,n).filter(Boolean);return r},Dt=async(e,t,n,a={})=>{const r=(e=>{for(let n=0;n<_t.length;n++){var t;if(_t[n].elements.includes(e))return null===(t=_t[n])||void 0===t?void 0:t.setter}for(let t=0;t<kt.length;t++){var n;if(kt[t].elements.includes(e))return null===(n=kt[t])||void 0===n?void 0:n.setter}})(n.name);r?await r(e,t,n,a):t&&(e=(0,o.set)(e,[...n.path,1,...n.attributePath],t));const i=["words","chars"];for(const t of i)n.hasOwnProperty(t)&&(e=(0,o.set)(e,[...n.path,1,"kubioAI","meta","initialValues",t],n[t]));return t},Bt=async({structure:t,label:n,anchor:a,data:r,sectionTemplate:i,category:s,summary:l="",siteContext:c,pageContext:u})=>{const d=[],p=(e=>{const t={};return e.forEach((e=>{e.elements.forEach((n=>{t[n.id]={...n,columnContext:e.context}}))})),t})(t),m=[],f=G().generate();try{for(let e=0;e<r.length;e++){const t=r[e],n=p[t.id];n&&(d.push(Dt(i,t.content,n,{siteContext:c,pageContext:u,sectionCategory:s,sectionHash:f})),m.push({name:n.name,structure:n,content:t.content}))}await Promise.all(d),(0,o.set)(i,[1,"kubioAI","meta","category"],A(s,!0)),(0,o.set)(i,[1,"kubioAI","meta","summary"],l)}catch(e){throw P.Log.error("Error in filling section with data",{category:s,template:i,elements:p}),e}return(0,o.set)(i,[1,"attrs","name"],n),(0,o.set)(i,[1,"anchor"],a),[(0,e.refreshBlockStyleRefs)(i),m]},Wt=(e,t)=>{var n;const a=[];var r;return"cta"===e&&null!=t&&null!==(n=t.cta)&&void 0!==n&&n.text&&a.push(`For the main header in the section use the following content, translated in the site language: "${null==t||null===(r=t.cta)||void 0===r?void 0:r.text}"`),a},Vt=async({template:e,category:t,pageTitle:n,siteContext:a,pageContext:r,summary:i="",label:s="",anchor:l="",includeContent:c=!1}={})=>{const u=(0,o.cloneDeep)(e),d=Ct(u,t,{includeContent:c});if((0,o.isEmpty)(d))return[u,[]];const p=await ae({category:t,structure:d,pageTitle:n,siteContext:a,pageContext:r,summary:i,rules:Wt(t,a)});return await Bt({structure:d,label:s,anchor:l,data:p,sectionTemplate:u,category:t,summary:i,siteContext:a,pageContext:r})},$t=async({template:e,category:t,pageTitle:n,siteContext:a,pageContext:r,summary:i="",label:s="",anchor:l="",includeContent:c=!1}={})=>{const u=(0,o.cloneDeep)(e),d=Ct(u,t,{includeContent:c}),p=await re({category:t,structure:d,pageTitle:n,siteContext:a,pageContext:r,summary:i,rules:Wt(t,a)});return await Bt({structure:d,label:s,anchor:l,data:p,sectionTemplate:u,category:t,summary:i,siteContext:a,pageContext:r})},Ut=window.kubio.controls,Gt=window.kubio.icons,Ht=window.wp.components,Kt=window.wp.primitives,Yt=(0,c.createElement)(Kt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(Kt.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Xt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Qt(e,t,n[t])}))}return e}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],_n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(_n=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){a=!0,r=e}finally{try{_n||null==o.return||o.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var en=function(){},tn={},nn={},an={mark:en,measure:en};try{"undefined"!=typeof window&&(tn=window),"undefined"!=typeof document&&(nn=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(an=performance)}catch(e){}var rn=(tn.navigator||{}).userAgent,on=void 0===rn?"":rn,sn=tn,ln=nn,cn=an,un=(sn.document,!!ln.documentElement&&!!ln.head&&"function"==typeof ln.addEventListener&&"function"==typeof ln.createElement),dn=(~on.indexOf("MSIE")||on.indexOf("Trident/"),"___FONT_AWESOME___"),pn="fa",mn="svg-inline--fa",fn=(function(){try{return!0}catch(e){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),gn=fn.concat([11,12,13,14,15,16,17,18,19,20]),hn={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},bn=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",hn.GROUP,hn.SWAP_OPACITY,hn.PRIMARY,hn.SECONDARY].concat(fn.map((function(e){return"".concat(e,"x")}))).concat(gn.map((function(e){return"w-".concat(e)}))),sn.FontAwesomeConfig||{});ln&&"function"==typeof ln.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Zt(e,2),n=t[0],a=t[1],r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=ln.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));null!=r&&(bn[a]=r)}));var yn=Jt({},{familyPrefix:pn,replacementClass:mn,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},bn);yn.autoReplaceSvg||(yn.observeMutations=!1);var kn=Jt({},yn);sn.FontAwesomeConfig=kn;var wn=sn||{};wn[dn]||(wn[dn]={}),wn[dn].styles||(wn[dn].styles={}),wn[dn].hooks||(wn[dn].hooks={}),wn[dn].shims||(wn[dn].shims=[]);var vn=wn[dn],xn=[];un&&((ln.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ln.readyState)||ln.addEventListener("DOMContentLoaded",(function e(){ln.removeEventListener("DOMContentLoaded",e),xn.map((function(e){return e()}))})));var En,Cn="pending",Sn="settled",In="fulfilled",Pn="rejected",On=function(){},Mn=void 0!==n.g&&void 0!==n.g.process&&"function"==typeof n.g.process.emit,An="undefined"==typeof setImmediate?setTimeout:setImmediate,Tn=[];function Nn(){for(var e=0;e<Tn.length;e++)Tn[e][0](Tn[e][1]);Tn=[],En=!1}function zn(e,t){Tn.push([e,t]),En||(En=!0,An(Nn,0))}function Ln(e){var t=e.owner,n=t._state,a=t._data,r=e[n],i=e.then;if("function"==typeof r){n=In;try{a=r(a)}catch(e){Dn(i,e)}}jn(i,a)||(n===In&&Rn(i,a),n===Pn&&Dn(i,a))}function jn(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===qt(t))){var a=t.then;if("function"==typeof a)return a.call(t,(function(a){n||(n=!0,t===a?Fn(e,a):Rn(e,a))}),(function(t){n||(n=!0,Dn(e,t))})),!0}}catch(t){return n||Dn(e,t),!0}return!1}function Rn(e,t){e!==t&&jn(e,t)||Fn(e,t)}function Fn(e,t){e._state===Cn&&(e._state=Sn,e._data=t,zn(Wn,e))}function Dn(e,t){e._state===Cn&&(e._state=Sn,e._data=t,zn(Vn,e))}function Bn(e){e._then=e._then.forEach(Ln)}function Wn(e){e._state=In,Bn(e)}function Vn(e){e._state=Pn,Bn(e),!e._handled&&Mn&&n.g.process.emit("unhandledRejection",e._data,e)}function $n(e){n.g.process.emit("rejectionHandled",e)}function Un(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof Un==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){Dn(t,e)}try{e((function(e){Rn(t,e)}),n)}catch(e){n(e)}}(e,this)}Un.prototype={constructor:Un,_state:Cn,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(On),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Pn&&Mn&&zn($n,this)),this._state===In||this._state===Pn?zn(Ln,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},Un.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new Un((function(t,n){var a=[],r=0;function i(e){return r++,function(n){a[e]=n,--r||t(a)}}for(var o,s=0;s<e.length;s++)(o=e[s])&&"function"==typeof o.then?o.then(i(s),n):a[s]=o;r||t(a)}))},Un.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new Un((function(t,n){for(var a,r=0;r<e.length;r++)(a=e[r])&&"function"==typeof a.then?a.then(t,n):t(a)}))},Un.resolve=function(e){return e&&"object"===qt(e)&&e.constructor===Un?e:new Un((function(t){t(e)}))},Un.reject=function(e){return new Un((function(t,n){n(e)}))};var Gn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Hn="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Kn(){for(var e=12,t="";e-- >0;)t+=Hn[62*Math.random()|0];return t}function Yn(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qn(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function Xn(e){return e.size!==Gn.size||e.x!==Gn.x||e.y!==Gn.y||e.rotate!==Gn.rotate||e.flipX||e.flipY}function Qn(e){var t=e.transform,n=e.containerWidth,a=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(i," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(a/2*-1," -256)")}}}var Jn={x:0,y:0,width:"100%",height:"100%"};function Zn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var ea=(kn.measurePerformance&&cn&&cn.mark&&cn.measure,function(e,t,n,a){var r,i,o,s=Object.keys(e),l=s.length,c=void 0!==a?function(e,t){return function(n,a,r,i){return e.call(t,n,a,r,i)}}(t,a):t;for(void 0===n?(r=1,o=e[s[0]]):(r=0,o=n);r<l;r++)o=c(o,e[i=s[r]],i,e);return o});function ta(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,a=void 0!==n&&n,r=Object.keys(t).reduce((function(e,n){var a=t[n];return a.icon?e[a.iconName]=a.icon:e[n]=a,e}),{});"function"!=typeof vn.hooks.addPack||a?vn.styles[e]=Jt({},vn.styles[e]||{},r):vn.hooks.addPack(e,r),"fas"===e&&ta("fa",t)}var na=vn.styles,aa=vn.shims,ra=function(){var e=function(e){return ea(na,(function(t,n,a){return t[a]=ea(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var a=t[2];return e[n]=n,a.forEach((function(t){e[t]=n})),e}));var t="far"in na;ea(aa,(function(e,n){var a=n[0],r=n[1],i=n[2];return"far"!==r||t||(r="fas"),e[a]={prefix:r,iconName:i},e}),{})};function ia(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function oa(e){var t=e.tag,n=e.attributes,a=void 0===n?{}:n,r=e.children,i=void 0===r?[]:r;return"string"==typeof e?Yn(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Yn(e[n]),'" ')}),"").trim()}(a),">").concat(i.map(oa).join(""),"</").concat(t,">")}ra(),vn.styles;function sa(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}sa.prototype=Object.create(Error.prototype),sa.prototype.constructor=sa;var la={fill:"currentColor"},ca={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},ua=(Jt({},la,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Jt({},ca,{attributeName:"opacity"}));function da(e){var t=e[0],n=e[1],a=Zt(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(a)?{tag:"g",attributes:{class:"".concat(kn.familyPrefix,"-").concat(hn.GROUP)},children:[{tag:"path",attributes:{class:"".concat(kn.familyPrefix,"-").concat(hn.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(kn.familyPrefix,"-").concat(hn.PRIMARY),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}}}}Jt({},la,{cx:"256",cy:"364",r:"28"}),Jt({},ca,{attributeName:"r",values:"28;14;28;28;14;28;"}),Jt({},ua,{values:"1;0;1;1;0;1;"}),Jt({},la,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Jt({},ua,{values:"1;0;0;0;0;1;"}),Jt({},la,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Jt({},ua,{values:"0;0;1;1;0;0;"}),vn.styles,vn.styles;var pa='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';var ma=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(t){e.definitions[t]=Jt({},e.definitions[t]||{},r[t]),ta(t,r[t]),ra()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var a=n[t],r=a.prefix,i=a.iconName,o=a.icon;e[r]||(e[r]={}),e[r][i]=o})),e}}],n&&Xt(t.prototype,n),e}();function fa(){kn.autoAddCss&&!ya&&(function(e){if(e&&un){var t=ln.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ln.head.childNodes,a=null,r=n.length-1;r>-1;r--){var i=n[r],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(a=i)}ln.head.insertBefore(t,a)}}(function(){var e=pn,t=mn,n=kn.familyPrefix,a=kn.replacementClass,r=pa;if(n!==e||a!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");r=r.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(a))}return r}()),ya=!0)}function ga(e){var t=e.prefix,n=void 0===t?"fa":t,a=e.iconName;if(a)return ia(ba.definitions,n,a)||ia(vn.styles,n,a)}var ha,ba=new ma,ya=!1,ka=function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),a=n[0],r=n.slice(1).join("-");if(a&&"h"===r)return e.flipX=!0,e;if(a&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(a){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e}),t):t}(e)},wa=(ha=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.transform,i=void 0===r?Gn:r,o=a.symbol,s=void 0!==o&&o,l=a.mask,c=void 0===l?null:l,u=a.maskId,d=void 0===u?null:u,p=a.title,m=void 0===p?null:p,f=a.titleId,g=void 0===f?null:f,h=a.classes,b=void 0===h?[]:h,y=a.attributes,k=void 0===y?{}:y,w=a.styles,v=void 0===w?{}:w;if(e){var _=e.prefix,x=e.iconName,E=e.icon;return t=Jt({type:"icon"},e),n=function(){return fa(),kn.autoA11y&&(m?k["aria-labelledby"]="".concat(kn.replacementClass,"-title-").concat(g||Kn()):(k["aria-hidden"]="true",k.focusable="false")),function(e){var t=e.icons,n=t.main,a=t.mask,r=e.prefix,i=e.iconName,o=e.transform,s=e.symbol,l=e.title,c=e.maskId,u=e.titleId,d=e.extra,p=e.watchable,m=void 0!==p&&p,f=a.found?a:n,g=f.width,h=f.height,b="fa-w-".concat(Math.ceil(g/h*16)),y=[kn.replacementClass,i?"".concat(kn.familyPrefix,"-").concat(i):"",b].filter((function(e){return-1===d.classes.indexOf(e)})).concat(d.classes).join(" "),k={children:[],attributes:Jt({},d.attributes,{"data-prefix":r,"data-icon":i,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(h)})};m&&(k.attributes["data-fa-i2svg"]=""),l&&k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(u||Kn())},children:[l]});var w=Jt({},k,{prefix:r,iconName:i,main:n,mask:a,maskId:c,transform:o,symbol:s,styles:d.styles}),v=a.found&&n.found?function(e){var t,n=e.children,a=e.attributes,r=e.main,i=e.mask,o=e.maskId,s=e.transform,l=r.width,c=r.icon,u=i.width,d=i.icon,p=Qn({transform:s,containerWidth:u,iconWidth:l}),m={tag:"rect",attributes:Jt({},Jn,{fill:"white"})},f=c.children?{children:c.children.map(Zn)}:{},g={tag:"g",attributes:Jt({},p.inner),children:[Zn(Jt({tag:c.tag,attributes:Jt({},c.attributes,p.path)},f))]},h={tag:"g",attributes:Jt({},p.outer),children:[g]},b="mask-".concat(o||Kn()),y="clip-".concat(o||Kn()),k={tag:"mask",attributes:Jt({},Jn,{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[m,h]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},k]};return n.push(w,{tag:"rect",attributes:Jt({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(b,")")},Jn)}),{children:n,attributes:a}}(w):function(e){var t=e.children,n=e.attributes,a=e.main,r=e.transform,i=qn(e.styles);if(i.length>0&&(n.style=i),Xn(r)){var o=Qn({transform:r,containerWidth:a.width,iconWidth:a.width});t.push({tag:"g",attributes:Jt({},o.outer),children:[{tag:"g",attributes:Jt({},o.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Jt({},a.icon.attributes,o.path)}]}]})}else t.push(a.icon);return{children:t,attributes:n}}(w),_=v.children,x=v.attributes;return w.children=_,w.attributes=x,s?function(e){var t=e.prefix,n=e.iconName,a=e.children,r=e.attributes,i=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jt({},r,{id:!0===i?"".concat(t,"-").concat(kn.familyPrefix,"-").concat(n):i}),children:a}]}]}(w):function(e){var t=e.children,n=e.main,a=e.mask,r=e.attributes,i=e.styles,o=e.transform;if(Xn(o)&&n.found&&!a.found){var s={x:n.width/n.height/2,y:.5};r.style=qn(Jt({},i,{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(w)}({icons:{main:da(E),mask:c?da(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:_,iconName:x,transform:Jt({},Gn,i),symbol:s,title:m,maskId:d,titleId:g,extra:{attributes:k,styles:v,classes:b}})},Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(e){return oa(e)}))}}),Object.defineProperty(t,"node",{get:function(){if(un){var e=ln.createElement("div");return e.innerHTML=t.html,e.children}}}),t}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:ga(e||{}),a=t.mask;return a&&(a=(a||{}).icon?a:ga(a||{})),ha(n,Jt({},t,{mask:a}))}),va=n(5697),_a=n.n(va);function xa(e){return xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xa(e)}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ia(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Oa(e){return t=e,(t-=0)==t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Ma=!1;try{Ma=!0}catch(e){}function Aa(e){return null===e?null:"object"===xa(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function Ta(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Ea({},e,t):{}}function Na(e){var t=e.forwardedRef,n=Ia(e,["forwardedRef"]),a=n.icon,r=n.mask,i=n.symbol,o=n.className,s=n.title,l=Aa(a),c=Ta("classes",[].concat(Pa(function(e){var t,n=e.spin,a=e.pulse,r=e.fixedWidth,i=e.inverse,o=e.border,s=e.listItem,l=e.flip,c=e.size,u=e.rotation,d=e.pull,p=(Ea(t={"fa-spin":n,"fa-pulse":a,"fa-fw":r,"fa-inverse":i,"fa-border":o,"fa-li":s,"fa-flip-horizontal":"horizontal"===l||"both"===l,"fa-flip-vertical":"vertical"===l||"both"===l},"fa-".concat(c),null!=c),Ea(t,"fa-rotate-".concat(u),null!=u&&0!==u),Ea(t,"fa-pull-".concat(d),null!=d),Ea(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(p).map((function(e){return p[e]?e:null})).filter((function(e){return e}))}(n)),Pa(o.split(" ")))),u=Ta("transform","string"==typeof n.transform?ka(n.transform):n.transform),d=Ta("mask",Aa(r)),p=wa(l,Sa({},c,{},u,{},d,{symbol:i,title:s}));if(!p)return function(){var e;!Ma&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var m=p.abstract,f={ref:t};return Object.keys(n).forEach((function(e){Na.defaultProps.hasOwnProperty(e)||(f[e]=n[e])})),za(m[0],f)}Na.displayName="FontAwesomeIcon",Na.propTypes={border:_a().bool,className:_a().string,mask:_a().oneOfType([_a().object,_a().array,_a().string]),fixedWidth:_a().bool,inverse:_a().bool,flip:_a().oneOf(["horizontal","vertical","both"]),icon:_a().oneOfType([_a().object,_a().array,_a().string]),listItem:_a().bool,pull:_a().oneOf(["right","left"]),pulse:_a().bool,rotation:_a().oneOf([0,90,180,270]),size:_a().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:_a().bool,symbol:_a().oneOfType([_a().bool,_a().string]),title:_a().string,transform:_a().oneOfType([_a().string,_a().object]),swapOpacity:_a().bool},Na.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var za=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var a=n.attributes[t];switch(t){case"class":e.attrs.className=a,delete n.attributes.class;break;case"style":e.attrs.style=a.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,a=t.indexOf(":"),r=Oa(t.slice(0,a)),i=t.slice(a+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=i:e[r]=i,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=a:e.attrs[Oa(t)]=a}return e}),{attrs:{}}),o=a.style,s=void 0===o?{}:o,l=Ia(a,["style"]);return i.attrs.style=Sa({},i.attrs.style,{},s),t.apply(void 0,[n.tag,Sa({},i.attrs,{},l)].concat(Pa(r)))}.bind(null,u().createElement);const La=window.wp.mediaUtils,ja=(e,t,n,a="")=>({value:(0,o.get)(e,t,a),onChange:e=>{const a=(0,o.set)({},t,e);n(a)}}),Ra=window.wp.compose,Fa=(0,b.forwardRef)((function({icon:e,size:t=24,...n},a){return(0,b.cloneElement)(e,{width:t,height:t,...n,ref:a})}));var Da=n(3967),Ba=n.n(Da);const Wa=()=>{const{activeStep:e,goToStep:t,steps:n}=(0,Ut.useWizard)(),a=(0,b.useMemo)((()=>n.map(((e,t)=>e.skipNavigation?null:{step:e,index:t})).filter(Boolean)),[n]);return(0,c.createElement)("div",{className:"kubio-ai-wizard-sidebar-steps"},a.map((({step:n,index:a},r)=>(0,c.createElement)("div",{key:n.name,className:Ba()("kubio-ai-wizard-sidebar-step",{"kubio-ai-wizard-sidebar-step--passed":e>a,"kubio-ai-wizard-sidebar-step--current":e===a}),tabIndex:0,role:"button",onClick:()=>a<e?t(n.name):o.noop},(0,c.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-number-container"},(0,c.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-number"},r+1)),(0,c.createElement)("div",{className:"kubio-ai-wizard-sidebar-step-text"},n.label&&(0,c.createElement)("h4",null,n.label),n.description&&(0,c.createElement)("p",null,n.description))))))},Va=(0,Ra.createHigherOrderComponent)((n=>a=>{const r=(0,b.useRef)(o.stubTrue),[i,s]=(0,b.useState)(!1),l=(0,b.useRef)(),u=(0,h.useSelect)((e=>{var t;const{getClientIdsWithDescendants:n,getBlock:a,getBlocks:r}=e("core/block-editor"),{currentPageHasFSETemplate:i=o.stubFalse}=e(d.STORE_KEY)||{};let s=null;var l;return i()&&(s=n().find((e=>{var t;return"core/post-content"===(null===(t=a(e))||void 0===t?void 0:t.name)})),s)?0===(null===(l=r(s))||void 0===l?void 0:l.length):0===(null===(t=r(s))||void 0===t?void 0:t.length)}),[]),p=(0,b.useCallback)((e=>{r.current=e}),[]),{previousStep:m,nextStep:f,isLastStep:g,steps:k,activeStepName:w,finishLabel:v}=(0,Ut.useWizard)(),[_,x]=(0,b.useState)(!1),[E,C]=(0,b.useState)({}),{isSetup:S,onFinish:I,isNewPageWizard:P,data:O,updateData:M,isRegenerate:A}=a,[T,N]=(0,b.useState)(!1),z=(0,b.useRef)();(0,b.useEffect)((()=>()=>clearTimeout(z.current)),[]);const L=(0,b.useCallback)(((...e)=>(N(G().generate()),clearTimeout(z.current),z.current=setTimeout((()=>{N(G().generate())}),500),M(...e))),[M]);(0,b.useEffect)((()=>{if(T){const e=r.current(),t=0===Object.values(e).filter(Boolean).length;x(!t),C(e)}}),[x,O,T]);const j=(0,b.useCallback)((()=>{const e=r.current();return!0!=(0===Object.values(e).filter(Boolean).length)?(C(e),void x(!0)):g?S||u||P||!A?I():s(!0):void f()}),[g,f,S,u,P,A,I]),R=(0,b.useMemo)((()=>{const e=k.filter((e=>!e.skipNavigation));return 0===(0,o.findIndex)(e,(e=>e.name===w))}),[w,k]),[F]=y();(0,e.usePopupInsideModal)(i);const D=(0,b.useMemo)((()=>g?v||(S?(0,t.__)("Save changes","kubio"):(0,t.__)("Generate","kubio")):(0,t.__)("Next","kubio")),[v,g,S]),B=(0,b.useMemo)((()=>g&&!F||_),[g,F,_]),W=(0,b.useMemo)((()=>g&&!F?(0,t.__)("Please connect to Kubio AI first.","kubio"):(0,o.first)(Object.values(E).filter((e=>!(0,o.isEmpty)(e))))),[E,F,g]);return(0,c.createElement)("div",{className:"kubio-ai-wizard-step-wrapper"},(0,c.createElement)("div",{className:"kubio-ai-wizard-sidebar"},(0,c.createElement)(Wa,null)),(0,c.createElement)("div",{className:"kubio-ai-wizard-content"},(0,c.createElement)("div",{className:"kubio-ai-wizard-step"},(0,c.createElement)(n,{...a,nextStepIsDisabled:_,setNextStepIsDisabled:x,errors:E,setErrors:C,setValidator:p,updateData:L,rawUpdateData:M})),(0,c.createElement)("div",{className:"kubio-ai-wizard-footer"},(0,c.createElement)("div",{className:"kubio-ai-wizard-footer__left-side"}),(0,c.createElement)("div",{className:"kubio-ai-wizard-footer__right-side"},i&&(0,c.createElement)(Ht.Popover,{anchor:l.current,placement:"top",offset:10,focusOnMount:!1,className:"kubio-ai-wizard-confirmation",shift:!0,flip:!0},(0,c.createElement)(Ht.Flex,{className:"kubio-ai-wizard-confirmation__message",align:"flex-start"},(0,c.createElement)(Fa,{icon:Gt.InfoIcon,size:16}),(0,c.createElement)("p",null,(0,t.__)("Looks like the current page already has content. This action will replace the current page content.","kubio"))),(0,c.createElement)(Ht.Flex,{justify:"flex-end"},(0,c.createElement)(Ht.Button,{className:"kubio-ai-button-tertiary has-text",onClick:()=>s(!1)},(0,t.__)("Back","kubio")),(0,c.createElement)(Ht.Button,{onClick:I,className:"kubio-ai-button has-text"},(0,t.__)("Continue","kubio")))),(0,c.createElement)(Ht.Button,{className:"kubio-ai-button-tertiary has-text",onClick:m,disabled:R},(0,t.__)("Back","kubio")),(0,c.createElement)(Ht.Tooltip,{className:"kubio-ai-wizard-error-tooltip-wrapper",placement:"top",delay:0,text:W?(0,c.createElement)("span",{className:"kubio-ai-wizard-error-tooltip"},W):null,hideOnClick:!1},(0,c.createElement)("div",null,(0,c.createElement)(Ht.Button,{ref:l,onClick:j,disabled:B,className:Ba()("has-text",{"kubio-ai-button":g,"kubio-ai-button-secondary":!g})},D)))))))}),"withStepWrapper"),$a=(0,c.createElement)(Kt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(Kt.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),Ua=[{value:"multi-page",label:(0,t.__)("Multi page","kubio")},{value:"one-page",label:(0,t.__)("Single page","kubio")}],Ga=({field:e,label:t,errors:n,children:a})=>(0,c.createElement)("span",{className:Ba()("kubio-ai-wizard-control-label",{"has-errors":n&&!!n[e]})},t,!!n&&!!n[e]&&(0,c.createElement)("span",{className:"error-message"},n[e]),(0,c.createElement)("div",{className:"kubio-ai-wizard-control-label__extra-info"},a)),Ha=["",(0,t.__)("Too short","kubio"),(0,t.__)("Almost there","kubio"),(0,t.__)("Great description","kubio")],Ka=({wordsCount:e})=>{const t=(0,b.useMemo)((()=>{let t=0;return e>0&&(t=e<=20?1:e<=30?2:3),t}),[e]);return(0,c.createElement)("div",{className:`kubio-short-description-meter kubio-short-description-meter__level-${t}`},(0,c.createElement)("span",null,Ha[t]),(0,c.createElement)("ul",{className:"kubio-short-description-meter__lines"},(0,c.createElement)("li",null),(0,c.createElement)("li",null),(0,c.createElement)("li",null)))},Ya=Va((({data:n,updateData:a,isFrontPage:i=!1,isRegenerate:s=!1,setValidator:l,errors:u,isSetup:d=!1})=>{const{title:m}=(0,f.useSiteLogoImages)(),g=(0,b.useMemo)((()=>(0,o.map)(r(),(({label:e,description:t,value:n})=>({value:n,label:e,description:t})))),[]),h=(0,b.useCallback)(((e,t="")=>ja(n,e,a,t)),[n,a]),y=h("short_desc"),k=h("business_type","Business"),w=h("business_name",m),[v,_]=(0,b.useState)((0,o.words)(y.value).length),x=(0,p.useDebounce)(_,150);(0,b.useEffect)((()=>{x((0,o.words)(y.value).length)}),[x,y]);const E=(0,b.useRef)();return E.current=v,(0,b.useEffect)((()=>{l((()=>{const e={business_name:null,business_type:null,short_desc:null};return w.value||(e.business_name=(0,t.__)("Website name cannot be empty!","kubio")),k.value||(e.business_type=(0,t.__)("Website type cannot be empty!","kubio")),y.value?E.current>100&&(e.short_desc=(0,t.__)("Website description exceeds 100 words. Please edit & keep it under the limit to proceed.","kubio")):e.short_desc=(0,t.__)("Website description cannot be empty!","kubio"),e}))}),[w.value,k.value,l,y.value,v]),(0,c.createElement)("div",{className:"kubio-ai-wizard__general-info"},(0,c.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,c.createElement)("div",{className:"kubio-ai-wizard__columns-layout"},(0,c.createElement)(Ut.InputControl,{label:(0,c.createElement)(Ga,{label:(0,t.__)("Website name","kubio"),field:"business_name",errors:u}),className:Ba()("kubio-ai-wizard__general-info__business-name",(null==u?void 0:u.business_name)&&"has-errors"),...w}),(0,c.createElement)(Ut.SuggestionsInput,{label:(0,c.createElement)(Ga,{label:(0,t.__)("Website type","kubio"),field:"business_type",errors:u}),className:Ba()("kubio-ai-wizard__general-info__business-type",(null==u?void 0:u.business_type)&&"has-errors"),options:g,optionRender:e=>(0,c.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,c.createElement)("span",null,e.label)),popoverClassName:"kubio-ai-business-suggestion-popover",filterKeys:["label","description"],suggestionsToShow:10,onSuggestionClick:(e,t)=>t(e.label),...k}),i&&!s&&!d&&(0,c.createElement)(Ut.GutentagSelectControl,{label:(0,t.__)("Website structure","kubio"),inlineLabel:!1,options:Ua,popoverClassName:"kubio-ai-wizard__select-control-dropdown",...h("structure_type","multi-page")}))),(0,c.createElement)("div",{className:"kubio-ai-wizard-form-fields no-gap"},(0,c.createElement)("div",{className:"kubio-ai-wizard-business-desc"},(0,c.createElement)(Ut.TextareaControl,{label:(0,c.createElement)(Ga,{label:(0,t.__)("Short description of the website","kubio"),field:"short_desc"},(0,c.createElement)(Ka,{wordsCount:v})),className:Ba()("kubio-ai-wizard-business-desc-field",(null==u?void 0:u.short_desc)&&"has-errors"),rows:10,...y}),(0,c.createElement)("div",{className:"wizard-field-info"},(0,c.createElement)("span",{className:"error-message"},null==u?void 0:u.short_desc),(0,c.createElement)("span",{className:Ba()({"error-message":v>100})},v,"/100")),(0,c.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations"},(0,c.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations__title"},(0,c.createElement)("img",{src:(0,e.staticAssetURL)("ai-assets/recommendations-icon.svg"),alt:""}),(0,c.createElement)("span",null,(0,t.__)("Recommendations","kubio"))),(0,c.createElement)("div",{className:"kubio-ai-wizard-business-desc__recommendations__body"},(0,c.createElement)("span",null,(0,t.__)("A few important things to mention in your description:","kubio")),(0,c.createElement)("ul",null,(0,c.createElement)("li",null,(0,t.__)("your main activity","kubio")),(0,c.createElement)("li",null,(0,t.__)("main products or services","kubio")),(0,c.createElement)("li",null,(0,t.__)("the purpose of the website","kubio"))))))))})),qa=["en_US","es_ES","de_DE","fr_FR","en_GB","ja_JP"],Xa=[{type:"facebook",url:""},{type:"instagram",url:""},{type:"youtube",url:""}],Qa=[{name:"facebook",label:(0,t.__)("Facebook","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"]}}),placeholder:"https://www.facebook.com/..."},{name:"twitter",label:(0,t.__)("Twitter","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"x-twitter",icon:[512,512,[],"e61b","M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"]}}),placeholder:"https://www.twitter.com/..."},{name:"instagram",label:(0,t.__)("Instagram","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]}}),placeholder:"https://www.instagram.com/..."},{name:"youtube",label:(0,t.__)("YouTube","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"youtube",icon:[576,512,[61802],"f167","M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"]}}),placeholder:"https://www.youtube.com/..."},{name:"whatsapp",label:(0,t.__)("Whatsapp","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"]}}),placeholder:"https://wa.me/+1xxxxxxxxxxx"},{name:"tiktok",label:(0,t.__)("Tiktok","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"tiktok",icon:[448,512,[],"e07b","M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"]}}),placeholder:"https://www.tiktok.com/..."},{name:"pinterest",label:(0,t.__)("Pinterest","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"pinterest",icon:[496,512,[],"f0d2","M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"]}}),placeholder:"https://www.pinterest.com/..."},{name:"linkedin",label:(0,t.__)("Linkedin","kubio"),icon:(0,c.createElement)(Na,{icon:{prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]}}),placeholder:"https://www.linkedin.com/..."}],Ja=Va((({data:e,updateData:n,rawUpdateData:a,setValidator:r,errors:i,isFrontPage:l=!1,startWithAIFrontPage:u=!1,isRegenerate:d=!1})=>{const p=(0,b.useCallback)(((t,a="")=>ja(e,t,n,a)),[e,n]),m=(p("contact.email"),p("website_logo")),{cloudTags:f}=(0,h.useSelect)((e=>{const{getSettings:t=s().noop}=e("kubio/edit-site")||{},n=t()||{};return{cloudTags:(null==n?void 0:n.kubioBlockTags)||[]}}),[]),g=(0,b.useMemo)((()=>f.map((e=>({label:e.label,value:e.slug})))),[f]),y=(0,b.useCallback)(((t,n="")=>ja(e,t,a,n)),[e,a])("sections_tag"),k=(0,b.useRef)();(0,b.useEffect)((()=>{if(0===g.length||k.current)return;if(y.value)return;const e=["shadow","flat"],t=g.filter((({value:t})=>e.includes(t))),n=t[Math.floor(Math.random()*t.length)].value;k.current=n,y.onChange(n)}),[g,y.value,y,l,d,u]);const w=(0,b.useMemo)((()=>{const e=(0,o.map)(E(),((e,t)=>({label:e,value:t})));return[{items:e.filter((e=>qa.includes(e.value))).sort(((e,t)=>qa.indexOf(e.value)-qa.indexOf(t.value)))},{items:e.filter((e=>!qa.includes(e.value)))}]}),[]),v=(0,b.useMemo)((()=>(0,o.map)(C(),(({label:e,description:t},n)=>({label:e,description:t,value:n})))),[]),_=p("language","");return(0,b.useEffect)((()=>{r((()=>{const e={language:null};return _.value||(e.language=(0,t.__)("Website language is required","kubio")),e}))}),[_.value,r]),(0,c.createElement)("div",{className:"kubio-ai-wizard__columns-layout"},(0,c.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,c.createElement)(Ut.InputControl,{label:(0,c.createElement)("span",null,(0,t.__)("Email address","kubio"),(0,c.createElement)("span",{className:"components-base-control__label__appendix"},"(",(0,t.__)("Optional","kubio"),")")),className:Ba()((null==i?void 0:i.email)&&"has-errors"),...p("contact.email")}),(0,c.createElement)(Ut.InputControl,{label:(0,c.createElement)(c.Fragment,null,(0,t.__)("Phone number","kubio"),(0,c.createElement)("span",{className:"components-base-control__label__appendix"},(0,t.__)("(Optional)","kubio"))),...p("contact.phone")}),(0,c.createElement)(Ut.InputControl,{label:(0,c.createElement)(c.Fragment,null,(0,t.__)("Address","kubio"),(0,c.createElement)("span",{className:"components-base-control__label__appendix"},"(",(0,t.__)("Optional","kubio"),")")),...p("contact.address")}),(0,c.createElement)(ar,{...p("contact.socials",Xa)})),(0,c.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,c.createElement)(Ut.GutentagSelectControl,{label:(0,c.createElement)(Ga,{label:(0,t.__)("Website language","kubio"),field:"language",errors:i}),inlineLabel:!1,options:w,placeholder:(0,t.__)("Select language","kubio"),popoverClassName:"kubio-ai-wizard__select-control-dropdown",..._}),(0,c.createElement)(Ut.GutentagSelectControl,{label:(0,t.__)("Language style","kubio"),inlineLabel:!1,options:v,itemRenderer:e=>(0,c.createElement)("div",{className:"kubio-ai-language-style-select-item"},(0,c.createElement)("span",null,e.label),(0,c.createElement)("span",null,e.description)),popoverClassName:"kubio-ai-wizard__select-control-dropdown",...p("language_style","natural")}),void 0,(0,c.createElement)(Za,{websiteLogo:m})))})),Za=({websiteLogo:n})=>{const[a,r]=(0,b.useState)(null),[i,o]=(0,b.useState)(!1),[s,l]=(0,b.useState)(null),u=(0,b.useCallback)((()=>{let t=(0,e.defaultAssetURL)("/logo-fallback.png");return a?t=a.url:n.value&&(t=n.value.url),t}),[a,n.value]),d=(0,b.useCallback)((()=>{let e=(0,t.__)("No file selected","kubio");return a?e=a.url:n.value&&(e=n.value.url),e.split("/").pop()}),[a,n.value]),p=(e,t)=>{null!=p&&p.calledOnce?(r(e[0]),n.onChange({id:e[0].id,url:e[0].url}),t.value="",o(!1)):p.calledOnce=!0};return(0,c.createElement)(Ht.Flex,{className:"kubio-ai-wizard__website-logo",direction:"column",gap:1.5},(0,c.createElement)("span",{className:"components-base-control__label"},(0,t.__)("Website logo","kubio"),(0,c.createElement)("span",{className:"components-base-control__label__appendix"},"(",(0,t.__)("Optional","kubio"),")")),(0,c.createElement)(Ht.Flex,{className:"kubio-ai-wizard__columns-layout",gap:5},(0,c.createElement)(Ht.FlexItem,{className:"kubio-ai-wizard__website-logo__image-wrapper",onClick:e=>{const t=e.target.closest(".kubio-ai-wizard__website-logo").querySelector(".components-form-file-upload button");t&&t.click()}},(0,c.createElement)("img",{src:u(),alt:"logo"})),(0,c.createElement)(Ht.Flex,{direction:"column",justify:"space-between"},(0,c.createElement)("span",null,(0,t.__)("Upload an image file with your company's logo","kubio")),(0,c.createElement)(Ht.Flex,{justify:"flex-start"},(0,c.createElement)(Ht.FormFileUpload,{accept:"image/*",onChange:async e=>{o(!0),await(0,La.uploadMedia)({allowedTypes:["image"],filesList:e.currentTarget.files,onFileChange:t=>p(t,e.target),onError:e=>{"MIME_TYPE_NOT_SUPPORTED"===e.code?l("Sorry, this file type is not supported."):l("Something went wrong. Please, try again."),l(e.message),o(!1)}})},disabled:i},(0,t.__)("Upload a file","kubio")),i&&(0,c.createElement)(Ht.Spinner,null),!i&&s&&(0,c.createElement)("span",null,s)),(0,c.createElement)(Ht.Flex,{className:"kubio-ai-wizard__website-logo__filename-wrapper",justify:"space-between"},(0,c.createElement)("span",null,d()),(a||n.value)&&(0,c.createElement)(Ht.Icon,{size:17,icon:"no",onClick:()=>{r(null),n.onChange(null)}})))))},er=s().keyBy(Qa,"name"),tr=e=>er[e].icon,nr=({type:e,url:n,onRemove:a,onChange:r})=>{const i=(0,b.useRef)(),[o,s]=(0,b.useState)(!1),[l,u]=(0,b.useState)(n),d=(0,b.useCallback)(((t,n)=>{null==t||t.preventDefault(),null==t||t.stopPropagation(),r({type:e,url:n||l}),s(!1)}),[l,r,e]),p=(0,b.useMemo)((()=>er[e].placeholder||(0,t.__)("No URL set","kubio")),[e]);return(0,c.createElement)(c.Fragment,null,(0,c.createElement)("div",{ref:i,className:Ba()("kubio-ai-contact-step__social-icon",{"kubio-ai-contact-step__social-icon--is-selected":o})},(0,c.createElement)(Ht.Icon,{size:22,icon:tr(e),onClick:()=>s(!0)}),(0,c.createElement)(Ht.Icon,{size:12,icon:Gt.RoundedDeleteIcon,onClick:()=>a(e)})),o&&(0,c.createElement)(Ht.Popover,{anchor:i.current,onFocusOutside:()=>s(!1),variant:"unstyled",offset:4},(0,c.createElement)("form",{className:"kubio-ai-wizard__edit-social-icon",onSubmit:d},(0,c.createElement)(Ht.Flex,{gap:0},(0,c.createElement)(Ht.FlexBlock,null,(0,c.createElement)(Ut.InputControl,{value:l,onInput:e=>{u(e.target.value)},placeholder:p})),(0,c.createElement)(Ht.FlexItem,{className:"kubio-ai-wizard__edit-social-icon__button-wrapper"},(0,c.createElement)(Ht.Button,{type:"submit"},(0,t.__)("Apply","kubio")))))))},ar=({value:e,onChange:n})=>{const a=(0,b.useCallback)((t=>{n([...e,{type:t,url:""}])}),[n,e]),r=(0,b.useCallback)((t=>{n(e.filter((e=>e.type!==t)))}),[n,e]),i=(0,b.useCallback)((t=>{n(e.map((e=>(e.type===t.type&&(e={...e,...t}),e))))}),[n,e]);(0,b.useEffect)((()=>{var e,t,n;const a="kubio-ai-wizard--contact-step";return null===(e=document)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.classList)||void 0===n||n.toggle(a,!0),()=>{var e,t,n;null===(e=document)||void 0===e||null===(t=e.body)||void 0===t||null===(n=t.classList)||void 0===n||n.toggle(a,!1)}}),[]);const o=(0,b.useMemo)((()=>{const t=e.map((e=>e.type));return Qa.filter((e=>!t.includes(e.name)))}),[e]);return(0,c.createElement)("div",{className:"kubio-ai-wizard__social-media"},(0,c.createElement)(Ht.BaseControl,{id:"social-media-control"},(0,c.createElement)(Ht.BaseControl.VisualLabel,null,(0,t.__)("Social media","kubio"),(0,c.createElement)("span",{className:"components-base-control__label__appendix"},"(",(0,t.__)("Optional","kubio"),")")),(0,c.createElement)("div",{className:Ba()("kubio-ai-contact-step-socials-wrapper")},e.map((({type:e,url:t})=>(0,c.createElement)(nr,{key:e,type:e,onRemove:r,onChange:i,url:t}))),(0,c.createElement)(Ht.DropdownMenu,{popoverProps:{className:"kubio-ai-wizard__social-media__dropdown",placement:"top",offset:10},label:(0,t.__)("Add social platform","kubio"),icon:$a,toggleProps:{iconSize:20},controls:o.map((({label:e,name:t,icon:n})=>({title:e,icon:n,onClick:()=>a(t)})))}))))};var rr=n(7418),ir=n.n(rr),or=function(){return or=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},or.apply(this,arguments)};const sr=function(e){for(var t=e.url,n=e.allowFullScreen,a=e.position,r=e.display,i=e.height,o=e.width,s=e.overflow,l=e.styles,c=e.onLoad,d=e.onMouseOver,p=e.onMouseOut,m=e.scrolling,f=e.id,g=e.frameBorder,h=e.ariaHidden,b=e.sandbox,y=e.allow,k=e.className,w=e.title,v=e.ariaLabel,_=e.ariaLabelledby,x=e.name,E=e.target,C=e.loading,S=e.importance,I=e.referrerpolicy,P=e.allowpaymentrequest,O=e.src,M=ir()({src:O||t,target:E||null,style:{position:a||null,display:r||"block",overflow:s||null},scrolling:m||null,allowpaymentrequest:P||null,importance:S||null,sandbox:b||null,loading:C||null,styles:l||null,name:x||null,className:k||null,referrerpolicy:I||null,title:w||null,allow:y||null,id:f||null,"aria-labelledby":_||null,"aria-hidden":h||null,"aria-label":v||null,width:o||null,height:i||null,onLoad:c||null,onMouseOver:d||null,onMouseOut:p||null}),A=Object.create(null),T=0,N=Object.keys(M);T<N.length;T++){var z=N[T];null!=M[z]&&(A[z]=M[z])}for(var L=0,j=Object.keys(A.style);L<j.length;L++){var R=j[L];null==A.style[R]&&delete A.style[R]}if(n)if("allow"in A){var F=A.allow.replace("fullscreen","");A.allow=("fullscreen "+F.trim()).trim()}else A.allow="fullscreen";return g>=0&&(A.style.hasOwnProperty("border")||(A.style.border=g)),u().createElement("iframe",or({},A))},lr=(0,t.__)("Kubio AI is ready to generate your website.","kubio"),cr=(0,t.__)("AI features require connecting to a Kubio account","kubio"),ur=(0,t.__)("Create a free Kubio account and you will receive 500 free AI credits to generate your homepage.","kubio"),dr=({isSetup:n})=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)("img",{src:(0,e.staticAssetURL)("ai-assets/final-message.png"),alt:"final-message"}),!n&&(0,c.createElement)("h2",null,(0,t.__)('Awesome! Let\'s hit "Generate"',"kubio")),n&&(0,c.createElement)("h2",null,(0,t.__)('Awesome! Let\'s hit "Save changes"',"kubio")),(0,c.createElement)("p",null,lr)),pr=()=>{const[,n]=y(),{createSuccessNotice:a}=(0,p.useKubioNotices)(),r=(0,o.first)((0,e.getBackendData)("kubioCloudUrl").split("?")).replace(/\/+$/,""),[i,s]=k(),l=(0,b.useRef)(i);return l.current=i,(0,b.useEffect)((()=>{const e=r=>{const{action:i=null,value:o=null,error:c=null}=r.data||{};"ai_subscription_key"===i&&(window.removeEventListener("message",e),c&&P.Log.error("AI Connect Iframe",c),o||P.Log.error("AI Connect Iframe, no value"),(async()=>{await q({aiKey:o});const{remaining_credits:e=0,per_page_credits:r=30}=await X();s({...l.current,state:"ready",remainingCredits:e,perPageCredits:r}),n(!0),a((0,t.__)("Successfully connected to Kubio AI!","kubio"),{duration:3e3})})())};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[a,n,s]),(0,c.createElement)(Ht.Flex,{align:"center",className:"kubio-ai-connect-row",justify:"space-around",wrap:!0},(0,c.createElement)(Ht.FlexItem,{isBlock:!0,className:"kubio-ai-connect-header"},(0,c.createElement)("h1",{className:"kubio-ai-connect-title"},cr),(0,c.createElement)("p",{className:"kubio-ai-connect-message"},ur)),(0,c.createElement)(Ht.FlexItem,{isBlock:!0},(0,c.createElement)("div",{className:"kubio-connect-iframe-container"},(0,c.createElement)(sr,{loading:"eager",importance:"high",className:"kubio-connect-iframe",url:`${r}/ui-route/connect-ai?hl=1`,title:"Kubio AI Connect",sandbox:"allow-popups allow-modals allow-same-origin allow-scripts allow-forms allow-popups-to-escape-sandbox"}))))},mr=Va((({isSetup:e})=>{const[t]=y();return(0,c.createElement)("div",{className:"kubio-ai-wizard__generate-step kubio-ai-wizard__generate-step--"+(t?"connected":"disconnected")},t&&(0,c.createElement)(dr,{isSetup:e}),!t&&(0,c.createElement)(pr,null))})),fr=[{label:(0,t.__)("General","kubio"),value:"general"},{label:(0,t.__)("About Us","kubio"),value:"about"},{label:(0,t.__)("Services","kubio"),value:"services"},{label:(0,t.__)("Features","kubio"),value:"features"},{label:(0,t.__)("Portfolio","kubio"),value:"portfolio"},{label:(0,t.__)("Team","kubio"),value:"team"},{label:(0,t.__)("Gallery","kubio"),value:"gallery"},{label:(0,t.__)("F.A.Q.","kubio"),value:"faq"},{label:(0,t.__)("Pricing","kubio"),value:"pricing"},{label:(0,t.__)("Contact","kubio"),value:"contact"}],gr=(0,t.__)("It will show the main features of our products, including our plans and user testimonials","kubio"),hr={general:"",about:(0,t.__)("This page should offer detailed information about our organization. Describe company's history, values, and mission and give visitors a clear understanding of our identity.","kubio"),services:(0,t.__)("This page focus is on showcasing our business's offerings. Present details about the specific products, solutions, or expertise our company provides to attract potential clients.","kubio"),portfolio:(0,t.__)("This page should display a showcase of our notable projects and work. Highlight completed assignments, creative ventures, or successful case studies that effectively demonstrate our competence and skills.","kubio"),team:(0,t.__)("A page that introduces visitors to our team members. Spotlight their individual roles, skills, and contributions within the organization to provide insight into our workforce.","kubio"),contact:(0,t.__)("A page that streamlines communication between our business and its audience. Incorporate contact forms, phone numbers, addresses, and social media links to provide visitors with convenient ways to get in touch.","kubio"),features:(0,t.__)("This page is dedicated to showcasing the key features and functionalities of our products or services. Highlight the unique aspects that set our offerings apart and provide value to customers.","kubio"),gallery:(0,t.__)("This page should present a visual gallery that displays images, videos, or multimedia content relevant to our business or organization.","kubio"),faq:(0,t.__)("This page should present comprehensive list of frequently asked questions and their respective answers. Address common queries that visitors might have about our products, services, policies, or any other relevant topics.","kubio"),pricing:(0,t.__)("This page should present clear and detailed pricing information for our products or services.","kubio")},br=(e,t,n=!1)=>{if(e=e.replace(/\s+/g,""),t=t.replace(/\s+/g,""),n||(e=e.toLowerCase(),t=t.toLowerCase()),e===t)return 1;if(e.length<2||t.length<2)return 0;const a=new Map;for(let t=0;t<e.length-1;t++){const n=e.substring(t,t+2),r=a.has(n)?a.get(n)+1:1;a.set(n,r)}let r=0;for(let e=0;e<t.length-1;e++){const n=t.substring(e,e+2),i=a.has(n)?a.get(n):0;i>0&&(a.set(n,i-1),r++)}return 2*r/(e.length+t.length-2)},yr=Va((({data:e,rawUpdateData:n,setNextStepIsDisabled:a,errors:r,setErrors:i})=>{var s;const l=(0,b.useCallback)(((t,a="")=>ja(e,t,n,a)),[e,n]),u=l("title",""),d=l("short_desc"),p=(0,b.useRef)(!0),m=(0,o.words)(d.value||"").length,f=(null==e?void 0:e.purpose)||"general",g=(0,b.useRef)();(0,b.useEffect)((()=>{if(g.current===u.value||d.value)return;g.current=u.value;const e=((e,t,n,a=.8)=>{const r=[];let i=0;for(let n=0;n<t.length;n++){const a=t[n];let l=0;s=a,o=(o=e).toLowerCase(),s=s.toLowerCase(),l=o&&o.includes(s)?1:br(e,a),r.push({target:a,rating:l}),l>r[i].rating&&(i=n)}var o,s;const l=r[i];return l.rating>=a?l.target:n})(u.value||"",fr.map((e=>e.value)),f).toLowerCase();n({short_desc:g.current!==u.value||""===d.value?(0,o.get)(hr,e,""):d.value,purpose:e})}),[u.value,f,d.value,n]);const h=(0,b.useCallback)((e=>{n({purpose:e,short_desc:(0,o.get)(hr,e,"")})}),[n]),y=(0,b.useCallback)((e=>{u.onChange(e)}),[u]);return(0,b.useEffect)((()=>{const e={};u.value.trim()||p.current||(e.page_title=(0,t.__)("Page title cannot be empty!","kubio")),m>100&&(e.short_desc=(0,t.__)("Page description exceeds 100 words. Please edit & keep it under the limit to proceed.","kubio")),0===m&&(e.short_desc=(0,t.__)("Page description cannot be empty!","kubio")),i(e),a(!!Object.values(e).filter(Boolean).length||""===u.value),p.current&&(p.current=!1)}),[u.value,m,a,i]),(0,c.createElement)("div",{className:"kubio-ai-wizard-form-fields"},(0,c.createElement)(Ut.InputControl,{label:(0,c.createElement)(Ga,{label:(0,t.__)("Page title","kubio"),field:"page_title",errors:r}),className:Ba()((null==r?void 0:r.page_title)&&"has-errors"),...u,onChange:y,autoComplete:"off",role:"presentation"}),(0,c.createElement)(Ut.GutentagSelectControl,{label:(0,t.__)("Page purpose","kubio"),placeholder:(0,t.__)("Select page purpose","kubio"),options:fr,value:f,onChange:h,popoverClassName:"kubio-ai-wizard__select-control-dropdown"}),(0,c.createElement)("div",null,(0,c.createElement)(Ut.TextareaControl,{label:(0,t.__)("Short description of the page","kubio"),className:Ba()("kubio-ai-wizard-page-desc-field",(null==r?void 0:r.short_desc)&&"has-errors"),placeholder:gr,rows:6,...d}),(0,c.createElement)("div",{className:"kubio-ai-wizard-textarea-desc-info"},(0,c.createElement)("span",{className:"error-message"},null!==(s=null==r?void 0:r.short_desc)&&void 0!==s?s:""),(0,c.createElement)("span",null,(0,t.__)("Max. 100 words","kubio")))))})),kr=[{label:(0,t.__)("Welcome","kubio"),description:(0,t.__)("Tell us a few things about your new website.","kubio"),name:"welcome",component:({onCancel:n})=>{const{nextStep:a}=(0,Ut.useWizard)();return(0,c.createElement)("div",{className:"kubio-ai-welcome-step"},(0,c.createElement)("div",{className:"kubio-ai-welcome-step__content"},(0,c.createElement)("div",{className:"kubio-ai-welcome-step__close-modal"},(0,c.createElement)(Ht.Button,{icon:Yt,onClick:n})),(0,c.createElement)(Ht.Flex,null,(0,c.createElement)(Ht.FlexBlock,{className:"kubio-ai-welcome-step__content-column"},(0,c.createElement)("div",{className:"kubio-ai-welcome-step__content-column__content"},(0,c.createElement)(Ht.Icon,{icon:Gt.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,c.createElement)("h1",null,(0,t.__)("Let's create your home page in just a few easy steps:","kubio")),(0,c.createElement)("ol",null,(0,c.createElement)("li",null,(0,t.__)("Provide a short description of the website","kubio")),(0,c.createElement)("li",null,(0,t.__)("Provide contact and social info (optional)","kubio")),(0,c.createElement)("li",null,(0,t.__)("Generate your homepage","kubio")),(0,c.createElement)("li",null,(0,t.__)("Apply finishing touches","kubio"))),(0,c.createElement)(Ht.Button,{variant:"primary",onClick:a,className:"kubio-ai-button"},(0,t.__)("Let's get started!","kubio")))),(0,c.createElement)(Ht.Flex,{className:"kubio-ai-welcome-step__bg-column"},(0,c.createElement)("img",{alt:"welcome",src:(0,e.staticAssetURL)("ai-assets/welcome.png")})))))},skipNavigation:!0},{label:(0,t.__)("General information","kubio"),description:(0,t.__)("Tell us a few things about your new website.","kubio"),name:"general-info",component:Ya},{label:(0,t.__)("Identity & contact","kubio"),description:(0,t.__)("Provide any contact information related to your business.","kubio"),name:"contact-info",component:Ja},{label:(0,t.__)("Page information","kubio"),description:(0,t.__)("Tell us a few things about the page we're about to generate.","kubio"),name:"page-info",component:yr},{label:(0,t.__)("Generate with Kubio AI","kubio"),name:"final-step",description:(0,t.__)("Watch how Kubio AI does all the work for you.","kubio"),component:mr}],wr=({onFinish:n,isFrontPage:a=!1,isRegenerate:r=!1,forceGenerateTitle:i=!1,isSetup:s=!1,onCancel:l,checkPageType:u=!0,startWithAIFrontPage:d=!1,isNewPageWizard:p=!1,stepsFilter:m=null,startStep:f=null,modalTitle:g=null,finishLabel:h=null})=>{const[{siteContext:k={},isFrontPage:w,pageContext:v={}},x]=_(),[E]=y(),[C]=(0,b.useState)(E),S=r?w:a,[I,P]=(0,b.useState)(k),[O,M]=(0,b.useState)({purpose:"general",...r?v:{}}),A=(0,b.useCallback)((t=>{M((n=>(0,e.mergeNoArrays)({},n,t)))}),[]),T=(0,b.useCallback)((t=>{P((n=>(0,e.mergeNoArrays)({},n,t)))}),[]),N=(0,b.useCallback)((()=>{const e={siteContext:I,pageContext:O,pageTitle:O.title,isFrontPage:S,isRegenerate:r};x(e),J(I),n(e)}),[I,O,S,r,x,n]),z=(0,b.useMemo)((()=>m?m(kr):kr.map((e=>{const{name:t}=e;switch(t){case"page-info":if(S||s)return null;break;case"final-step":if(C)return null}return e})).filter(Boolean)),[m,S,s,C]),L=(0,b.useCallback)((e=>{const{component:t,name:n}=e;let a=I,i=T;return"page-info"===n&&(a=O,i=A),(0,c.createElement)(t,{key:n,data:a,updateData:i,onFinish:N,onCancel:l,isSetup:s,isRegenerate:r,isFrontPage:S,checkPageType:u,isNewPageWizard:p,startWithAIFrontPage:d})}),[u,S,p,r,s,l,N,O,I,d,A,T]),j=(0,b.useMemo)((()=>{if(f)return f;const e=s||r||p;return(0,o.isEmpty)(I.short_desc)&&S&&!e?"welcome":s||S||(0,o.isEmpty)(I.short_desc)?"general-info":"page-info"}),[S,p,r,s,I.short_desc,f]),R=(0,b.useMemo)((()=>r?(0,t.__)("Close AI wizard 🧙‍♂️","kubio"):(0,t.__)("Skip AI wizard 🧙‍♂️","kubio")),[r]),F=(0,b.useMemo)((()=>{if(g)return g;if(s)return(0,t.__)("Configure Kubio AI","kubio");// translators: %s is the type of page e.g. front page, inner page
let e=(0,t.__)("Generate %s","kubio");const n=S?(0,t.__)("front page","kubio"):(0,t.__)("page","kubio");return r&&!i&&(// translators: %s is the type of page e.g. front page, inner page
e=(0,t.__)("Regenerate %s","kubio")),(0,t.sprintf)(e,n)}),[g,i,S,r,s]);return(0,c.createElement)(Ht.Modal,{className:"kubio-ai-wizard-modal",overlayClassName:"kubio-ai-welcome-step__close-modal",title:(0,c.createElement)(Ht.Flex,null,(0,c.createElement)(Ht.FlexBlock,{className:"kubio-ai-wizard-modal__title"},(0,c.createElement)(Ht.Icon,{icon:Gt.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),F),(0,c.createElement)(Ht.FlexItem,null,(0,c.createElement)(Ht.Button,{onClick:l,icon:Yt,label:(0,t.__)("Close","kubio")}))),isDismissible:!1},(0,c.createElement)(Ut.Wizard,{onFinish:N,startStep:j,showDots:!1,initialBackButton:{label:R,onClick:l},finishLabel:h,steps:z,stepRender:L,Footer:null}))};wr.withStepWrapper=Va})(),(window.kubio=window.kubio||{}).ai=a})();
